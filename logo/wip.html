<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GPF-JS logo</title>
    <script language="JavaScript">
        var gpfSourcesPath = "../src/";
    </script>
    <script language="JavaScript" src="../src/boot.js"></script>
    <script language="JavaScript">

var COLS = 10,
    ROWS = 10;

function onLoad() {
    var svg = document.getElementById("svg"),
        path = gpf.web.createTagFunction("svg:path"),
        x,
        y = 2,
        rows = ROWS,
        cols,
        d;

    while (rows--) {
        x = 1;
        d = ["M", x, y];
        cols = COLS;
        while (cols--) {
            d.push("L", x, y, "L", x + 1, y - 1, "L", x + 2, y - 1, "L", x + 3, y);
            x += 4;
        }
        cols = COLS;
        --x;
        while (cols--) {
            d.push("L", x, y, "L", x - 1, y + 1, "L", x - 2, y + 1, "L", x - 3, y);
            x -= 4;
        }
        path({
            fill: "none",
            stroke: "black",
            "stroke-width": .1,
            d: d.join(" ")
        }).appendTo(svg);
        y += 2;
    }
    path({
        fill: "none",
        stroke: "red",
        "stroke-width": 1,
        d: "M 22.5 20.5 L 22.5 10.5"
    }).appendTo(svg);

}

document/*.getElementById("svg")*/.addEventListener("mousemove", function (e) {
    var svg = document.getElementById("svg"),
        svgRect = svg.getBoundingClientRect(),
        svgViewBox = svg.getAttribute("viewBox").split(" "),
        svgViewWidth = parseInt(svgViewBox[2], 10),
        svgViewHeight = parseInt(svgViewBox[3], 10),
        svgScaleX = svgRect.width / svgViewWidth,
        svgScaleY = svgRect.height / svgViewHeight,
        y = e.clientY - svgRect.top,
        svgX = Math.floor(e.clientX / svgScaleX),
        svgY = Math.floor(y / svgScaleY);
//        row = svgRect.height / ;

    document.getElementById("info").innerHTML = [
        "svgX: ", svgX,
        ", svgY: ", svgY,

    ].join("");

});

    </script>
</head>
<body onload="onLoad()">
    <svg id="svg" width="100%" height="100%" viewBox="0 0 40 40">
    </svg>
    <div id="info">
    </div>
</body>
</html>
