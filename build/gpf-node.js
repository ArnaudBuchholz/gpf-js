!function(e){"use strict";if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else if("undefined"!=typeof module&&module.exports)e(module.exports);else{var t=Function("return this;")(),n={};e(n),t.gpf=n}}(function(o){"use strict";function u(){}var i,a,s,n,r,c=-1,f=0,e="browser",t="nashorn",l="nodejs",p="phantomjs",d="rhino",h="unknown",_="wscript",m=h,v=Function,b=new v("return this")();function g(e,t,n){return Array.prototype.slice.call(e,t,n||e.length)}"undefined"!=typeof WScript?m=_:"undefined"!=typeof print&&"undefined"!=typeof java?m="undefined"==typeof readFile?t:d:"undefined"!=typeof phantom&&phantom.version&&!document.currentScript?(m=p,b=window):"undefined"!=typeof module&&module.exports?(m=l,b=global):"undefined"!=typeof window&&(m=e,b=window),o.version=function(){return"1.0.0"},o.node={},l===m&&(n=require("path"),i=require("fs"),a=require("http"),s=require("https"),r=require("url"),"\\"===n.sep),o.hosts={browser:e,nashorn:t,nodejs:l,phantomjs:p,rhino:d,unknown:h,wscript:_},o.host=function(){return m};var y=1;function E(e){return g(e,y)}var w,x=Array.isArray;function O(e){return x(e)||function t(e){return!!e&&Math.floor(e.length)===e.length}(e)}function P(e,t,n){for(var r=0,i=e.length;r<i;++r)t.call(n,e[r],r,e)}function S(e,t,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(n,e[r],r,e)}o.isArrayLike=O,w=_===m?function Ur(t,n,r){S(t,n,r),["constructor","toString"].forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&n.call(r,t[e],e,t)})}:S,o.forEach=function(e,t,n){O(e)?P(e,t,n):w(e,t,n)};var I=!0;function k(e,t){e||(!function n(e){I&&console.warn("ASSERTION FAILED: "+e)}(t),o.Error.assertionFailed({message:t}))}o.assert=function Xr(e,t){undefined===t&&Xr(!1,"Assertion with no message"),k(e,t)},o.asserts=function Vr(e){w(e,k)},o.preventAssertWarnings=function(e){I=!e};var N=255,C="abcdefghijklmnopqrstuvwxyz",j="ABCDEFGHIJKLMNOPQRSTUVWXYZ",$="0123456789",A=new RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");function R(e,t){return function r(e,t){var n;return e.length?((n=[].concat(e)).push(t),v.apply(null,n)):v(t)}(e,t)}function D(e,t){return undefined===t?R([],e):R(e,t)}function T(e,t){var n=e;return w(t,function(e,t){n=n.split(t).join(e)}),n}o.web={};var M={};function B(e,t){return function n(e,t){return"javascript"===t?'"'+e+'"':e}(T(e,M[t]),t)}function q(e){return B(e,"xml")}function F(e,t){b[e]||(b[e]=t)}function W(e){return e?new Array(e).join(" ").split(" ").map(function(e,t){return"p"+t}):[]}M.xml={"&":"&amp;","<":"&lt;",">":"&gt;"};(function zr(e){var t=W(e);return D(t,function n(r){var i=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return r.forEach(function(e,t){var n=1;n+=t,i.push("if ("+n+" === l) { return new C("+r.slice(f,n).join(", ")+");}")}),i.join("\n")}(t))})(10);var L=j+C+$+"+/=",U=63,X=18,V=12,z=6,Z=8,G=16,H=64,Q=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function J(e,t,n){var r=String.fromCharCode(e>>G&N);return t!==H?r+function i(e,t){return t===H?String.fromCharCode(e>>Z&N):String.fromCharCode(e>>Z&N,e&N)}(e,n):r}function K(e,t){return L.indexOf(e.charAt(t))}function Y(e,t){var n=e.charCodeAt(t);if(N<n)throw new TypeError("The string to be encoded contains characters outside of the Latin1 range.");return n}function ee(e,t,n){return L.charAt(e>>t&n)}function te(e,t){if(undefined!==e)return e[t]}function ne(e,t){var n=e[t];return undefined===n&&(n=e[t]={}),n}function re(e,t){return function r(e,t){var n;return("gpf"===e[f]?(n=o,E(e)):(n=b,e)).reduce(t,n)}(e,t?ne:te)}F("atob",function Zr(e){var t,n,r,i,o,a=function f(e){var t=e.replace(/[\t\n\f\r ]+/g,"");if(!Q.test(t))throw new TypeError("The string to be decoded is not correctly encoded.");return t}(e),s=a.length,u=0,c="";for(a+="==";u<s;u+=4)c+=(o=i=r=n=void 0,o=u,n=K(t=a,o++)<<X|K(t,o++)<<V,r=K(t,o++),i=K(t,o++),J(n|=r<<z|i,r,i));return c}),F("btoa",function Gr(e){for(var t,n,r,i,o,a,s=0,u="",c=e.length%3;s<e.length;s+=3)u+=(a=o=i=r=void 0,a=s,r=Y(n=e,a++),i=Y(n,a++),o=Y(n,a++),ee(t=r<<G|i<<Z|o,X,U)+ee(t,V,U)+ee(t,z,U)+ee(t,f,U));return c?u.slice(f,c-3)+"===".substring(c):u}),o.context=function(e){return undefined===e?b:re(e.split("."))};function ie(e){return e.trim()}M.html=Object.assign({},M.xml,{"\xe0":"&agrave;","\xe1":"&aacute;","\xe8":"&egrave;","\xe9":"&eacute;","\xea":"&ecirc;"});var oe,ae="function";function se(e,t){var n=u.toString.call(e).replace(A,"");!function i(e,t,n){if(e.length){var r=new RegExp("\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)\\s*\\)").exec(t);n.parameters=r[1].split(",").map(ie)}}(e,n,t),function r(e,t){var n=ie(new RegExp("{((?:.*\\r?\\n)*.*)}").exec(e)[1]);n&&(t.body=n)}(n,t)}function ue(e){var t={};return function r(e,t){var n=oe(e);n&&(t.name=n)}(e,t),se(e,t),t}function ce(e,t){return function i(e,t){var n=Object.keys(t),r=n.map(function(e){return t[e]});return D(n,"return "+e).apply(null,r)}(function o(e){return"function"+function t(e){return e.name?" "+e.name:""}(e)+"("+function n(e){return e.parameters?e.parameters.join(", "):""}(e)+') {\n\t"use strict"\n'+function r(e){return e.body?e.body.toString():""}(e)+"\n}"}(e),t||{})}oe="functionName"!==D("return function functionName () {};")().name?function Hr(e){var t=u.toString.call(e),n=t.indexOf(ae)+ae.length,r=t.indexOf("(",n);return t.substring(n,r).replace(A,"").trim()}:function(e){return e.name};var fe=o.Error=function(){};function le(e,t,n){var r=function o(e){return e.charAt(f).toUpperCase()+e.substring(1)}(t),i=ce({name:r,parameters:["context"],body:"this._buildMessage(context);"});return i.prototype=new fe,Object.assign(i.prototype,{code:e,name:t,message:n}),i.prototype.constructor=i,fe[r]=i,function(e){throw new i(e)}}fe.prototype=new Error,Object.assign(fe.prototype,{constructor:fe,code:0,name:"Error",message:"",_buildMessage:function(e){var n;e&&(n={},w(e,function(e,t){n["{"+t+"}"]=e.toString()}),this.message=T(this.message,n))}});var pe=0;function de(e,t){w(t,function(e,t){var n=++pe;o.Error["CODE_"+t.toUpperCase()]=n,o.Error[t]=function i(e,t,n){var r=le(e,t,n);return r.CODE=e,r.NAME=t,r.MESSAGE=n,r}(n,t,e)})}function he(e){return"function"==typeof e&&function t(e){return e.toString().startsWith("class")}(e)}de(0,{notImplemented:"Not implemented",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),o.isClass=he,de(0,{invalidEntityType:"Invalid entity type"});var _e={};function me(e){var t,n=function i(n){var r;return w(_e,function(e,t){n["$"+t]&&(r=e)}),r}(e);return n||(n=function r(e){var t=_e[e.$type];return undefined===t&&o.Error.invalidEntityType(),t}(e)),(t=new n(e)).check(),t}function ve(e,t){return e.exec(t)}function be(e,t){for(var n=[],r=function i(e,t){return e.lastIndex=0,ve(e,t)}(e,t);r;)n.push(r),r=ve(e,t);return n}function ge(e){this._initialDefinition=e}function ye(e){return ce({parameters:W(e),body:"_throw_();"},{_throw_:o.Error.abstractMethod})}ge.prototype={constructor:ge,_initialDefinition:{}},de(0,{abstractMethod:"Abstract method"});var Ee=[];function we(e){Ee.push(e)}de(0,{invalidEntity$Property:"Invalid entity $ property",missingEntityName:"Missing entity name",invalidEntityNamespace:"Invalid entity namespace"});function xe(e,t){t.startsWith("$")?this._check$Property(t.substring("$".length),e):this._checkProperty(t,e)}function Oe(e){ge.call(this,e)}function Pe(e,t){Oe.call(this,t),this._instanceBuilder=e}function Se(e,t){var n=new Pe(e,t);return we(n),n.check(),n}function Ie(e){var t=function n(t){return Ee.filter(function(e){return e.getInstanceBuilder()===t})[f]}(e);return t||Se(e,function r(e){var t=Object.getPrototypeOf(e.prototype);return{$name:oe(e),$extend:t.constructor}}(e))}Object.assign(ge.prototype,{_type:"",_allowed$Properties:"type,name,namespace".split(","),_check$Property:function(e,t){e!==this._type&&function n(e,t){t.includes(e)||o.Error.invalidEntity$Property()}(e,this._allowed$Properties)},_throwInvalidProperty:ye(),_reMemberName:new RegExp(".*"),_checkMemberName:function(e){this._reMemberName.exec(e)||this._throwInvalidProperty()},_reservedNames:"super,class,public,private,protected,static,mixin".split(","),_checkReservedMemberName:function(e){this._reservedNames.includes(e)&&this._throwInvalidProperty()},_checkMemberValue:D(["name","value"]," "),_checkProperty:function(e,t){this._checkMemberName(e),this._checkReservedMemberName(e),this._checkMemberValue(e,t)},_checkProperties:function(){w(this._initialDefinition,xe,this)},_name:"",_readName:function(){var e=this._initialDefinition;this._name=e["$"+this._type]||e.$name},_checkNameIsNotEmpty:function(){this._name||o.Error.missingEntityName()},_throwInvalidName:ye(),_reName:new RegExp(".*"),_checkName:function(){this._reName.exec(this._name)||this._throwInvalidName()},_namespace:"",_extractRelativeNamespaceFromName:function(){var e=new RegExp("(.*)\\.([^\\.]+)$").exec(this._name);if(e)return this._name=e[2],e[1]},_readNamespace:function(){var e=[this._initialDefinition.$namespace,this._extractRelativeNamespaceFromName()].filter(function(e){return e});e.length&&(this._namespace=e.join("."))},_checkNamespace:function(){new RegExp("^(:?[a-z_$][a-zA-Z0-9]+(:?\\.[a-z_$][a-zA-Z0-9]+)*)?$").exec(this._namespace)||o.Error.invalidEntityNamespace()},check:function(){this._checkProperties(),this._readName(),this._checkNameIsNotEmpty(),this._readNamespace(),this._checkName(),this._checkNamespace()}}),Object.assign(ge.prototype,{_instanceBuilder:null,getInstanceBuilder:function(){return this._instanceBuilder||this._setInstanceBuilder(this._build()),this._instanceBuilder},_setInstanceBuilder:function(e){this._namespace&&(re(this._namespace.split("."),!0)[this._name]=e),this._instanceBuilder=e,we(this)},_build:u}),Oe.prototype=Object.create(ge.prototype),Object.assign(Oe.prototype,{constructor:Oe,_type:"class"}),_e["class"]=Oe,Pe.prototype=Object.create(Oe.prototype),Object.assign(Pe.prototype,{_checkNameIsNotEmpty:u,_checkName:u}),de(0,{invalidClassName:"Invalid class name",invalidClassProperty:"Invalid class property",invalidClassExtend:"Invalid class extend",invalidClassConstructor:"Invalid class constructor",invalidClassOverride:"Invalid class override"}),Object.assign(Oe.prototype,{_allowed$Properties:ge.prototype._allowed$Properties.concat(["extend"]),_throwInvalidProperty:o.Error.invalidClassProperty,_reMemberName:new RegExp("^[a-z_][a-zA-Z0-9]*$"),_checkConstructorMember:function(e){"function"!=typeof e&&o.Error.invalidClassConstructor()},_checkOverridenMember:function(e,t){typeof e!=typeof t&&o.Error.invalidClassOverride()},_checkIfOverriddenMember:function(e,t){var n=this._extend.prototype[e];undefined!==n&&this._checkOverridenMember(t,n)},_checkMemberValue:function(e,t){"constructor"===e?this._checkConstructorMember(t):this._checkIfOverriddenMember(e,t)},_reName:new RegExp("^[A-Z_$][a-zA-Z0-9]*$"),_throwInvalidName:o.Error.invalidClassName,_extend:Object,_extendDefinition:undefined,_readExtend:function(){var e=function t(e){return"string"==typeof e?re(e.split(".")):e}(this._initialDefinition.$extend);e&&(this._extend=e)},_checkExtendIsNotAnInterface:function(){u.toString.call(this._extend).includes("interfaceConstructorFunction")&&o.Error.invalidClassExtend()},_checkExtend:function(){"function"!=typeof this._extend&&o.Error.invalidClassExtend(),this._checkExtendIsNotAnInterface()},check:function(){this._readExtend(),this._checkExtend(),this._extendDefinition=Ie(this._extend),ge.prototype.check.call(this)}}),de(0,{classConstructorFunction:"This is a class constructor function, use with new"}),Object.assign(Oe.prototype,{_resolvedConstructor:u});var ke=[];function Ne(e){ke.push(e)}function Ce(n){var r=function i(e){return he(e._extend)?{instance:"that",body:function t(e){return e._extend===e._resolvedConstructor?"var that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n":'var that,\n    $super = function () {\n        that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n    },\n    hasOwnProperty = function (name) {\n        return !!that && Object.prototype.hasOwnProperty.call(that, name);\n    },\n    proxy = new Proxy({}, {\n        get: function (obj, property) {\n            if (property === "hasOwnProperty") {\n              return hasOwnProperty;\n            }\n            if (!that && property === "$super") {\n              return $super;\n            }\n            return that[property];\n        },\n        set: function (obj, property, value) {\n            if (property !== "$super") {\n                that[property] = value;\n            }\n            return true;\n        }\n    });\n_classDef_._resolvedConstructor.apply(proxy, arguments);\n'}(e)}:{instance:"this",body:"_classDef_._resolvedConstructor.apply(this, arguments);"}}(n),e="if (!(this instanceof _classDef_._instanceBuilder)) gpf.Error.classConstructorFunction();\n"+ke.reduce(function(e,t){return t(n,e,r.instance)},r.body);return"this"!==r.instance&&(e+="\nreturn "+r.instance+";"),e}function je(e){return ce(function t(e){return{name:e._name,parameters:ue(e._resolvedConstructor).parameters,body:Ce(e)}}(e),function n(e){return{gpf:o,_classDef_:e}}(e))}function $e(){o.Error.invalidClassSuper()}function Ae(e){return function n(e){var t=ue(e);return t.body="return _superMethod_.apply(this, arguments);",ce(t,{_superMethod_:e})}("function"==typeof e?e:$e)}function Re(e,t,n){return"function"!=typeof n&&o.Error.invalidClassSuperMember(),function i(e,t,n){var r=ue(n);return r.body="return _superMethod_.apply(this === _$super_ ? _that_ : this, arguments);",ce(r,{_that_:e,_$super_:t,_superMethod_:n})}(e,t,n)}de(0,{invalidClassSuper:"Invalid class super",invalidClassSuperMember:"Invalid class super member"});var De=new RegExp("\\.\\$super\\.(\\w+)\\b","g");function Te(e,t){!function n(e){Object.assign(e,{_extend:null,_extendDefinition:null})}(Se(e,function r(e){return{$name:e}}(t)))}Object.assign(Oe.prototype,{_get$Super:function(t,e,n){var r=this._extend.prototype,i=Ae(r[e]);return n.forEach(function(e){i[e]=Re(t,i,r[e])}),i},_superifiedBody:'var _super_;\nif (Object.prototype.hasOwnProperty.call(this, "$super")) {\n    _super_ = this.$super;\n}\nthis.$super = _classDef_._get$Super(this, _methodName_, _superMembers_);\ntry{\n    var _result_ = _method_.apply(this, arguments);\n} finally {\n    if (undefined === _super_) {\n        delete this.$super;\n    } else {\n        this.$super = _super_;\n    }\n}\nreturn _result_;',_getSuperifiedContext:function(e,t,n){return{_method_:e,_methodName_:t,_superMembers_:n,_classDef_:this}},_createSuperified:function(e,t,n){var r=ue(e);return r.body=this._superifiedBody,ce(r,this._getSuperifiedContext(e,t,n))},_superify:function(e,t){return new RegExp("\\.\\$super\\b").exec(e)?this._createSuperified(e,t,function n(e){return be(De,e).map(function(e){return e[1]})}(e)):e}}),Object.assign(Oe.prototype,{_build:function(){var e,t;return this._resolveConstructor(),e=je(this),t=Object.create(this._extend.prototype),(e.prototype=t).constructor=e,this._buildPrototype(t),e},_addMethodToPrototype:function(e,t,n){e[t]=this._superify(n,t)},_addMemberToPrototype:function(e,t,n){"function"==typeof n?this._addMethodToPrototype(e,t,n):e[t]=n},_buildPrototype:function(n){w(this._initialDefinition,function(e,t){t.startsWith("$")||"constructor"===t||this._addMemberToPrototype(n,t,e)},this)},_setResolvedConstructorToInherited:function(){this._extend!==Object&&(this._resolvedConstructor=this._extend)},_resolveConstructor:function(){Object.prototype.hasOwnProperty.call(this._initialDefinition,"constructor")?this._resolvedConstructor=this._superify(this._initialDefinition.constructor,"constructor"):this._setResolvedConstructorToInherited()}}),Te(Object,"Object"),w({"Array":Array,"Date":Date,"Error":Error,"Function":Function,"Number":Number,"RegExp":RegExp,"String":String},Te),de(0,{invalidClass$AbstractSpecification:"Invalid class $abstract specification",abstractClass:"Abstract Class"}),Oe.prototype._allowed$Properties.push("abstract");var Me=Oe.prototype._check$Property;Object.assign(Oe.prototype,{_abstract:!1,_check$abstract:function(e){!0!==e&&o.Error.invalidClass$AbstractSpecification()},_check$Property:function(e,t){"abstract"===e?(this._check$abstract(t),this._abstract=!0):Me.call(this,e,t)}}),Ne(function(e,t,n){return e._abstract?"if (this.constructor === _classDef_._instanceBuilder) gpf.Error.abstractClass();\n"+t:t}),de(0,{invalidClass$SingletonSpecification:"Invalid class $singleton specification"}),Oe.prototype._allowed$Properties.push("singleton");var Be=Oe.prototype._check$Property;function qe(e){ge.call(this,e)}function Fe(e){return ce(function t(e){return{name:e._name,body:"gpf.Error.interfaceConstructorFunction();"}}(e),function n(e){return{gpf:o,_classDef_:e}}(e))}function We(e){return me(e).getInstanceBuilder()}function Le(e,r){var i=!0;return w(e.prototype,function(e,t){"constructor"!==t&&function n(e,t){return"function"!=typeof t||e.length!==t.length}(e,r[t])&&(i=!1)}),i}function Ue(e,t){return Le(e,t)?t:function r(e,t){if(Le(o.interfaces.IUnknown,t))return function n(e,t){return t.queryInterface(e)}(e,t)}(e,t)}function Xe(e){return"string"==typeof e?re(e.split(".")):e}Object.assign(Oe.prototype,{_singleton:!1,_singletonInstance:null,_check$singleton:function(e){!0!==e&&o.Error.invalidClass$SingletonSpecification()},_check$Property:function(e,t){"singleton"===e?(this._check$singleton(t),this._singleton=!0):Be.call(this,e,t)}}),Ne(function(e,t,n){return e._singleton?"if (!_classDef_._singletonInstance) {\n"+t+"\n_classDef_._singletonInstance = "+n+";\n}\nreturn _classDef_._singletonInstance;":t}),qe.prototype=Object.create(ge.prototype),Object.assign(qe.prototype,{constructor:qe,_type:"interface"}),_e["interface"]=qe,de(0,{invalidInterfaceName:"Invalid interface name",invalidInterfaceProperty:"Invalid interface property"}),Object.assign(qe.prototype,{_throwInvalidProperty:o.Error.invalidInterfaceProperty,_reMemberName:new RegExp("^[a-z][a-zA-Z0-9]*$"),_reservedNames:ge.prototype._reservedNames.concat("constructor"),_checkMemberValue:function(e,t){"function"!=typeof t&&o.Error.invalidInterfaceProperty()},_reName:new RegExp("^I[a-zA-Z0-9]*$"),_throwInvalidName:o.Error.invalidInterfaceName}),de(0,{"interfaceConstructorFunction":"This is an interface constructor function, do not invoke"}),Object.assign(qe.prototype,{_build:function(){var e,t;return delete(t=(e=Fe(this)).prototype).constructor,this._buildPrototype(t),e},_buildPrototype:function(n){w(this._initialDefinition,function(e,t){t.startsWith("$")||(n[t]=e)},this)}}),o.define=We,de(0,{interfaceExpected:"Expected interface not implemented: {name}"});var Ve;o.interfaces={isImplementedBy:function(e,t){return!!t&&Le(Xe(e),function n(e){return e instanceof Function?e.prototype:e}(t))},query:function(e,t){return Ue(Xe(e),t)}};function ze(e,t){var n={$interface:"gpf.interfaces.I"+e};return Object.keys(t).forEach(function(e){n[e]=ye(t[e])}),We(n)}function Ze(e,t){var n,r;return r=!1===e.ascending?(n="b"+t,"a"+t):(n="a"+t,"b"+t),"if("+n+"!=="+r+")return "+function i(e,t,n){return"string"===e?t+".localeCompare("+n+")":t+"-"+n}(e.type,n,r)+";"}function Ge(e){return D(["a","b"],function n(e){return function t(e){return"var "+e.map(function(e,t){return"a"+t+"=a."+e.property+",b"+t+"=b."+e.property}).join(",")+";"}(e)+e.map(Ze).join("")+"return 0;"}(e))}function He(t,n){return function(e){return"("+e[t].map(Ve).join(n)+")"}}ze("Unknown",{"queryInterface":1}),o.createSortFunction=function(e){return Ge(x(e)?e:[e])};var Qe={property:function(e){return"i."+e.property},eq:He("eq","==="),ne:He("ne","!=="),lt:He("lt","<"),lte:He("lte","<="),gt:He("gt",">"),gte:He("gte",">="),not:function(e){return"!"+Ve(e.not)},like:function(e){var t=function n(e){return"/"+e.regexp+"/.exec("+Ve(e.like)+")"}(e);return e.group?"("+t+"||[])["+e.group+"]":t},or:He("or","||"),and:He("and","&&"),undefined:function(e){return JSON.stringify(e)}},Je=Object.keys(Qe);Ve=function(e){var t=function n(e){if("object"==typeof e)return Object.keys(e).filter(function(e){return Je.includes(e)})[f]}(e);return(0,Qe[t])(e)},o.createFilterFunction=function(e){return D(["i"],function t(e){return"return "+Ve(e)}(e))};var Ke=ze("ReadableStream",{"read":1}),Ye=ze("WritableStream",{"write":1});function et(e,t,n){return e||o.Error.interfaceExpected({name:n}),function i(e,t,n){var r=Ue(t,e);return r||o.Error.interfaceExpected({name:n}),r}(e,t,n)}function tt(e){return et(e,Ke,"gpf.interfaces.IReadableStream")}function nt(e){return et(e,Ye,"gpf.interfaces.IWritableStream")}ze("Enumerator",{"reset":0,"moveNext":0,"getCurrent":0}),ze("FileStorage",{"getInfo":1,"openTextStream":2,"close":1,"explore":1,"createDirectory":1,"deleteFile":1,"deleteDirectory":1}),de(0,{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress",invalidStreamState:"Stream is in an invalid state"}),o.stream={};var rt="gpf.stream#progress",it=rt+"/read",ot=rt+"/write";function at(e){e.prototype[it]=!1,e.prototype[ot]=!1}function st(e,t,n){e[t]&&o.Error[n](),e[t]=!0}function ut(e){e[it]=!1}function ct(e){e[ot]=!1}function ft(e,t,n){return e.then(function(e){return n(t),Promise.resolve(e)},function(e){return n(t),Promise.reject(e)})}function lt(r){return function(e){var t=nt(e);return function n(e){st(e,it,"readInProgress")}(this),ft(r.call(this,t),this,ut)}}function pt(n){return function(e){return function t(e){st(e,ot,"writeInProgress")}(this),ft(n.call(this,e),this,ct)}}var dt=We({$class:"gpf.stream.ReadableString",constructor:function(e){this._buffer=e},read:lt(function(e){return e.write(this._buffer)}),_buffer:""}),ht=We({$class:"gpf.stream.WritableString",constructor:function(){this._buffer=[]},write:pt(function(e){return this._buffer.push(e.toString()),Promise.resolve()}),toString:function(){return this._buffer.join("")},_buffer:[]});at(dt),at(ht),de(0,{incompatibleStream:"Incompatible stream"});var _t={NOT_FOUND:0,DIRECTORY:1,FILE:2,UNKNOWN:3},mt=0,vt=1,bt=null;function gt(e){e.length?e.pop():o.Error.unreachablePath()}function yt(e){var t=function n(e){return e.includes("\\")?e.toLowerCase().split("\\"):e.split("/")}(e);return function r(e){var t=e.pop();t&&e.push(t)}(t),t}function Et(e){return yt(e).join("/")}function wt(e){return e?yt(e).pop():""}function xt(e){var t=wt(e),n=t.lastIndexOf(".");return n===c?"":t.substring(n)}o.fs={types:{notFound:_t.NOT_FOUND,directory:_t.DIRECTORY,file:_t.FILE,unknown:_t.UNKNOWN},openFor:{reading:mt,appending:vt},getFileStorage:function(){return bt}},de(0,{unreachablePath:"Unreachable path"});var Ot={"":function(e){e.length=0,e.push("")},".":u,"..":function(e){gt(e)}};function Pt(e){var t=yt(e);return E(arguments).forEach(function r(n,e){P(yt(e),function(e){var t=Ot[e];t?t(n):n.push(e)})}.bind(null,t)),t.join("/")}function St(e,t){e.length*t.length&&function n(e,t){for(;e[f]===t[f];)e.shift(),t.shift()}(e,t)}function It(e){var t=yt(e);return gt(t),t.join("/")}o.path={join:Pt,parent:It,name:wt,nameOnly:function(e){var t=wt(e),n=t.lastIndexOf(".");return n===c?t:t.substring(f,n)},extension:xt,relative:function Qr(e,t){var n,r=yt(e),i=yt(t);for(St(r,i),n=r.length;n--;)i.unshift("..");return i.join("/")}};var kt=We({$class:"gpf.node.BaseStream",constructor:function(e,t){this._stream=e,"function"==typeof t&&(this._close=t),e.on("error",this._onError.bind(this))},_close:u,close:function(){return this._close()},_stream:null,_invalid:!1,_reject:o.Error.invalidStreamState,_checkIfValid:function(){this._invalid&&o.Error.invalidStreamState()},_onError:function(e){this._invalid=!0,this._reject(e)}}),Nt=We({$class:"gpf.node.ReadableStream",$extend:"gpf.node.BaseStream",read:lt(function(n){var r=this,i=r._stream;return new Promise(function(e,t){r._reject=t,r._checkIfValid(),i.on("data",r._onData.bind(r,n)).on("end",function(){r._invalid=!0,e()})})}),_onData:function(e,t){var n=this._stream;n.pause(),e.write(t).then(function(){n.resume()},this._reject)}}),Ct=We({$class:"gpf.node.WritableStream",$extend:"gpf.node.BaseStream",write:pt(function(r){var i=this,o=i._stream;return new Promise(function(t,e){var n;i._reject=e,i._checkIfValid(),(n=o.write(r,function(e){!e&&n&&t()}))||o.once("drain",function(){t()})})})});function jt(e,t){return new Promise(function(n,r){i[e].apply(i,t.concat([function(e,t){e?r(e):n(t)}]))})}function $t(e,t){return jt(e,[Et(t)])}function At(e,t){return jt("open",[Et(e),t.flags]).then(function(e){return new t.GpfStream(i[t.nodeStream]("",{fd:e,autoClose:!1}),jt.bind(null,"close",[e]))})}function Rt(e){return e.isDirectory()?_t.DIRECTORY:function t(e){return e.isFile()?_t.FILE:_t.UNKNOWN}(e)}!function Jr(e,t){e===m&&(bt=new t)}(l,We({$class:"gpf.node.FileStorage",getInfo:function(e){var t=Et(e);return new Promise(function(e){i.exists(t,e)}).then(function(e){return e?$t("stat",t).then(function(e){return{fileName:n.basename(t),filePath:Et(n.resolve(t)),size:e.size,createdDateTime:e.ctime,modifiedDateTime:e.mtime,type:Rt(e)}}):{type:_t.NOT_FOUND}})},openTextStream:function(e,t){return mt===t?function n(e){return At(e,{flags:"r",GpfStream:Nt,nodeStream:"createReadStream"})}(e):function r(e){return At(e,{flags:"a",GpfStream:Ct,nodeStream:"createWriteStream"})}(e)},close:function Kr(t){return function(e){return e instanceof t?e.close():Promise.reject(new o.Error.IncompatibleStream)}}(kt),explore:function(t){var n=this;return $t("readdir",t).then(function(e){return function i(e,t){var n,r=-1;return{reset:function(){return r=-1,Promise.resolve()},moveNext:function(){return++r,n=undefined,r<t.length?e.getInfo(t[r]).then(function(e){return n=e}):Promise.resolve()},getCurrent:function(){return n}}}(n,e.map(function(e){return Pt(t,e)}))})},createDirectory:$t.bind(null,"mkdir"),deleteFile:$t.bind(null,"unlink"),deleteDirectory:$t.bind(null,"rmdir")}));var Dt=Object.prototype.toString;function Tt(e){return e instanceof Object&&"[object Object]"===Dt.call(e)&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}o.isLiteralObject=Tt,de(0,{missingNodeName:"Missing node name",unknownNamespacePrefix:"Unknown namespace prefix",unableToUseNamespaceInString:"Unable to use namespace in string"});var Mt={"className":"class"},Bt={"svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink"};function qt(e){var t=e.split(":");if(2===t.length)return{namespace:function n(e){var t=Bt[e];return undefined===t&&o.Error.unknownNamespacePrefix(),t}(t[0]),name:t[1]}}function Ft(e){e.includes(":")&&o.Error.unableToUseNamespaceInString()}function Wt(e){return Mt[e]||e}function Lt(e,t){e.forEach(function(e){x(e)?Lt(e,t):t(e)})}var Ut=We({$class:"gpf.web.Tag",constructor:function(e,t,n){this._nodeName=e,this._attributes=t||{},this._children=n},_nodeName:"",_attributes:{},_children:[],_getAttributesAsString:function(){return Object.keys(this._attributes).map(function(e){return Ft(e)," "+Wt(e)+'="'+function t(e){return B(e,"html")}(this._attributes[e])+'"'},this).join("")},_getChildrenAsString:function(){var t=[];return Lt(this._children,function(e){t.push(e.toString())}),t.join("")},_getClosingString:function(){return this._children.length?">"+this._getChildrenAsString()+"</"+this._nodeName+">":"/>"},toString:function(){return Ft(this._nodeName),"<"+this._nodeName+this._getAttributesAsString()+this._getClosingString()},_createElement:function(e){var t=e.ownerDocument,n=qt(this._nodeName);return n?t.createElementNS(n.namespace,n.name):t.createElement(this._nodeName)},_setAttributesTo:function(r){w(this._attributes,function(e,t){var n=qt(t);n?r.setAttributeNS(n.namespace,Wt(n.name),e):r.setAttribute(Wt(t),e)})},_appendChildrenTo:function(t){var n=t.ownerDocument;Lt(this._children,function(e){e instanceof Ut?e.appendTo(t):t.appendChild(n.createTextNode(e.toString()))})},appendTo:function(e){var t=this._createElement(e);return this._setAttributesTo(t),this._appendChildrenTo(t),e.appendChild(t)}});o.web.createTagFunction=function Yr(r){return r||o.Error.missingNodeName(),function(e){var t,n=0;return Tt(e)&&(t=e,++n),new Ut(r,t,g(arguments,n))}},o.http={};var Xt="GET",Vt="POST",zt="PUT",Zt="OPTIONS",Gt="DELETE",Ht="HEAD";new RegExp("([^:\\s]+)\\s*: ?([^\\r]*)","gm");var Qt,Jt;ze("Thenable",{"then":2});function Kt(e){return o.interfaces.isImplementedBy(o.interfaces.IThenable,e)?e:Promise.resolve(e)}function Yt(e,t){var n=Qt;return e===m&&(Qt=t),n}function en(n){return new Promise(function(e,t){Qt(n,e,t)})}function tn(e,t,n){return en("string"==typeof t?{method:e,url:t,data:n}:Object.assign({method:e},t))}function nn(t,n){t.setEncoding("utf8");var r=new Nt(t);(function i(e){var t=new ht;return tt(e).read(t).then(function(){return t.toString()})})(r).then(function(e){r.close(),n({status:t.statusCode,headers:t.headers,responseText:e})})}function rn(e){var t=Object.assign(r.parse(e.url),e);return function n(e,t){t&&(e.headers=Object.assign({"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(t)},e.headers))}(t,e.data),t}function on(e,t){var n=rn(e);return function r(e){return"https:"===e.protocol?s:a}(n).request(n,function(e){nn(e,t)})}function an(e,t){var n;return e.every(function(e){return(n=function i(e,t){var n,r=e.url;if(r.lastIndex=0,n=r.exec(t.url))return e.response.apply(e,[t].concat(E(n)))}(e,t))===undefined}),n}function sn(e){return Jt[e]||(Jt[e]=[]),Jt[e]}o.promisify=Kt,o.promisifyDefined=function ei(e){if(undefined!==e)return Kt(e)},Object.assign(o.http,{methods:{get:Xt,post:Vt,put:zt,options:Zt,"delete":Gt,head:Ht},request:en,get:tn.bind(o.http,Xt),post:tn.bind(o.http,Vt),put:tn.bind(o.http,zt),options:tn.bind(o.http,Zt),"delete":tn.bind(o.http,Gt),head:tn.bind(o.http,Ht)}),Yt(l,function ti(e,t,n){var r=on(e,t);r.on("error",n),function i(e,t){t?e.write(t,"utf8",function(){e.end()}):e.end()}(r,e.data)});var un,cn=0;function fn(){Jt={}}function ln(){}fn(),o.http.mock=function ni(e){var t=e.method.toUpperCase(),n=t+"."+cn++;return sn(t).unshift(Object.assign({id:n},e)),n},o.http.mock.remove=function ri(t){var e=t.substring(f,t.indexOf("."));Jt[e]=sn(e).filter(function(e){return e.id!==t})},o.http.mock.reset=fn,un=Yt(m,function ii(e,t,n){var r=function i(e){return an(sn(e.method.toUpperCase()),e)}(e);undefined===r?un(e,t,n):t(r)}),ln.prototype={execute:u};var pn=new ln,dn=new ln;pn.execute=function(e){e._readReject(e._readBuffer.shift())},dn.execute=function(e){e._readResolve()};var hn=We({$class:"gpf.stream.BufferedRead",constructor:function(){this._readBuffer=[]},_readBuffer:[],_readWriteToStream:null,_readResolve:null,_readReject:null,_readDataIsToken:function(e){return e instanceof ln&&(e.execute(this),!0)},_readWriteToOutput:function(){var e=this,t=e._readBuffer.shift();return e._readDataIsToken(t)?Promise.resolve():e._readWriteToStream.write(t).then(function(){if(e._readBuffer.length)return e._readWriteToOutput();e._readNotWriting=!0})},_readNotWriting:!0,_readSafeWrite:function(){var t=this;t._readNotWriting&&(t._readNotWriting=!1,t._readWriteToOutput().then(undefined,function(e){t._readReject(e)}))},_readCheckIfData:function(){this._readBuffer.length&&this._readSafeWrite()},_readCheckIfOutput:function(){this._readWriteToStream&&this._readCheckIfData()},_appendToReadBuffer:function(e){return this._readBuffer=this._readBuffer.concat(g(arguments)),this._readCheckIfOutput(),this},_completeReadBuffer:function(){this._readBuffer.push(dn),this._readCheckIfOutput()},_setReadError:function(e){this._readBuffer.push(pn,e),this._readCheckIfOutput()},read:lt(function(e){var n=this;return n._readWriteToStream=e,n._readCheckIfData(),new Promise(function(e,t){n._readResolve=e,n._readReject=t})})});at(hn);var _n=/\r\n/g,mn=(We({$class:"gpf.stream.LineAdapter",$extend:hn,constructor:function(){this.$super(),this._buffer=[]},write:pt(function(e){return this._buffer.push(e.toString()),this._process(),Promise.resolve()}),flush:function(){return this._buffer.length&&(this._buffer.push("\n"),this._process()),this._completeReadBuffer(),Promise.resolve()},_buffer:[],_consolidateLines:function(){return this._buffer.join("").replace(_n,"\n").split("\n")},_pushBackLastLineIfNotEmpty:function(e){var t=e.pop();t.length&&this._buffer.push(t)},_process:function(){var t=this,e=t._consolidateLines();t._buffer.length=0,t._pushBackLastLineIfNotEmpty(e),P(e,function(e){t._appendToReadBuffer(e)})}}),ze("FlushableStream",{"flush":0})),vn={};function bn(e){return vn(e)}o.read=bn,o.fs&&(o.fs.read=bn),function oi(e,t){e===m&&(vn=t)}(l,function ai(e){return new Promise(function(n,r){i.readFile(e,function(e,t){e?r(e):n(t.toString())})})});var gn={};function yn(e,t){return Promise.resolve(t)}function En(t){var n=this;return function r(e,t){var n=e.preload[t];return n?Promise.resolve(n):bn(t)}(n,t).then(function(e){return n.preprocess({name:t,content:e,type:xt(t).toLowerCase()})}).then(function(e){return function t(e){return gn[e.type]||yn}(e).call(n,e.name,e.content)})}function wn(e,t){return function r(e,t){return e._initialDefine=t.define,t.define=function n(){var e=this.gpf.require,t=this._initialDefine;return this.promise=t.apply(e,arguments),e.define=t,this.promise}.bind(e),e.gpf.require=t,e}(function n(){return{gpf:Object.create(o),promise:Promise.resolve(),_initialDefine:null}}(),An(e,{base:It(t)}))}gn[".json"]=function(e,t){return JSON.parse(t)},de(0,{noCommonJSDynamicRequire:"Dynamic require not supported"});var xn=/[^.]\brequire\b\s*\(\s*(?:['|"]([^"']+)['|"]|[^)]+)\s*\)/g;var On,Pn=[null,function si(e){return{dependencies:[],factory:e}},function ui(e,t){return{dependencies:e,factory:t}},function ci(e,t,n){return{dependencies:t,factory:n}}];function Sn(e,t,n){var r={};return D(["gpf","define","module","require"],t)(e,function i(e,t,n){var r=Pn[arguments.length].apply(null,arguments);this.require.define(r.dependencies,function(e){return e.length=r.dependencies.length,r.factory.apply(null,g(e))})}.bind(e),r,function(e){return n[e]||o.Error.noCommonJSDynamicRequire()}),r.exports}On=e===m?function fi(e,t){var n=location.pathname.toString();return n.endsWith("/")||(n=It(n)),"//# sourceURL="+location.origin+Pt(n,e)+"?gpf.require\n"+t}:function li(e,t){return t},gn[".js"]=function(n,r){var i=wn(this,n);return function o(e,t){var n=be(xn,t);return n.length?wn(this,e).gpf.require.define(n.map(function(e){return e[1]}).filter(function(e){return e}).reduce(function(e,t){return e[t]=t,e},{}),function(e){return e}):Promise.resolve({})}.call(this,n,r).then(function(e){var t=Sn(i.gpf,On(n,r),e);return undefined===t?i.promise:t})},de(0,{invalidRequireConfigureOption:"Invalid configuration option",invalidRequireConfigureOptionValue:"Invalid configuration option value"});var In={},kn=[];function Nn(e,t,n){n?kn.unshift(e):kn.push(e),In[e]=t}function Cn(t){!function r(e){P(Object.keys(e),function(e){In[e]||o.Error.invalidRequireConfigureOption()})}(t);var n=this;P(kn.filter(function(e){return t[e]!==undefined}),function(e){In[e](n,t[e])})}function jn(e){return Pt(this.base,e)}function $n(t){var e;return this.cache[t]?this.cache[t]:(e=En.call(this,t),(this.cache[t]=e)["catch"](function(e){return function n(e,t){Array.isArray(e.requires)||(e.requires=[]),e.requires.push(t)}(e,t),Promise.reject(e)}))}function An(e,t){var n=Object.create(e),r={};return r.define=function o(t,e){var n=this,r=[],i=Object.keys(t);return P(i,function(e){r.push($n.call(n,jn.call(n,t[e])))},n),Promise.all(r).then(function(n){var r;return"function"==typeof e?(r={},P(i,function(e,t){r[e]=n[t]}),e(r)):e})}.bind(n),r.resolve=jn.bind(n),r.configure=Cn.bind(n),t&&r.configure(t),r}Nn("base",function pi(e,t){!function n(e){"string"!=typeof e&&o.Error.invalidRequireConfigureOptionValue()}(t),e.base=t}),Nn("cache",function di(t,n){!function r(e){"object"!=typeof e&&o.Error.invalidRequireConfigureOptionValue()}(n),P(Object.keys(n),function(e){t.cache[e]=Promise.resolve(n[e])})}),Nn("clearCache",function hi(e,t){!function n(e){"boolean"!=typeof e&&o.Error.invalidRequireConfigureOptionValue()}(t),t&&(e.cache={})},!0),Nn("preload",function _i(t,n){!function r(e){"object"!=typeof e&&o.Error.invalidRequireConfigureOptionValue()}(n),P(Object.keys(n),function(e){t.preload[e]=n[e]})}),Nn("preprocess",function mi(e,t){!function n(e){"function"!=typeof e&&o.Error.invalidRequireConfigureOptionValue()}(t),e.preprocess=t}),o.require=An({base:"",cache:{},preload:{},preprocess:function(e){return Promise.resolve(e)}});var Rn=We({$class:"gpf.stream.ReadableArray",constructor:function(e){this._buffer=e},read:lt(function(e){var t=this._buffer,n=0;return function r(){return t.length===n?Promise.resolve():e.write(t[n++]).then(r)}()}),_buffer:[]}),Dn=We({$class:"gpf.stream.WritableArray",constructor:function(){this._buffer=[]},write:pt(function(e){return this._buffer.push(e),Promise.resolve()}),toArray:function(){return this._buffer},_buffer:[]});at(Rn),at(Dn);var Tn={flush:Promise.resolve.bind(Promise)};function Mn(e){return Ue(mn,e)||Tn}function Bn(t){var e=t.iReadableIntermediate,n=t.iWritableDestination;if(!t.readInProgress)try{t.readInProgress=!0,t.readPromise=e.read(n).then(function(){t.readInProgress=!1},function(e){t.readError=e,t.rejectWrite(e)})}catch(r){t.readError=r}}function qn(e){if(e.readError)return Promise.reject(e.readError)}function Fn(e,t,n){var r=function s(e,t){return{iReadableIntermediate:tt(e),iWritableIntermediate:nt(e),iFlushableIntermediate:Mn(e),iWritableDestination:nt(t),iFlushableDestination:Mn(t),readInProgress:!1,readError:null,readPromise:Promise.resolve(),rejectWrite:u,flushed:!1}}(e,t),i=r.iFlushableIntermediate,o=r.iFlushableDestination,a=r.iWritableIntermediate;return Bn(r),{flush:function(){return r.flushed=!0,qn(r)||i.flush().then(function(){return r.readPromise}).then(function(){return o.flush()})},write:function(e){return Bn(r),qn(r)||function t(n,r){return new Promise(function(t,e){r.then(function(e){t(e),n.rejectWrite=u},e),n.rejectWrite=e})}(r,a.write(e))}}}function Wn(e){return E(e).length?function r(e){for(var t=e.length,n=e[--t];t;)n=Fn(e[--t],n);return n}(e):nt(e[f])}o.stream.pipe=function vi(e,t){var n=tt(e),r=Wn(E(arguments)),i=Mn(r);try{return n.read(r).then(function(){return i.flush()})}catch(o){return Promise.reject(o)}};function Ln(e){return B(e,"regexp")}M.regexp={"\\":"\\\\","-":"\\-","[":"\\[","]":"\\]","/":"\\/","{":"\\{","}":"\\}","(":"\\(",")":"\\)","*":"\\*","+":"\\+","?":"\\?",".":"\\.","^":"\\^","$":"\\$","|":"\\|"},de(0,{invalidCSV:"Invalid CSV syntax (bad quote sequence or missing end of file)"}),o.stream.csv={};var Un=";,\t ".split("");We({$class:"gpf.stream.csv.Parser",$extend:hn,constructor:function(e){this._readParserOptions(e),this._header?this._parseHeader():this._write=this._writeHeader},_readParserOptions:function(t){var n=this;t&&P(["header","separator","quote","newLine"],function(e){t[e]&&(n["_"+e]=t[e])})},_header:"",_separator:"",_deduceSeparator:function(){var t=this._header;this._separator=function a(e,t,n){for(var r,i=0,o=e.length;i<o&&!r;++i)r=t.call(n,e[i],i,e);return r}(Un,function(e){if(t.includes(e))return e})||Un[f]},_quote:'"',_newLine:"\n",_columns:[],_buildParsingHelpers:function(){this._unescapeDictionary={},this._unescapeDictionary[this._quote+this._quote]=this._quote,this._parser=new RegExp(T("^(?:([^QS][^S]*)|Q((?:[^Q]|QQ)+)Q)(?=$|S)",{Q:Ln(this._quote),S:Ln(this._separator)}))},_parseHeader:function(){this._separator||this._deduceSeparator(),this._columns=this._header.split(this._separator),this._buildParsingHelpers(),this._write=this._writeContent},_writeHeader:function(e){this._header=e,this._parseHeader()},_values:[],_content:"",_unescapeQuoted:function(e){return T(e,this._unescapeDictionary)},_addValue:function(e){e[1]?this._values.push(e[1]):this._values.push(this._unescapeQuoted(e[2]))},_nextValue:function(e){return this._content=this._content.substring(e),Boolean(this._content.length)},_checkAfterValue:function(e){var t=e[f].length;return this._content.charAt(t)?this._nextValue(++t):(delete this._content,!1)},_extractValue:function(){var e=this._parser.exec(this._content);return!!e&&(this._addValue(e),this._checkAfterValue(e))},_checkForValue:function(){return this._content.startsWith(this._separator)?(this._values.push(""),this._nextValue(this._separator.length)):this._extractValue()},_parseValues:function(){for(;this._checkForValue(););},_parseContent:function(){if(this._parseValues(),!this._content)return this._values},_processContent:function(e){return this._content?this._content=this._content+this._newLine+e:(this._values=[],this._content=e),this._parseContent()},_getRecord:function(n){var r={};return P(this._columns,function(e,t){n[t]!==undefined&&(r[e]=n[t])}),r},_writeContent:function(e){var t=this._processContent(e);t&&this._appendToReadBuffer(this._getRecord(t))},write:pt(function(e){return this._write(e),Promise.resolve()}),flush:function(){if(this._content){var e=new o.Error.InvalidCSV;return this._setReadError(e),Promise.reject(e)}return this._completeReadBuffer(),Promise.resolve()}});o.attributes={};var Xn=We({$class:"gpf.attributes.Attribute",$abstract:!0,_memberName:undefined,getMemberName:function(){return this._memberName},_ClassConstructor:undefined,getClassConstructor:function(){return this._ClassConstructor},_check:function(e,t){},_build:function(e,t,n){}});de(0,{unknownAttributesSpecification:"Unknown attributes specification",invalidAttributesSpecification:"Invalid attributes specification"});var Vn="attributes",zn="$"+Vn,Zn=new RegExp("^\\[([^\\]]+)\\]$|."),Gn=Oe.prototype._checkMemberName,Hn=Oe.prototype._checkMemberValue,Qn=Oe.prototype._check$Property,Jn=Oe.prototype.check;function Kn(e,t){t._check(e,this)}function Yn(e){return Zn.exec(e)[1]}Object.assign(Oe.prototype,{_hasInheritedMember:function(e){return this._extend&&this._extend.prototype[e]!==undefined},_hasMember:function(e){return Object.prototype.hasOwnProperty.call(this._initialDefinition,e)||this._hasInheritedMember(e)},_checkAttributeMemberExist:function(e){this._hasMember(e)||o.Error.unknownAttributesSpecification()},_checkMemberName:function(e){var t=Yn(e);t?(Gn.call(this,t),this._checkAttributeMemberExist(t)):Gn.call(this,e)},_checkAttributesSpecification:function(e){O(e)||o.Error.invalidAttributesSpecification(),P(e,function(e){e instanceof Xn||o.Error.invalidAttributesSpecification()})},_checkMemberValue:function(e,t){var n=Yn(e);n?(this._checkAttributesSpecification(t),this._addAttributesFor(n,t)):Hn.call(this,e,t)},_check$Property:function(e,t){Vn===e?(this._checkAttributesSpecification(t),this._addAttributesFor(zn,t)):Qn.call(this,e,t)},check:function(){this._attributes={},Jn.call(this),this._forOwnAttributes(Kn)}}),Oe.prototype._allowed$Properties.push(Vn);var er=Oe.prototype._addMemberToPrototype,tr=Oe.prototype._buildPrototype;function nr(e,t,n){Ie(t.constructor)._singleton||(t._memberName=e,t._ClassConstructor=n.constructor),t._build(e,this,n)}function rr(e){if(e)return function t(e){return"object"!=typeof e&&o.Error.invalidParameter(),e.constructor}(e);o.Error.invalidParameter()}function ir(e,t){return function n(e,t){return Ie(e).getAttributes(t)}("function"==typeof e?e:rr(e),t)}Object.assign(Oe.prototype,{_attributes:{},_addAttributesFor:function(e,t){this._attributes[e]=t},_addMemberToPrototype:function(e,t,n){Yn(t)||er.call(this,e,t,n)},_buildPrototype:function(e){tr.call(this,e),this._forOwnAttributes(nr,e)}}),Object.assign(Oe.prototype,{_collectOwnAttributes:function(o,a){w(this._attributes,function(e,t){var n=function r(e,t){return t?e.filter(function(e){return e instanceof t}):e}(e,a);n.length&&function i(e,t,n){e[t]=(e[t]||[]).concat(n)}(o,t,n)})},_getOwnAttributes:function(){var e={};return this._collectOwnAttributes(e),e},_collectAttributes:function(e,t){this._collectOwnAttributes(e,t),this._extendDefinition&&this._extendDefinition._collectAttributes(e,t)},_forOwnAttributes:function(r,i){var o=this,e=o._getOwnAttributes();w(e,function(e,t){var n;zn!==t&&(n=t),P(e,function(e){r.call(o,n,e,i)})})},getAttributes:function(e){var t={};return this._collectAttributes(t,e),t}}),o.attributes.get=ir;var or={},ar=We({$class:"gpf.stream.AbstractOperator",_dataInPromise:undefined,_dataInResolve:u,_dataOutResolve:u,_dataOutReject:u,_waitForData:function(){var t=this;return t._dataInPromise||(t._dataInPromise=new Promise(function(e){t._dataInResolve=e}).then(function(e){return delete t._dataInPromise,delete t._dataInResolve,e})),t._dataInPromise},_writeData:function(e){var n=this;return n._waitForData(),n._dataInResolve(e),new Promise(function(e,t){n._dataOutResolve=e,n._dataOutReject=t}).then(function(e){return delete n._dataOutResolve,delete n._dataOutReject,e},function(e){return delete n._dataOutResolve,delete n._dataOutReject,Promise.reject(e)})},read:lt(function(t){var n=this;return n._waitForData().then(function(e){return or!==e?t.write(e).then(n._dataOutResolve,n._dataOutReject):(n._dataOutResolve(),Promise.resolve())})}),_process:ye(),write:pt(function(e){return this._process(e)}),flush:function(){return this._dataInPromise?this._writeData(or):Promise.resolve()}});at(ar);We({$class:"gpf.stream.Filter",$extend:ar,constructor:function(e){this._filter=e},_process:function(e){return this._filter(e)?this._writeData(e):Promise.resolve()}}),We({$class:"gpf.stream.Map",$extend:ar,constructor:function(e){this._map=e},_process:function(e){return this._writeData(this._map(e))}}),ze("XmlContentHandler",{"characters":1,"endDocument":0,"endElement":0,"endPrefixMapping":1,"processingInstruction":2,"startDocument":0,"startElement":2,"startPrefixMapping":2});function sr(t,n){return function(e){e.match(t)||o.Error["invalidXml"+n]()}}de(0,{invalidXmlElementName:"Invalid XML element name",invalidXmlAttributeName:"Invalid XML attribute name",invalidXmlNamespacePrefix:"Invalid XML namespace prefix",invalidXmlUseOfPrefixXmlns:"Invalid use of XML namespace prefix xmlns",invalidXmlUseOfPrefixXml:"Invalid use of XML namespace prefix xml",unknownXmlNamespacePrefix:"Unknown XML namespace prefix"});var ur=new RegExp("^[a-zA-Z_][a-zA-Z0-9_\\-\\.]*$"),cr=new RegExp("^(|[a-z_][a-zA-Z0-9_]*)$"),fr=sr(ur,"ElementName"),lr=sr(ur,"AttributeName"),pr=sr(cr,"NamespacePrefix");function dr(e){"xmlns"===e&&o.Error.invalidXmlUseOfPrefixXmlns()}function hr(e,t){fr(e),pr(t),dr(t)}function _r(e,t){t.includes(e)||o.Error.unknownXmlNamespacePrefix()}function mr(o,a){return function(e,t){var n,r,i=e.indexOf(":");i===c?o(e):(r=e.substring(f,i),n=e.substring(++i),a(n,r,t))}}var vr=mr(fr,function bi(e,t,n){hr(e,t),"xml"===t?o.Error.invalidXmlUseOfPrefixXml():_r(t,n)});var br=mr(lr,function gi(e,t,n){hr(e,t),"xml"===t?function r(e){"space"!==e&&o.Error.invalidXmlUseOfPrefixXml()}(e):_r(t,n)});o.interfaces.promisify=function yi(n){return function(e){var t=Ue(n,e);return t||o.Error.interfaceExpected({name:oe(n)}),function i(n,e,r){var t=r.then;return r.then=function(){return i(n,e,t.apply(r,arguments))},w(e.prototype,function(e,t){r[t]=function(){var e=arguments;return r.then(function(){return Kt(n[t].apply(n,e))})}}),r}(t,n,Promise.resolve())}},de(0,{invalidXmlWriterState:"Invalid XML Writer state"});We({$class:"gpf.xml.Writer",$extend:hn,constructor:function(){this._elements=[],this._nextNamespaces={},this._checkIfStarted=o.Error.invalidXmlWriterState},_elements:[],_nextNamespaces:{},_checkIfElementsExist:function(e){e!==Boolean(this._elements.length)&&o.Error.invalidXmlWriterState()},_checkState:function(e){this._checkIfStarted(),undefined!==e&&this._checkIfElementsExist(e)},_addContentToElement:function(e){e.content||(this._appendToReadBuffer(">"),e.content=!0)},_addContentToLastElement:function(){var e=this._elements[f];if(e)return this._addContentToElement(e)},_writeAttribute:function(e,t){this._appendToReadBuffer(" "+e+'="'),this._appendToReadBuffer(q(t.toString())),this._appendToReadBuffer('"')},_getNamespacePrefixes:function(){return this._elements.reduce(function(e,t){return e.concat(Object.keys(t.namespaces))},[])},_processAttributes:function(e){w(e,function(e,t){br(t,this._getNamespacePrefixes()),this._writeAttribute(t,e)},this)},_processNamespaces:function(e){w(e,function(e,t){t?this._writeAttribute("xmlns:"+t,e):this._writeAttribute("xmlns",e)},this)},characters:function(e){return this._checkState(!0),this._addContentToLastElement(),this._appendToReadBuffer(q(e.toString())),Promise.resolve()},endDocument:function(){return this._checkState(!1),this._checkIfStarted=o.Error.invalidXmlWriterState,this._completeReadBuffer(),Promise.resolve()},endElement:function(){this._checkState(!0);var e=this._elements.shift();return e.content?this._appendToReadBuffer("</"+e.qName+">"):this._appendToReadBuffer("/>"),Promise.resolve()},endPrefixMapping:function(e){return this._checkState(),Promise.resolve()},processingInstruction:function(e,t){return this._checkState(!1),this._appendToReadBuffer("<?"+e+" "+t+"?>\n"),Promise.resolve()},startDocument:function(){return this._checkIfStarted=u,this.startDocument=o.Error.invalidXmlWriterState,this._checkState(!1),Promise.resolve()},startElement:function(e,t){var n=this._nextNamespaces;this._checkState(),this._addContentToLastElement(),this._elements.unshift({qName:e,namespaces:n}),this._nextNamespaces={},vr(e,this._getNamespacePrefixes()),this._appendToReadBuffer("<"+e),t&&this._processAttributes(t),this._processNamespaces(n)},startPrefixMapping:function(e,t){this._checkState(),function n(e){pr(e),dr(e),"xml"===e&&o.Error.invalidXmlUseOfPrefixXml()}(e),this._nextNamespaces[e]&&o.Error.invalidXmlWriterState(),this._nextNamespaces[e]=t}});o.forEachAsync=function(e,t,n){if(O(e))return function u(n,r,i){var o=0,a=n.length;return function s(){if(o===a)return Promise.resolve();var e=o++;try{return Kt(r.call(i,n[e],e,n)).then(s)}catch(t){return Promise.reject(t)}}()}(e,t,n);o.Error.invalidParameter()},de(0,{invalidSerialName:"Invalid serial name",invalidSerialType:"Invalid serial type",invalidSerialRequired:"Invalid serial required",invalidSerialReadOnly:"Invalid serial readOnly"}),o.serial={};var gr={STRING:"string",INTEGER:"integer",DATETIME:"datetime"};o.serial.types={string:gr.STRING,integer:gr.INTEGER,datetime:gr.DATETIME};var yr=new RegExp("^[a-z][a-z0-9_]*$","i");function Er(e){!function t(e){"string"!=typeof e&&o.Error.invalidSerialName()}(e.name),function n(e){e.match(yr)||o.Error.invalidSerialName()}(e.name)}var wr=Object.keys(gr).map(function(e){return gr[e]});function xr(e){undefined===e.type?e.type=gr.STRING:function t(e){wr.includes(e)||o.Error.invalidSerialType()}(e.type)}function Or(e,t){"boolean"!=typeof e&&t()}function Pr(e){var t=Object.assign(e);return[Er,xr,function n(e){undefined===e.required?e.required=!1:Or(e.required,o.Error.invalidSerialRequired)},function r(e){undefined!==e.readOnly&&Or(e.readOnly,o.Error.invalidSerialReadOnly)}].forEach(function(e){e(t)}),t}function Sr(e){e&&o.Error.classAttributeOnly()}function Ir(e,t){var n=e._extend;n!==t&&function r(e,t){e instanceof t||o.Error.restrictedBaseClassAttribute()}(n.prototype,t)}function kr(e,t,n){E(function i(e,t,n){var r=t.getAttributes(n);return e?r[e]:r[zn]}(e,t,n)).length&&o.Error.uniqueAttributeUsedTwice()}de(0,{classAttributeOnly:"Class attribute only",memberAttributeOnly:"Member attribute only",restrictedBaseClassAttribute:"Restricted base class attribute",uniqueAttributeUsedTwice:"Unique attribute used twice"});var Nr=We({$class:"gpf.attributes.AttributeAttribute",$extend:Xn,$abstract:!0,_check:function(e,t){Sr(e),Ir(t,Xn),kr(e,t,this.constructor)},_targetCheck:ye(),_overrideTargetCheck:function(e){var n=this,r=e._check;e._check=function(e,t){n._targetCheck(e,t,this),r.call(this,e,t)}},_build:function(e,t,n){this._overrideTargetCheck(n)}}),Cr=We({$class:"gpf.attributes.ClassAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(e,t){Sr(e)}});o.attributes.ClassAttribute=Cr;var jr=We({$class:"gpf.attributes.MemberAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(e,t){!function n(e){e||o.Error.memberAttributeOnly()}(e)}});o.attributes.MemberAttribute=jr;var $r=We({$class:"gpf.attributes.AttributeForInstanceOf",$extend:Nr,_BaseClass:null,constructor:function(e){"function"!=typeof e&&o.Error.invalidParameter(),this._BaseClass=e},_targetCheck:function(e,t){Ir(t,this._BaseClass)}});o.attributes.AttributeForInstanceOf=$r;var Ar=We({$class:"gpf.attributes.UniqueAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(e,t,n){kr(e,t,n.constructor)}});o.attributes.UniqueAttribute=Ar;var Rr,Dr=We({$class:"gpf.attributes.Serializable",$extend:Xn,$attributes:[new jr,new Ar],_property:null,constructor:function(e){this._property=e},_check:function(e,t){this._property=Pr(Object.assign({name:function n(e){return e.startsWith("_")?e.substring(1):e}(e)},this._property||{}))},getProperty:function(){return Object.create(this._property)}});function Tr(e){var t=ir(e,Dr),n={};return w(t,function(e,t){n[t]=e[f].getProperty()}),n}function Mr(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n)return!n.writable}function Br(n){var e=Tr(n);return w(e,function(e,t){e.readOnly===undefined&&(e.readOnly=Rr(n,t))}),e}function qr(e,t){if(!t.readOnly)return e}function Fr(n,e,i){var o={};return w(e,function(e,t){!function r(e,t,n){n!==undefined&&(e[t]=n)}(o,e.name,i.call(n,n[t],e,t))}),o}function Wr(n,i,o){var e=Br(n);w(e,function(e,t){Object.prototype.hasOwnProperty.call(i,e.name)&&function r(e,t,n){n!==undefined&&(e[t]=n)}(n,t,o.call(n,i[e.name],e,t))})}function Lr(e,t,n){var r=function i(e){return e||zn}(t);e._attributes[r]=(e._attributes[r]||[]).concat(n),function o(t,n,e){e.forEach(function(e){Kn.call(t,n,e),nr(n,e,t._instanceBuilder.prototype)})}(e,t,n)}Rr=Object.getOwnPropertyDescriptor?function(e,t){for(var n,r=e;r!==Object&&n===undefined;)n=Mr(r,t),r=Object.getPrototypeOf(r);return n||!1}:function(){return!1},o.serial.get=Tr,o.serial.toRaw=function(e,t){return"function"==typeof e&&o.Error.invalidParameter(),function n(e,t){return Fr(e,Br(e),t||qr)}(e,t)},o.serial.fromRaw=function(e,t,n){return"function"==typeof e&&o.Error.invalidParameter(),function r(e,t,n){Wr(e,t,n||qr)}(e,t,n),e},de(0,{es6classOnly:"ES6 class only"}),o.attributes.decorator=function Ei(){var n=g(arguments);return function(e,t){he(e)||o.Error.es6classOnly(),Lr(Ie(e),t,n)}}});