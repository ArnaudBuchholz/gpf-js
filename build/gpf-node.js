!function(t){"use strict";if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else if("undefined"!=typeof module&&module.exports)t(module.exports);else{var e=Function("return this;")(),n={};t(n),e.gpf=n}}(function(o){"use strict";function c(){}var i,a,s,n,r,u=-1,f=0,t="browser",e="nashorn",l="nodejs",p="phantomjs",d="rhino",h="unknown",_="wscript",m=h,v=Function,b=new v("return this")();function g(t,e,n){return Array.prototype.slice.call(t,e,n||t.length)}"undefined"!=typeof WScript?m=_:"undefined"!=typeof print&&"undefined"!=typeof java?m="undefined"==typeof readFile?e:d:"undefined"!=typeof phantom&&phantom.version&&!document.currentScript?(m=p,b=window):"undefined"!=typeof module&&module.exports?(m=l,b=global):"undefined"!=typeof window&&(m=t,b=window),o.version=function(){return"0.2.9"},o.node={},l===m&&(n=require("path"),i=require("fs"),a=require("http"),s=require("https"),r=require("url"),"\\"===n.sep),o.hosts={browser:t,nashorn:e,nodejs:l,phantomjs:p,rhino:d,unknown:h,wscript:_},o.host=function(){return m};var y=1;function E(t){return g(t,y)}var w,x=Array.isArray;function O(t){return x(t)||function e(t){return!!t&&Math.floor(t.length)===t.length}(t)}function P(t,e,n){for(var r=0,i=t.length;r<i;++r)e.call(n,t[r],r,t)}function S(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}o.isArrayLike=O,w=_===m?function Ur(e,n,r){S(e,n,r),["constructor","toString"].forEach(function(t){e.hasOwnProperty(t)&&n.call(r,e[t],t,e)})}:S,o.forEach=function(t,e,n){O(t)?P(t,e,n):w(t,e,n)};var I=!0;function k(t,e){t||(!function n(t){I&&console.warn("ASSERTION FAILED: "+t)}(e),o.Error.assertionFailed({message:e}))}o.assert=function Xr(t,e){undefined===e&&Xr(!1,"Assertion with no message"),k(t,e)},o.asserts=function Vr(t){w(t,k)},o.preventAssertWarnings=function(t){I=!t};var N=255,C="abcdefghijklmnopqrstuvwxyz",j="ABCDEFGHIJKLMNOPQRSTUVWXYZ",$="0123456789",A=new RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");function R(t,e){return function r(t,e){var n;return t.length?((n=[].concat(t)).push(e),v.apply(null,n)):v(e)}(t,e)}function D(t,e){return undefined===e?R([],t):R(t,e)}function T(t,e){var n=t;return w(e,function(t,e){n=n.split(e).join(t)}),n}o.web={};var M={};function B(t,e){return function n(t,e){return"javascript"===e?'"'+t+'"':t}(T(t,M[e]),e)}function q(t){return B(t,"xml")}function F(t,e){b[t]||(b[t]=e)}function W(t){return t?new Array(t).join(" ").split(" ").map(function(t,e){return"p"+e}):[]}M.xml={"&":"&amp;","<":"&lt;",">":"&gt;"};(function zr(t){var e=W(t);return D(e,function n(r){var i=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return r.forEach(function(t,e){var n=1;n+=e,i.push("if ("+n+" === l) { return new C("+r.slice(f,n).join(", ")+");}")}),i.join("\n")}(e))})(10);var L=j+C+$+"+/=",U=63,X=18,V=12,z=6,Z=8,G=16,H=64,Q=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function J(t,e,n){var r=String.fromCharCode(t>>G&N);return e!==H?r+function i(t,e){return e===H?String.fromCharCode(t>>Z&N):String.fromCharCode(t>>Z&N,t&N)}(t,n):r}function K(t,e){return L.indexOf(t.charAt(e))}function Y(t,e){var n=t.charCodeAt(e);if(N<n)throw new TypeError("The string to be encoded contains characters outside of the Latin1 range.");return n}function tt(t,e,n){return L.charAt(t>>e&n)}function et(t,e){if(undefined!==t)return t[e]}function nt(t,e){var n=t[e];return undefined===n&&(n=t[e]={}),n}function rt(t,e){return function r(t,e){var n;return("gpf"===t[f]?(n=o,E(t)):(n=b,t)).reduce(e,n)}(t,e?nt:et)}F("atob",function Zr(t){var e,n,r,i,o,a=function f(t){var e=t.replace(/[\t\n\f\r ]+/g,"");if(!Q.test(e))throw new TypeError("The string to be decoded is not correctly encoded.");return e}(t),s=a.length,u=0,c="";for(a+="==";u<s;u+=4)c+=(o=i=r=n=void 0,o=u,n=K(e=a,o++)<<X|K(e,o++)<<V,r=K(e,o++),i=K(e,o++),J(n|=r<<z|i,r,i));return c}),F("btoa",function Gr(t){for(var e,n,r,i,o,a,s=0,u="",c=t.length%3;s<t.length;s+=3)u+=(a=o=i=r=void 0,a=s,r=Y(n=t,a++),i=Y(n,a++),o=Y(n,a++),tt(e=r<<G|i<<Z|o,X,U)+tt(e,V,U)+tt(e,z,U)+tt(e,f,U));return c?u.slice(f,c-3)+"===".substring(c):u}),o.context=function(t){return undefined===t?b:rt(t.split("."))};function it(t){return t.trim()}M.html=Object.assign({},M.xml,{"\xe0":"&agrave;","\xe1":"&aacute;","\xe8":"&egrave;","\xe9":"&eacute;","\xea":"&ecirc;"});var ot,at="function";function st(t,e){var n=c.toString.call(t).replace(A,"");!function i(t,e,n){if(t.length){var r=new RegExp("\\(\\s*(\\w+(?:\\s*,\\s*\\w+)*)\\s*\\)").exec(e);n.parameters=r[1].split(",").map(it)}}(t,n,e),function r(t,e){var n=it(new RegExp("{((?:.*\\r?\\n)*.*)}").exec(t)[1]);n&&(e.body=n)}(n,e)}function ut(t){var e={};return function r(t,e){var n=ot(t);n&&(e.name=n)}(t,e),st(t,e),e}function ct(t,e){return function i(t,e){var n=Object.keys(e),r=n.map(function(t){return e[t]});return D(n,"return "+t).apply(null,r)}(function o(t){return"function"+function e(t){return t.name?" "+t.name:""}(t)+"("+function n(t){return t.parameters?t.parameters.join(", "):""}(t)+') {\n\t"use strict"\n'+function r(t){return t.body?t.body.toString():""}(t)+"\n}"}(t),e||{})}ot="functionName"!==D("return function functionName () {};")().name?function Hr(t){var e=c.toString.call(t),n=e.indexOf(at)+at.length,r=e.indexOf("(",n);return e.substring(n,r).replace(A,"").trim()}:function(t){return t.name};var ft=o.Error=function(){};function lt(t,e,n){var r=function o(t){return t.charAt(f).toUpperCase()+t.substring(1)}(e),i=ct({name:r,parameters:["context"],body:"this._buildMessage(context);"});return i.prototype=new ft,Object.assign(i.prototype,{code:t,name:e,message:n}),i.prototype.constructor=i,ft[r]=i,function(t){throw new i(t)}}ft.prototype=new Error,Object.assign(ft.prototype,{constructor:ft,code:0,name:"Error",message:"",_buildMessage:function(t){var n;t&&(n={},w(t,function(t,e){n["{"+e+"}"]=t.toString()}),this.message=T(this.message,n))}});var pt=0;function dt(t,e){w(e,function(t,e){var n=++pt;o.Error["CODE_"+e.toUpperCase()]=n,o.Error[e]=function i(t,e,n){var r=lt(t,e,n);return r.CODE=t,r.NAME=e,r.MESSAGE=n,r}(n,e,t)})}function ht(t){return"function"==typeof t&&function e(t){return t.toString().startsWith("class")}(t)}dt(0,{notImplemented:"Not implemented",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),o.isClass=ht,dt(0,{invalidEntityType:"Invalid entity type"});var _t={};function mt(t){var e,n=function i(n){var r;return w(_t,function(t,e){n["$"+e]&&(r=t)}),r}(t);return n||(n=function r(t){var e=_t[t.$type];return undefined===e&&o.Error.invalidEntityType(),e}(t)),(e=new n(t)).check(),e}function vt(t,e){return t.exec(e)}function bt(t,e){for(var n=[],r=function i(t,e){return t.lastIndex=0,vt(t,e)}(t,e);r;)n.push(r),r=vt(t,e);return n}function gt(t){this._initialDefinition=t}function yt(t){return ct({parameters:W(t),body:"_throw_();"},{_throw_:o.Error.abstractMethod})}gt.prototype={constructor:gt,_initialDefinition:{}},dt(0,{abstractMethod:"Abstract method"});var Et=[];function wt(e){return Et.filter(function(t){return t.getInstanceBuilder()===e})[f]}function xt(t){Et.push(t)}dt(0,{invalidEntity$Property:"Invalid entity $ property",missingEntityName:"Missing entity name",invalidEntityNamespace:"Invalid entity namespace"});function Ot(t,e){e.startsWith("$")?this._check$Property(e.substring("$".length),t):this._checkProperty(e,t)}function Pt(t){gt.call(this,t)}function St(t,e){Pt.call(this,e),this._instanceBuilder=t}function It(t,e){var n=new St(t,e);return xt(n),n.check(),n}function kt(t){var e=wt(t);return e||It(t,function n(t){var e=Object.getPrototypeOf(t.prototype);return{$name:ot(t),$extend:e.constructor}}(t))}Object.assign(gt.prototype,{_type:"",_allowed$Properties:"type,name,namespace".split(","),_check$Property:function(t,e){t!==this._type&&function n(t,e){e.includes(t)||o.Error.invalidEntity$Property()}(t,this._allowed$Properties)},_throwInvalidProperty:yt(),_reMemberName:new RegExp(".*"),_checkMemberName:function(t){this._reMemberName.exec(t)||this._throwInvalidProperty()},_reservedNames:"super,class,public,private,protected,static,mixin".split(","),_checkReservedMemberName:function(t){this._reservedNames.includes(t)&&this._throwInvalidProperty()},_checkMemberValue:D(["name","value"]," "),_checkProperty:function(t,e){this._checkMemberName(t),this._checkReservedMemberName(t),this._checkMemberValue(t,e)},_checkProperties:function(){w(this._initialDefinition,Ot,this)},_name:"",_readName:function(){var t=this._initialDefinition;this._name=t["$"+this._type]||t.$name},_checkNameIsNotEmpty:function(){this._name||o.Error.missingEntityName()},_throwInvalidName:yt(),_reName:new RegExp(".*"),_checkName:function(){this._reName.exec(this._name)||this._throwInvalidName()},_namespace:"",_extractRelativeNamespaceFromName:function(){var t=new RegExp("(.*)\\.([^\\.]+)$").exec(this._name);if(t)return this._name=t[2],t[1]},_readNamespace:function(){var t=[this._initialDefinition.$namespace,this._extractRelativeNamespaceFromName()].filter(function(t){return t});t.length&&(this._namespace=t.join("."))},_checkNamespace:function(){new RegExp("^(:?[a-z_$][a-zA-Z0-9]+(:?\\.[a-z_$][a-zA-Z0-9]+)*)?$").exec(this._namespace)||o.Error.invalidEntityNamespace()},check:function(){this._checkProperties(),this._readName(),this._checkNameIsNotEmpty(),this._readNamespace(),this._checkName(),this._checkNamespace()}}),Object.assign(gt.prototype,{_instanceBuilder:null,getInstanceBuilder:function(){return this._instanceBuilder||this._setInstanceBuilder(this._build()),this._instanceBuilder},_setInstanceBuilder:function(t){this._namespace&&(rt(this._namespace.split("."),!0)[this._name]=t),this._instanceBuilder=t,xt(this)},_build:c}),Pt.prototype=Object.create(gt.prototype),Object.assign(Pt.prototype,{constructor:Pt,_type:"class"}),_t["class"]=Pt,St.prototype=Object.create(Pt.prototype),Object.assign(St.prototype,{_checkNameIsNotEmpty:c,_checkName:c}),dt(0,{invalidClassName:"Invalid class name",invalidClassProperty:"Invalid class property",invalidClassExtend:"Invalid class extend",invalidClassConstructor:"Invalid class constructor",invalidClassOverride:"Invalid class override"}),Object.assign(Pt.prototype,{_allowed$Properties:gt.prototype._allowed$Properties.concat(["extend"]),_throwInvalidProperty:o.Error.invalidClassProperty,_reMemberName:new RegExp("^[a-z_][a-zA-Z0-9]*$"),_checkConstructorMember:function(t){"function"!=typeof t&&o.Error.invalidClassConstructor()},_checkOverridenMember:function(t,e){typeof t!=typeof e&&o.Error.invalidClassOverride()},_checkIfOverriddenMember:function(t,e){var n=this._extend.prototype[t];undefined!==n&&this._checkOverridenMember(e,n)},_checkMemberValue:function(t,e){"constructor"===t?this._checkConstructorMember(e):this._checkIfOverriddenMember(t,e)},_reName:new RegExp("^[A-Z_$][a-zA-Z0-9]*$"),_throwInvalidName:o.Error.invalidClassName,_extend:Object,_extendDefinition:undefined,_readExtend:function(){var t=function e(t){return"string"==typeof t?rt(t.split(".")):t}(this._initialDefinition.$extend);t&&(this._extend=t)},_checkExtendIsNotAnInterface:function(){c.toString.call(this._extend).includes("interfaceConstructorFunction")&&o.Error.invalidClassExtend()},_checkExtend:function(){"function"!=typeof this._extend&&o.Error.invalidClassExtend(),this._checkExtendIsNotAnInterface()},check:function(){this._readExtend(),this._checkExtend(),this._extendDefinition=kt(this._extend),gt.prototype.check.call(this)}}),dt(0,{classConstructorFunction:"This is a class constructor function, use with new"}),Object.assign(Pt.prototype,{_resolvedConstructor:c});var Nt=[];function Ct(t){Nt.push(t)}function jt(n){var r=function i(t){return ht(t._extend)?{instance:"that",body:function e(t){return t._extend===t._resolvedConstructor?"var that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n":'var that,\n    $super = function () {\n        that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n    },\n    hasOwnProperty = function (name) {\n        return !!that && that.hasOwnProperty(name);\n    },\n    proxy = new Proxy({}, {\n        get: function (obj, property) {\n            if (property === "hasOwnProperty") {\n              return hasOwnProperty;\n            }\n            if (!that && property === "$super") {\n              return $super;\n            }\n            return that[property];\n        },\n        set: function (obj, property, value) {\n            if (property !== "$super") {\n                that[property] = value;\n            }\n            return true;\n        }\n    });\n_classDef_._resolvedConstructor.apply(proxy, arguments);\n'}(t)}:{instance:"this",body:"_classDef_._resolvedConstructor.apply(this, arguments);"}}(n),t="if (!(this instanceof _classDef_._instanceBuilder)) gpf.Error.classConstructorFunction();\n"+Nt.reduce(function(t,e){return e(n,t,r.instance)},r.body);return"this"!==r.instance&&(t+="\nreturn "+r.instance+";"),t}function $t(t){return ct(function e(t){return{name:t._name,parameters:ut(t._resolvedConstructor).parameters,body:jt(t)}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function At(){o.Error.invalidClassSuper()}function Rt(t){return function n(t){var e=ut(t);return e.body="return _superMethod_.apply(this, arguments);",ct(e,{_superMethod_:t})}("function"==typeof t?t:At)}function Dt(t,e,n){return"function"!=typeof n&&o.Error.invalidClassSuperMember(),function i(t,e,n){var r=ut(n);return r.body="return _superMethod_.apply(this === _$super_ ? _that_ : this, arguments);",ct(r,{_that_:t,_$super_:e,_superMethod_:n})}(t,e,n)}dt(0,{invalidClassSuper:"Invalid class super",invalidClassSuperMember:"Invalid class super member"});var Tt=new RegExp("\\.\\$super\\.(\\w+)\\b","g");function Mt(t,e){!function n(t){Object.assign(t,{_extend:null,_extendDefinition:null})}(It(t,function r(t){return{$name:t}}(e)))}Object.assign(Pt.prototype,{_get$Super:function(e,t,n){var r=this._extend.prototype,i=Rt(r[t]);return n.forEach(function(t){i[t]=Dt(e,i,r[t])}),i},_superifiedBody:'var _super_;\nif (this.hasOwnProperty("$super")) {\n    _super_ = this.$super;\n}\nthis.$super = _classDef_._get$Super(this, _methodName_, _superMembers_);\ntry{\n    var _result_ = _method_.apply(this, arguments);\n} finally {\n    if (undefined === _super_) {\n        delete this.$super;\n    } else {\n        this.$super = _super_;\n    }\n}\nreturn _result_;',_getSuperifiedContext:function(t,e,n){return{_method_:t,_methodName_:e,_superMembers_:n,_classDef_:this}},_createSuperified:function(t,e,n){var r=ut(t);return r.body=this._superifiedBody,ct(r,this._getSuperifiedContext(t,e,n))},_superify:function(t,e){return new RegExp("\\.\\$super\\b").exec(t)?this._createSuperified(t,e,function n(t){return bt(Tt,t).map(function(t){return t[1]})}(t)):t}}),Object.assign(Pt.prototype,{_build:function(){var t,e;return this._resolveConstructor(),t=$t(this),e=Object.create(this._extend.prototype),(t.prototype=e).constructor=t,this._buildPrototype(e),t},_addMethodToPrototype:function(t,e,n){t[e]=this._superify(n,e)},_addMemberToPrototype:function(t,e,n){"function"==typeof n?this._addMethodToPrototype(t,e,n):t[e]=n},_buildPrototype:function(n){w(this._initialDefinition,function(t,e){e.startsWith("$")||"constructor"===e||this._addMemberToPrototype(n,e,t)},this)},_setResolvedConstructorToInherited:function(){this._extend!==Object&&(this._resolvedConstructor=this._extend)},_resolveConstructor:function(){this._initialDefinition.hasOwnProperty("constructor")?this._resolvedConstructor=this._superify(this._initialDefinition.constructor,"constructor"):this._setResolvedConstructorToInherited()}}),Mt(Object,"Object"),w({"Array":Array,"Date":Date,"Error":Error,"Function":Function,"Number":Number,"RegExp":RegExp,"String":String},Mt),dt(0,{invalidClass$AbstractSpecification:"Invalid class $abstract specification",abstractClass:"Abstract Class"}),Pt.prototype._allowed$Properties.push("abstract");var Bt=Pt.prototype._check$Property;Object.assign(Pt.prototype,{_abstract:!1,_check$abstract:function(t){!0!==t&&o.Error.invalidClass$AbstractSpecification()},_check$Property:function(t,e){"abstract"===t?(this._check$abstract(e),this._abstract=!0):Bt.call(this,t,e)}}),Ct(function(t,e,n){return t._abstract?"if (this.constructor === _classDef_._instanceBuilder) gpf.Error.abstractClass();\n"+e:e}),dt(0,{invalidClass$SingletonSpecification:"Invalid class $singleton specification"}),Pt.prototype._allowed$Properties.push("singleton");var qt=Pt.prototype._check$Property;function Ft(t){gt.call(this,t)}function Wt(t){return ct(function e(t){return{name:t._name,body:"gpf.Error.interfaceConstructorFunction();"}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function Lt(t){return mt(t).getInstanceBuilder()}function Ut(t,r){var i=!0;return w(t.prototype,function(t,e){"constructor"!==e&&function n(t,e){return"function"!=typeof e||t.length!==e.length}(t,r[e])&&(i=!1)}),i}function Xt(t,e){return Ut(t,e)?e:function r(t,e){if(Ut(o.interfaces.IUnknown,e))return function n(t,e){return e.queryInterface(t)}(t,e)}(t,e)}function Vt(t){return"string"==typeof t?rt(t.split(".")):t}Object.assign(Pt.prototype,{_singleton:!1,_singletonInstance:null,_check$singleton:function(t){!0!==t&&o.Error.invalidClass$SingletonSpecification()},_check$Property:function(t,e){"singleton"===t?(this._check$singleton(e),this._singleton=!0):qt.call(this,t,e)}}),Ct(function(t,e,n){return t._singleton?"if (!_classDef_._singletonInstance) {\n"+e+"\n_classDef_._singletonInstance = "+n+";\n}\nreturn _classDef_._singletonInstance;":e}),Ft.prototype=Object.create(gt.prototype),Object.assign(Ft.prototype,{constructor:Ft,_type:"interface"}),_t["interface"]=Ft,dt(0,{invalidInterfaceName:"Invalid interface name",invalidInterfaceProperty:"Invalid interface property"}),Object.assign(Ft.prototype,{_throwInvalidProperty:o.Error.invalidInterfaceProperty,_reMemberName:new RegExp("^[a-z][a-zA-Z0-9]*$"),_reservedNames:gt.prototype._reservedNames.concat("constructor"),_checkMemberValue:function(t,e){"function"!=typeof e&&o.Error.invalidInterfaceProperty()},_reName:new RegExp("^I[a-zA-Z0-9]*$"),_throwInvalidName:o.Error.invalidInterfaceName}),dt(0,{"interfaceConstructorFunction":"This is an interface constructor function, do not invoke"}),Object.assign(Ft.prototype,{_build:function(){var t,e;return delete(e=(t=Wt(this)).prototype).constructor,this._buildPrototype(e),t},_buildPrototype:function(n){w(this._initialDefinition,function(t,e){e.startsWith("$")||(n[e]=t)},this)}}),o.define=Lt,dt(0,{interfaceExpected:"Expected interface not implemented: {name}"});var zt;o.interfaces={isImplementedBy:function(t,e){return!!e&&Ut(Vt(t),function n(t){return t instanceof Function?t.prototype:t}(e))},query:function(t,e){return Xt(Vt(t),e)}};function Zt(t,e){var n={$interface:"gpf.interfaces.I"+t};return Object.keys(e).forEach(function(t){n[t]=yt(e[t])}),Lt(n)}function Gt(t,e){var n,r;return r=!1===t.ascending?(n="b"+e,"a"+e):(n="a"+e,"b"+e),"if("+n+"!=="+r+")return "+function i(t,e,n){return"string"===t?e+".localeCompare("+n+")":e+"-"+n}(t.type,n,r)+";"}function Ht(t){return D(["a","b"],function n(t){return function e(t){return"var "+t.map(function(t,e){return"a"+e+"=a."+t.property+",b"+e+"=b."+t.property}).join(",")+";"}(t)+t.map(Gt).join("")+"return 0;"}(t))}function Qt(e,n){return function(t){return"("+t[e].map(zt).join(n)+")"}}Zt("Unknown",{"queryInterface":1}),o.createSortFunction=function(t){return Ht(x(t)?t:[t])};var Jt={property:function(t){return"i."+t.property},eq:Qt("eq","==="),ne:Qt("ne","!=="),lt:Qt("lt","<"),lte:Qt("lte","<="),gt:Qt("gt",">"),gte:Qt("gte",">="),not:function(t){return"!"+zt(t.not)},like:function(t){var e=function n(t){return"/"+t.regexp+"/.exec("+zt(t.like)+")"}(t);return t.group?"("+e+"||[])["+t.group+"]":e},or:Qt("or","||"),and:Qt("and","&&"),undefined:function(t){return JSON.stringify(t)}},Kt=Object.keys(Jt);zt=function(t){var e=function n(t){if("object"==typeof t)return Object.keys(t).filter(function(t){return Kt.includes(t)})[f]}(t);return(0,Jt[e])(t)},o.createFilterFunction=function(t){return D(["i"],function e(t){return"return "+zt(t)}(t))};var Yt=Zt("ReadableStream",{"read":1}),te=Zt("WritableStream",{"write":1});function ee(t,e,n){return t||o.Error.interfaceExpected({name:n}),function i(t,e,n){var r=Xt(e,t);return r||o.Error.interfaceExpected({name:n}),r}(t,e,n)}function ne(t){return ee(t,Yt,"gpf.interfaces.IReadableStream")}function re(t){return ee(t,te,"gpf.interfaces.IWritableStream")}Zt("Enumerator",{"reset":0,"moveNext":0,"getCurrent":0}),Zt("FileStorage",{"getInfo":1,"openTextStream":2,"close":1,"explore":1,"createDirectory":1,"deleteFile":1,"deleteDirectory":1}),dt(0,{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress",invalidStreamState:"Stream is in an invalid state"}),o.stream={};var ie="gpf.stream#progress",oe=ie+"/read",ae=ie+"/write";function se(t){t.prototype[oe]=!1,t.prototype[ae]=!1}function ue(t,e,n){t[e]&&o.Error[n](),t[e]=!0}function ce(t){t[oe]=!1}function fe(t){t[ae]=!1}function le(t,e,n){return t.then(function(t){return n(e),Promise.resolve(t)},function(t){return n(e),Promise.reject(t)})}function pe(r){return function(t){var e=re(t);return function n(t){ue(t,oe,"readInProgress")}(this),le(r.call(this,e),this,ce)}}function de(n){return function(t){return function e(t){ue(t,ae,"writeInProgress")}(this),le(n.call(this,t),this,fe)}}var he=Lt({$class:"gpf.stream.ReadableString",constructor:function(t){this._buffer=t},read:pe(function(t){return t.write(this._buffer)}),_buffer:""}),_e=Lt({$class:"gpf.stream.WritableString",constructor:function(){this._buffer=[]},write:de(function(t){return this._buffer.push(t.toString()),Promise.resolve()}),toString:function(){return this._buffer.join("")},_buffer:[]});se(he),se(_e),dt(0,{incompatibleStream:"Incompatible stream"});var me={NOT_FOUND:0,DIRECTORY:1,FILE:2,UNKNOWN:3},ve=0,be=1,ge=null;function ye(t){t.length?t.pop():o.Error.unreachablePath()}function Ee(t){var e=function n(t){return t.includes("\\")?t.toLowerCase().split("\\"):t.split("/")}(t);return function r(t){var e=t.pop();e&&t.push(e)}(e),e}function we(t){return Ee(t).join("/")}function xe(t){return t?Ee(t).pop():""}function Oe(t){var e=xe(t),n=e.lastIndexOf(".");return n===u?"":e.substring(n)}o.fs={types:{notFound:me.NOT_FOUND,directory:me.DIRECTORY,file:me.FILE,unknown:me.UNKNOWN},openFor:{reading:ve,appending:be},getFileStorage:function(){return ge}},dt(0,{unreachablePath:"Unreachable path"});var Pe={"":function(t){t.length=0,t.push("")},".":c,"..":function(t){ye(t)}};function Se(t){var e=Ee(t);return E(arguments).forEach(function r(n,t){P(Ee(t),function(t){var e=Pe[t];e?e(n):n.push(t)})}.bind(null,e)),e.join("/")}function Ie(t,e){t.length*e.length&&function n(t,e){for(;t[f]===e[f];)t.shift(),e.shift()}(t,e)}function ke(t){var e=Ee(t);return ye(e),e.join("/")}o.path={join:Se,parent:ke,name:xe,nameOnly:function(t){var e=xe(t),n=e.lastIndexOf(".");return n===u?e:e.substring(f,n)},extension:Oe,relative:function Qr(t,e){var n,r=Ee(t),i=Ee(e);for(Ie(r,i),n=r.length;n--;)i.unshift("..");return i.join("/")}};var Ne=Lt({$class:"gpf.node.BaseStream",constructor:function(t,e){this._stream=t,"function"==typeof e&&(this._close=e),t.on("error",this._onError.bind(this))},_close:c,close:function(){return this._close()},_stream:null,_invalid:!1,_reject:o.Error.invalidStreamState,_checkIfValid:function(){this._invalid&&o.Error.invalidStreamState()},_onError:function(t){this._invalid=!0,this._reject(t)}}),Ce=Lt({$class:"gpf.node.ReadableStream",$extend:"gpf.node.BaseStream",read:pe(function(n){var r=this,i=r._stream;return new Promise(function(t,e){r._reject=e,r._checkIfValid(),i.on("data",r._onData.bind(r,n)).on("end",function(){r._invalid=!0,t()})})}),_onData:function(t,e){var n=this._stream;n.pause(),t.write(e).then(function(){n.resume()},this._reject)}}),je=Lt({$class:"gpf.node.WritableStream",$extend:"gpf.node.BaseStream",write:de(function(n){var r=this,i=r._stream;return new Promise(function(t,e){if(r._reject=e,r._checkIfValid(),i.write(n))return t();i.once("drain",t)})})});function $e(t,e){return new Promise(function(n,r){i[t].apply(i,e.concat([function(t,e){t?r(t):n(e)}]))})}function Ae(t,e){return $e(t,[we(e)])}function Re(t,e){return $e("open",[we(t),e.flags]).then(function(t){return new e.GpfStream(i[e.nodeStream]("",{fd:t,autoClose:!1}),$e.bind(null,"close",[t]))})}function De(t){return t.isDirectory()?me.DIRECTORY:function e(t){return t.isFile()?me.FILE:me.UNKNOWN}(t)}!function Jr(t,e){t===m&&(ge=new e)}(l,Lt({$class:"gpf.node.FileStorage",getInfo:function(t){var e=we(t);return new Promise(function(t){i.exists(e,t)}).then(function(t){return t?Ae("stat",e).then(function(t){return{fileName:n.basename(e),filePath:we(n.resolve(e)),size:t.size,createdDateTime:t.ctime,modifiedDateTime:t.mtime,type:De(t)}}):{type:me.NOT_FOUND}})},openTextStream:function(t,e){return ve===e?function n(t){return Re(t,{flags:"r",GpfStream:Ce,nodeStream:"createReadStream"})}(t):function r(t){return Re(t,{flags:"a",GpfStream:je,nodeStream:"createWriteStream"})}(t)},close:function Kr(e){return function(t){return t instanceof e?t.close():Promise.reject(new o.Error.IncompatibleStream)}}(Ne),explore:function(e){var n=this;return Ae("readdir",e).then(function(t){return function i(t,e){var n,r=-1;return{reset:function(){return r=-1,Promise.resolve()},moveNext:function(){return++r,n=undefined,r<e.length?t.getInfo(e[r]).then(function(t){return n=t}):Promise.resolve()},getCurrent:function(){return n}}}(n,t.map(function(t){return Se(e,t)}))})},createDirectory:Ae.bind(null,"mkdir"),deleteFile:Ae.bind(null,"unlink"),deleteDirectory:Ae.bind(null,"rmdir")}));var Te=Object.prototype.toString;function Me(t){return t instanceof Object&&"[object Object]"===Te.call(t)&&Object.getPrototypeOf(t)===Object.getPrototypeOf({})}o.isLiteralObject=Me,dt(0,{missingNodeName:"Missing node name",unknownNamespacePrefix:"Unknown namespace prefix",unableToUseNamespaceInString:"Unable to use namespace in string"});var Be={"className":"class"},qe={"svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink"};function Fe(t){var e=t.split(":");if(2===e.length)return{namespace:function n(t){var e=qe[t];return undefined===e&&o.Error.unknownNamespacePrefix(),e}(e[0]),name:e[1]}}function We(t){t.includes(":")&&o.Error.unableToUseNamespaceInString()}function Le(t){return Be[t]||t}function Ue(t,e){t.forEach(function(t){x(t)?Ue(t,e):e(t)})}var Xe=Lt({$class:"gpf.web.Tag",constructor:function(t,e,n){this._nodeName=t,this._attributes=e||{},this._children=n},_nodeName:"",_attributes:{},_children:[],_getAttributesAsString:function(){return Object.keys(this._attributes).map(function(t){return We(t)," "+Le(t)+'="'+function e(t){return B(t,"html")}(this._attributes[t])+'"'},this).join("")},_getChildrenAsString:function(){var e=[];return Ue(this._children,function(t){e.push(t.toString())}),e.join("")},_getClosingString:function(){return this._children.length?">"+this._getChildrenAsString()+"</"+this._nodeName+">":"/>"},toString:function(){return We(this._nodeName),"<"+this._nodeName+this._getAttributesAsString()+this._getClosingString()},_createElement:function(t){var e=t.ownerDocument,n=Fe(this._nodeName);return n?e.createElementNS(n.namespace,n.name):e.createElement(this._nodeName)},_setAttributesTo:function(r){w(this._attributes,function(t,e){var n=Fe(e);n?r.setAttributeNS(n.namespace,Le(n.name),t):r.setAttribute(Le(e),t)})},_appendChildrenTo:function(e){var n=e.ownerDocument;Ue(this._children,function(t){t instanceof Xe?t.appendTo(e):e.appendChild(n.createTextNode(t.toString()))})},appendTo:function(t){var e=this._createElement(t);return this._setAttributesTo(e),this._appendChildrenTo(e),t.appendChild(e)}});o.web.createTagFunction=function Yr(r){return r||o.Error.missingNodeName(),function(t){var e,n=0;return Me(t)&&(e=t,++n),new Xe(r,e,g(arguments,n))}},o.http={};var Ve="GET",ze="POST",Ze="PUT",Ge="OPTIONS",He="DELETE",Qe="HEAD";new RegExp("([^:\\s]+)\\s*: ?([^\\r]*)","gm");var Je,Ke;Zt("Thenable",{"then":2});function Ye(t){return o.interfaces.isImplementedBy(o.interfaces.IThenable,t)?t:Promise.resolve(t)}function tn(t,e){var n=Je;return t===m&&(Je=e),n}function en(n){return new Promise(function(t,e){Je(n,t,e)})}function nn(t,e,n){return en("string"==typeof e?{method:t,url:e,data:n}:Object.assign({method:t},e))}function rn(e,n){e.setEncoding("utf8");var r=new Ce(e);(function i(t){var e=new _e;return ne(t).read(e).then(function(){return e.toString()})})(r).then(function(t){r.close(),n({status:e.statusCode,headers:e.headers,responseText:t})})}function on(t){var e=Object.assign(r.parse(t.url),t);return function n(t,e){e&&(t.headers=Object.assign({"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(e)},t.headers))}(e,t.data),e}function an(t,e){var n=on(t);return function r(t){return"https:"===t.protocol?s:a}(n).request(n,function(t){rn(t,e)})}function sn(t,e){var n;return t.every(function(t){return(n=function i(t,e){var n,r=t.url;if(r.lastIndex=0,n=r.exec(e.url))return t.response.apply(t,[e].concat(E(n)))}(t,e))===undefined}),n}function un(t){return Ke[t]||(Ke[t]=[]),Ke[t]}o.promisify=Ye,o.promisifyDefined=function ti(t){if(undefined!==t)return Ye(t)},Object.assign(o.http,{methods:{get:Ve,post:ze,put:Ze,options:Ge,"delete":He,head:Qe},request:en,get:nn.bind(o.http,Ve),post:nn.bind(o.http,ze),put:nn.bind(o.http,Ze),options:nn.bind(o.http,Ge),"delete":nn.bind(o.http,He),head:nn.bind(o.http,Qe)}),tn(l,function ei(t,e,n){var r=an(t,e);r.on("error",n),function i(t,e){e?t.write(e,"utf8",function(){t.end()}):t.end()}(r,t.data)});var cn,fn=0;function ln(){Ke={}}function pn(){}ln(),o.http.mock=function ni(t){var e=t.method.toUpperCase(),n=e+"."+fn++;return un(e).unshift(Object.assign({id:n},t)),n},o.http.mock.remove=function ri(e){var t=e.substring(f,e.indexOf("."));Ke[t]=un(t).filter(function(t){return t.id!==e})},o.http.mock.reset=ln,cn=tn(m,function ii(t,e,n){var r=function i(t){return sn(un(t.method.toUpperCase()),t)}(t);undefined===r?cn(t,e,n):e(r)}),pn.prototype={execute:c};var dn=new pn,hn=new pn;dn.execute=function(t){t._readReject(t._readBuffer.shift())},hn.execute=function(t){t._readResolve()};var _n=Lt({$class:"gpf.stream.BufferedRead",constructor:function(){this._readBuffer=[]},_readBuffer:[],_readWriteToStream:null,_readResolve:null,_readReject:null,_readDataIsToken:function(t){return t instanceof pn&&(t.execute(this),!0)},_readWriteToOutput:function(){var t=this,e=t._readBuffer.shift();return t._readDataIsToken(e)?Promise.resolve():t._readWriteToStream.write(e).then(function(){if(t._readBuffer.length)return t._readWriteToOutput();t._readNotWriting=!0})},_readNotWriting:!0,_readSafeWrite:function(){var e=this;e._readNotWriting&&(e._readNotWriting=!1,e._readWriteToOutput().then(undefined,function(t){e._readReject(t)}))},_readCheckIfData:function(){this._readBuffer.length&&this._readSafeWrite()},_readCheckIfOutput:function(){this._readWriteToStream&&this._readCheckIfData()},_appendToReadBuffer:function(t){return this._readBuffer=this._readBuffer.concat(g(arguments)),this._readCheckIfOutput(),this},_completeReadBuffer:function(){this._readBuffer.push(hn),this._readCheckIfOutput()},_setReadError:function(t){this._readBuffer.push(dn,t),this._readCheckIfOutput()},read:pe(function(t){var n=this;return n._readWriteToStream=t,n._readCheckIfData(),new Promise(function(t,e){n._readResolve=t,n._readReject=e})})});se(_n);var mn=/\r\n/g,vn=(Lt({$class:"gpf.stream.LineAdapter",$extend:_n,constructor:function(){this.$super(),this._buffer=[]},write:de(function(t){return this._buffer.push(t.toString()),this._process(),Promise.resolve()}),flush:function(){return this._buffer.length&&(this._buffer.push("\n"),this._process()),this._completeReadBuffer(),Promise.resolve()},_buffer:[],_consolidateLines:function(){return this._buffer.join("").replace(mn,"\n").split("\n")},_pushBackLastLineIfNotEmpty:function(t){var e=t.pop();e.length&&this._buffer.push(e)},_process:function(){var e=this,t=e._consolidateLines();e._buffer.length=0,e._pushBackLastLineIfNotEmpty(t),P(t,function(t){e._appendToReadBuffer(t)})}}),Zt("FlushableStream",{"flush":0})),bn={};function gn(t){return bn(t)}o.read=gn,o.fs&&(o.fs.read=gn),function oi(t,e){t===m&&(bn=e)}(l,function ai(t){return new Promise(function(n,r){i.readFile(t,function(t,e){t?r(t):n(e.toString())})})});var yn={};function En(t,e){return Promise.resolve(e)}function wn(e){var n=this;return function r(t,e){var n=t.preload[e];return n?Promise.resolve(n):gn(e)}(n,e).then(function(t){return n.preprocess({name:e,content:t,type:Oe(e).toLowerCase()})}).then(function(t){return function e(t){return yn[t.type]||En}(t).call(n,t.name,t.content)})}function xn(t,e){return function r(t,e){return t._initialDefine=e.define,e.define=function n(){var t=this.gpf.require,e=this._initialDefine;return this.promise=e.apply(t,arguments),t.define=e,this.promise}.bind(t),t.gpf.require=e,t}(function n(){return{gpf:Object.create(o),promise:Promise.resolve(),_initialDefine:null}}(),Rn(t,{base:ke(e)}))}yn[".json"]=function(t,e){return JSON.parse(e)},dt(0,{noCommonJSDynamicRequire:"Dynamic require not supported"});var On=/[^.]\brequire\b\s*\(\s*(?:['|"]([^"']+)['|"]|[^)]+)\s*\)/g;var Pn,Sn=[null,function si(t){return{dependencies:[],factory:t}},function ui(t,e){return{dependencies:t,factory:e}},function ci(t,e,n){return{dependencies:e,factory:n}}];function In(t,e,n){var r={};return D(["gpf","define","module","require"],e)(t,function i(t,e,n){var r=Sn[arguments.length].apply(null,arguments);this.require.define(r.dependencies,function(t){return t.length=r.dependencies.length,r.factory.apply(null,g(t))})}.bind(t),r,function(t){return n[t]||o.Error.noCommonJSDynamicRequire()}),r.exports}Pn=t===m?function fi(t,e){var n=location.pathname.toString();return n.endsWith("/")||(n=ke(n)),"//# sourceURL="+location.origin+Se(n,t)+"?gpf.require\n"+e}:function li(t,e){return e},yn[".js"]=function(n,r){var i=xn(this,n);return function o(t,e){var n=bt(On,e);return n.length?xn(this,t).gpf.require.define(n.map(function(t){return t[1]}).filter(function(t){return t}).reduce(function(t,e){return t[e]=e,t},{}),function(t){return t}):Promise.resolve({})}.call(this,n,r).then(function(t){var e=In(i.gpf,Pn(n,r),t);return undefined===e?i.promise:e})},dt(0,{invalidRequireConfigureOption:"Invalid configuration option",invalidRequireConfigureOptionValue:"Invalid configuration option value"});var kn={},Nn=[];function Cn(t,e,n){n?Nn.unshift(t):Nn.push(t),kn[t]=e}function jn(e){!function r(t){P(Object.keys(t),function(t){kn[t]||o.Error.invalidRequireConfigureOption()})}(e);var n=this;P(Nn.filter(function(t){return e[t]!==undefined}),function(t){kn[t](n,e[t])})}function $n(t){return Se(this.base,t)}function An(e){var t;return this.cache[e]?this.cache[e]:(t=wn.call(this,e),(this.cache[e]=t)["catch"](function(t){return function n(t,e){Array.isArray(t.requires)||(t.requires=[]),t.requires.push(e)}(t,e),Promise.reject(t)}))}function Rn(t,e){var n=Object.create(t),r={};return r.define=function o(e,t){var n=this,r=[],i=Object.keys(e);return P(i,function(t){r.push(An.call(n,$n.call(n,e[t])))},n),Promise.all(r).then(function(n){var r;return"function"==typeof t?(r={},P(i,function(t,e){r[t]=n[e]}),t(r)):t})}.bind(n),r.resolve=$n.bind(n),r.configure=jn.bind(n),e&&r.configure(e),r}Cn("base",function pi(t,e){!function n(t){"string"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.base=e}),Cn("cache",function di(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),P(Object.keys(n),function(t){e.cache[t]=Promise.resolve(n[t])})}),Cn("clearCache",function hi(t,e){!function n(t){"boolean"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),e&&(t.cache={})},!0),Cn("preload",function _i(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),P(Object.keys(n),function(t){e.preload[t]=n[t]})}),Cn("preprocess",function mi(t,e){!function n(t){"function"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.preprocess=e}),o.require=Rn({base:"",cache:{},preload:{},preprocess:function(t){return Promise.resolve(t)}});var Dn=Lt({$class:"gpf.stream.ReadableArray",constructor:function(t){this._buffer=t},read:pe(function(t){var e=this._buffer,n=0;return function r(){return e.length===n?Promise.resolve():t.write(e[n++]).then(r)}()}),_buffer:[]}),Tn=Lt({$class:"gpf.stream.WritableArray",constructor:function(){this._buffer=[]},write:de(function(t){return this._buffer.push(t),Promise.resolve()}),toArray:function(){return this._buffer},_buffer:[]});se(Dn),se(Tn);var Mn={flush:Promise.resolve.bind(Promise)};function Bn(t){return Xt(vn,t)||Mn}function qn(t){if(t.readError)return Promise.reject(t.readError)}function Fn(t,e){var n=function s(t,e){return{iReadableIntermediate:ne(t),iWritableIntermediate:re(t),iFlushableIntermediate:Bn(t),iWritableDestination:re(e),iFlushableDestination:Bn(e),readError:null,rejectWrite:c}}(t,e),r=function u(e){var n=!0,r=e.iReadableIntermediate,i=e.iWritableDestination;return function(){if(n)try{n=!1,r.read(i).then(function(){n=!0},function(t){e.readError=t,e.rejectWrite(t)})}catch(t){e.readError=t}}}(n),i=n.iFlushableIntermediate,o=n.iFlushableDestination,a=n.iWritableIntermediate;return r(),{flush:function(){return qn(n)||i.flush().then(function(){return o.flush()})},write:function(t){return r(),qn(n)||function e(n,r){return new Promise(function(e,t){r.then(function(t){e(t),n.rejectWrite=c},t),n.rejectWrite=t})}(n,a.write(t))}}}function Wn(t){return E(t).length?function r(t){for(var e=t.length,n=t[--e];e;)n=Fn(t[--e],n);return n}(t):re(t[f])}o.stream.pipe=function vi(t,e){var n=ne(t),r=Wn(E(arguments)),i=Bn(r);try{return n.read(r).then(function(){return i.flush()})}catch(o){return Promise.reject(o)}};function Ln(t){return B(t,"regexp")}M.regexp={"\\":"\\\\","-":"\\-","[":"\\[","]":"\\]","/":"\\/","{":"\\{","}":"\\}","(":"\\(",")":"\\)","*":"\\*","+":"\\+","?":"\\?",".":"\\.","^":"\\^","$":"\\$","|":"\\|"},dt(0,{invalidCSV:"Invalid CSV syntax (bad quote sequence or missing end of file)"}),o.stream.csv={};var Un=";,\t ".split("");Lt({$class:"gpf.stream.csv.Parser",$extend:_n,constructor:function(t){this._readParserOptions(t),this._header?this._parseHeader():this._write=this._writeHeader},_readParserOptions:function(e){var n=this;e&&P(["header","separator","quote","newLine"],function(t){e[t]&&(n["_"+t]=e[t])})},_header:"",_separator:"",_deduceSeparator:function(){var e=this._header;this._separator=function a(t,e,n){for(var r,i=0,o=t.length;i<o&&!r;++i)r=e.call(n,t[i],i,t);return r}(Un,function(t){if(e.includes(t))return t})||Un[f]},_quote:'"',_newLine:"\n",_columns:[],_buildParsingHelpers:function(){this._unescapeDictionary={},this._unescapeDictionary[this._quote+this._quote]=this._quote,this._parser=new RegExp(T("^(?:([^QS][^S]*)|Q((?:[^Q]|QQ)+)Q)(?=$|S)",{Q:Ln(this._quote),S:Ln(this._separator)}))},_parseHeader:function(){this._separator||this._deduceSeparator(),this._columns=this._header.split(this._separator),this._buildParsingHelpers(),this._write=this._writeContent},_writeHeader:function(t){this._header=t,this._parseHeader()},_values:[],_content:"",_unescapeQuoted:function(t){return T(t,this._unescapeDictionary)},_addValue:function(t){t[1]?this._values.push(t[1]):this._values.push(this._unescapeQuoted(t[2]))},_nextValue:function(t){return this._content=this._content.substring(t),Boolean(this._content.length)},_checkAfterValue:function(t){var e=t[f].length;return this._content.charAt(e)?this._nextValue(++e):(delete this._content,!1)},_extractValue:function(){var t=this._parser.exec(this._content);return!!t&&(this._addValue(t),this._checkAfterValue(t))},_checkForValue:function(){return this._content.startsWith(this._separator)?(this._values.push(""),this._nextValue(this._separator.length)):this._extractValue()},_parseValues:function(){for(;this._checkForValue(););},_parseContent:function(){if(this._parseValues(),!this._content)return this._values},_processContent:function(t){return this._content?this._content=this._content+this._newLine+t:(this._values=[],this._content=t),this._parseContent()},_getRecord:function(n){var r={};return P(this._columns,function(t,e){n[e]!==undefined&&(r[t]=n[e])}),r},_writeContent:function(t){var e=this._processContent(t);e&&this._appendToReadBuffer(this._getRecord(e))},write:de(function(t){return this._write(t),Promise.resolve()}),flush:function(){if(this._content){var t=new o.Error.InvalidCSV;return this._setReadError(t),Promise.reject(t)}return this._completeReadBuffer(),Promise.resolve()}});o.attributes={};var Xn=Lt({$class:"gpf.attributes.Attribute",$abstract:!0,_memberName:undefined,getMemberName:function(){return this._memberName},_ClassConstructor:undefined,getClassConstructor:function(){return this._ClassConstructor},_check:function(t,e){},_build:function(t,e,n){}});dt(0,{unknownAttributesSpecification:"Unknown attributes specification",invalidAttributesSpecification:"Invalid attributes specification"});var Vn="attributes",zn="$"+Vn,Zn=new RegExp("^\\[([^\\]]+)\\]$|."),Gn=Pt.prototype._checkMemberName,Hn=Pt.prototype._checkMemberValue,Qn=Pt.prototype._check$Property,Jn=Pt.prototype.check;function Kn(t,e){e._check(t,this)}function Yn(t){return Zn.exec(t)[1]}Object.assign(Pt.prototype,{_hasInheritedMember:function(t){return this._extend&&this._extend.prototype[t]!==undefined},_hasMember:function(t){return this._initialDefinition.hasOwnProperty(t)||this._hasInheritedMember(t)},_checkAttributeMemberExist:function(t){this._hasMember(t)||o.Error.unknownAttributesSpecification()},_checkMemberName:function(t){var e=Yn(t);e?(Gn.call(this,e),this._checkAttributeMemberExist(e)):Gn.call(this,t)},_checkAttributesSpecification:function(t){O(t)||o.Error.invalidAttributesSpecification(),P(t,function(t){t instanceof Xn||o.Error.invalidAttributesSpecification()})},_checkMemberValue:function(t,e){var n=Yn(t);n?(this._checkAttributesSpecification(e),this._addAttributesFor(n,e)):Hn.call(this,t,e)},_check$Property:function(t,e){Vn===t?(this._checkAttributesSpecification(e),this._addAttributesFor(zn,e)):Qn.call(this,t,e)},check:function(){this._attributes={},Jn.call(this),this._forOwnAttributes(Kn)}}),Pt.prototype._allowed$Properties.push(Vn);var tr=Pt.prototype._addMemberToPrototype,er=Pt.prototype._buildPrototype;function nr(t,e,n){wt(e.constructor)._singleton||(e._memberName=t,e._ClassConstructor=n.constructor),e._build(t,this,n)}function rr(t){if(t)return function e(t){return"object"!=typeof t&&o.Error.invalidParameter(),t.constructor}(t);o.Error.invalidParameter()}function ir(t,e){return function r(t,e){var n=wt(t);return n?n.getAttributes(e):{}}("function"==typeof t?t:rr(t),e)}Object.assign(Pt.prototype,{_attributes:{},_addAttributesFor:function(t,e){this._attributes[t]=e},_addMemberToPrototype:function(t,e,n){Yn(e)||tr.call(this,t,e,n)},_buildPrototype:function(t){er.call(this,t),this._forOwnAttributes(nr,t)}}),Object.assign(Pt.prototype,{_collectOwnAttributes:function(o,a){w(this._attributes,function(t,e){var n=function r(t,e){return e?t.filter(function(t){return t instanceof e}):t}(t,a);n.length&&function i(t,e,n){t[e]=(t[e]||[]).concat(n)}(o,e,n)})},_getOwnAttributes:function(){var t={};return this._collectOwnAttributes(t),t},_collectAttributes:function(t,e){this._collectOwnAttributes(t,e),this._extendDefinition&&this._extendDefinition._collectAttributes(t,e)},_forOwnAttributes:function(r,i){var o=this,t=o._getOwnAttributes();w(t,function(t,e){var n;zn!==e&&(n=e),P(t,function(t){r.call(o,n,t,i)})})},getAttributes:function(t){var e={};return this._collectAttributes(e,t),e}}),o.attributes.get=ir;var or={},ar=Lt({$class:"gpf.stream.AbstractOperator",_dataInPromise:undefined,_dataInResolve:c,_dataOutResolve:c,_dataOutReject:c,_waitForData:function(){var e=this;return e._dataInPromise||(e._dataInPromise=new Promise(function(t){e._dataInResolve=t}).then(function(t){return delete e._dataInPromise,delete e._dataInResolve,t})),e._dataInPromise},_writeData:function(t){var n=this;return n._waitForData(),n._dataInResolve(t),new Promise(function(t,e){n._dataOutResolve=t,n._dataOutReject=e}).then(function(t){return delete n._dataOutResolve,delete n._dataOutReject,t},function(t){return delete n._dataOutResolve,delete n._dataOutReject,Promise.reject(t)})},read:pe(function(e){var n=this;return n._waitForData().then(function(t){return or!==t?e.write(t).then(n._dataOutResolve,n._dataOutReject):(n._dataOutResolve(),Promise.resolve())})}),_process:yt(),write:de(function(t){return this._process(t)}),flush:function(){return this._dataInPromise?this._writeData(or):Promise.resolve()}});se(ar);Lt({$class:"gpf.stream.Filter",$extend:ar,constructor:function(t){this._filter=t},_process:function(t){return this._filter(t)?this._writeData(t):Promise.resolve()}}),Lt({$class:"gpf.stream.Map",$extend:ar,constructor:function(t){this._map=t},_process:function(t){return this._writeData(this._map(t))}}),Zt("XmlContentHandler",{"characters":1,"endDocument":0,"endElement":0,"endPrefixMapping":1,"processingInstruction":2,"startDocument":0,"startElement":2,"startPrefixMapping":2});function sr(e,n){return function(t){t.match(e)||o.Error["invalidXml"+n]()}}dt(0,{invalidXmlElementName:"Invalid XML element name",invalidXmlAttributeName:"Invalid XML attribute name",invalidXmlNamespacePrefix:"Invalid XML namespace prefix",invalidXmlUseOfPrefixXmlns:"Invalid use of XML namespace prefix xmlns",invalidXmlUseOfPrefixXml:"Invalid use of XML namespace prefix xml",unknownXmlNamespacePrefix:"Unknown XML namespace prefix"});var ur=new RegExp("^[a-zA-Z_][a-zA-Z0-9_\\-\\.]*$"),cr=new RegExp("^(|[a-z_][a-zA-Z0-9_]*)$"),fr=sr(ur,"ElementName"),lr=sr(ur,"AttributeName"),pr=sr(cr,"NamespacePrefix");function dr(t){"xmlns"===t&&o.Error.invalidXmlUseOfPrefixXmlns()}function hr(t,e){fr(t),pr(e),dr(e)}function _r(t,e){e.includes(t)||o.Error.unknownXmlNamespacePrefix()}function mr(o,a){return function(t,e){var n,r,i=t.indexOf(":");i===u?o(t):(r=t.substring(f,i),n=t.substring(++i),a(n,r,e))}}var vr=mr(fr,function bi(t,e,n){hr(t,e),"xml"===e?o.Error.invalidXmlUseOfPrefixXml():_r(e,n)});var br=mr(lr,function gi(t,e,n){hr(t,e),"xml"===e?function r(t){"space"!==t&&o.Error.invalidXmlUseOfPrefixXml()}(t):_r(e,n)});o.interfaces.promisify=function yi(n){return function(t){var e=Xt(n,t);return e||o.Error.interfaceExpected({name:ot(n)}),function i(n,t,r){var e=r.then;return r.then=function(){return i(n,t,e.apply(r,arguments))},w(t.prototype,function(t,e){r[e]=function(){var t=arguments;return r.then(function(){return Ye(n[e].apply(n,t))})}}),r}(e,n,Promise.resolve())}},dt(0,{invalidXmlWriterState:"Invalid XML Writer state"});Lt({$class:"gpf.xml.Writer",$extend:_n,constructor:function(){this._elements=[],this._nextNamespaces={},this._checkIfStarted=o.Error.invalidXmlWriterState},_elements:[],_nextNamespaces:{},_checkIfElementsExist:function(t){t!==Boolean(this._elements.length)&&o.Error.invalidXmlWriterState()},_checkState:function(t){this._checkIfStarted(),undefined!==t&&this._checkIfElementsExist(t)},_addContentToElement:function(t){t.content||(this._appendToReadBuffer(">"),t.content=!0)},_addContentToLastElement:function(){var t=this._elements[f];if(t)return this._addContentToElement(t)},_writeAttribute:function(t,e){this._appendToReadBuffer(" "+t+'="'),this._appendToReadBuffer(q(e.toString())),this._appendToReadBuffer('"')},_getNamespacePrefixes:function(){return this._elements.reduce(function(t,e){return t.concat(Object.keys(e.namespaces))},[])},_processAttributes:function(t){w(t,function(t,e){br(e,this._getNamespacePrefixes()),this._writeAttribute(e,t)},this)},_processNamespaces:function(t){w(t,function(t,e){e?this._writeAttribute("xmlns:"+e,t):this._writeAttribute("xmlns",t)},this)},characters:function(t){return this._checkState(!0),this._addContentToLastElement(),this._appendToReadBuffer(q(t.toString())),Promise.resolve()},endDocument:function(){return this._checkState(!1),this._checkIfStarted=o.Error.invalidXmlWriterState,this._completeReadBuffer(),Promise.resolve()},endElement:function(){this._checkState(!0);var t=this._elements.shift();return t.content?this._appendToReadBuffer("</"+t.qName+">"):this._appendToReadBuffer("/>"),Promise.resolve()},endPrefixMapping:function(t){return this._checkState(),Promise.resolve()},processingInstruction:function(t,e){return this._checkState(!1),this._appendToReadBuffer("<?"+t+" "+e+"?>\n"),Promise.resolve()},startDocument:function(){return this._checkIfStarted=c,this.startDocument=o.Error.invalidXmlWriterState,this._checkState(!1),Promise.resolve()},startElement:function(t,e){var n=this._nextNamespaces;this._checkState(),this._addContentToLastElement(),this._elements.unshift({qName:t,namespaces:n}),this._nextNamespaces={},vr(t,this._getNamespacePrefixes()),this._appendToReadBuffer("<"+t),e&&this._processAttributes(e),this._processNamespaces(n)},startPrefixMapping:function(t,e){this._checkState(),function n(t){pr(t),dr(t),"xml"===t&&o.Error.invalidXmlUseOfPrefixXml()}(t),this._nextNamespaces[t]&&o.Error.invalidXmlWriterState(),this._nextNamespaces[t]=e}});o.forEachAsync=function(t,e,n){if(O(t))return function u(n,r,i){var o=0,a=n.length;return function s(){if(o===a)return Promise.resolve();var t=o++;try{return Ye(r.call(i,n[t],t,n)).then(s)}catch(e){return Promise.reject(e)}}()}(t,e,n);o.Error.invalidParameter()},dt(0,{invalidSerialName:"Invalid serial name",invalidSerialType:"Invalid serial type",invalidSerialRequired:"Invalid serial required",invalidSerialReadOnly:"Invalid serial readOnly"}),o.serial={};var gr={STRING:"string",INTEGER:"integer",DATETIME:"datetime"};o.serial.types={string:gr.STRING,integer:gr.INTEGER,datetime:gr.DATETIME};var yr=new RegExp("^[a-z][a-z0-9_]*$","i");function Er(t){!function e(t){"string"!=typeof t&&o.Error.invalidSerialName()}(t.name),function n(t){t.match(yr)||o.Error.invalidSerialName()}(t.name)}var wr=Object.keys(gr).map(function(t){return gr[t]});function xr(t){undefined===t.type?t.type=gr.STRING:function e(t){wr.includes(t)||o.Error.invalidSerialType()}(t.type)}function Or(t,e){"boolean"!=typeof t&&e()}function Pr(t){var e=Object.assign(t);return[Er,xr,function n(t){undefined===t.required?t.required=!1:Or(t.required,o.Error.invalidSerialRequired)},function r(t){undefined!==t.readOnly&&Or(t.readOnly,o.Error.invalidSerialReadOnly)}].forEach(function(t){t(e)}),e}function Sr(t){t&&o.Error.classAttributeOnly()}function Ir(t,e){var n=t._extend;n!==e&&function r(t,e){t instanceof e||o.Error.restrictedBaseClassAttribute()}(n.prototype,e)}function kr(t,e,n){E(function i(t,e,n){var r=e.getAttributes(n);return t?r[t]:r[zn]}(t,e,n)).length&&o.Error.uniqueAttributeUsedTwice()}dt(0,{classAttributeOnly:"Class attribute only",memberAttributeOnly:"Member attribute only",restrictedBaseClassAttribute:"Restricted base class attribute",uniqueAttributeUsedTwice:"Unique attribute used twice"});var Nr=Lt({$class:"gpf.attributes.AttributeAttribute",$extend:Xn,$abstract:!0,_check:function(t,e){Sr(t),Ir(e,Xn),kr(t,e,this.constructor)},_targetCheck:yt(),_overrideTargetCheck:function(t){var n=this,r=t._check;t._check=function(t,e){n._targetCheck(t,e,this),r.call(this,t,e)}},_build:function(t,e,n){this._overrideTargetCheck(n)}}),Cr=Lt({$class:"gpf.attributes.ClassAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(t,e){Sr(t)}});o.attributes.ClassAttribute=Cr;var jr=Lt({$class:"gpf.attributes.MemberAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(t,e){!function n(t){t||o.Error.memberAttributeOnly()}(t)}});o.attributes.MemberAttribute=jr;var $r=Lt({$class:"gpf.attributes.AttributeForInstanceOf",$extend:Nr,_BaseClass:null,constructor:function(t){"function"!=typeof t&&o.Error.invalidParameter(),this._BaseClass=t},_targetCheck:function(t,e){Ir(e,this._BaseClass)}});o.attributes.AttributeForInstanceOf=$r;var Ar=Lt({$class:"gpf.attributes.UniqueAttribute",$extend:Nr,$singleton:!0,_targetCheck:function(t,e,n){kr(t,e,n.constructor)}});o.attributes.UniqueAttribute=Ar;var Rr,Dr=Lt({$class:"gpf.attributes.Serializable",$extend:Xn,$attributes:[new jr,new Ar],_property:null,constructor:function(t){this._property=t},_check:function(t,e){this._property=Pr(Object.assign({name:function n(t){return t.startsWith("_")?t.substring(1):t}(t)},this._property))},getProperty:function(){return Object.create(this._property)}});function Tr(t){var e=ir(t,Dr),n={};return w(e,function(t,e){n[e]=t[f].getProperty()}),n}function Mr(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return!n.writable}function Br(n){var t=Tr(n);return w(t,function(t,e){t.readOnly===undefined&&(t.readOnly=Rr(n,e))}),t}function qr(t,e){if(!e.readOnly)return t}function Fr(n,t,i){var o={};return w(t,function(t,e){!function r(t,e,n){n!==undefined&&(t[e]=n)}(o,t.name,i.call(n,n[e],t,e))}),o}function Wr(n,i,o){var t=Br(n);w(t,function(t,e){i.hasOwnProperty(t.name)&&function r(t,e,n){n!==undefined&&(t[e]=n)}(n,e,o.call(n,i[t.name],t,e))})}function Lr(t,e,n){var r=function i(t){return t||zn}(e);t._attributes[r]=(t._attributes[r]||[]).concat(n),function o(e,n,t){t.forEach(function(t){Kn.call(e,n,t),nr(n,t,e._instanceBuilder.prototype)})}(t,e,n)}Rr=Object.getOwnPropertyDescriptor?function(t,e){for(var n,r=t;r!==Object&&n===undefined;)n=Mr(r,e),r=Object.getPrototypeOf(r);return n||!1}:function(){return!1},o.serial.get=Tr,o.serial.toRaw=function(t,e){return"function"==typeof t&&o.Error.invalidParameter(),function n(t,e){return Fr(t,Br(t),e||qr)}(t,e)},o.serial.fromRaw=function(t,e,n){return"function"==typeof t&&o.Error.invalidParameter(),function r(t,e,n){Wr(t,e,n||qr)}(t,e,n),t},dt(0,{es6classOnly:"ES6 class only"}),o.attributes.decorator=function Ei(){var n=g(arguments);return function(t,e){ht(t)||o.Error.es6classOnly(),Lr(kt(t),e,n)}}});