!function(t){"use strict";if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else if("undefined"!=typeof module&&module.exports)t(module.exports);else{var e=Function("return this;")(),n={};t(n),e.gpf=n}}(function(o){"use strict";function c(){}var i,u,a,s,n,r,f=-1,l=0,t="browser",e="nashorn",h="nodejs",p="phantomjs",d="rhino",_="unknown",m="wscript",v=_,g=Function,b=new g("return this")();function y(e){return{log:function(t){e("    "+t)},info:function(t){e("[?] "+t)},warn:function(t){e("/!\\ "+t)},error:function(t){e("(X) "+t)}}}function w(){"\\"===String(java.lang.System.getProperty("file.separator")),b.console=y(print),function(t){java.lang.System.exit(t)}}function E(t,e,n){return Array.prototype.slice.call(t,e,n||t.length)}"undefined"!=typeof WScript?v=m:"undefined"!=typeof print&&"undefined"!=typeof java?v="undefined"==typeof readFile?e:d:"undefined"!=typeof phantom&&phantom.version&&!document.currentScript?(v=p,b=window):"undefined"!=typeof module&&module.exports?(v=h,b=global):"undefined"!=typeof window&&(v=t,b=window),o.version=function(){return"0.2.9"},t===v&&(function(t){window.location="https://arnaudbuchholz.github.io/gpf/exit.html?"+t},window,document),o.node={},h===v&&(n=require("path"),u=require("fs"),a=require("http"),s=require("https"),r=require("url"),"\\"===n.sep),p===v&&("\\"===require("fs").separator,function(t){phantom.exit(t)},window,document,u=require("fs")),o.java={},o.rhino=o.java,d===v&&w(),e===v&&w(),o.wscript={},m===v&&(!0,i=new ActiveXObject("Scripting.FileSystemObject"),b.console=y(function Io(t){WScript.Echo(t)})),o.hosts={browser:t,nashorn:e,nodejs:h,phantomjs:p,rhino:d,unknown:_,wscript:m},o.host=function(){return v};var x=1;function S(t){return E(t,x)}var O,P=Array.isArray;function j(t){return P(t)||function e(t){return!!t&&Math.floor(t.length)===t.length}(t)}function C(t,e,n){for(var r=0,i=t.length;r<i;++r)e.call(n,t[r],r,t)}function I(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}o.isArrayLike=j,O=m===v?function No(e,n,r){I(e,n,r),["constructor","toString"].forEach(function(t){e.hasOwnProperty(t)&&n.call(r,e[t],t,e)})}:I,o.forEach=function(t,e,n){j(t)?C(t,e,n):O(t,e,n)};var N=!0;function k(t,e){t||(!function n(t){N&&console.warn("ASSERTION FAILED: "+t)}(e),o.Error.assertionFailed({message:e}))}o.assert=function ko(t,e){undefined===e&&ko(!1,"Assertion with no message"),k(t,e)},o.asserts=function Ao(t){O(t,k)},o.preventAssertWarnings=function(t){N=!t};var A=255,$="abcdefghijklmnopqrstuvwxyz",R="ABCDEFGHIJKLMNOPQRSTUVWXYZ",T="0123456789",D=/\/\/.*$|\/\*(?:[^\*]*|\*[^\/]*)\*\//gm;function F(t,e){return function r(t,e){var n;return t.length?((n=[].concat(t)).push(e),g.apply(null,n)):g(e)}(t,e)}function M(t,e){return undefined===e?F([],t):F(t,e)}function q(t,e){var n=t;return O(e,function(t,e){n=n.split(e).join(t)}),n}o.web={};var B={};function W(t,e){return function n(t,e){return"javascript"===e?'"'+t+'"':t}(q(t,B[e]),e)}var U="javascript";function L(t){return W(t,U)}B[U]={"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"};function X(t){return W(t,"xml")}function V(n,t){O(t,function(t,e){n[e]===undefined&&(n[e]=t)})}function z(t,e){var n=e.on;!function r(t,e){e&&V(t.prototype,e)}(n,e.methods),function i(t,e){e&&V(t,e)}(n,e.statics)}function H(t,e){b[t]||(b[t]=e)}B.xml={"&":"&amp;","<":"&lt;",">":"&gt;"};var Z=1;function G(t,e){var n=function r(t){return t[Z]}(e);return undefined!==n?t.bind(n):t}function Q(t,e){for(var n=t.length,r=0;r<n;)t.hasOwnProperty(r)&&e(t[r],r,t),++r}function J(t,e,n){for(var r=t.length,i=n;i<r;){if(t.hasOwnProperty(i)&&!0!==e(t[i],i,t))return!1;++i}return!0}function Y(t,e){return J(t,e,l)}function K(t,e,n){var r=function o(t){var e=[];return"string"==typeof t?function i(t,e){for(var n=e.length,r=0;r<n;++r)t.push(e.charAt(r))}(e,t):C(t,function(t){e.push(t)}),e}(t);return"function"==typeof e&&(r=r.map(e,n)),r}function tt(t){var e=t[1];return undefined===e?l:e}function et(t){return t?new Array(t).join(" ").split(" ").map(function(t,e){return"p"+e}):[]}function nt(t){var e=et(t);return M(e,function n(r){var i=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return r.forEach(function(t,e){var n=1;n+=e,i.push("if ("+n+" === l) { return new C("+r.slice(l,n).join(", ")+");}")}),i.join("\n")}(e))}z(0,{on:Array,methods:{every:function(t){return Y(this,G(t,arguments))},filter:function(t){var r=[],i=G(t,arguments);return Q(this,function(t,e,n){i(t,e,n)&&r.push(t)}),r},forEach:function(t){Q(this,G(t,arguments))},includes:function(e){return!J(this,function(t){return t!==e},tt(arguments))},indexOf:function(n){var r=-1;return J(this,function(t,e){return t!==n||(r=e,!1)},tt(arguments)),r},map:function(t){var r=new Array(this.length),i=G(t,arguments);return Q(this,function(t,e,n){r[e]=i(t,e,n)}),r},some:function(t){var r=G(t,arguments);return!Y(this,function(t,e,n){return!r(t,e,n)})},reduce:function(t){var e,n=arguments[1],r=this.length,i=0;for(e=undefined===n?this[i++]:n;i<r;++i)e=t(e,this[i],i,this);return e}},statics:{from:function(t){return K.apply(this,arguments)},isArray:function(t){return"[object Array]"==={}.toString.call(t)}}}),P=Array.isArray;var rt=nt(10);function it(t,e){this[e]=t}z(0,{on:Function,methods:{bind:function(t){var e=S(arguments);return M(["thisArg","prependArgs","_gpfArraySlice"],function n(t){return"var me = this;\nreturn function ("+et(t).join(", ")+") {\n    var args = _gpfArraySlice(arguments);\n    return me.apply(thisArg, prependArgs.concat(args));\n};"}(Math.max(this.length-e.length,0))).call(this,t,e,E)}}}),z(0,{on:Object,statics:{assign:function(e,t){return S(arguments).forEach(function(t){O(t,it,e)}),e},create:function(){function e(t){this.constructor=t,this.__proto__=e.prototype}function n(){}return function(t){return e.prototype=t,n.prototype=new e(n),new n}}(),getPrototypeOf:function(t){return t.__proto__?t.__proto__:t.constructor.prototype},keys:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},values:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(t[e]);return n}}});function ot(t,e){var n=t[1];return n||e}var ut;function at(t,e,n){return t<e?new Array(e-t+1).join(n):""}z(0,{on:String,methods:{endsWith:function(t){var e=Math.min(ot(arguments,this.length),this.length);return this.substring(e-t.length,e)===t},includes:function(t){var e=ot(arguments,l);return this.indexOf(t,e)!==f},padEnd:function(t){var e=ot(arguments," ");return this+at(this.length,t,e)},padStart:function(t){var e=ot(arguments," ");return at(this.length,t,e)+this},startsWith:function(t){var e=ot(arguments,l);return this.substring(e,e+t.length)===t},trim:(ut=/^[\s\ufeff\xa0]+|[\s\ufeff\xa0]+$/g,function(){return this.replace(ut,"")})}});var st=1,ct=2,ft=3;function lt(t,e){return t.toString().padStart(e,"0")}function ht(t){return t.getUTCFullYear()+"-"+lt(t.getUTCMonth()+st,ct)+"-"+lt(t.getUTCDate(),ct)+"T"+lt(t.getUTCHours(),ct)+":"+lt(t.getUTCMinutes(),ct)+":"+lt(t.getUTCSeconds(),ct)+"."+lt(t.getUTCMilliseconds(),ft)+"Z"}z(0,{on:Date,methods:{toISOString:function(){return ht(this)}},statics:{now:function(){return(new Date).getTime()}}});var pt=/^([0-9][0-9][0-9][0-9])\-([0-9][0-9])\-([0-9][0-9])(?:T([0-9][0-9])\:([0-9][0-9])\:([0-9][0-9])(?:\.([0-9][0-9][0-9])Z)?)?$/,dt=1,_t=11,mt=2,vt=31,gt=3,bt=23,yt=4,wt=59,Et=5,xt=59;function St(t){if(function e(t){return t[dt]<=_t&&t[mt]<=vt}(t)&&function n(t){return t[gt]<=bt&&t[yt]<=wt&&t[Et]<=xt}(t))return t}var Ot=0;var Pt=1;function jt(t){if("string"==typeof t)return pt.lastIndex=0,function n(t){var e;if(t)return--(e=function u(t){for(var e,n,r=[],i=t.length,o=1;o<i;++o)e=r,(n=t[o])?e.push(parseInt(n,10)):e.push(Ot);return r}(t))[Pt],St(e)}(pt.exec(t))}var Ct=b.Date;function It(){var t=jt(arguments[l]);return t?new Ct(Ct.UTC.apply(Ct.UTC,t)):function n(t,e){return e.length>rt.length&&(rt=nt(e.length)),rt.apply(t,e)}(Ct,arguments)}var Nt,kt="2003-01-22T22:45:34.075Z",At="2003-01-22";function $t(t,e,n){var r=!0;function i(e){return function(t){r&&(r=!1,e(t))}}try{t(i(e),i(n))}catch(e_){r&&(r=!1,n(e_))}}function Rt(){var e=this;e._handlers.forEach(function(t){t.process(e)}),e._handlers=[]}function Tt(t){this._state=!1,this._value=t,Rt.call(this)}function Dt(t){if(t&&["object","function"].includes(typeof t))return function n(t,e){if("function"==typeof e)return $t(e.bind(t),Nt.bind(this),Tt.bind(this)),!0}.call(this,t,t.then)}!function $o(){var t,e;!function n(){C(["prototype","UTC","parse","now"],function(t){It[t]=Ct[t]})}();try{t=ht(new Date(kt)),e=ht(new Date(At))}catch(e_){}t===kt&&e===At+"T00:00:00.000Z"||(b.Date=It)}(),Nt=function(t){var e=this;try{if(Dt.call(e,t))return;e._state=!0,e._value=t,Rt.call(e)}catch(e_){Tt.call(e,e_)}};var Ft=o.Promise=function(t){$t(t,Nt.bind(this),Tt.bind(this))};function Mt(){}Mt.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(t){if(null===t._state)return t.hasOwnProperty("_handlers")||(t._handlers=[]),void t._handlers.push(this);setTimeout(function a(t){var e,n=this,r=function i(t,e){return e._state?t.onFulfilled:t.onRejected}(n,t);if(null===r)return function o(t,e){e._state?t.resolve(e._value):t.reject(e._value)}(n,t);try{e=r(t._value)}catch(e_){return void n.reject(e_)}n.resolve(e)}.bind(this,t),0)}},Ft.prototype={_state:null,_value:null,_handlers:[],then:function(r,i){var o=this;return new Ft(function(t,e){var n=new Mt;undefined!==r&&(n.onFulfilled=r),undefined!==i&&(n.onRejected=i),n.resolve=t,n.reject=e,n.process(o)})},"catch":function(t){return this.then(null,t)}},Ft.resolve=function(e){return new Ft(function(t){t(e)})},Ft.reject=function(n){return new Ft(function(t,e){e(n)})},Ft.all=function(n){return n.length?new Ft(function(t,e){n.forEach(function o(t,e){var n=this;try{if(t instanceof Ft)return void t.then(function(t){o.call(n,t,e)},n.reject);!function r(t,e,n){t.promises[e]=n,--t.remaining||t.resolve(t.promises)}(n,e,t)}catch(e_){n.reject(e_)}}.bind({resolve:t,reject:e,remaining:n.length,promises:n}))}):Ft.resolve([])},Ft.race=function(t){return new Ft(function(e,n){t.forEach(function(t){t.then(e,n)})})},H("Promise",Ft);var qt={};function Bt(t){java.lang.Thread.sleep(t)}qt[m]=function(t){WScript.Sleep(t)},qt[d]=Bt,qt[e]=Bt;var Wt,Ut=[],Lt=0,Xt=qt[v]||c;function Vt(t,e){return t.dt===e.dt?t.id-e.id:t.dt-e.dt}function zt(t){return t.toString()}function Ht(t,e){return e?"\n"+e+t.join(",\n"+e)+"\n":t.join(",")}function Zt(t,e,n){return null===t?"null":function a(t,r,i){var o,u=[];return o=i?": ":":",O(t,function(t,e){var n=r(e,t);n=Wt[typeof n](t,r,i),undefined!==n&&u.push(L(e)+o+n)}),"{"+Ht(u,i)+"}"}(t,e,n)}o.handleTimeout=function Ro(){for(var t,e;Ut.length;){for(t=Ut.shift(),e=(new Date).getTime();t.dt>e;)Xt(t.dt-e),e=(new Date).getTime();t.cb()}},H("setTimeout",function To(t,e){var n={id:++Lt,dt:(new Date).getTime()+e,cb:t};return Ut.push(n),Ut.sort(Vt),Lt}),H("clearTimeout",function Do(e){Ut=Ut.filter(function(t){return t.id!==e})}),Wt={undefined:c,"function":c,number:zt,"boolean":zt,string:function(t){return L(t)},object:function(t,e,n){return P(t)?function u(t,r,i){var o=[];return C(t,function(t,e){var n=r(e.toString(),t);n=undefined===n?"null":Wt[typeof n](n,r,i),o.push(n)}),"["+Ht(o,i)+"]"}(t,e,n):Zt(t,e,n)}};var Gt=10;H("JSON",{parse:function Fo(t,e){var n=M("return "+t)();return e?function i(n,t,r){return"object"==typeof n&&O(n,function(t,e){n[e]=i(t,e,r)}),r(t,n)}(n,"",e):n},stringify:function Mo(t,e,n){return Wt[typeof t](t,function r(n){return P(n)?function(t,e){if(n.includes(t))return e}:function e(t){return"function"==typeof t?t:function(t,e){return e}}(n)}(e),function i(t){return"number"==typeof t?"".padEnd(Math.min(t,Gt)," "):t||""}(n))}});var Qt=R+$+T+"+/=",Jt=63,Yt=18,Kt=12,te=6,ee=8,ne=16,re=64,ie=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function oe(t,e,n){var r=String.fromCharCode(t>>ne&A);return e!==re?r+function i(t,e){return e===re?String.fromCharCode(t>>ee&A):String.fromCharCode(t>>ee&A,t&A)}(t,n):r}function ue(t,e){return Qt.indexOf(t.charAt(e))}function ae(t,e){var n=t.charCodeAt(e);if(A<n)throw new TypeError("The string to be encoded contains characters outside of the Latin1 range.");return n}function se(t,e,n){return Qt.charAt(t>>e&n)}function ce(t,e){if(undefined!==t)return t[e]}function fe(t,e){var n=t[e];return undefined===n&&(n=t[e]={}),n}function le(t,e){return function r(t,e){var n;return("gpf"===t[l]?(n=o,S(t)):(n=b,t)).reduce(e,n)}(t,e?fe:ce)}H("atob",function qo(t){var e,n,r,i,o,u=function f(t){var e=t.replace(/[\t\n\f\r ]+/g,"");if(!ie.test(e))throw new TypeError("The string to be decoded is not correctly encoded.");return e}(t),a=u.length,s=0,c="";for(u+="==";s<a;s+=4)c+=(o=i=r=n=void 0,o=s,n=ue(e=u,o++)<<Yt|ue(e,o++)<<Kt,r=ue(e,o++),i=ue(e,o++),oe(n|=r<<te|i,r,i));return c}),H("btoa",function Bo(t){for(var e,n,r,i,o,u,a=0,s="",c=t.length%3;a<t.length;a+=3)s+=(u=o=i=r=void 0,u=a,r=ae(n=t,u++),i=ae(n,u++),o=ae(n,u++),se(e=r<<ne|i<<ee|o,Yt,Jt)+se(e,Kt,Jt)+se(e,te,Jt)+se(e,l,Jt));return c?s.slice(l,c-3)+"===".substring(c):s}),o.context=function(t){return undefined===t?b:le(t.split("."))};function he(t){return t.trim()}B.html=Object.assign({},B.xml,{"\xe0":"&agrave;","\xe1":"&aacute;","\xe8":"&egrave;","\xe9":"&eacute;","\xea":"&ecirc;"});var pe,de="function";function _e(t,e){var n=c.toString.call(t).replace(D,"");!function i(t,e,n){if(t.length){var r=/\(\s*(\w+(?:\s*,\s*\w+)*)\s*\)/.exec(e);n.parameters=r[1].split(",").map(he)}}(t,n,e),function r(t,e){var n=he(/{((?:.*\r?\n)*.*)}/.exec(t)[1]);n&&(e.body=n)}(n,e)}function me(t){var e={};return function r(t,e){var n=pe(t);n&&(e.name=n)}(t,e),_e(t,e),e}function ve(t,e){return function i(t,e){var n=Object.keys(e),r=n.map(function(t){return e[t]});return M(n,"return "+t).apply(null,r)}(function o(t){return"function"+function e(t){return t.name?" "+t.name:""}(t)+"("+function n(t){return t.parameters?t.parameters.join(", "):""}(t)+') {\n\t"use strict"\n'+function r(t){return t.body?t.body.toString():""}(t)+"\n}"}(t),e||{})}pe="functionName"!==M("return function functionName () {};")().name?function Wo(t){var e=c.toString.call(t),n=e.indexOf(de)+de.length,r=e.indexOf("(",n);return e.substring(n,r).replace(D,"").trim()}:function(t){return t.name};var ge=o.Error=function(){};function be(t,e,n){var r=function o(t){return t.charAt(l).toUpperCase()+t.substring(1)}(e),i=ve({name:r,parameters:["context"],body:"this._buildMessage(context);"});return i.prototype=new ge,Object.assign(i.prototype,{code:t,name:e,message:n}),i.prototype.constructor=i,ge[r]=i,function(t){throw new i(t)}}ge.prototype=new Error,Object.assign(ge.prototype,{constructor:ge,code:0,name:"Error",message:"",_buildMessage:function(t){var n;t&&(n={},O(t,function(t,e){n["{"+e+"}"]=t.toString()}),this.message=q(this.message,n))}});var ye=0;function we(t,e){O(e,function(t,e){var n=++ye;o.Error["CODE_"+e.toUpperCase()]=n,o.Error[e]=function i(t,e,n){var r=be(t,e,n);return r.CODE=t,r.NAME=e,r.MESSAGE=n,r}(n,e,t)})}function Ee(t){return"function"==typeof t&&function e(t){return t.toString().startsWith("class")}(t)}we(0,{notImplemented:"Not implemented",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),o.isClass=Ee,we(0,{invalidEntityType:"Invalid entity type"});var xe={};function Se(t){var e,n=function i(n){var r;return O(xe,function(t,e){n["$"+e]&&(r=t)}),r}(t);return n||(n=function r(t){var e=xe[t.$type];return undefined===e&&o.Error.invalidEntityType(),e}(t)),(e=new n(t)).check(),e}function Oe(t,e){return t.exec(e)}function Pe(t,e){for(var n=[],r=function i(t,e){return t.lastIndex=0,Oe(t,e)}(t,e);r;)n.push(r),r=Oe(t,e);return n}function je(t){this._initialDefinition=t}function Ce(t){return ve({parameters:et(t),body:"_throw_();"},{_throw_:o.Error.abstractMethod})}je.prototype={constructor:je,_initialDefinition:{}},we(0,{abstractMethod:"Abstract method"});var Ie=[];function Ne(e){return Ie.filter(function(t){return t.getInstanceBuilder()===e})[l]}function ke(t){Ie.push(t)}we(0,{invalidEntity$Property:"Invalid entity $ property",missingEntityName:"Missing entity name",invalidEntityNamespace:"Invalid entity namespace"});function Ae(t,e){e.startsWith("$")?this._check$Property(e.substring("$".length),t):this._checkProperty(e,t)}function $e(t){je.call(this,t)}function Re(t,e){$e.call(this,e),this._instanceBuilder=t}function Te(t,e){var n=new Re(t,e);return ke(n),n.check(),n}function De(t){var e=Ne(t);return e||Te(t,function n(t){var e=Object.getPrototypeOf(t.prototype);return{$name:pe(t),$extend:e.constructor}}(t))}Object.assign(je.prototype,{_type:"",_allowed$Properties:"type,name,namespace".split(","),_check$Property:function(t,e){t!==this._type&&function n(t,e){e.includes(t)||o.Error.invalidEntity$Property()}(t,this._allowed$Properties)},_throwInvalidProperty:Ce(),_reMemberName:/.*/,_checkMemberName:function(t){this._reMemberName.exec(t)||this._throwInvalidProperty()},_reservedNames:"super,class,public,private,protected,static,mixin".split(","),_checkReservedMemberName:function(t){this._reservedNames.includes(t)&&this._throwInvalidProperty()},_checkMemberValue:M(["name","value"]," "),_checkProperty:function(t,e){this._checkMemberName(t),this._checkReservedMemberName(t),this._checkMemberValue(t,e)},_checkProperties:function(){O(this._initialDefinition,Ae,this)},_name:"",_readName:function(){var t=this._initialDefinition;this._name=t["$"+this._type]||t.$name},_checkNameIsNotEmpty:function(){this._name||o.Error.missingEntityName()},_throwInvalidName:Ce(),_reName:/.*/,_checkName:function(){this._reName.exec(this._name)||this._throwInvalidName()},_namespace:"",_extractRelativeNamespaceFromName:function(){var t=/(.*)\.([^\.]+)$/.exec(this._name);if(t)return this._name=t[2],t[1]},_readNamespace:function(){var t=[this._initialDefinition.$namespace,this._extractRelativeNamespaceFromName()].filter(function(t){return t});t.length&&(this._namespace=t.join("."))},_checkNamespace:function(){/^(:?[a-z_$][a-zA-Z0-9]+(:?\.[a-z_$][a-zA-Z0-9]+)*)?$/.exec(this._namespace)||o.Error.invalidEntityNamespace()},check:function(){this._checkProperties(),this._readName(),this._checkNameIsNotEmpty(),this._readNamespace(),this._checkName(),this._checkNamespace()}}),Object.assign(je.prototype,{_instanceBuilder:null,getInstanceBuilder:function(){return this._instanceBuilder||this._setInstanceBuilder(this._build()),this._instanceBuilder},_setInstanceBuilder:function(t){this._namespace&&(le(this._namespace.split("."),!0)[this._name]=t),this._instanceBuilder=t,ke(this)},_build:c}),$e.prototype=Object.create(je.prototype),Object.assign($e.prototype,{constructor:$e,_type:"class"}),xe["class"]=$e,Re.prototype=Object.create($e.prototype),Object.assign(Re.prototype,{_checkNameIsNotEmpty:c,_checkName:c}),we(0,{invalidClassName:"Invalid class name",invalidClassProperty:"Invalid class property",invalidClassExtend:"Invalid class extend",invalidClassConstructor:"Invalid class constructor",invalidClassOverride:"Invalid class override"}),Object.assign($e.prototype,{_allowed$Properties:je.prototype._allowed$Properties.concat(["extend"]),_throwInvalidProperty:o.Error.invalidClassProperty,_reMemberName:/^[a-z_][a-zA-Z0-9]*$/,_checkConstructorMember:function(t){"function"!=typeof t&&o.Error.invalidClassConstructor()},_checkOverridenMember:function(t,e){typeof t!=typeof e&&o.Error.invalidClassOverride()},_checkIfOverriddenMember:function(t,e){var n=this._extend.prototype[t];undefined!==n&&this._checkOverridenMember(e,n)},_checkMemberValue:function(t,e){"constructor"===t?this._checkConstructorMember(e):this._checkIfOverriddenMember(t,e)},_reName:/^[A-Z_$][a-zA-Z0-9]*$/,_throwInvalidName:o.Error.invalidClassName,_extend:Object,_extendDefinition:undefined,_readExtend:function(){var t=function e(t){return"string"==typeof t?le(t.split(".")):t}(this._initialDefinition.$extend);t&&(this._extend=t)},_checkExtendIsNotAnInterface:function(){c.toString.call(this._extend).includes("interfaceConstructorFunction")&&o.Error.invalidClassExtend()},_checkExtend:function(){"function"!=typeof this._extend&&o.Error.invalidClassExtend(),this._checkExtendIsNotAnInterface()},check:function(){this._readExtend(),this._checkExtend(),this._extendDefinition=De(this._extend),je.prototype.check.call(this)}}),we(0,{classConstructorFunction:"This is a class constructor function, use with new"}),Object.assign($e.prototype,{_resolvedConstructor:c});var Fe=[];function Me(t){Fe.push(t)}function qe(n){var r=function i(t){return Ee(t._extend)?{instance:"that",body:function e(t){return t._extend===t._resolvedConstructor?"var that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n":'var that,\n    $super = function () {\n        that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n    },\n    hasOwnProperty = function (name) {\n        return !!that && that.hasOwnProperty(name);\n    },\n    proxy = new Proxy({}, {\n        get: function (obj, property) {\n            if (property === "hasOwnProperty") {\n              return hasOwnProperty;\n            }\n            if (!that && property === "$super") {\n              return $super;\n            }\n            return that[property];\n        },\n        set: function (obj, property, value) {\n            if (property !== "$super") {\n                that[property] = value;\n            }\n            return true;\n        }\n    });\n_classDef_._resolvedConstructor.apply(proxy, arguments);\n'}(t)}:{instance:"this",body:"_classDef_._resolvedConstructor.apply(this, arguments);"}}(n),t="if (!(this instanceof _classDef_._instanceBuilder)) gpf.Error.classConstructorFunction();\n"+Fe.reduce(function(t,e){return e(n,t,r.instance)},r.body);return"this"!==r.instance&&(t+="\nreturn "+r.instance+";"),t}function Be(t){return ve(function e(t){return{name:t._name,parameters:me(t._resolvedConstructor).parameters,body:qe(t)}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function We(){o.Error.invalidClassSuper()}function Ue(t){return function n(t){var e=me(t);return e.body="return _superMethod_.apply(this, arguments);",ve(e,{_superMethod_:t})}("function"==typeof t?t:We)}function Le(t,e,n){return"function"!=typeof n&&o.Error.invalidClassSuperMember(),function i(t,e,n){var r=me(n);return r.body="return _superMethod_.apply(this === _$super_ ? _that_ : this, arguments);",ve(r,{_that_:t,_$super_:e,_superMethod_:n})}(t,e,n)}we(0,{invalidClassSuper:"Invalid class super",invalidClassSuperMember:"Invalid class super member"});var Xe=/\.\$super\.(\w+)\b/g;function Ve(t,e){!function n(t){Object.assign(t,{_extend:null,_extendDefinition:null})}(Te(t,function r(t){return{$name:t}}(e)))}Object.assign($e.prototype,{_get$Super:function(e,t,n){var r=this._extend.prototype,i=Ue(r[t]);return n.forEach(function(t){i[t]=Le(e,i,r[t])}),i},_superifiedBody:'var _super_;\nif (this.hasOwnProperty("$super")) {\n    _super_ = this.$super;\n}\nthis.$super = _classDef_._get$Super(this, _methodName_, _superMembers_);\ntry{\n    var _result_ = _method_.apply(this, arguments);\n} finally {\n    if (undefined === _super_) {\n        delete this.$super;\n    } else {\n        this.$super = _super_;\n    }\n}\nreturn _result_;',_getSuperifiedContext:function(t,e,n){return{_method_:t,_methodName_:e,_superMembers_:n,_classDef_:this}},_createSuperified:function(t,e,n){var r=me(t);return r.body=this._superifiedBody,ve(r,this._getSuperifiedContext(t,e,n))},_superify:function(t,e){return /\.\$super\b/.exec(t)?this._createSuperified(t,e,function n(t){return Pe(Xe,t).map(function(t){return t[1]})}(t)):t}}),Object.assign($e.prototype,{_build:function(){var t,e;return this._resolveConstructor(),t=Be(this),e=Object.create(this._extend.prototype),(t.prototype=e).constructor=t,this._buildPrototype(e),t},_addMethodToPrototype:function(t,e,n){t[e]=this._superify(n,e)},_addMemberToPrototype:function(t,e,n){"function"==typeof n?this._addMethodToPrototype(t,e,n):t[e]=n},_buildPrototype:function(n){O(this._initialDefinition,function(t,e){e.startsWith("$")||"constructor"===e||this._addMemberToPrototype(n,e,t)},this)},_setResolvedConstructorToInherited:function(){this._extend!==Object&&(this._resolvedConstructor=this._extend)},_resolveConstructor:function(){this._initialDefinition.hasOwnProperty("constructor")?this._resolvedConstructor=this._superify(this._initialDefinition.constructor,"constructor"):this._setResolvedConstructorToInherited()}}),Ve(Object,"Object"),O({"Array":Array,"Date":Date,"Error":Error,"Function":Function,"Number":Number,"RegExp":RegExp,"String":String},Ve),we(0,{invalidClass$AbstractSpecification:"Invalid class $abstract specification",abstractClass:"Abstract Class"}),$e.prototype._allowed$Properties.push("abstract");var ze=$e.prototype._check$Property;Object.assign($e.prototype,{_abstract:!1,_check$abstract:function(t){!0!==t&&o.Error.invalidClass$AbstractSpecification()},_check$Property:function(t,e){"abstract"===t?(this._check$abstract(e),this._abstract=!0):ze.call(this,t,e)}}),Me(function(t,e,n){return t._abstract?"if (this.constructor === _classDef_._instanceBuilder) gpf.Error.abstractClass();\n"+e:e}),we(0,{invalidClass$SingletonSpecification:"Invalid class $singleton specification"}),$e.prototype._allowed$Properties.push("singleton");var He=$e.prototype._check$Property;function Ze(t){je.call(this,t)}function Ge(t){return ve(function e(t){return{name:t._name,body:"gpf.Error.interfaceConstructorFunction();"}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function Qe(t){return Se(t).getInstanceBuilder()}function Je(t,r){var i=!0;return O(t.prototype,function(t,e){"constructor"!==e&&function n(t,e){return"function"!=typeof e||t.length!==e.length}(t,r[e])&&(i=!1)}),i}function Ye(t,e){return Je(t,e)?e:function r(t,e){if(Je(o.interfaces.IUnknown,e))return function n(t,e){return e.queryInterface(t)}(t,e)}(t,e)}function Ke(t){return"string"==typeof t?le(t.split(".")):t}Object.assign($e.prototype,{_singleton:!1,_singletonInstance:null,_check$singleton:function(t){!0!==t&&o.Error.invalidClass$SingletonSpecification()},_check$Property:function(t,e){"singleton"===t?(this._check$singleton(e),this._singleton=!0):He.call(this,t,e)}}),Me(function(t,e,n){return t._singleton?"if (!_classDef_._singletonInstance) {\n"+e+"\n_classDef_._singletonInstance = "+n+";\n}\nreturn _classDef_._singletonInstance;":e}),Ze.prototype=Object.create(je.prototype),Object.assign(Ze.prototype,{constructor:Ze,_type:"interface"}),xe["interface"]=Ze,we(0,{invalidInterfaceName:"Invalid interface name",invalidInterfaceProperty:"Invalid interface property"}),Object.assign(Ze.prototype,{_throwInvalidProperty:o.Error.invalidInterfaceProperty,_reMemberName:/^[a-z][a-zA-Z0-9]*$/,_reservedNames:je.prototype._reservedNames.concat("constructor"),_checkMemberValue:function(t,e){"function"!=typeof e&&o.Error.invalidInterfaceProperty()},_reName:/^I[a-zA-Z0-9]*$/,_throwInvalidName:o.Error.invalidInterfaceName}),we(0,{"interfaceConstructorFunction":"This is an interface constructor function, do not invoke"}),Object.assign(Ze.prototype,{_build:function(){var t,e;return delete(e=(t=Ge(this)).prototype).constructor,this._buildPrototype(e),t},_buildPrototype:function(n){O(this._initialDefinition,function(t,e){e.startsWith("$")||(n[e]=t)},this)}}),o.define=Qe,we(0,{interfaceExpected:"Expected interface not implemented: {name}"});var tn;o.interfaces={isImplementedBy:function(t,e){return!!e&&Je(Ke(t),function n(t){return t instanceof Function?t.prototype:t}(e))},query:function(t,e){return Ye(Ke(t),e)}};function en(t,e){var n={$interface:"gpf.interfaces.I"+t};return Object.keys(e).forEach(function(t){n[t]=Ce(e[t])}),Qe(n)}function nn(t,e){var n,r;return r=!1===t.ascending?(n="b"+e,"a"+e):(n="a"+e,"b"+e),"if("+n+"!=="+r+")return "+function i(t,e,n){return"string"===t?e+".localeCompare("+n+")":e+"-"+n}(t.type,n,r)+";"}function rn(t){return M(["a","b"],function n(t){return function e(t){return"var "+t.map(function(t,e){return"a"+e+"=a."+t.property+",b"+e+"=b."+t.property}).join(",")+";"}(t)+t.map(nn).join("")+"return 0;"}(t))}function on(e,n){return function(t){return"("+t[e].map(tn).join(n)+")"}}en("Unknown",{"queryInterface":1}),o.createSortFunction=function(t){return rn(P(t)?t:[t])};var un={property:function(t){return"i."+t.property},eq:on("eq","==="),ne:on("ne","!=="),lt:on("lt","<"),lte:on("lte","<="),gt:on("gt",">"),gte:on("gte",">="),not:function(t){return"!"+tn(t.not)},like:function(t){var e=function n(t){return"/"+t.regexp+"/.exec("+tn(t.like)+")"}(t);return t.group?"("+e+"||[])["+t.group+"]":e},or:on("or","||"),and:on("and","&&"),undefined:function(t){return JSON.stringify(t)}},an=Object.keys(un);tn=function(t){var e=function n(t){if("object"==typeof t)return Object.keys(t).filter(function(t){return an.includes(t)})[l]}(t);return(0,un[e])(t)},o.createFilterFunction=function(t){return M(["i"],function e(t){return"return "+tn(t)}(t))};var sn=en("ReadableStream",{"read":1}),cn=en("WritableStream",{"write":1});function fn(t,e,n){return t||o.Error.interfaceExpected({name:n}),function i(t,e,n){var r=Ye(e,t);return r||o.Error.interfaceExpected({name:n}),r}(t,e,n)}function ln(t){return fn(t,sn,"gpf.interfaces.IReadableStream")}function hn(t){return fn(t,cn,"gpf.interfaces.IWritableStream")}en("Enumerator",{"reset":0,"moveNext":0,"getCurrent":0}),en("FileStorage",{"getInfo":1,"openTextStream":2,"close":1,"explore":1,"createDirectory":1,"deleteFile":1,"deleteDirectory":1}),we(0,{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress",invalidStreamState:"Stream is in an invalid state"}),o.stream={};var pn="gpf.stream#progress",dn=pn+"/read",_n=pn+"/write";function mn(t){t.prototype[dn]=!1,t.prototype[_n]=!1}function vn(t,e,n){t[e]&&o.Error[n](),t[e]=!0}function gn(t){t[dn]=!1}function bn(t){t[_n]=!1}function yn(t,e,n){return t.then(function(t){return n(e),Promise.resolve(t)},function(t){return n(e),Promise.reject(t)})}function wn(r){return function(t){var e=hn(t);return function n(t){vn(t,dn,"readInProgress")}(this),yn(r.call(this,e),this,gn)}}function En(n){return function(t){return function e(t){vn(t,_n,"writeInProgress")}(this),yn(n.call(this,t),this,bn)}}var xn=Qe({$class:"gpf.stream.ReadableString",constructor:function(t){this._buffer=t},read:wn(function(t){return t.write(this._buffer)}),_buffer:""}),Sn=Qe({$class:"gpf.stream.WritableString",constructor:function(){this._buffer=[]},write:En(function(t){return this._buffer.push(t.toString()),Promise.resolve()}),toString:function(){return this._buffer.join("")},_buffer:[]});mn(xn),mn(Sn),we(0,{incompatibleStream:"Incompatible stream"});var On={NOT_FOUND:0,DIRECTORY:1,FILE:2,UNKNOWN:3},Pn=0,jn=1,Cn=null;function In(t,e){t===v&&(Cn=new e)}function Nn(t){t.length?t.pop():o.Error.unreachablePath()}function kn(t){var e=function n(t){return t.includes("\\")?t.toLowerCase().split("\\"):t.split("/")}(t);return function r(t){var e=t.pop();e&&t.push(e)}(e),e}function An(t){return kn(t).join("/")}function $n(t){return t?kn(t).pop():""}function Rn(t){var e=$n(t),n=e.lastIndexOf(".");return n===f?"":e.substring(n)}o.fs={types:{notFound:On.NOT_FOUND,directory:On.DIRECTORY,file:On.FILE,unknown:On.UNKNOWN},openFor:{reading:Pn,appending:jn},getFileStorage:function(){return Cn}},we(0,{unreachablePath:"Unreachable path"});var Tn={"":function(t){t.length=0,t.push("")},".":c,"..":function(t){Nn(t)}};function Dn(t){var e=kn(t);return S(arguments).forEach(function r(n,t){C(kn(t),function(t){var e=Tn[t];e?e(n):n.push(t)})}.bind(null,e)),e.join("/")}function Fn(t,e){t.length*e.length&&function n(t,e){for(;t[l]===e[l];)t.shift(),e.shift()}(t,e)}function Mn(t){var e=kn(t);return Nn(e),e.join("/")}o.path={join:Dn,parent:Mn,name:$n,nameOnly:function(t){var e=$n(t),n=e.lastIndexOf(".");return n===f?e:e.substring(l,n)},extension:Rn,relative:function Uo(t,e){var n,r=kn(t),i=kn(e);for(Fn(r,i),n=r.length;n--;)i.unshift("..");return i.join("/")}};function qn(t,e){var n,r=-1;return{reset:function(){return r=-1,Promise.resolve()},moveNext:function(){return++r,n=undefined,r<e.length?t.getInfo(e[r]).then(function(t){return n=t}):Promise.resolve()},getCurrent:function(){return n}}}var Bn=Qe({$class:"gpf.node.BaseStream",constructor:function(t,e){this._stream=t,"function"==typeof e&&(this._close=e),t.on("error",this._onError.bind(this))},_close:c,close:function(){return this._close()},_stream:null,_invalid:!1,_reject:o.Error.invalidStreamState,_checkIfValid:function(){this._invalid&&o.Error.invalidStreamState()},_onError:function(t){this._invalid=!0,this._reject(t)}}),Wn=Qe({$class:"gpf.node.ReadableStream",$extend:"gpf.node.BaseStream",read:wn(function(n){var r=this,i=r._stream;return new Promise(function(t,e){r._reject=e,r._checkIfValid(),i.on("data",r._onData.bind(r,n)).on("end",function(){r._invalid=!0,t()})})}),_onData:function(t,e){var n=this._stream;n.pause(),t.write(e).then(function(){n.resume()},this._reject)}}),Un=Qe({$class:"gpf.node.WritableStream",$extend:"gpf.node.BaseStream",write:En(function(n){var r=this,i=r._stream;return new Promise(function(t,e){if(r._reject=e,r._checkIfValid(),i.write(n))return t();i.once("drain",t)})})});function Ln(e){return function(t){return t instanceof e?t.close():Promise.reject(new o.Error.IncompatibleStream)}}function Xn(t,e){return new Promise(function(n,r){u[t].apply(u,e.concat([function(t,e){t?r(t):n(e)}]))})}function Vn(t,e){return Xn(t,[An(e)])}function zn(t,e){return Xn("open",[An(t),e.flags]).then(function(t){return new e.GpfStream(u[e.nodeStream]("",{fd:t,autoClose:!1}),Xn.bind(null,"close",[t]))})}function Hn(t){return t.isDirectory()?On.DIRECTORY:function e(t){return t.isFile()?On.FILE:On.UNKNOWN}(t)}In(h,Qe({$class:"gpf.node.FileStorage",getInfo:function(t){var e=An(t);return new Promise(function(t){u.exists(e,t)}).then(function(t){return t?Vn("stat",e).then(function(t){return{fileName:n.basename(e),filePath:An(n.resolve(e)),size:t.size,createdDateTime:t.ctime,modifiedDateTime:t.mtime,type:Hn(t)}}):{type:On.NOT_FOUND}})},openTextStream:function(t,e){return Pn===e?function n(t){return zn(t,{flags:"r",GpfStream:Wn,nodeStream:"createReadStream"})}(t):function r(t){return zn(t,{flags:"a",GpfStream:Un,nodeStream:"createWriteStream"})}(t)},close:Ln(Bn),explore:function(e){var n=this;return Vn("readdir",e).then(function(t){return qn(n,t.map(function(t){return Dn(e,t)}))})},createDirectory:Vn.bind(null,"mkdir"),deleteFile:Vn.bind(null,"unlink"),deleteDirectory:Vn.bind(null,"rmdir")}));var Zn=Qe({$class:"gpf.wscript.BaseStream",constructor:function(t){this._file=t},close:function(){return new Promise(function(t){this._file.Close(),t()}.bind(this))}}),Gn=Qe({$class:"gpf.wscript.ReadableStream",$extend:"gpf.wscript.BaseStream",read:wn(function(n){var r=this._file;return new Promise(function(t){return function e(){return n.write(r.Read(4096)).then(function(){if(!r.AtEndOfStream)return e()})}().then(t)})})}),Qn=Qe({$class:"gpf.wscript.WritableStream",$extend:"gpf.wscript.BaseStream",write:En(function(e){var n=this._file;return new Promise(function(t){n.Write(e),t()})})});function Jn(t,e){return{type:e,fileName:t.Name.toLowerCase(),filePath:An(t.Path),size:t.Size,createdDateTime:new Date(t.DateCreated),modifiedDateTime:new Date(t.DateLastModified)}}function Yn(e,n){return new Promise(function(t){i[e](kn(n).join("\\"),!0),t()})}function Kn(t){return i.FolderExists(t)?Jn(i.GetFolder(t),On.DIRECTORY):function e(t){return i.FileExists(t)?Jn(i.GetFile(t),On.FILE):{type:On.NOT_FOUND}}(t)}function tr(t){for(var e=new Enumerator(t),n=[];!e.atEnd();e.moveNext())n.push(e.item().Path);return n}we(0,{pathNotExplorable:"Path not explorable"});In(m,Qe({$class:"gpf.wscript.FileStorage",getInfo:function(t){return Promise.resolve(Kn(kn(t).join("\\")))},openTextStream:function(t,e){var n=kn(t).join("\\");return new Promise(function(t){t(Pn===e?new Gn(i.OpenTextFile(n,1,!1)):new Qn(i.OpenTextFile(n,8,!0)))})},close:Ln(Zn),explore:function(e){var r=this;return new Promise(function(t){t(qn(r,function n(t){var e;if(i.FolderExists(t))return tr((e=i.GetFolder(t)).SubFolders).concat(tr(e.Files));o.Error.pathNotExplorable()}(kn(e).join("\\"))))})},createDirectory:function Lo(e,n){return new Promise(function(t){i[e](kn(n).join("\\")),t()})}.bind(null,"CreateFolder"),deleteFile:Yn.bind(null,"DeleteFile"),deleteDirectory:Yn.bind(null,"DeleteFolder")}));var er=Object.prototype.toString;function nr(t){return t instanceof Object&&"[object Object]"===er.call(t)&&Object.getPrototypeOf(t)===Object.getPrototypeOf({})}o.isLiteralObject=nr,we(0,{missingNodeName:"Missing node name",unknownNamespacePrefix:"Unknown namespace prefix",unableToUseNamespaceInString:"Unable to use namespace in string"});var rr={"className":"class"},ir={"svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink"};function or(t){var e=t.split(":");if(2===e.length)return{namespace:function n(t){var e=ir[t];return undefined===e&&o.Error.unknownNamespacePrefix(),e}(e[0]),name:e[1]}}function ur(t){t.includes(":")&&o.Error.unableToUseNamespaceInString()}function ar(t){return rr[t]||t}function sr(t,e){t.forEach(function(t){P(t)?sr(t,e):e(t)})}var cr=Qe({$class:"gpf.web.Tag",constructor:function(t,e,n){this._nodeName=t,this._attributes=e||{},this._children=n},_nodeName:"",_attributes:{},_children:[],_getAttributesAsString:function(){return Object.keys(this._attributes).map(function(t){return ur(t)," "+ar(t)+'="'+function e(t){return W(t,"html")}(this._attributes[t])+'"'},this).join("")},_getChildrenAsString:function(){var e=[];return sr(this._children,function(t){e.push(t.toString())}),e.join("")},_getClosingString:function(){return this._children.length?">"+this._getChildrenAsString()+"</"+this._nodeName+">":"/>"},toString:function(){return ur(this._nodeName),"<"+this._nodeName+this._getAttributesAsString()+this._getClosingString()},_createElement:function(t){var e=t.ownerDocument,n=or(this._nodeName);return n?e.createElementNS(n.namespace,n.name):e.createElement(this._nodeName)},_setAttributesTo:function(r){O(this._attributes,function(t,e){var n=or(e);n?r.setAttributeNS(n.namespace,ar(n.name),t):r.setAttribute(ar(e),t)})},_appendChildrenTo:function(e){var n=e.ownerDocument;sr(this._children,function(t){t instanceof cr?t.appendTo(e):e.appendChild(n.createTextNode(t.toString()))})},appendTo:function(t){var e=this._createElement(t);return this._setAttributesTo(e),this._appendChildrenTo(e),t.appendChild(e)}});o.web.createTagFunction=function Xo(r){return r||o.Error.missingNodeName(),function(t){var e,n=0;return nr(t)&&(e=t,++n),new cr(r,e,E(arguments,n))}},o.http={};var fr="GET",lr="POST",hr="PUT",pr="OPTIONS",dr="DELETE",_r="HEAD",mr=/([^:\s]+)\s*: ?([^\r]*)/gm,vr=1,gr=2;function br(r){return function(e,n){n&&Object.keys(n).forEach(function(t){e[r](t,n[t])})}}function yr(n){return function(t,e){e?t[n](e):t[n]()}}function wr(e,r,i){return function(t){return{status:t[e],headers:function n(t){var e={};return C(Pe(mr,t),function(t){e[t[vr]]=t[gr]}),e}(t[r]()),responseText:t[i]}}}var Er;en("Thenable",{"then":2});function xr(t){return o.interfaces.isImplementedBy(o.interfaces.IThenable,t)?t:Promise.resolve(t)}function Sr(t,e){var n=Er;return t===v&&(Er=e),n}function Or(n){return new Promise(function(t,e){Er(n,t,e)})}function Pr(t,e,n){return Or("string"==typeof e?{method:t,url:e,data:n}:Object.assign({method:t},e))}o.promisify=xr,o.promisifyDefined=function Vo(t){if(undefined!==t)return xr(t)},Object.assign(o.http,{methods:{get:fr,post:lr,put:hr,options:pr,"delete":dr,head:_r},request:Or,get:Pr.bind(o.http,fr),post:Pr.bind(o.http,lr),put:Pr.bind(o.http,hr),options:Pr.bind(o.http,pr),"delete":Pr.bind(o.http,dr),head:Pr.bind(o.http,_r)});var jr=4,Cr=br("setRequestHeader"),Ir=yr("send"),Nr=wr("status","getAllResponseHeaders","responseText");function kr(t,e){var n=function r(t){var e=new XMLHttpRequest;return e.open(t.method,t.url),e}(t);Cr(n,t.headers),function i(t,e){t.onreadystatechange=function(){t.readyState===jr&&e(Nr(t))}}(n,e),Ir(n,t.data)}function Ar(t){var e=new Sn;return ln(t).read(e).then(function(){return e.toString()})}function $r(t){var e=Object.assign(r.parse(t.url),t);return function n(t,e){e&&(t.headers=Object.assign({"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(e)},t.headers))}(e,t.data),e}function Rr(t,e){var n=$r(t);return function r(t){return"https:"===t.protocol?s:a}(n).request(n,function(t){!function i(e,n){e.setEncoding("utf8");var r=new Wn(e);Ar(r).then(function(t){r.close(),n({status:e.statusCode,headers:e.headers,responseText:t})})}(t,e)})}Sr(t,kr),Sr(p,kr),Sr(h,function zo(t,e,n){var r=Rr(t,e);r.on("error",n),function i(t,e){e?t.write(e,"utf8",function(){t.end()}):t.end()}(r,t.data)});var Tr=br("setRequestHeader"),Dr=yr("Send"),Fr=wr("Status","GetAllResponseHeaders","ResponseText");Sr(m,function Ho(t,e){var n=function r(t){var e=new ActiveXObject("WinHttp.WinHttpRequest.5.1");return e.Open(t.method,t.url),e}(t);Tr(n,t.headers),Dr(n,t.data),function i(t,e){e(Fr(t))}(n,e)});var Mr,qr=Qe({$class:"gpf.java.BaseStream",constructor:function(t){this._stream=t},close:function(){return this._stream.close(),Promise.resolve()},_stream:null}),Br=Qe({$class:"gpf.java.ReadableStream",$extend:qr,_handleError:function(t){return t instanceof java.util.NoSuchElementException||t.message.startsWith("java.util.NoSuchElementException")?Promise.resolve():Promise.reject(t)},read:wn(function(t){try{var e=new java.util.Scanner(this._stream);return t.write(String(e.useDelimiter("\\A").next()))}catch(e_){return this._handleError(e_)}})}),Wr=Qe({$class:"gpf.java.WritableStream",$extend:qr,constructor:function(t){this.$super(t),this._writer=new java.io.OutputStreamWriter(t)},write:En(function(t){var e=this._writer;return e.write(t),e.flush(),Promise.resolve()}),close:function(){return this._writer.close(),this.$super()},_writer:null}),Ur=br("setRequestProperty");function Lr(e,n){(function r(t){var e=new Br(function n(t){try{return t.getInputStream()}catch(e_){return t.getErrorStream()}}(t));return Ar(e).then(function(t){return e.close(),t})})(e).then(function(t){n({status:e.getResponseCode(),headers:function r(t){var e={},n=t.getHeaderFields();return C(n.keySet().toArray(),function(t){e[String(t)]=String(n.get(t).get(l))}),e}(e),responseText:t})})}function Xr(t,e){var n=new java.net.URL(t.url).openConnection();n.setRequestMethod(t.method),Ur(n,t.headers),function r(t,e){if(e){t.setDoOutput(!0);var n=new Wr(t.getOutputStream());return n.write(e).then(function(){n.close()})}return Promise.resolve()}(n,t.data).then(function(){Lr(n,e)})}function Vr(t,e){var n;return t.every(function(t){return(n=function i(t,e){var n,r=t.url;if(r.lastIndex=0,n=r.exec(e.url))return t.response.apply(t,[e].concat(S(n)))}(t,e))===undefined}),n}function zr(t){return Mr[t]||(Mr[t]=[]),Mr[t]}Sr(d,Xr),Sr(e,Xr);var Hr,Zr=0;function Gr(){Mr={}}function Qr(){}Gr(),o.http.mock=function Zo(t){var e=t.method.toUpperCase(),n=e+"."+Zr++;return zr(e).unshift(Object.assign({id:n},t)),n},o.http.mock.remove=function Go(e){var t=e.substring(l,e.indexOf("."));Mr[t]=zr(t).filter(function(t){return t.id!==e})},o.http.mock.reset=Gr,Hr=Sr(v,function Qo(t,e,n){var r=function i(t){return Vr(zr(t.method.toUpperCase()),t)}(t);undefined===r?Hr(t,e,n):e(r)}),Qr.prototype={execute:c};var Jr=new Qr,Yr=new Qr;Jr.execute=function(t){t._readReject(t._readBuffer.shift())},Yr.execute=function(t){t._readResolve()};var Kr=Qe({$class:"gpf.stream.BufferedRead",constructor:function(){this._readBuffer=[]},_readBuffer:[],_readWriteToStream:null,_readResolve:null,_readReject:null,_readDataIsToken:function(t){return t instanceof Qr&&(t.execute(this),!0)},_readWriteToOutput:function(){var t=this,e=t._readBuffer.shift();return t._readDataIsToken(e)?Promise.resolve():t._readWriteToStream.write(e).then(function(){if(t._readBuffer.length)return t._readWriteToOutput();t._readNotWriting=!0})},_readNotWriting:!0,_readSafeWrite:function(){var e=this;e._readNotWriting&&(e._readNotWriting=!1,e._readWriteToOutput().then(undefined,function(t){e._readReject(t)}))},_readCheckIfData:function(){this._readBuffer.length&&this._readSafeWrite()},_readCheckIfOutput:function(){this._readWriteToStream&&this._readCheckIfData()},_appendToReadBuffer:function(t){return this._readBuffer=this._readBuffer.concat(E(arguments)),this._readCheckIfOutput(),this},_completeReadBuffer:function(){this._readBuffer.push(Yr),this._readCheckIfOutput()},_setReadError:function(t){this._readBuffer.push(Jr,t),this._readCheckIfOutput()},read:wn(function(t){var n=this;return n._readWriteToStream=t,n._readCheckIfData(),new Promise(function(t,e){n._readResolve=t,n._readReject=e})})});mn(Kr);var ti=/\r\n/g,ei=(Qe({$class:"gpf.stream.LineAdapter",$extend:Kr,constructor:function(){this.$super(),this._buffer=[]},write:En(function(t){return this._buffer.push(t.toString()),this._process(),Promise.resolve()}),flush:function(){return this._buffer.length&&(this._buffer.push("\n"),this._process()),this._completeReadBuffer(),Promise.resolve()},_buffer:[],_consolidateLines:function(){return this._buffer.join("").replace(ti,"\n").split("\n")},_pushBackLastLineIfNotEmpty:function(t){var e=t.pop();e.length&&this._buffer.push(e)},_process:function(){var e=this,t=e._consolidateLines();e._buffer.length=0,e._pushBackLastLineIfNotEmpty(t),C(t,function(t){e._appendToReadBuffer(t)})}}),en("FlushableStream",{"flush":0})),ni={};function ri(t,e){t===v&&(ni=e)}function ii(t){return ni(t)}o.read=ii,o.fs&&(o.fs.read=ii);ri(t,function Jo(t){return Or({method:fr,url:t}).then(function(t){if(2!==Math.floor(t.status/100))throw new Error(t.responseText);return t.responseText})}),ri(e,function Yo(t){var o=java.nio.file.Paths.get(t);return java.nio.file.Files.exists(o)?new Promise(function(t,e){var n=java.nio.file.Files.newInputStream(o),r=new Br(n),i=new Sn;return r.read(i).then(function(){t(i.toString())})["catch"](e)}):Promise.reject(new Error("File not found"))}),ri(h,function Ko(t){return new Promise(function(n,r){u.readFile(t,function(t,e){t?r(t):n(e.toString())})})}),ri(p,function tu(r){return new Promise(function(t,e){try{t(u.read(r))}catch(e_){e(new Error(e_))}})}),ri(d,function eu(e){return new Promise(function(t){t(readFile(e))})}),ri(m,function nu(n){return new Promise(function(t){var e=i.OpenTextFile(n,1,!1);t(e.ReadAll()),e.Close()})});var oi={};function ui(t,e){return Promise.resolve(e)}function ai(e){var n=this;return function r(t,e){var n=t.preload[e];return n?Promise.resolve(n):ii(e)}(n,e).then(function(t){return n.preprocess({name:e,content:t,type:Rn(e).toLowerCase()})}).then(function(t){return function e(t){return oi[t.type]||ui}(t).call(n,t.name,t.content)})}function si(t,e){return function r(t,e){return t._initialDefine=e.define,e.define=function n(){var t=this.gpf.require,e=this._initialDefine;return this.promise=e.apply(t,arguments),t.define=e,this.promise}.bind(t),t.gpf.require=e,t}(function n(){return{gpf:Object.create(o),promise:Promise.resolve(),_initialDefine:null}}(),bi(t,{base:Mn(e)}))}oi[".json"]=function(t,e){return JSON.parse(e)},we(0,{noCommonJSDynamicRequire:"Dynamic require not supported"});var ci=/[^.]\brequire\b\s*\(\s*(?:['|"]([^"']+)['|"]|[^)]+)\s*\)/g;var fi,li=[null,function ru(t){return{dependencies:[],factory:t}},function iu(t,e){return{dependencies:t,factory:e}},function ou(t,e,n){return{dependencies:e,factory:n}}];function hi(t,e,n){var r={};return M(["gpf","define","module","require"],e)(t,function i(t,e,n){var r=li[arguments.length].apply(null,arguments);this.require.define(r.dependencies,function(t){return t.length=r.dependencies.length,r.factory.apply(null,E(t))})}.bind(t),r,function(t){return n[t]||o.Error.noCommonJSDynamicRequire()}),r.exports}fi=t===v?function uu(t,e){var n=location.pathname.toString();return n.endsWith("/")||(n=Mn(n)),"//# sourceURL="+location.origin+Dn(n,t)+"?gpf.require\n"+e}:function au(t,e){return e},oi[".js"]=function(n,r){var i=si(this,n);return function o(t,e){var n=Pe(ci,e);return n.length?si(this,t).gpf.require.define(n.map(function(t){return t[1]}).filter(function(t){return t}).reduce(function(t,e){return t[e]=e,t},{}),function(t){return t}):Promise.resolve({})}.call(this,n,r).then(function(t){var e=hi(i.gpf,fi(n,r),t);return undefined===e?i.promise:e})},we(0,{invalidRequireConfigureOption:"Invalid configuration option",invalidRequireConfigureOptionValue:"Invalid configuration option value"});var pi={},di=[];function _i(t,e,n){n?di.unshift(t):di.push(t),pi[t]=e}function mi(e){!function r(t){C(Object.keys(t),function(t){pi[t]||o.Error.invalidRequireConfigureOption()})}(e);var n=this;C(di.filter(function(t){return e[t]!==undefined}),function(t){pi[t](n,e[t])})}function vi(t){return Dn(this.base,t)}function gi(e){var t;return this.cache[e]?this.cache[e]:(t=ai.call(this,e),(this.cache[e]=t)["catch"](function(t){return function n(t,e){Array.isArray(t.requires)||(t.requires=[]),t.requires.push(e)}(t,e),Promise.reject(t)}))}function bi(t,e){var n=Object.create(t),r={};return r.define=function o(e,t){var n=this,r=[],i=Object.keys(e);return C(i,function(t){r.push(gi.call(n,vi.call(n,e[t])))},n),Promise.all(r).then(function(n){var r;return"function"==typeof t?(r={},C(i,function(t,e){r[t]=n[e]}),t(r)):t})}.bind(n),r.resolve=vi.bind(n),r.configure=mi.bind(n),e&&r.configure(e),r}_i("base",function su(t,e){!function n(t){"string"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.base=e}),_i("cache",function cu(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),C(Object.keys(n),function(t){e.cache[t]=Promise.resolve(n[t])})}),_i("clearCache",function fu(t,e){!function n(t){"boolean"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),e&&(t.cache={})},!0),_i("preload",function lu(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),C(Object.keys(n),function(t){e.preload[t]=n[t]})}),_i("preprocess",function hu(t,e){!function n(t){"function"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.preprocess=e}),o.require=bi({base:"",cache:{},preload:{},preprocess:function(t){return Promise.resolve(t)}});var yi=Qe({$class:"gpf.stream.ReadableArray",constructor:function(t){this._buffer=t},read:wn(function(t){var e=this._buffer,n=0;return function r(){return e.length===n?Promise.resolve():t.write(e[n++]).then(r)}()}),_buffer:[]}),wi=Qe({$class:"gpf.stream.WritableArray",constructor:function(){this._buffer=[]},write:En(function(t){return this._buffer.push(t),Promise.resolve()}),toArray:function(){return this._buffer},_buffer:[]});mn(yi),mn(wi);var Ei={flush:Promise.resolve.bind(Promise)};function xi(t){return Ye(ei,t)||Ei}function Si(t){if(t.readError)return Promise.reject(t.readError)}function Oi(t,e){var n=function a(t,e){return{iReadableIntermediate:ln(t),iWritableIntermediate:hn(t),iFlushableIntermediate:xi(t),iWritableDestination:hn(e),iFlushableDestination:xi(e),readError:null,rejectWrite:c}}(t,e),r=function s(e){var n=!0,r=e.iReadableIntermediate,i=e.iWritableDestination;return function(){if(n)try{n=!1,r.read(i).then(function(){n=!0},function(t){e.readError=t,e.rejectWrite(t)})}catch(e_){e.readError=e_}}}(n),i=n.iFlushableIntermediate,o=n.iFlushableDestination,u=n.iWritableIntermediate;return r(),{flush:function(){return Si(n)||i.flush().then(function(){return o.flush()})},write:function(t){return r(),Si(n)||function e(n,r){return new Promise(function(e,t){r.then(function(t){e(t),n.rejectWrite=c},t),n.rejectWrite=t})}(n,u.write(t))}}}function Pi(t){return S(t).length?function r(t){for(var e=t.length,n=t[--e];e;)n=Oi(t[--e],n);return n}(t):hn(t[l])}o.stream.pipe=function pu(t,e){var n=ln(t),r=Pi(S(arguments)),i=xi(r);try{return n.read(r).then(function(){return i.flush()})}catch(e_){return Promise.reject(e_)}};function ji(t){return W(t,"regexp")}B.regexp={"\\":"\\\\","-":"\\-","[":"\\[","]":"\\]","/":"\\/","{":"\\{","}":"\\}","(":"\\(",")":"\\)","*":"\\*","+":"\\+","?":"\\?",".":"\\.","^":"\\^","$":"\\$","|":"\\|"},we(0,{invalidCSV:"Invalid CSV syntax (bad quote sequence or missing end of file)"}),o.stream.csv={};var Ci=";,\t ".split("");Qe({$class:"gpf.stream.csv.Parser",$extend:Kr,constructor:function(t){this._readParserOptions(t),this._header?this._parseHeader():this._write=this._writeHeader},_readParserOptions:function(e){var n=this;e&&C(["header","separator","quote","newLine"],function(t){e[t]&&(n["_"+t]=e[t])})},_header:"",_separator:"",_deduceSeparator:function(){var e=this._header;this._separator=function u(t,e,n){for(var r,i=0,o=t.length;i<o&&!r;++i)r=e.call(n,t[i],i,t);return r}(Ci,function(t){if(e.includes(t))return t})||Ci[l]},_quote:'"',_newLine:"\n",_columns:[],_buildParsingHelpers:function(){this._unescapeDictionary={},this._unescapeDictionary[this._quote+this._quote]=this._quote,this._parser=new RegExp(q("^(?:([^QS][^S]*)|Q((?:[^Q]|QQ)+)Q)(?=$|S)",{Q:ji(this._quote),S:ji(this._separator)}))},_parseHeader:function(){this._separator||this._deduceSeparator(),this._columns=this._header.split(this._separator),this._buildParsingHelpers(),this._write=this._writeContent},_writeHeader:function(t){this._header=t,this._parseHeader()},_values:[],_content:"",_unescapeQuoted:function(t){return q(t,this._unescapeDictionary)},_addValue:function(t){t[1]?this._values.push(t[1]):this._values.push(this._unescapeQuoted(t[2]))},_nextValue:function(t){return this._content=this._content.substring(t),Boolean(this._content.length)},_checkAfterValue:function(t){var e=t[l].length;return this._content.charAt(e)?this._nextValue(++e):(delete this._content,!1)},_extractValue:function(){var t=this._parser.exec(this._content);return!!t&&(this._addValue(t),this._checkAfterValue(t))},_checkForValue:function(){return this._content.startsWith(this._separator)?(this._values.push(""),this._nextValue(this._separator.length)):this._extractValue()},_parseValues:function(){for(;this._checkForValue(););},_parseContent:function(){if(this._parseValues(),!this._content)return this._values},_processContent:function(t){return this._content?this._content=this._content+this._newLine+t:(this._values=[],this._content=t),this._parseContent()},_getRecord:function(n){var r={};return C(this._columns,function(t,e){n[e]!==undefined&&(r[t]=n[e])}),r},_writeContent:function(t){var e=this._processContent(t);e&&this._appendToReadBuffer(this._getRecord(e))},write:En(function(t){return this._write(t),Promise.resolve()}),flush:function(){if(this._content){var t=new o.Error.InvalidCSV;return this._setReadError(t),Promise.reject(t)}return this._completeReadBuffer(),Promise.resolve()}});o.attributes={};var Ii=Qe({$class:"gpf.attributes.Attribute",$abstract:!0,_memberName:undefined,getMemberName:function(){return this._memberName},_ClassConstructor:undefined,getClassConstructor:function(){return this._ClassConstructor},_check:function(t,e){},_build:function(t,e,n){}});we(0,{unknownAttributesSpecification:"Unknown attributes specification",invalidAttributesSpecification:"Invalid attributes specification"});var Ni="attributes",ki="$"+Ni,Ai=/^\[([^\]]+)\]$|./,$i=$e.prototype._checkMemberName,Ri=$e.prototype._checkMemberValue,Ti=$e.prototype._check$Property,Di=$e.prototype.check;function Fi(t,e){e._check(t,this)}function Mi(t){return Ai.exec(t)[1]}Object.assign($e.prototype,{_hasInheritedMember:function(t){return this._extend&&this._extend.prototype[t]!==undefined},_hasMember:function(t){return this._initialDefinition.hasOwnProperty(t)||this._hasInheritedMember(t)},_checkAttributeMemberExist:function(t){this._hasMember(t)||o.Error.unknownAttributesSpecification()},_checkMemberName:function(t){var e=Mi(t);e?($i.call(this,e),this._checkAttributeMemberExist(e)):$i.call(this,t)},_checkAttributesSpecification:function(t){j(t)||o.Error.invalidAttributesSpecification(),C(t,function(t){t instanceof Ii||o.Error.invalidAttributesSpecification()})},_checkMemberValue:function(t,e){var n=Mi(t);n?(this._checkAttributesSpecification(e),this._addAttributesFor(n,e)):Ri.call(this,t,e)},_check$Property:function(t,e){Ni===t?(this._checkAttributesSpecification(e),this._addAttributesFor(ki,e)):Ti.call(this,t,e)},check:function(){this._attributes={},Di.call(this),this._forOwnAttributes(Fi)}}),$e.prototype._allowed$Properties.push(Ni);var qi=$e.prototype._addMemberToPrototype,Bi=$e.prototype._buildPrototype;function Wi(t,e,n){Ne(e.constructor)._singleton||(e._memberName=t,e._ClassConstructor=n.constructor),e._build(t,this,n)}function Ui(t){if(t)return function e(t){return"object"!=typeof t&&o.Error.invalidParameter(),t.constructor}(t);o.Error.invalidParameter()}function Li(t,e){return function r(t,e){var n=Ne(t);return n?n.getAttributes(e):{}}("function"==typeof t?t:Ui(t),e)}Object.assign($e.prototype,{_attributes:{},_addAttributesFor:function(t,e){this._attributes[t]=e},_addMemberToPrototype:function(t,e,n){Mi(e)||qi.call(this,t,e,n)},_buildPrototype:function(t){Bi.call(this,t),this._forOwnAttributes(Wi,t)}}),Object.assign($e.prototype,{_collectOwnAttributes:function(o,u){O(this._attributes,function(t,e){var n=function r(t,e){return e?t.filter(function(t){return t instanceof e}):t}(t,u);n.length&&function i(t,e,n){t[e]=(t[e]||[]).concat(n)}(o,e,n)})},_getOwnAttributes:function(){var t={};return this._collectOwnAttributes(t),t},_collectAttributes:function(t,e){this._collectOwnAttributes(t,e),this._extendDefinition&&this._extendDefinition._collectAttributes(t,e)},_forOwnAttributes:function(r,i){var o=this,t=o._getOwnAttributes();O(t,function(t,e){var n;ki!==e&&(n=e),C(t,function(t){r.call(o,n,t,i)})})},getAttributes:function(t){var e={};return this._collectAttributes(e,t),e}}),o.attributes.get=Li;var Xi={},Vi=Qe({$class:"gpf.stream.AbstractOperator",_dataInPromise:undefined,_dataInResolve:c,_dataOutResolve:c,_dataOutReject:c,_waitForData:function(){var e=this;return e._dataInPromise||(e._dataInPromise=new Promise(function(t){e._dataInResolve=t}).then(function(t){return delete e._dataInPromise,delete e._dataInResolve,t})),e._dataInPromise},_writeData:function(t){var n=this;return n._waitForData(),n._dataInResolve(t),new Promise(function(t,e){n._dataOutResolve=t,n._dataOutReject=e}).then(function(t){return delete n._dataOutResolve,delete n._dataOutReject,t},function(t){return delete n._dataOutResolve,delete n._dataOutReject,Promise.reject(t)})},read:wn(function(e){var n=this;return n._waitForData().then(function(t){return Xi!==t?e.write(t).then(n._dataOutResolve,n._dataOutReject):(n._dataOutResolve(),Promise.resolve())})}),_process:Ce(),write:En(function(t){return this._process(t)}),flush:function(){return this._dataInPromise?this._writeData(Xi):Promise.resolve()}});mn(Vi);Qe({$class:"gpf.stream.Filter",$extend:Vi,constructor:function(t){this._filter=t},_process:function(t){return this._filter(t)?this._writeData(t):Promise.resolve()}}),Qe({$class:"gpf.stream.Map",$extend:Vi,constructor:function(t){this._map=t},_process:function(t){return this._writeData(this._map(t))}}),en("XmlContentHandler",{"characters":1,"endDocument":0,"endElement":0,"endPrefixMapping":1,"processingInstruction":2,"startDocument":0,"startElement":2,"startPrefixMapping":2});function zi(e,n){return function(t){t.match(e)||o.Error["invalidXml"+n]()}}we(0,{invalidXmlElementName:"Invalid XML element name",invalidXmlAttributeName:"Invalid XML attribute name",invalidXmlNamespacePrefix:"Invalid XML namespace prefix",invalidXmlUseOfPrefixXmlns:"Invalid use of XML namespace prefix xmlns",invalidXmlUseOfPrefixXml:"Invalid use of XML namespace prefix xml",unknownXmlNamespacePrefix:"Unknown XML namespace prefix"});var Hi=/^[a-zA-Z_][a-zA-Z0-9_\-\.]*$/,Zi=/^(|[a-z_][a-zA-Z0-9_]*)$/,Gi=zi(Hi,"ElementName"),Qi=zi(Hi,"AttributeName"),Ji=zi(Zi,"NamespacePrefix");function Yi(t){"xmlns"===t&&o.Error.invalidXmlUseOfPrefixXmlns()}function Ki(t,e){Gi(t),Ji(e),Yi(e)}function to(t,e){e.includes(t)||o.Error.unknownXmlNamespacePrefix()}function eo(o,u){return function(t,e){var n,r,i=t.indexOf(":");i===f?o(t):(r=t.substring(l,i),n=t.substring(++i),u(n,r,e))}}var no=eo(Gi,function du(t,e,n){Ki(t,e),"xml"===e?o.Error.invalidXmlUseOfPrefixXml():to(e,n)});var ro=eo(Qi,function _u(t,e,n){Ki(t,e),"xml"===e?function r(t){"space"!==t&&o.Error.invalidXmlUseOfPrefixXml()}(t):to(e,n)});o.interfaces.promisify=function mu(n){return function(t){var e=Ye(n,t);return e||o.Error.interfaceExpected({name:pe(n)}),function i(n,t,r){var e=r.then;return r.then=function(){return i(n,t,e.apply(r,arguments))},O(t.prototype,function(t,e){r[e]=function(){var t=arguments;return r.then(function(){return xr(n[e].apply(n,t))})}}),r}(e,n,Promise.resolve())}},we(0,{invalidXmlWriterState:"Invalid XML Writer state"});Qe({$class:"gpf.xml.Writer",$extend:Kr,constructor:function(){this._elements=[],this._nextNamespaces={},this._checkIfStarted=o.Error.invalidXmlWriterState},_elements:[],_nextNamespaces:{},_checkIfElementsExist:function(t){t!==Boolean(this._elements.length)&&o.Error.invalidXmlWriterState()},_checkState:function(t){this._checkIfStarted(),undefined!==t&&this._checkIfElementsExist(t)},_addContentToElement:function(t){t.content||(this._appendToReadBuffer(">"),t.content=!0)},_addContentToLastElement:function(){var t=this._elements[l];if(t)return this._addContentToElement(t)},_writeAttribute:function(t,e){this._appendToReadBuffer(" "+t+'="'),this._appendToReadBuffer(X(e.toString())),this._appendToReadBuffer('"')},_getNamespacePrefixes:function(){return this._elements.reduce(function(t,e){return t.concat(Object.keys(e.namespaces))},[])},_processAttributes:function(t){O(t,function(t,e){ro(e,this._getNamespacePrefixes()),this._writeAttribute(e,t)},this)},_processNamespaces:function(t){O(t,function(t,e){e?this._writeAttribute("xmlns:"+e,t):this._writeAttribute("xmlns",t)},this)},characters:function(t){return this._checkState(!0),this._addContentToLastElement(),this._appendToReadBuffer(X(t.toString())),Promise.resolve()},endDocument:function(){return this._checkState(!1),this._checkIfStarted=o.Error.invalidXmlWriterState,this._completeReadBuffer(),Promise.resolve()},endElement:function(){this._checkState(!0);var t=this._elements.shift();return t.content?this._appendToReadBuffer("</"+t.qName+">"):this._appendToReadBuffer("/>"),Promise.resolve()},endPrefixMapping:function(t){return this._checkState(),Promise.resolve()},processingInstruction:function(t,e){return this._checkState(!1),this._appendToReadBuffer("<?"+t+" "+e+"?>\n"),Promise.resolve()},startDocument:function(){return this._checkIfStarted=c,this.startDocument=o.Error.invalidXmlWriterState,this._checkState(!1),Promise.resolve()},startElement:function(t,e){var n=this._nextNamespaces;this._checkState(),this._addContentToLastElement(),this._elements.unshift({qName:t,namespaces:n}),this._nextNamespaces={},no(t,this._getNamespacePrefixes()),this._appendToReadBuffer("<"+t),e&&this._processAttributes(e),this._processNamespaces(n)},startPrefixMapping:function(t,e){this._checkState(),function n(t){Ji(t),Yi(t),"xml"===t&&o.Error.invalidXmlUseOfPrefixXml()}(t),this._nextNamespaces[t]&&o.Error.invalidXmlWriterState(),this._nextNamespaces[t]=e}});o.forEachAsync=function(t,e,n){if(j(t))return function s(n,r,i){var o=0,u=n.length;return function a(){if(o===u)return Promise.resolve();var t=o++;try{return xr(r.call(i,n[t],t,n)).then(a)}catch(e_){return Promise.reject(e_)}}()}(t,e,n);o.Error.invalidParameter()},we(0,{invalidSerialName:"Invalid serial name",invalidSerialType:"Invalid serial type",invalidSerialRequired:"Invalid serial required",invalidSerialReadOnly:"Invalid serial readOnly"}),o.serial={};var io={STRING:"string",INTEGER:"integer",DATETIME:"datetime"};o.serial.types={string:io.STRING,integer:io.INTEGER,datetime:io.DATETIME};var oo=/^[a-z][a-z0-9_]*$/i;function uo(t){!function e(t){"string"!=typeof t&&o.Error.invalidSerialName()}(t.name),function n(t){t.match(oo)||o.Error.invalidSerialName()}(t.name)}var ao=Object.keys(io).map(function(t){return io[t]});function so(t){undefined===t.type?t.type=io.STRING:function e(t){ao.includes(t)||o.Error.invalidSerialType()}(t.type)}function co(t,e){"boolean"!=typeof t&&e()}function fo(t){var e=Object.assign(t);return[uo,so,function n(t){undefined===t.required?t.required=!1:co(t.required,o.Error.invalidSerialRequired)},function r(t){undefined!==t.readOnly&&co(t.readOnly,o.Error.invalidSerialReadOnly)}].forEach(function(t){t(e)}),e}function lo(t){t&&o.Error.classAttributeOnly()}function ho(t,e){var n=t._extend;n!==e&&function r(t,e){t instanceof e||o.Error.restrictedBaseClassAttribute()}(n.prototype,e)}function po(t,e,n){S(function i(t,e,n){var r=e.getAttributes(n);return t?r[t]:r[ki]}(t,e,n)).length&&o.Error.uniqueAttributeUsedTwice()}we(0,{classAttributeOnly:"Class attribute only",memberAttributeOnly:"Member attribute only",restrictedBaseClassAttribute:"Restricted base class attribute",uniqueAttributeUsedTwice:"Unique attribute used twice"});var _o=Qe({$class:"gpf.attributes.AttributeAttribute",$extend:Ii,$abstract:!0,_check:function(t,e){lo(t),ho(e,Ii),po(t,e,this.constructor)},_targetCheck:Ce(),_overrideTargetCheck:function(t){var n=this,r=t._check;t._check=function(t,e){n._targetCheck(t,e,this),r.call(this,t,e)}},_build:function(t,e,n){this._overrideTargetCheck(n)}}),mo=Qe({$class:"gpf.attributes.ClassAttribute",$extend:_o,$singleton:!0,_targetCheck:function(t,e){lo(t)}});o.attributes.ClassAttribute=mo;var vo=Qe({$class:"gpf.attributes.MemberAttribute",$extend:_o,$singleton:!0,_targetCheck:function(t,e){!function n(t){t||o.Error.memberAttributeOnly()}(t)}});o.attributes.MemberAttribute=vo;var go=Qe({$class:"gpf.attributes.AttributeForInstanceOf",$extend:_o,_BaseClass:null,constructor:function(t){"function"!=typeof t&&o.Error.invalidParameter(),this._BaseClass=t},_targetCheck:function(t,e){ho(e,this._BaseClass)}});o.attributes.AttributeForInstanceOf=go;var bo=Qe({$class:"gpf.attributes.UniqueAttribute",$extend:_o,$singleton:!0,_targetCheck:function(t,e,n){po(t,e,n.constructor)}});o.attributes.UniqueAttribute=bo;var yo,wo=Qe({$class:"gpf.attributes.Serializable",$extend:Ii,$attributes:[new vo,new bo],_property:null,constructor:function(t){this._property=t},_check:function(t,e){this._property=fo(Object.assign({name:function n(t){return t.startsWith("_")?t.substring(1):t}(t)},this._property))},getProperty:function(){return Object.create(this._property)}});function Eo(t){var e=Li(t,wo),n={};return O(e,function(t,e){n[e]=t[l].getProperty()}),n}function xo(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return!n.writable}function So(n){var t=Eo(n);return O(t,function(t,e){t.readOnly===undefined&&(t.readOnly=yo(n,e))}),t}function Oo(t,e){if(!e.readOnly)return t}function Po(n,t,i){var o={};return O(t,function(t,e){!function r(t,e,n){n!==undefined&&(t[e]=n)}(o,t.name,i.call(n,n[e],t,e))}),o}function jo(n,i,o){var t=So(n);O(t,function(t,e){i.hasOwnProperty(t.name)&&function r(t,e,n){n!==undefined&&(t[e]=n)}(n,e,o.call(n,i[t.name],t,e))})}function Co(t,e,n){var r=function i(t){return t||ki}(e);t._attributes[r]=(t._attributes[r]||[]).concat(n),function o(e,n,t){t.forEach(function(t){Fi.call(e,n,t),Wi(n,t,e._instanceBuilder.prototype)})}(t,e,n)}yo=Object.getOwnPropertyDescriptor?function(t,e){for(var n,r=t;r!==Object&&n===undefined;)n=xo(r,e),r=Object.getPrototypeOf(r);return n||!1}:function(){return!1},o.serial.get=Eo,o.serial.toRaw=function(t,e){return"function"==typeof t&&o.Error.invalidParameter(),function n(t,e){return Po(t,So(t),e||Oo)}(t,e)},o.serial.fromRaw=function(t,e,n){return"function"==typeof t&&o.Error.invalidParameter(),function r(t,e,n){jo(t,e,n||Oo)}(t,e,n),t},we(0,{es6classOnly:"ES6 class only"}),o.attributes.decorator=function vu(){var n=E(arguments);return function(t,e){Ee(t)||o.Error.es6classOnly(),Co(De(t),e,n)}}});