!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else if("undefined"!=typeof module&&module.exports)b(module.exports);else{var c={};b(c),a.gpf=c}}(this,function(a){"use strict";function b(){}function c(a){return null===a||"object"!=typeof a?lb:a}function d(a,b){return void 0!==a?a[b]:void 0}function e(a,b){var c=a[b];return void 0===c&&(c=a[b]={}),c}function f(b,c){var f,g;return f=c?e:d,"gpf"===b[0]?(g=a,b=b.slice(1)):g=lb,b.reduce(f,g)}function g(a,b){a=a.split(".");var c,d=a.pop(),e=f(a,!0),g=!0;e[d]=function(){return g&&(c=b(a),e[d]=c,g=!1),c.apply(this,arguments)}}function h(a){return 10>a?"0"+a:a}function i(a){var b,c,d,e,f;if("string"==typeof a&&(ub.lastIndex=0,b=ub.exec(a))){for(d=[],e=b.length-1,f=0;e>f;++f)c=b[f+1],c?d.push(parseInt(b[f+1],10)):d.push(0);if(--d[1],d[1]<12&&d[2]<32&&d[3]<24&&d[4]<60&&d[5]<60)return d}}function j(){var a=arguments[0],b=i(a);return b?new vb(vb.UTC.apply(vb.UTC,b)):rb.apply(vb,arguments)}function k(){var a=Function.prototype.toString.call(this),b=a.indexOf("function"),c=a.indexOf("(",b);return a.substr(b+9,c-b-9).replace(xb,"").trim()}function l(a,b,c){function d(a){return function(b){e&&(e=!1,a(b))}}var e=!0;try{a(d(b),d(c))}catch(f){e&&(e=!1,c(f))}}function m(){var a=this;a._handlers.forEach(function(b){b.process(a)}),a._handlers=[]}function n(a){var b=this;b._state=!1,b._value=a,m.call(b)}function o(a){var b=this;try{if(sb(a!==b,"A promise cannot be resolved with itself."),a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void l(c.bind(a),o.bind(b),n.bind(b))}b._state=!0,b._value=a,m.call(b)}catch(d){n.call(b,d)}}function p(){}function q(){return!1}function r(a,b){var c;return void 0===b&&(b=a,a=[]),sb("string"==typeof b&&b.length,"Source expected (or use _gpfEmptyFunc)"),0===a.length?Lb(b):(c=[].concat(a),c.push(b),Lb.apply(null,c))}function s(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function t(a){var b,c=typeof a;return"function"===c?1===a.length:"object"!==c?!1:(b=a.dispatchEvent,"function"==typeof b?1===b.length:!0)}function u(a,c){var d,e=a.scope;return"function"==typeof c.dispatchEvent?c.dispatchEvent.bind(c):"function"==typeof c?c.bind(e):(d=c[a.type]||c["*"]||b,d.bind(c.scope||c))}function v(a,b,c){var d=u(a,b);d(a),void 0!==c&&c(a)}function w(b,d,e){var f=c(this);return sb(t(e),"Expected a valid event handler"),b instanceof Tb||(b=new a.events.Event(b,d,f)),new Promise(function(a){++Ub>10?setTimeout(v.bind(null,b,e,a),0):(v(b,e),a(b)),--Ub})}function x(a){return new Promise(function(b,c){a(function(a){Ab===a.type?c(a.get("error")):b(a)})})}function y(a,b,c){var d,e=a.length;for(d=0;e>d;++d)b.call(c,a[d],d,a)}function z(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function A(a){return a.charAt(0).toUpperCase()+a.substr(1)}function B(a,b){var c=a;return z(b,function(a,b){c=c.split(b).join(a)}),c}function C(a,b){return a=B(a,Wb[b]),"javascript"===b&&(a='"'+a+'"'),a}function D(a,b){this[0][b]=a}function E(a,b){var c=this[0],d=this[2];void 0===c[b]?c[b]=a:d(c,b,a)}function F(a,b,c){var d;return void 0===c?d=D:(sb("function"==typeof c,"Expected function"),d=E),z(b,d,arguments),a}function G(a,b,c){var d,e=typeof a;return c||(c=typeof b),c===e?a:"undefined"===e?b:(d=Xb[c](a,e,b),void 0===d?b:d)}function H(a){return a.trim()}function I(a){this.parameters=[],void 0!==a&&this._extract(a)}function J(a){this._pending=[],this._done=[],!0===a?this._haveDifferentPrototypes=q:this._alike=q}function K(a,b,c){return function(d){var e,f,g=new Yb;return g.code=a,g.name=b,d?(f={},z(d,function(a,b){f["{"+b+"}"]=a.toString()}),e=B(c,f)):e=c,g.message=e,g}}function L(a,b,c){var d=K(a,b,c);return d.CODE=a,d.NAME=b,d.MESSAGE=c,d}function M(b,c){var d,e;mb(b);for(d in c)c.hasOwnProperty(d)&&(e=++Zb,a.Error["CODE_"+d.toUpperCase()]=e,a.Error[d]=L(e,d,c[d]))}function N(a){var b=a._eventDispatcherListeners;return b||(b=a._eventDispatcherListeners={}),b}function O(a,b){var c=N(this);return void 0===c[a]&&(c[a]=[]),c[a].push(b),this}function P(a,b){var c,d,e=this._eventDispatcherListeners;return e&&(c=e[a],void 0!==c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1))),this}function Q(a,b){var c,d=b.length;for(c=0;d>c;++c)w.call(a.scope,a,{},b[c])}function R(a,b){var c,d,e,f=this._eventDispatcherListeners;return f?(a instanceof Tb?(c=a,d=a.type):d=a,e=this._eventDispatcherListeners[d],void 0===e?this:(c||(c=new Tb(d,b,this)),Q(c,e),c)):this}function S(a,b){ac[b]=a,void 0===_b[a]&&(_b[a]=b)}function T(a,b){z(b,function(b,c){var d=a+c;0===b?S(d,"."+c):"string"==typeof b?b.split(",").forEach(function(a){S(d,"."+a)}):T(d+"/",b)})}function U(a){var b=ac[a.toLowerCase()];return void 0===b&&(b="application/octet-stream"),b}function V(a){var b=_b[a.toLowerCase()];return void 0===b&&(b=".bin"),b}function W(){null===ac&&(ac={},_b={},T("",$b))}function X(a,b){return a.dt-b.dt}function Y(a,b){sb("number"==typeof b,"Timeout is required");var c={id:++cc,dt:new Date((new Date).getTime()+b),cb:a};return bc.push(c),bc.sort(X),cc}function Z(a){var b;bc.every(function(c,d){return c.id===a?(b=d,!1):!0})||bc.splice(b,1)}function $(){for(var a,b,c=bc;c.length;)a=c.shift(),b=new Date,a.dt>b&&dc(a.dt-b),a.cb()}function _(a,b,c){var d,e,f,g=a.base,h=a.value,i=[];for(d=void 0===c?32:c*b,e=(1<<d-b)-1,d=(1<<b)-1;0!==h;)f=h&d,i.unshift(g.charAt(f)),h=h>>b&e;return i}function aa(a){for(var b,c=a.base,d=a.value,e=[],f=c.length;0!==d;)b=d%f,e.unshift(c.charAt(b)),d=(d-b)/f;return e}function ba(b,c){var d=a.bin.isPow2(b.base.length);return d>-1&&(void 0===c||32>=c*d)?_(b,d,c):aa(b)}function ca(a,b,c){var d=c.length,e=c.pad,f=ba({base:a,value:b},d);if(void 0!==d)for(void 0===e&&(e=a.charAt(0));f.length<d;)f.unshift(e.charAt(f.length%e.length));else 0===f.length&&(f=[a.charAt(0)]);return f.join("")}function da(a,b,c){var d=a.length,e=0,f=0;for(void 0===c&&(c=a.charAt(0));f<b.length&&-1!==c.indexOf(b.charAt(f));)++f;for(;f<b.length;)e=d*e+a.indexOf(b.charAt(f++));return e}function ea(a){var b,c,d,e;b=a instanceof Array,c=[];for(d in a)"function"!=typeof a[d]&&(e=ga(a[d]),b?c.push(e):c.push(C(d,"javascript")+":"+e));return b?"["+c.join(",")+"]":"{"+c.join(",")+"}"}function fa(a){return a.toString()}function ga(a){var b=kc[typeof a];return void 0!==b?b(a):null===a?"null":ea(a)}function ha(a){return r("return "+a)()}function ia(a){if(-1<a.indexOf("/"))a=a.split("/");else{if(!(-1<a.indexOf("\\")))return[a];a=a.toLowerCase().split("\\")}return a.length&&!a[a.length-1]&&a.pop(),a}function ja(a){return a=ia(a),a[a.length-1]}function ka(a){return a.split("*")}function la(a){"!"===a.charAt(0)&&(this.negative=!0,a=a.substr(1));var b=a.indexOf("**");-1===b?this.start=a.split("/").map(ka):(b>0&&(sb("/"===a.charAt(b-1),"** must be preceded by /"),this.start=a.substr(0,b-1).split("/").map(ka)),b<a.length-2&&(sb("/"===a.charAt(b+2),"** must be followed by /"),this.end=a.substr(b+3).split("/").map(ka).reverse()))}function ma(a){return a instanceof la?a:new la(a)}function na(a){return a instanceof Array?a.map(ma):[ma(a)]}function oa(a){var b=a.negative;return a.match(this.parts)?(this.result=!b,!1):b?(this.result=!0,!1):!0}function pa(a,b){var c=ia(b),d=na(a),e={parts:c};return d.every(oa,e),e.result}function qa(a){var b,c,d=lc.length;for(b=0;d>b;++b)if(c=lc.charAt(b),-1!==a.indexOf(c))return c;return lc.charAt(0)}function ra(a){var b=a.length-1;return"\r"===a.charAt(b)?a.substr(0,b):a}function sa(a,b){b=b||{},this._lines=a.split("\n").map(ra);var c=b.header||this._lines.shift();this._separator=b.separator||qa(c),this._quote=b.quote||'"',this._columns=c.split(this._separator)}function ta(a){return"constructor"===a?"constructor ":a}function ua(a){return"constructor "===a?"constructor":a}function va(a){return function(){a.isConstructionAllowed()&&a._resolvedConstructor.apply(this,arguments)}}function wa(a){var b=a.toString().split("._super");return!b.every(function(a){return-1!==Rb.indexOf(a.charAt(0))})}function xa(a,b){return function(){var c,d=this._super;this._super=a;try{c=b.apply(this,arguments)}finally{void 0===d?delete this._super:this._super=d}return c}}function ya(a,b,c){this._uid=++oc,nc[this._uid]=this,this._Subs=[],"function"==typeof a?(this._name=a.compatibleName()||"anonymous",this._Constructor=a):(this._name=a,this._Super=b,this._definition=c,this._build())}function za(a){var b,c=a[pc];return void 0===c?(b=new ya(a),a[pc]=b._uid):b=nc[c],b}function Aa(a,b,c){tb({"name is required (String)":"string"==typeof a,"base is required (String|Function)":"string"==typeof b||b instanceof Function,"definition is required (Object)":"object"==typeof c});var d,e,g,h,i;return-1<a.indexOf(".")&&(e=a.split("."),h=e.pop(),g=f(e,!0)),"string"==typeof b&&(b=f(b.split(".")),sb(b instanceof Function,"base must resolve to a function")),i=new ya(a,b,c),d=i._Constructor,void 0!==g&&(g[h]=d),d}function Ba(a,b){var c=this[b];void 0!==c&&(this[a]=c,delete this[b])}function Ca(a,b,c){return z(vc,Ba,c),Aa(a,b,c)}function Da(a,b){return a+=".",b=a+b,function(c,d,e){return void 0===e&&"object"==typeof d&&(e=d,d=b),-1===c.indexOf(".")&&(c=a+c),Ca(c,d||b,e||{})}}function Ea(b,c){c="$"+c,a[c]=function(){var a=r("return function "+c+"(args) {this.constructor.apply(this, args);};")();return a.prototype=b.prototype,function(){return new a(arguments)}}()}function Fa(a){return r("return this."+a+".length;")}function Ga(a){return r(["idx"],"return this."+a+"[idx];")}function Ha(a,b,c){var d,e,f="$"===a.charAt(0);return f?(a=a.substr(1),d=a+"Attribute"):d=a,e=Ac(d,b,c),f&&Ea(e,a),e}function Ia(b,c){throw mb(b,c),a.Error.abstractMethod()}function Ja(){return this._MEMBER_}function Ka(a){var b=this._MEMBER_;return this._MEMBER_=a,b}function La(a,b){var c,d,e,f;return c=a.toString().split("_MEMBER_").join(b),e=c.indexOf("(")+1,f=c.indexOf(")",e)-1,d=c.substr(e,f-e+1).split(",").map(function(a){return a.trim()}),e=c.indexOf("{")+1,f=c.lastIndexOf("}")-1,c=c.substr(e,f-e+1),r(d,c)}function Ma(a,b){var c,d,e,f;for(c in b.prototype)if("constructor"!==c){if(d=b.prototype[c],e=a[c],f=typeof e,typeof d!==f)return!1;if("function"===f&&d.length!==e.length)return!1}return!0}function Na(b,c,d){var e=null;if(Ma(b,c))return b;if(Ma(b,a.interfaces.IUnknown)&&(e=b.queryInterface(c)),null===e&&(void 0===d||d))throw a.Error.interfaceExpected({name:za(c)._name});return e}function Oa(b){var c,d=new a.attributes.Map(this).getMemberAttributes("Class").filter(a.attributes.InterfaceImplementAttribute);return d.every(function(a){return c=a._builder,a._interfaceDefinition!==b||!c})?null:"function"==typeof c?c(this):this[c]()}function Pa(a){return function(b){mb(b);var c=Oa.apply(this,arguments);return null===c&&(c=a.apply(this,arguments)),c}}function Qa(b,c,d){function e(a){w.call(b,a,{},d)}var f,g=Hc.query(b,Hc.IEnumerator);if(1<c.length)f=function(b){if(a.events.EVENT_CONTINUE===b.type){if(!g.moveNext(f))return}else{if(a.events.EVENT_STOP===b.type)return e(a.events.EVENT_STOPPED);if(a.events.EVENT_DATA!==b.type)return e(b.type)}c(g.current(),f)},g.moveNext(f)&&c(g.current(),f);else for(f=function(b){if(a.events.EVENT_DATA!==b.type)return e(b);do c(g.current());while(g.moveNext(f))};g.moveNext(f);)c(g.current())}function Ra(a){var b=-1;return{reset:function(){b=-1},moveNext:function(c){var d;return++b,d=b<a.length,!d&&c&&w.call(this,Db,{},c),d},current:function(){return a[b]}}}function Sa(a){var b=new zc.Map(a).filter(zc.EnumerableAttribute),c=b.getMembers();return Ra(a[c[0]])}function Ta(b){return function(c,d,e){function f(a,b){w(a,b||{},e)}function g(a){Ab===a.type&&f(a),0===--i&&f(Db)}function h(d){var e,l,m=d.type;Jb===m?(++i,b.explore(d.filePath,function(a){Ab===a.type?f(a):Hc.IEnumerator.each(a.get("enumerator"),h,g)})):Ib===m&&(e=d.filePath,l=a.path.relative(c,e),j(k,l)&&f(Cb,{path:l}))}var i=0,j=a.path.match,k=a.path.compileMatchPattern(d);b.getInfo(c,function(a){Ab===a.type?f(a):h(a.get("info"))})}}function Ua(a,b){this._readable=Na(a.readable,Hc.IReadableStream,!0),this._writable=Na(a.writable,Hc.IWritableStream,!0),void 0!==a.chunkSize&&(this._chunkSize=a.chunkSize),this._eventsHandler=b}function Va(a,b){var c=new Ua(a,b);c.ready()}function Wa(a,b){for(var c,d,e=a.length,f=0;b>0&&e>f&&(c=a[f],d=c.length,b>=d);)++f,b-=d;return{count:f,remaining:b}}function Xa(a,b,c){var d,e;return sb(b<=a.length,"itemsCount within strings range"),d=b>0?a.splice(0,b):[],a.length&&c&&(e=a.shift(),d.push(e.substr(0,c)),a.unshift(e.substr(c))),d.join("")}function Ya(a,b){var c=Wa(a,b);return Xa(a,c.count,c.remaining)}var Za,$a,_a,ab,bb,cb="0.1.5-alpha",db="browser",eb="nodejs",fb="phantomjs",gb="rhino",hb="unknown",ib="wscript",jb=hb,kb=!1,lb=this,mb=b,nb=b,ob=!1,pb=!1,qb={},rb=function(){var a,b=["var C = this,","    p = arguments,","    l = p.length;"],c=[],d=Function;for(a=0;10>a;++a)c.push("p["+a+"]");for(a=0;10>a;++a)b.push("    if ("+a+" === l) {"),b.push("        return new C("+c.slice(0,a).join(", ")+");"),b.push("    }");return new d(b.join("\r\n"))}();"undefined"!=typeof WScript?(jb=ib,kb=!0,lb=function(){return this}.call(null),nb=function(a){WScript.Quit(a)},lb.console={log:function(a){WScript.Echo("    "+a)},info:function(a){WScript.Echo("[?] "+a)},warn:function(a){WScript.Echo("/!\\ "+a)},error:function(a){WScript.Echo("(X) "+a)}}):"undefined"!=typeof print&&"undefined"!=typeof java?(jb=gb,kb=!1,lb=function(){return this}.call(null),nb=function(a){java.lang.System.exit(a)},lb.console={log:function(a){print("    "+a)},info:function(a){print("[?] "+a)},warn:function(a){print("/!\\ "+a)},error:function(a){print("(X) "+a)}}):"undefined"!=typeof phantom&&phantom.version?(jb=fb,kb="\\"===require("fs").separator,lb=window,ob=!0,pb=!0,nb=phantom.exit):"undefined"!=typeof module&&module.exports?(jb=eb,bb=require("path"),kb="\\"===bb.sep,lb=global,ob=!0,nb=process.exit):"undefined"!=typeof window&&(jb=db,lb=window,pb=!0,nb=b,$a=window,_a=document,ab=_a.getElementsByTagName("head")[0]||_a.documentElement),Za=lb.gpf,a.noConflict=function(){return void 0===Za?delete lb.gpf:lb.gpf=Za,a},ob&&(a.node={}),a.web={},a.version=function(){return cb},a.host=function(){return jb},a.context=function(a){return void 0===a?lb:f(a.split("."))},a.loaded=function(a){return a&&a(),!0};var sb,tb;sb=b,tb=b,qb.Array={on:Array,methods:{every:function(a){var b,c=arguments[1],d=this.length;for(b=0;d>b;++b)if(!a.call(c,this[b],b,this))return!1;return!0},filter:function(a){var b,c,d=arguments[1],e=[],f=this.length;for(b=0;f>b;++b)c=this[b],a.call(d,this[b],b,this)&&e.push(c);return e},forEach:function(a){var b,c=arguments[1],d=this.length;for(b=0;d>b;++b)a.call(c,this[b],b,this)},indexOf:function(a){for(var b=arguments[1],c=b||0,d=this.length;d>c;){if(this[c]===a)return c;++c}return-1},map:function(a){var b,c=arguments[1],d=this.length,e=new Array(d);for(b=0;d>b;++b)e[b]=a.call(c,this[b],b,this);return e},reduce:function(a){var b,c=arguments[1],d=this.length,e=0;for(b=void 0===c?this[e++]:c;d>e;++e)b=a(b,this[e],e,this);return b}},statics:{from:function(a){var b,c=a.length,d=[],e=arguments[1],f=arguments[2];if("string"==typeof a)for(b=0;c>b;++b)d.push(a.charAt(b));else for(b=0;c>b;++b)d.push(a[b]);return"function"==typeof e&&(d=d.map(e,f)),d}}},qb.Date={on:Date,methods:{toISOString:function(){return[this.getUTCFullYear(),"-",h(this.getUTCMonth()+1),"-",h(this.getUTCDate()),"T",h(this.getUTCHours()),":",h(this.getUTCMinutes()),":",h(this.getUTCSeconds()),".",(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5),"Z"].join("")}}};var ub=new RegExp(["^([0-9][0-9][0-9][0-9])","\\-","([0-9][0-9])","\\-","([0-9][0-9])","(?:T","([0-9][0-9])","\\:","([0-9][0-9])","\\:","([0-9][0-9])","(?:\\.","([0-9][0-9][0-9])","Z)?)?$"].join("")),vb=lb.Date;!function(){var a,b,c=["prototype","UTC","parse","now"],d=c.length;for(a=0;d>a;++a)b=c[a],j[b]=vb[b];var e=!1;try{var f=new Date("2003-01-22T22:45:34.075Z"),g=new Date("2003-01-22");e=2003===f.getUTCFullYear()&&0===f.getUTCMonth()&&22===f.getUTCDate()&&22===f.getUTCHours()&&45===f.getUTCMinutes()&&34===f.getUTCSeconds()&&75===f.getUTCMilliseconds()&&2003===g.getUTCFullYear()&&0===g.getUTCMonth()&&22===g.getUTCDate()}catch(h){}e||(lb.Date=j)}();var wb=Array.prototype.slice;qb.Function={on:Function,methods:{bind:function(a){var b=this,c=wb.call(arguments,1);return function(){var d=wb.call(arguments,0);b.apply(a,c.concat(d))}}}};var xb=new RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");!function(){function a(){}return"functionName"!==a.name}()?Function.prototype.compatibleName=function(){return this.name}:Function.prototype.compatibleName=k,qb.Object={on:Object,statics:{create:function(){function a(){}return function(b){a.prototype=b;var c=new a;return a.prototype=null,c.__proto__||(c.__proto__=b),c}}(),getPrototypeOf:function(a){return a.__proto__?a.__proto__:a.constructor.prototype},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},values:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}}},qb.String={on:String,methods:{trim:function(){var a=new RegExp("^[\\s\ufeff ]+|[\\s\ufeff ]+$","g");return function(){return this.replace(a,"")}}()}};var yb=a.Promise=function(a){l(a,o.bind(this),n.bind(this))};p.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(a){var b=this;return null===a._state?(a.hasOwnProperty("_handlers")||(a._handlers=[]),void a._handlers.push(b)):void setTimeout(function(){var c,d;if(c=a._state?b.onFulfilled:b.onRejected,null===c)return void(a._state?b.resolve(a._value):b.reject(a._value));try{d=c(a._value)}catch(e){return void b.reject(e)}b.resolve(d)},0)}},yb.prototype={_state:null,_value:null,_handlers:[],then:function(a,b){var c=this;return new yb(function(d,e){var f=new p;void 0!==a&&(f.onFulfilled=a),void 0!==b&&(f.onRejected=b),f.resolve=d,f.reject=e,f.process(c)})},"catch":function(a){return this.then(null,a)}},yb.resolve=function(a){return new yb(function(b){b(a)})},yb.reject=function(a){return new yb(function(b,c){mb(b),c(a)})},yb.all=function(a){return 0===a.length?yb.resolve([]):new yb(function(b,c){function d(f,g){try{if(f&&f instanceof yb)return void f.then(function(a){d(a,g)},c);a[g]=f,0===--e&&b(a)}catch(h){c(h)}}var e=a.length;a.forEach(d)})},yb.race=function(a){return new yb(function(b,c){a.forEach(function(a){a.then(b,c)})})},void 0===lb.Promise&&(lb.Promise=yb),function(){function a(a,b){for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c])}var b,c;for(b in qb)if(qb.hasOwnProperty(b)){c=qb[b];var d=c.on;c.methods&&a(d.prototype,c.methods),c.statics&&a(d,c.statics)}}();var zb="*",Ab="error",Bb="ready",Cb="data",Db="endOfData",Eb="continue",Fb="stop",Gb="stopped",Hb=0,Ib=1,Jb=2,Kb=99,Lb=Function,Mb=2147483647,Nb=4294967295,Ob="abcdefghijklmnopqrstuvwxyz",Pb="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Qb="0123456789",Rb=Ob+Pb+Qb+"_$",Sb="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield".split(",");s(a,{HOST_BROWSER:db,HOST_NODEJS:eb,HOST_PHANTOMJS:fb,HOST_RHINO:gb,HOST_UNKNOWN:hb,HOST_WSCRIPT:ib}),a.events={isValidHandler:t};var Tb=a.events.Event=function(a,b,d){this.type=a,this.scope=c(d),void 0!==b&&(this._params=b)};Tb.prototype={constructor:Tb,type:"",scope:null,_params:{},get:function(a){return this._params[a]}};var Ub=0;Tb.prototype.fire=function(a){return w.call(this,this,{},a)},a.events.fire=function(b,c,d){mb(b,c,d);var e,f=this;return this!==a.events&&(e=f),void 0===d&&(d=c,c={}),w.call(e,b,c,d)},a.events.getPromiseHandler=x,s(a.events,{EVENT_ANY:zb,EVENT_ERROR:Ab,EVENT_READY:Bb,EVENT_DATA:Cb,EVENT_END_OF_DATA:Db,EVENT_CONTINUE:Eb,EVENT_STOP:Fb,EVENT_STOPPED:Gb}),pb&&(a.web.include=function(){function a(a,b){this.id=++g,this.url=a,this.eventsHandler=b,h[this.id]=this}function b(a){return h[a.substr(f.length)]}function c(){var a=this,c=b(a.id);c&&c.check(a)}function d(){var a=this,c=b(a.id);c&&c.failed(a)}function e(a){ab.insertBefore(a,ab.firstChild)}var f="gpf-include-",g=0,h={};return a.prototype={id:0,url:"",eventsHandler:null,clean:function(a){var b=a.parentNode;a.onerror=a.onload=a.onreadystatechange=null,b&&b.removeChild(a),delete h[this.id]},check:function(a){var b=a.readyState;(!b||-1<["loaded","complete"].indexOf(b))&&(this.clean(a),setTimeout(w,0,Bb,{url:this.url},this.eventsHandler))},failed:function(a){this.clean(a),setTimeout(w,0,Ab,{url:this.url},this.eventsHandler)}},function(b,g){var h=new a(b,g),i=_a.createElement("script");i.language="javascript",i.src=b,i.id=f+h.id,i.onload=i.onreadystatechange=c,i.onerror=d,void 0!==i.async&&(i.async=!0),setTimeout(e,0,i)}}());var Vb;Vb=db===jb&&($a.HTMLCollection||$a.NodeList)?function(a){return a instanceof Array||a instanceof $a.HTMLCollection||a instanceof $a.NodeList}:function(a){return a instanceof Array},a.isArrayLike=Vb,a.forEach=function(a,b,c){return Vb(a)?void y(a,b,c):void z(a,b,c)};var Wb={javascript:{"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","	":"\\t"},xml:{"&":"&amp;","<":"&lt;",">":"&gt;"}};!function(){var a=Wb,b={};z(a.xml,function(a,c){b[c]=a}),z({224:"&agrave;",225:"&aacute;",232:"&egrave;",233:"&eacute;",234:"&ecirc;"},function(a,c){b[String.fromCharCode(c)]=a}),a.html=b}(),a.extend=F;var Xb={"boolean":function(a,b,c){return mb(c),"string"===b?"yes"===a||"true"===a?!0:0!==parseInt(a,10):"number"===b?0!==a:void 0},number:function(a,b,c){return mb(c),"string"===b?parseFloat(a):void 0},string:function(a,b,c){return a instanceof Date?a.toISOString():(mb(b,c),a.toString())},object:function(a,b,c){return c instanceof Date&&"string"===b&&i(a)?new Date(a):void 0}};a.value=G,F(a,{clone:function(a){return JSON.parse(JSON.stringify(a))},test:function(a,b){var c;if(a instanceof Array){for(c=a.length;c>0;)if(a[--c]===b)return c}else for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c},set:function(a,b){sb(a instanceof Array,"gpf.set must be used with an Array");for(var c=a.length;c>0;)if(a[--c]===b)return a;return a.push(b),a},clear:function(a,b){var c;if(a instanceof Array){for(c=a.length;c>0;)if(a[--c]===b){a.splice(c,1);break}}else for(c in a)a.hasOwnProperty(c)&&a[c]===b&&delete a[c];return a},xor:function(a,b){return a&&!b||!a&&b}}),a.exit=function(a){void 0===a&&(a=0),nb(a)},I.prototype={isNative:!1,name:"",parameters:[],body:"",replaceInBody:function(a){this.body=B(this.body,a)},_extract:function(a){this.name=a.compatibleName();var b,c,d=Function.prototype.toString.call(a).replace(xb,"");0<a.length?(b=d.indexOf("(")+1,c=d.indexOf(")",b)-1,this.parameters=d.substr(b,c-b+1).split(",").map(H)):this.parameters=[],-1<d.indexOf("[native")?this.isNative=!0:(b=d.indexOf("{")+1,c=d.lastIndexOf("}")-1,this.body=d.substr(b,c-b+1))},generate:function(){return r("return "+this._toSource())()},_toSource:function(){var a;return a=this.name?" "+this.name:"",["function",a," ("].concat(this.parameters).concat([") {\n",this.body,"\n}"]).join("")}},J.prototype={_pending:[],_done:[],_stack:function(a,b){var c,d,e=this._done;for(c=e.indexOf(a);c>-1;){if(d=c%2?e[c-1]:e[c+1],d===b)return;c=e.indexOf(a,c+1)}e=this._pending,e.push(a),e.push(b)},_haveDifferentPrototypes:function(a,b){return a.constructor!==b.constructor},explore:function(){for(var a,b,c=this._pending,d=this._done;0!==c.length;){if(b=c.pop(),a=c.pop(),d.push(a,b),this._haveDifferentPrototypes(a,b))return!1;if(this._checkMembersDifferences(a,b))return!1}return!0},_checkMembersDifferences:function(a,b){var c,d=0;for(c in a)if(a.hasOwnProperty(c)&&(++d,!this.like(a[c],b[c])))return!0;for(c in b)b.hasOwnProperty(c)&&--d;return 0!==d},_downcast:function(a){return"object"==typeof a?a instanceof String?a.toString():a.valueOf():a},_alike:function(a,b){return this._downcast(a)===this._downcast(b)},like:function(a,b){return a===b?!0:typeof a!=typeof b?this._alike(a,b):null===a||null===b||"object"!=typeof a?!1:(this._stack(a,b),!0)}},a.like=function(a,b,c){var d=new J(c);return d.like(a,b)&&d.explore()};var Yb=a.Error=function(){};Yb.prototype={constructor:Yb,code:0,name:"Error",message:""};var Zb=0;M("boot",{notImplemented:"Not implemented",abstractMethod:"Abstract method",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),a.mixins={EventDispatcher:{addEventListener:O,removeEventListener:P,dispatchEvent:R}};var $b={application:{javascript:"js"},image:{gif:0,jpeg:"jpg,jpeg",png:0},text:{css:0,html:"htm,html",plain:"txt,text,log"}},_b=null,ac=null;g("gpf.web.getMimeType",function(){return W(),U}),g("gpf.web.getFileExtension",function(){return W(),V});var bc=[],cc=0,dc=b;a.handleTimeout=b,"undefined"==typeof setTimeout&&(ib===jb?dc=function(a){WScript.Sleep(a)}:gb===jb?dc=java.lang.Thread.sleep:console.warn("No implementation for setTimeout"),lb.setTimeout=Y,lb.clearTimeout=Z,a.handleTimeout=$);var ec=Pb+Ob+Qb+"+/",fc="0123456789ABCDEF",gc=987654321,hc=(new Date).getTime()&Nb;a.bin={pow2:function(a){if(31===a)return Mb+1;if(32===a)return Nb+1;if(31>a)return 1<<a;var b=Nb+1;for(a-=31;--a;)b*=2;return b},isPow2:function(a){if(a>0&&0===(a&a-1)){for(var b=0;a>1;)++b,a/=2;return b}return-1},toHexa:function(a,b,c){return ca(fc,a,{length:b,pad:c})},fromHexa:function(a,b){return da(fc,a,b)},toBase64:function(a,b,c){return ca(ec,a,{length:b,pad:c})},fromBase64:function(a,b){return da(ec,a,b)},test:function(a,b){return(a&b)===b},clear:function(a,b){return a&~b},random:function(){return gc=36969*(65535&gc)+(gc>>16)&Nb,hc=18e3*(65535&hc)+(hc>>16)&Nb,((gc<<16)+hc&Nb)+Mb}};var ic,jc,kc={undefined:b,"function":b,number:fa,"boolean":fa,string:function(a){return C(a,"javascript")}};"undefined"==typeof JSON?(ic=ga,jc=ha,lb.JSON={stringify:ic,parse:jc}):(ic=JSON.stringify,jc=JSON.parse),a.path={join:function(a){a=ia(a);var b,c,d=arguments.length;for(b=1;d>b;++b){for(c=ia(arguments[b]);".."===c[0];){if(c.shift(),!a.length)return"";a.pop()}c.length&&(a=a.concat(c))}return a.join("/")},parent:function(a){return a=ia(a),a.pop(),a.join("/")},name:ja,nameOnly:function(a){var b=ja(a),c=b.lastIndexOf(".");return-1===c?b:b.substr(0,c)},extension:function(a){var b=ja(a),c=b.lastIndexOf(".");return-1===c?"":b.substr(c)},relative:function(a,b){a=ia(a),b=ia(b);for(var c;a.length&&b.length&&a[0]===b[0];)a.shift(),b.shift();for(c=a.length+1;--c;)b.unshift("..");return b.join("/")}},la.prototype={constructor:la,negative:!1,start:null,end:null,_matchName:function(a,b){var c,d,e=a.length,f=0;for(c=0;e>c;++c)if(d=a[c]){if(f=b.indexOf(d,f),-1===f)return!1;if(0===c&&f>0)return!1}return!d||f+d.length===b.length},_matchStart:function(a){var b,c=a.parts,d=c.length,e=a.startPos,f=this.start,g=f.length;for(b=0;g>b;++b){if(!this._matchName(f[b],c[e]))return!1;if(++e>=d)return b===g-1&&!this.end}a.startPos=e},_matchEnd:function(a){var b,c=a.parts,d=a.startPos,e=c.length-1,f=this.end,g=f.length;for(b=0;g>b;++b){if(!(e>-1&&this._matchName(f[b],c[e])))return!1;if(e--<d)return!1}},match:function(a){var b,c={parts:a,startPos:0};return this.start&&(b=this._matchStart(c),void 0!==b)?b:this.end&&(b=this._matchEnd(c),void 0!==b)?b:!0}},F(a.path,{match:function(a,b){return pa(a,b)||!1},compileMatchPattern:function(a){return na(a)}}),a.js={keywords:function(){return[].concat(Sb)}},M("csv",{csvInvalid:"Invalid CSV syntax (bad quote sequence or missing end of file)"});var lc=";,	 ";sa.prototype={_lines:[],_separator:"",_quote:"",_columns:[],_unquote:function(b){for(var c=this._quote,d=b.indexOf(c),e=!0;d>-1;){if(d===b.length-1){b=b.substr(0,d),e=!1;break}if(b.charAt(d+1)!==c)throw a.Error.csvInvalid();b=b.substr(0,d)+b.substr(d+1),d=b.indexOf(c,d+1)}return[b,e]},_processQuotedLineValue:function(a,b,c){var d,e=a[b],f=[a[b-1]];return c.includeCarriageReturn?f.push("\r\n"):f.push(this._separator),d=this._unquote(e),f.push(d[0]),c.inQuotedString=d[1],a[b-1]=f.join(""),c.includeCarriageReturn=!1,a.splice(b,1),b},_processLineValue:function(a,b,c){var d,e=a[b];return 0===e.indexOf(this._quote)&&(c.inQuotedString=!0,d=this._unquote(e.substr(1)),a[b]=d[0],c.inQuotedString=d[1]),b+1},_processLineValues:function(a,b,c){var d;for(c.inQuotedString?(c.includeCarriageReturn=!0,a.unshift(b.pop()),d=1):(d=0,c.includeCarriageReturn=!1);d<a.length;)d=c.inQuotedString?this._processQuotedLineValue(a,d,c):this._processLineValue(a,d,c);return[].splice.apply(b,[b.length,0].concat(a)),!c.inQuotedString},_readValues:function(){for(var b,c=this._lines,d=this._separator,e=[],f={inQuotedString:!1,includeCarriageReturn:!1};c.length&&(b=c.shift().split(d),!this._processLineValues(b,e,f)););if(f.inQuotedString)throw a.Error.csvInvalid();return e},read:function(){var a=this._readValues(),b={};return this._columns.forEach(function(c,d){b[c]=a[d]}),b},readAll:function(){for(var a=[];this._lines.length;)a.push(this.read());return a}},a.csv={parse:function(a,b){var c=new sa(a,b);return c.readAll()}},M("define",{classMemberOverloadWithTypeChange:"You can't overload a member and change its type",classInvalidVisibility:"Invalid visibility keyword"});var mc=!0,nc={},oc=0,pc="_gpf_"+a.bin.toHexa(a.bin.random(),8),qc="public|protected|private|static".split("|"),rc=-1,sc=0,tc=1,uc=3;ya.prototype={constructor:ya,_uid:0,_name:"",_Super:Object,_Subs:[],_definitionAttributes:null,_Constructor:b,_definitionConstructor:null,_resolvedConstructor:b,_definition:null,isConstructionAllowed:function(){return mc},addMember:function(b,c,d){if(void 0===d)d=sc;else if(d=qc.indexOf(d),-1===d)throw a.Error.classInvalidVisibility();this._addMember(b,c,d)},_addMember:function(a,b,c){uc===c?(sb(void 0===this._Constructor[a],"Static members can't be overridden"),this._Constructor[a]=b):"constructor"===a?this._addConstructor(b,c):this._addNonStaticMember(a,b,c)},_addConstructor:function(a,b){tb({"Constructor must be a function":"function"==typeof a,"Own constructor can't be overridden":null===this._definitionConstructor}),wa(a)&&(a=xa(this._Super,a)),mb(b),this._definitionConstructor=a},_addNonStaticMember:function(b,c,d){var e,f,g=typeof c,h=this._Constructor.prototype;if(sb(!h.hasOwnProperty(b),"Existing own member can't be overridden"),e=this._Super.prototype[b],f=typeof e,"undefined"!==f){if(null!==e&&g!==f)throw a.Error.classMemberOverloadWithTypeChange();"function"===g&&wa(c)&&(c=xa(e,c))}mb(d),h[b]=c},_filterAttribute:function(a,b){var c;return"["!==a.charAt(0)||"]"!==a.charAt(a.length-1)?!1:(a=ta(a.substr(1,a.length-2)),this._definitionAttributes?c=this._definitionAttributes[a]:this._definitionAttributes={},void 0===c&&(c=[]),this._definitionAttributes[a]=c.concat(b),!0)},_defaultVisibility:rc,_deduceVisibility:function(a){var b=this._defaultVisibility;return rc===b&&(b="_"===a.charAt(0)?tc:sc),b},_processDefinitionMember:function(b,c){if(!this._filterAttribute(c,b)){var d=qc.indexOf(c);if(rc===d)return this._addMember(c,b,this._deduceVisibility(c));if(rc!==this._defaultVisibility)throw a.Error.classInvalidVisibility();this._processDefinition(b,d)}},_processDefinition:function(a,b){var c=ib===jb;this._defaultVisibility=b,z(a,this._processDefinitionMember,this),c&&a.hasOwnProperty("toString")&&this._processDefinitionMember(a.toString,"toString"),this._defaultVisibility=rc,c&&a.hasOwnProperty("constructor")&&this._addConstructor(a.constructor,this._defaultVisibility)},_processAttributes:function(){var a,b,c=this._definitionAttributes;c&&(sb("function"==typeof Cc,"Attributes can't be defined before they exist"),a=this._Constructor,b=a.prototype,z(c,function(c,d){d=ua(d),d in b||"Class"===d?Cc(a,d,c):console.error("gpf.define: Invalid attribute name '"+d+"'")}))},_getNewClassConstructor:function(a){var b=new I(va);return b.replaceInBody({"function":"function "+a}),b.generate()(this)},_safeNewSuper:function(){var a;return mc=!1,a=new this._Super,mc=!0,a},_build:function(){var a,b,c,d;d=this._name.split(".").pop(),a=this._getNewClassConstructor(d),this._Constructor=a,a[pc]=this._uid,b=this._safeNewSuper(),a.prototype=b,b.constructor=a,c=za(this._Super),c._Subs.push(a),this._processDefinition(this._definition,rc),this._processAttributes(),this._resolveConstructor()},_resolveConstructor:function(){this._definitionConstructor?this._resolvedConstructor=this._definitionConstructor:Object!==this._Super&&(this._resolvedConstructor=this._Super);
}};var vc={"-":"private","#":"protected","+":"public","~":"static"};a.define=function(a,b,c){return"object"==typeof b&&(c=b,b=void 0),void 0===b&&(b=Object),Aa(a,b,c||{})},ya.prototype._attributes=null;var wc,xc,yc,zc=a.attributes={},Ac=Da("gpf.attributes","Attribute"),Bc=Ca("gpf.attributes.Attribute",Object,{"#":{_member:"",_alterPrototype:function(a){mb(a)}},"+":{getMemberName:function(){return this._member}}});xc=b,yc=b,Ca("gpf.attributes.Array",Object,{"-":{_array:[]},"+":{constructor:function(){this._array=[]},getItemsCount:Fa("_array"),getItem:Ga("_array"),has:function(a){return xc(a),!this._array.every(function(b){return!(b instanceof a)})},filter:function(a){xc(a);var b=new zc.Array;return b._array=this._array.filter(function(b){return b instanceof a}),b},forEach:function(a,b){this._array.forEach(a,b)},every:function(a,b){return this._array.every(a,b)}}}),wc=new zc.Array,Ca("gpf.attributes.Map",Object,{"-":{_members:{},_count:0,_copy:function(a,b,c){return z(this._members,function(d,e){e=ua(e),d._array.forEach(function(d){b&&!b(e,d,c)||a.add(e,d)})}),a},_filterCallback:function(a,b,c){return mb(a),b instanceof c}},"+":{constructor:function(a){this._members={},a instanceof Function?this.fillFromClassDef(za(a)):void 0!==a&&this.fillFromObject(a)},fillFromClassDef:function(a){for(var b,c;a&&(b=a._attributes,b&&b._copy(this),c=a._Super,c!==Object);)a=za(c);return this},fillFromObject:function(a){var b=za(a.constructor);return this.fillFromClassDef(b)},getCount:function(){return this._count},add:function(a,b){yc(b),a=ta(a);var c=this._members[a];void 0===c&&(c=this._members[a]=new zc.Array),c._array.push(b),++this._count},filter:function(a){return xc(a),this._copy(new zc.Map,this._filterCallback,a)},getMemberAttributes:function(a){a=ta(a);var b=this._members[a];return void 0!==b&&b instanceof zc.Array?b:wc},getMembers:function(){var a=[];return z(this._members,function(b,c){mb(b),a.push(ua(c))}),a},forEach:function(a,b){z(this._members,function(c,d,e){a.call(b,c,ua(d),e)})}}});var Cc=zc.add=function(a,b,c){c instanceof zc.Array?c=c._array:c instanceof Array||(c=[c]);var d,e,f,g=za(a),h=g._attributes;for(h||(h=g._attributes=new zc.Map),d=c.length,e=0;d>e;++e)f=c[e],sb(f instanceof Bc,"Expected attribute"),f._member=b,h.add(b,f),f._alterPrototype(a.prototype)};M("a_attributes",{onlyForAttributeClass:"The attribute {attributeName} can be used only on an Attribute class",onlyOnClassForAttributeClass:"The attribute {attributeName} must be used on Class",classOnlyAttribute:"The attribute {attributeName} can be used only for Class",memberOnlyAttribute:"The attribute {attributeName} can be used only for members",uniqueAttributeConstraint:"Attribute {attributeName} already defined on {className}",uniqueMemberAttributeConstraint:"Attribute {attributeName} already defined on {className}::{memberName}"});var Dc=Ha("AttrClassOnlyAttribute",{"#":{_alterPrototype:function(b){if(!(b instanceof Bc))throw a.Error.onlyForAttributeClass({attributeName:za(this.constructor)._name});if("Class"!==this._member)throw a.Error.onlyOnClassForAttributeClass({attributeName:za(this.constructor)._name})}}}),Ec=Ha("AttrConstraintAttribute",Dc,{"~":{originalAlterPrototype:"_alterPrototype:checked"},"-":{_checkAndAlterPrototype:function(a){var b=this,c=zc.AttrConstraintAttribute,d=c.originalAlterPrototype,e=new zc.Map(b);e.filter(Ec).forEach(function(c){c.forEach(function(c){c._check(b,a)})}),b[d](a)}},"#":{_check:Ia,_alterPrototype:function(a){var b=zc.AttrConstraintAttribute,c=b.originalAlterPrototype;this._super(a),void 0===a[c]&&(a[c]=a._alterPrototype,a._alterPrototype=this._checkAndAlterPrototype)}}});Ha("$ClassAttribute",Ec,{"#":{_check:function(b,c){if(mb(c),"Class"!==b._member){var d=b.constructor,e=za(d);throw a.Error.classOnlyAttribute({attributeName:e._name})}}}}),Ha("$MemberAttribute",Ec,{"#":{_check:function(b,c){if(mb(c),"Class"===b._member){var d=b.constructor,e=za(d);throw a.Error.memberOnlyAttribute({attributeName:e._name})}}}}),Ha("$UniqueAttribute",Ec,{"-":{_classScope:!0},"#":{_check:function(b,c){var d,e,f,g,h,i,j=b._member;if(d=c.constructor,e=za(d),f=new zc.Map(d),g=b.constructor,h=za(g),i=f.filter(g),this._classScope){if(1<i.getCount())throw a.Error.uniqueAttributeConstraint({attributeName:h._name,className:e._name})}else if(1<i.getMemberAttributes(j).getItemsCount())throw a.Error.uniqueMemberAttributeConstraint({attributeName:h._name,className:e._name,memberName:j})}},"+":{constructor:function(a){void 0!==a&&(this._classScope=!0===a)}}});var Fc,Gc=Ha("ClassAttribute");Ha("$ClassProperty",Gc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)],"-":{_writeAllowed:!1,_publicName:void 0,_visibility:void 0},"#":{_alterPrototype:function(a){var b=this._member,c=this._publicName,d=this._visibility,e=za(a.constructor);c||(c="_"===b.charAt(0)?b.substr(1):b),c=A(c),this._writeAllowed&&e.addMember("set"+c,La(Ka,b),d),e.addMember("get"+c,La(Ja,b),d)}},"+":{constructor:function(a,b,c){a&&(this._writeAllowed=!0),"string"==typeof b&&(this._publicName=b),"string"==typeof c&&(this._visibility=c)}}}),Ha("$ClassEventHandler",Gc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)]}),Fc=Ha("$ClassNonSerialized",Gc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)]}),M("interfaces",{interfaceExpected:"Expected interface not implemented: {name}"});var Hc=a.interfaces={isImplementedBy:function(a,b){return a instanceof Function&&(a=a.prototype),Ma(a,b)},query:Na},Ic=Da("gpf.interfaces","Interface");Ca("gpf.interfaces.Interface",Object,{}),Ic("IEventDispatcher",{addEventListener:function(a,b){return mb(a,b),this},removeEventListener:function(a,b){return mb(a,b),this},dispatchEvent:function(a,b){mb(a,b)}});var Jc=Ic("IUnknown",{queryInterface:function(a){return mb(a),null}});Ha("$InterfaceImplement",{"-":{"[_interfaceDefinition]":[a.$ClassProperty(!1)],_interfaceDefinition:b,"[_builder]":[a.$ClassProperty(!1)],_builder:null,_addMissingInterfaceMembers:function(a){var b,c=this._interfaceDefinition.prototype;for(b in c)b in a||(a[b]=c[b])},_addQueryInterface:function(b){void 0===b.queryInterface?(b.queryInterface=Oa,Cc(b.constructor,"Class",[a.$InterfaceImplement(Jc)])):Oa!==b.queryInterface&&(b.queryInterface=Pa(b.queryInterface))}},"#":{_alterPrototype:function(b){this._builder?this._addQueryInterface(b):(this._addMissingInterfaceMembers(b),(new a.attributes.Map).fillFromClassDef(za(this._interfaceDefinition)).forEach(function(a,c){Cc(b.constructor,c,a)}))}},"+":{constructor:function(a,b){this._interfaceDefinition=a,b&&(this._builder=b)}}}),M("i_enumerator",{enumerableInvalidMember:"$Enumerator can be associated to arrays only"}),Ic("IEnumerator",{reset:function(){},"[moveNext]":[a.$ClassEventHandler()],moveNext:function(a){return mb(a),!1},current:function(){return null},"~":{each:Qa,fromArray:Ra}}),Ha("$Enumerable",zc.ClassAttribute,{Class:[a.$UniqueAttribute(),a.$MemberAttribute()],_alterPrototype:function(b){if(!Vb(b[this._member]))throw a.Error.enumerableInvalidMember();Cc(b.constructor,"Class",[new zc.InterfaceImplementAttribute(Hc.IEnumerator,Sa)])}});var Kc=Ic("IReadOnlyArray",{getItemsCount:function(){return 0},getItem:function(a){mb(a)}});Ic("IArray",Kc,{setItemsCount:function(a){return mb(a),0},setItem:function(a,b){mb(a,b)}}),Ha("$ClassIArray",zc.ClassAttribute,{"[Class]":[a.$UniqueAttribute(),a.$MemberAttribute()],"-":{_writeAllowed:!1},"#":{_alterPrototype:function(b){var c,d=this._member;c=this._writeAllowed?Hc.IArray:Hc.IReadOnlyArray,Cc(b.constructor,"Class",[a.$InterfaceImplement(c)]),b.getItemsCount=Fa(d),b.getItem=Ga(d),this._writeAllowed&&(b.setItemsCount=r(["count"],["var oldValue = this.",d,".length;","this.",d,".length = count;","return oldValue;"].join("")),b.setItem=r(["idx","value"],["var oldValue = this.",d,"[idx];","this.",d,"[idx] = value;","return oldValue;"].join("")))}},"+":{constructor:function(a){a&&(this._writeAllowed=!0)}}}),Cc(zc.Array,"_array",[a.$ClassIArray(!1)]),Ic("IReadableStream",{"[read]":[a.$ClassEventHandler()],read:function(a,b){mb(a,b)}}),Ic("IWritableStream",{"[write]":[a.$ClassEventHandler()],write:function(a,b){mb(a,b)}}),Ic("IFileStorage",{"[getInfo]":[a.$ClassEventHandler()],getInfo:function(a,b){mb(a,b)},"[readAsBinaryStream]":[a.$ClassEventHandler()],readAsBinaryStream:function(a,b){mb(a,b)},"[writeAsBinaryStream]":[a.$ClassEventHandler()],writeAsBinaryStream:function(a,b){mb(a,b)},close:function(a,b){mb(a,b)},"[explore]":[a.$ClassEventHandler()],explore:function(a,b){mb(a,b)},"[createFolder]":[a.$ClassEventHandler()],createFolder:function(a,b){mb(a,b)},"[deleteFile]":[a.$ClassEventHandler()],deleteFile:function(a,b){mb(a,b)},"[deleteFolder]":[a.$ClassEventHandler()],deleteFolder:function(a,b){mb(a,b)}}),M("fs",{fileNotFound:"File not found"}),a.fs={host:function(){return null},find:b},g("gpf.fs.find",function(){return Ta(a.fs.host())}),s(a.fs,{TYPE_NOT_FOUND:Hb,TYPE_FILE:Ib,TYPE_DIRECTORY:Jb,TYPE_UNKNOWN:Kb}),M("stream",{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress"});var Lc=4096;a.stream={},Ua.prototype={_readable:null,_writable:null,_chunkSize:Lc,_eventsHandler:null,scope:null},Ua.prototype[Bb]=function(a){mb(a),this._readable.read(this._chunkSize,this)},Ua.prototype[Db]=function(a){mb(a),w.call(this,Bb,{},this._eventsHandler)},Ua.prototype[Cb]=function(a){var b=a.get("buffer");this._writable.write(b,this)},Ua.prototype[zb]=function(a){w.call(this,a,{},this._eventsHandler)},a.stream.pipe=Va;var Mc=Ca("StringStream",Object,{"[Class]":[a.$InterfaceImplement(Hc.IReadableStream),a.$InterfaceImplement(Hc.IWritableStream)],"+":{constructor:function(a){"string"==typeof a?this._buffer=[a]:this._buffer=[]},read:function(a,b){var c;0===this._buffer.length?w.call(this,Db,{},b):(c=Ya(this._buffer,a),w.call(this,Cb,{buffer:c},b))},write:function(a,b){sb("string"==typeof a&&a.length,"String buffer must contain data"),this._buffer.push(a),w.call(this,Bb,{},b)},toString:function(){return this._buffer.join("")}},"-":{_buffer:[]}});F(a,{capitalize:A,replaceEx:B,escapeFor:C,stringExtractFromStringArray:Ya,stringToStream:function(a){return new Mc(a)},stringFromStream:function(a,b){if(a instanceof Mc)w(Bb,{buffer:a.toString()},b);else{var c=new Mc;Va({readable:a,writable:c},function(a){Bb===a.type?w(Bb,{buffer:c.toString()},b):w(a,{},b)})}}});var Nc=Ca("ArrayStream",Object,{"[Class]":[a.$InterfaceImplement(Hc.IReadableStream),a.$InterfaceImplement(Hc.IWritableStream)],"+":{constructor:function(a){a instanceof Array?this._buffer=[].concat(a):this._buffer=[]},read:function(a,b){var c;0===this._buffer.length?w.call(this,Db,{},b):(c=this._buffer.splice(0,a),w.call(this,Cb,{buffer:c},b))},write:function(a,b){sb(a instanceof Array,"Array expected"),this._buffer=this._buffer.concat(a),w.call(this,Bb,{},b)},toArray:function(){return[].concat(this._buffer)}},"-":{_buffer:[]}});F(a,{arrayToStream:function(a){return new Nc(a)},arrayFromStream:function(a,b){if(a instanceof Nc)w(Bb,{buffer:a.toArray()},b);else{var c=new Nc;Va({readable:a,writable:c},function(a){Bb===a.type?w(Bb,{buffer:c.toArray()},b):w(a,{},b)})}}})});