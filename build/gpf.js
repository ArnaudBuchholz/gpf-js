!function(t){"use strict";if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else if("undefined"!=typeof module&&module.exports)t(module.exports);else{var e=Function("return this;")(),n={};t(n),e.gpf=n}}(function(o){"use strict";function s(){}var i,a,u,c,n,r,f=-1,l=0,t="browser",e="nashorn",p="nodejs",h="phantomjs",d="rhino",_="unknown",m="wscript",v=_,g=Function,b=new g("return this")();function y(e){return{log:function(t){e("    "+t)},info:function(t){e("[?] "+t)},warn:function(t){e("/!\\ "+t)},error:function(t){e("(X) "+t)}}}function w(){"\\"===String(java.lang.System.getProperty("file.separator")),b.console=y(print),function(t){java.lang.System.exit(t)}}function E(t,e,n){return Array.prototype.slice.call(t,e,n||t.length)}"undefined"!=typeof WScript?v=m:"undefined"!=typeof print&&"undefined"!=typeof java?v="undefined"==typeof readFile?e:d:"undefined"!=typeof phantom&&phantom.version&&!document.currentScript?(v=h,b=window):"undefined"!=typeof module&&module.exports?(v=p,b=global):"undefined"!=typeof window&&(v=t,b=window),o.version=function(){return"1.0.0"},t===v&&(function(t){window.location="https://arnaudbuchholz.github.io/gpf/exit.html?"+t},window,document),o.node={},p===v&&(n=require("path"),a=require("fs"),u=require("http"),c=require("https"),r=require("url"),"\\"===n.sep),h===v&&("\\"===require("fs").separator,function(t){phantom.exit(t)},window,document,a=require("fs")),o.java={},o.rhino=o.java,d===v&&w(),e===v&&w(),o.wscript={},m===v&&(!0,i=new ActiveXObject("Scripting.FileSystemObject"),b.console=y(function Ro(t){WScript.Echo(t)})),o.hosts={browser:t,nashorn:e,nodejs:p,phantomjs:h,rhino:d,unknown:_,wscript:m},o.host=function(){return v};var x=1;function O(t){return E(t,x)}var S,P=Array.isArray;function j(t){return P(t)||function e(t){return!!t&&Math.floor(t.length)===t.length}(t)}function I(t,e,n){for(var r=0,i=t.length;r<i;++r)e.call(n,t[r],r,t)}function C(t,e,n){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(n,t[r],r,t)}o.isArrayLike=j,S=m===v?function $o(e,n,r){C(e,n,r),["constructor","toString"].forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&n.call(r,e[t],t,e)})}:C,o.forEach=function(t,e,n){j(t)?I(t,e,n):S(t,e,n)};var N=!0;function k(t,e){t||(!function n(t){N&&console.warn("ASSERTION FAILED: "+t)}(e),o.Error.assertionFailed({message:e}))}o.assert=function To(t,e){undefined===e&&To(!1,"Assertion with no message"),k(t,e)},o.asserts=function Do(t){S(t,k)},o.preventAssertWarnings=function(t){N=!t};var A=255,R="abcdefghijklmnopqrstuvwxyz",$="ABCDEFGHIJKLMNOPQRSTUVWXYZ",T="0123456789",D=/\/\/.*$|\/\*(?:[^\*]*|\*[^\/]*)\*\//gm;function F(t,e){return function r(t,e){var n;return t.length?((n=[].concat(t)).push(e),g.apply(null,n)):g(e)}(t,e)}function M(t,e){return undefined===e?F([],t):F(t,e)}function q(t,e){var n=t;return S(e,function(t,e){n=n.split(e).join(t)}),n}o.web={};var B={};function W(t,e){return function n(t,e){return"javascript"===e?'"'+t+'"':t}(q(t,B[e]),e)}var U="javascript";function L(t){return W(t,U)}B[U]={"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"};function X(t){return W(t,"xml")}function V(n,t){S(t,function(t,e){n[e]===undefined&&(n[e]=t)})}function z(t,e){var n=e.on;!function r(t,e){e&&V(t.prototype,e)}(n,e.methods),function i(t,e){e&&V(t,e)}(n,e.statics)}function H(t,e){b[t]||(b[t]=e)}B.xml={"&":"&amp;","<":"&lt;",">":"&gt;"};var Z=1;function G(t,e){var n=function r(t){return t[Z]}(e);return undefined!==n?t.bind(n):t}function Q(t,e){for(var n=t.length,r=0;r<n;)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t),++r}function J(t,e,n){for(var r=t.length,i=n;i<r;){if(Object.prototype.hasOwnProperty.call(t,i)&&!0!==e(t[i],i,t))return!1;++i}return!0}function Y(t,e){return J(t,e,l)}function K(t,e,n){var r=function o(t){var e=[];return"string"==typeof t?function i(t,e){for(var n=e.length,r=0;r<n;++r)t.push(e.charAt(r))}(e,t):I(t,function(t){e.push(t)}),e}(t);return"function"==typeof e&&(r=r.map(e,n)),r}function tt(t){var e=t[1];return undefined===e?l:e}function et(t){return t?new Array(t).join(" ").split(" ").map(function(t,e){return"p"+e}):[]}function nt(t){var e=et(t);return M(e,function n(r){var i=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return r.forEach(function(t,e){var n=1;n+=e,i.push("if ("+n+" === l) { return new C("+r.slice(l,n).join(", ")+");}")}),i.join("\n")}(e))}z(0,{on:Array,methods:{every:function(t){return Y(this,G(t,arguments))},filter:function(t){var r=[],i=G(t,arguments);return Q(this,function(t,e,n){i(t,e,n)&&r.push(t)}),r},forEach:function(t){Q(this,G(t,arguments))},includes:function(e){return!J(this,function(t){return t!==e},tt(arguments))},indexOf:function(n){var r=-1;return J(this,function(t,e){return t!==n||(r=e,!1)},tt(arguments)),r},map:function(t){var r=new Array(this.length),i=G(t,arguments);return Q(this,function(t,e,n){r[e]=i(t,e,n)}),r},some:function(t){var r=G(t,arguments);return!Y(this,function(t,e,n){return!r(t,e,n)})},reduce:function(t){var e,n=arguments[1],r=this.length,i=0;for(e=undefined===n?this[i++]:n;i<r;++i)e=t(e,this[i],i,this);return e}},statics:{from:function(t){return K.apply(this,arguments)},isArray:function(t){return"[object Array]"==={}.toString.call(t)}}}),P=Array.isArray;var rt=nt(10);function it(t,e){this[e]=t}z(0,{on:Function,methods:{bind:function(t){var e=O(arguments),n=Math.max(this.length-e.length,0);return e.length?M(["thisArg","prependArgs","_gpfArraySlice"],function r(t){return"var me = this;\nreturn function ("+et(t).join(", ")+") {\n    var args = _gpfArraySlice(arguments);\n    return me.apply(thisArg, prependArgs.concat(args));\n};"}(n)).call(this,t,e,E):M(["thisArg"],function i(t){return"var me = this;\nreturn function ("+et(t).join(", ")+") {\n    return me.apply(thisArg, arguments);\n};"}(n)).call(this,t)}}});var ot=[Array,Date,Error,Function,Number,RegExp,String];z(0,{on:Object,statics:{assign:function(e,t){return O(arguments).forEach(function(t){S(t,it,e)}),e},create:function(){function e(t){this.constructor=t,this.__proto__=e.prototype}function n(){}return function(t){return e.prototype=t,n.prototype=new e(n),new n}}(),getPrototypeOf:function(t){if(t.__proto__)return t.__proto__;for(var e=0;e<ot.length;++e)if(t===ot[e].prototype)return Object.prototype;return t.constructor.prototype},keys:function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},values:function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(t[e]);return n}}});function at(t,e){var n=t[1];return n||e}var ut;function st(t,e,n){return t<e?new Array(e-t+1).join(n):""}z(0,{on:String,methods:{endsWith:function(t){var e=Math.min(at(arguments,this.length),this.length);return this.substring(e-t.length,e)===t},includes:function(t){var e=at(arguments,l);return this.indexOf(t,e)!==f},padEnd:function(t){var e=at(arguments," ");return this+st(this.length,t,e)},padStart:function(t){var e=at(arguments," ");return st(this.length,t,e)+this},startsWith:function(t){var e=at(arguments,l);return this.substring(e,e+t.length)===t},trim:(ut=/^[\s\ufeff\xa0]+|[\s\ufeff\xa0]+$/g,function(){return this.replace(ut,"")})}});var ct=1,ft=2,lt=3;function pt(t,e){return t.toString().padStart(e,"0")}function ht(t){return t.getUTCFullYear()+"-"+pt(t.getUTCMonth()+ct,ft)+"-"+pt(t.getUTCDate(),ft)+"T"+pt(t.getUTCHours(),ft)+":"+pt(t.getUTCMinutes(),ft)+":"+pt(t.getUTCSeconds(),ft)+"."+pt(t.getUTCMilliseconds(),lt)+"Z"}z(0,{on:Date,methods:{toISOString:function(){return ht(this)}},statics:{now:function(){return(new Date).getTime()}}});var dt=/^([0-9][0-9][0-9][0-9])\-([0-9][0-9])\-([0-9][0-9])(?:T([0-9][0-9])\:([0-9][0-9])\:([0-9][0-9])(?:\.([0-9][0-9][0-9])Z)?)?$/,_t=1,mt=11,vt=2,gt=31,bt=3,yt=23,wt=4,Et=59,xt=5,Ot=59;function St(t){if(function e(t){return t[_t]<=mt&&t[vt]<=gt}(t)&&function n(t){return t[bt]<=yt&&t[wt]<=Et&&t[xt]<=Ot}(t))return t}var Pt=0;var jt=1;function It(t){if("string"==typeof t)return dt.lastIndex=0,function n(t){var e;if(t)return--(e=function a(t){for(var e,n,r=[],i=t.length,o=1;o<i;++o)e=r,(n=t[o])?e.push(parseInt(n,10)):e.push(Pt);return r}(t))[jt],St(e)}(dt.exec(t))}var Ct=b.Date;function Nt(){var t=It(arguments[l]);return t?new Ct(Ct.UTC.apply(Ct.UTC,t)):function n(t,e){return e.length>rt.length&&(rt=nt(e.length)),rt.apply(t,e)}(Ct,arguments)}var kt,At="2003-01-22T22:45:34.075Z",Rt="2003-01-22";function $t(t,e,n){var r=!0;function i(e){return function(t){r&&(r=!1,e(t))}}try{t(i(e),i(n))}catch(e_){r&&(r=!1,n(e_))}}function Tt(){var e=this;e._handlers.forEach(function(t){t.process(e)}),e._handlers=[]}function Dt(t){this._state=!1,this._value=t,Tt.call(this)}function Ft(t){if(t&&["object","function"].includes(typeof t))return function n(t,e){if("function"==typeof e)return $t(e.bind(t),kt.bind(this),Dt.bind(this)),!0}.call(this,t,t.then)}!function Fo(){var t,e;!function n(){I(["prototype","UTC","parse","now"],function(t){Nt[t]=Ct[t]})}();try{t=ht(new Date(At)),e=ht(new Date(Rt))}catch(e_){}t===At&&e===Rt+"T00:00:00.000Z"||(b.Date=Nt)}(),kt=function(t){var e=this;try{if(Ft.call(e,t))return;e._state=!0,e._value=t,Tt.call(e)}catch(e_){Dt.call(e,e_)}};var Mt=o.Promise=function(t){this._handlers=[],$t(t,kt.bind(this),Dt.bind(this))};function qt(){}function Bt(t){var e,n=this,r=function i(t,e){return e._state?t.onFulfilled:t.onRejected}(n,t);if(null===r)return function o(t,e){e._state?t.resolve(e._value):t.reject(e._value)}(n,t);try{e=r(t._value)}catch(e_){return void n.reject(e_)}n.resolve(e)}var Wt=[];function Ut(){for(;Wt.length;){var t=Wt.shift(),e=Wt.shift();Bt.call(t,e)}}qt.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(t){null!==t._state?(Wt.length||setTimeout(Ut,0),Wt.push(this,t)):t._handlers.push(this)}},Mt.prototype={_state:null,_value:null,_handlers:[],then:function(r,i){var o=this;return new Mt(function(t,e){var n=new qt;undefined!==r&&(n.onFulfilled=r),undefined!==i&&(n.onRejected=i),n.resolve=t,n.reject=e,n.process(o)})},"catch":function(t){return this.then(null,t)}},Mt.resolve=function(e){return new Mt(function(t){t(e)})},Mt.reject=function(n){return new Mt(function(t,e){e(n)})},Mt.all=function(n){return n.length?new Mt(function(t,e){n.forEach(function o(t,e){var n=this;try{if(t instanceof Mt)return void t.then(function(t){o.call(n,t,e)},n.reject);!function r(t,e,n){t.promises[e]=n,--t.remaining||t.resolve(t.promises)}(n,e,t)}catch(e_){n.reject(e_)}}.bind({resolve:t,reject:e,remaining:n.length,promises:n}))}):Mt.resolve([])},Mt.race=function(t){return new Mt(function(e,n){t.forEach(function(t){t.then(e,n)})})},H("Promise",Mt);var Lt={};function Xt(t){java.lang.Thread.sleep(t)}Lt[m]=function(t){WScript.Sleep(t)},Lt[d]=Xt,Lt[e]=Xt;var Vt,zt=[],Ht=0,Zt=Lt[v]||s;function Gt(t,e){return t.dt===e.dt?t.id-e.id:t.dt-e.dt}function Qt(t){return t.toString()}function Jt(t,e){return e?"\n"+e+t.join(",\n"+e)+"\n":t.join(",")}function Yt(t,e,n){return null===t?"null":function u(t,r,i){var o,a=[];return o=i?": ":":",S(t,function(t,e){var n=r(e,t);n=Vt[typeof n](t,r,i),undefined!==n&&a.push(L(e)+o+n)}),"{"+Jt(a,i)+"}"}(t,e,n)}o.handleTimeout=function Mo(){for(var t,e;zt.length;){for(t=zt.shift(),e=(new Date).getTime();t.dt>e;)Zt(t.dt-e),e=(new Date).getTime();t.cb()}},H("setTimeout",function qo(t,e){var n={id:++Ht,dt:(new Date).getTime()+e,cb:t};return zt.push(n),zt.sort(Gt),Ht}),H("clearTimeout",function Bo(e){zt=zt.filter(function(t){return t.id!==e})}),Vt={undefined:s,"function":s,number:Qt,"boolean":Qt,string:function(t){return L(t)},object:function(t,e,n){return P(t)?function a(t,r,i){var o=[];return I(t,function(t,e){var n=r(e.toString(),t);n=undefined===n?"null":Vt[typeof n](n,r,i),o.push(n)}),"["+Jt(o,i)+"]"}(t,e,n):Yt(t,e,n)}};var Kt=10;H("JSON",{parse:function Wo(t,e){var n=M("return "+t)();return e?function i(n,t,r){return"object"==typeof n&&S(n,function(t,e){n[e]=i(t,e,r)}),r(t,n)}(n,"",e):n},stringify:function Uo(t,e,n){return Vt[typeof t](t,function r(n){return P(n)?function(t,e){if(n.includes(t))return e}:function e(t){return"function"==typeof t?t:function(t,e){return e}}(n)}(e),function i(t){return"number"==typeof t?"".padEnd(Math.min(t,Kt)," "):t||""}(n))}});var te=$+R+T+"+/=",ee=63,ne=18,re=12,ie=6,oe=8,ae=16,ue=64,se=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function ce(t,e,n){var r=String.fromCharCode(t>>ae&A);return e!==ue?r+function i(t,e){return e===ue?String.fromCharCode(t>>oe&A):String.fromCharCode(t>>oe&A,t&A)}(t,n):r}function fe(t,e){return te.indexOf(t.charAt(e))}function le(t,e){var n=t.charCodeAt(e);if(A<n)throw new TypeError("The string to be encoded contains characters outside of the Latin1 range.");return n}function pe(t,e,n){return te.charAt(t>>e&n)}function he(t,e){if(undefined!==t)return t[e]}function de(t,e){var n=t[e];return undefined===n&&(n=t[e]={}),n}function _e(t,e){return function r(t,e){var n;return("gpf"===t[l]?(n=o,O(t)):(n=b,t)).reduce(e,n)}(t,e?de:he)}H("atob",function Lo(t){var e,n,r,i,o,a=function f(t){var e=t.replace(/[\t\n\f\r ]+/g,"");if(!se.test(e))throw new TypeError("The string to be decoded is not correctly encoded.");return e}(t),u=a.length,s=0,c="";for(a+="==";s<u;s+=4)c+=(o=i=r=n=void 0,o=s,n=fe(e=a,o++)<<ne|fe(e,o++)<<re,r=fe(e,o++),i=fe(e,o++),ce(n|=r<<ie|i,r,i));return c}),H("btoa",function Xo(t){for(var e,n,r,i,o,a,u=0,s="",c=t.length%3;u<t.length;u+=3)s+=(a=o=i=r=void 0,a=u,r=le(n=t,a++),i=le(n,a++),o=le(n,a++),pe(e=r<<ae|i<<oe|o,ne,ee)+pe(e,re,ee)+pe(e,ie,ee)+pe(e,l,ee));return c?s.slice(l,c-3)+"===".substring(c):s}),o.context=function(t){return undefined===t?b:_e(t.split("."))};function me(t){return t.trim()}B.html=Object.assign({},B.xml,{"\xe0":"&agrave;","\xe1":"&aacute;","\xe8":"&egrave;","\xe9":"&eacute;","\xea":"&ecirc;"});var ve,ge="function";function be(t,e){var n=s.toString.call(t).replace(D,"");!function i(t,e,n){if(t.length){var r=/\(\s*(\w+(?:\s*,\s*\w+)*)\s*\)/.exec(e);n.parameters=r[1].split(",").map(me)}}(t,n,e),function r(t,e){var n=me(/{((?:.*\r?\n)*.*)}/.exec(t)[1]);n&&(e.body=n)}(n,e)}function ye(t){var e={};return function r(t,e){var n=ve(t);n&&(e.name=n)}(t,e),be(t,e),e}function we(t,e){return function i(t,e){var n=Object.keys(e),r=n.map(function(t){return e[t]});return M(n,"return "+t).apply(null,r)}(function o(t){return"function"+function e(t){return t.name?" "+t.name:""}(t)+"("+function n(t){return t.parameters?t.parameters.join(", "):""}(t)+') {\n\t"use strict"\n'+function r(t){return t.body?t.body.toString():""}(t)+"\n}"}(t),e||{})}ve="functionName"!==M("return function functionName () {};")().name?function Vo(t){var e=s.toString.call(t),n=e.indexOf(ge)+ge.length,r=e.indexOf("(",n);return e.substring(n,r).replace(D,"").trim()}:function(t){return t.name};var Ee=o.Error=function(){};function xe(t,e,n){var r=function o(t){return t.charAt(l).toUpperCase()+t.substring(1)}(e),i=we({name:r,parameters:["context"],body:"this._buildMessage(context);"});return i.prototype=new Ee,Object.assign(i.prototype,{code:t,name:e,message:n}),i.prototype.constructor=i,Ee[r]=i,function(t){throw new i(t)}}Ee.prototype=new Error,Object.assign(Ee.prototype,{constructor:Ee,code:0,name:"Error",message:"",_buildMessage:function(t){var n;t&&(n={},S(t,function(t,e){n["{"+e+"}"]=t.toString()}),this.message=q(this.message,n))}});var Oe=0;function Se(t,e){S(e,function(t,e){var n=++Oe;o.Error["CODE_"+e.toUpperCase()]=n,o.Error[e]=function i(t,e,n){var r=xe(t,e,n);return r.CODE=t,r.NAME=e,r.MESSAGE=n,r}(n,e,t)})}function Pe(t){return"function"==typeof t&&function e(t){return t.toString().startsWith("class")}(t)}Se(0,{notImplemented:"Not implemented",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),o.isClass=Pe,Se(0,{invalidEntityType:"Invalid entity type"});var je={};function Ie(t){var e,n=function i(n){var r;return S(je,function(t,e){n["$"+e]&&(r=t)}),r}(t);return n||(n=function r(t){var e=je[t.$type];return undefined===e&&o.Error.invalidEntityType(),e}(t)),(e=new n(t)).check(),e}function Ce(t,e){return t.exec(e)}function Ne(t,e){for(var n=[],r=function i(t,e){return t.lastIndex=0,Ce(t,e)}(t,e);r;)n.push(r),r=Ce(t,e);return n}function ke(t){this._initialDefinition=t}function Ae(t){return we({parameters:et(t),body:"_throw_();"},{_throw_:o.Error.abstractMethod})}ke.prototype={constructor:ke,_initialDefinition:{}},Se(0,{abstractMethod:"Abstract method"});var Re=[];function $e(t){Re.push(t)}Se(0,{invalidEntity$Property:"Invalid entity $ property",missingEntityName:"Missing entity name",invalidEntityNamespace:"Invalid entity namespace"});function Te(t,e){e.startsWith("$")?this._check$Property(e.substring("$".length),t):this._checkProperty(e,t)}function De(t){ke.call(this,t)}function Fe(t,e){De.call(this,e),this._instanceBuilder=t}function Me(t,e){var n=new Fe(t,e);return $e(n),n.check(),n}function qe(t){var e=function n(e){return Re.filter(function(t){return t.getInstanceBuilder()===e})[l]}(t);return e||Me(t,function r(t){var e=Object.getPrototypeOf(t.prototype);return{$name:ve(t),$extend:e.constructor}}(t))}Object.assign(ke.prototype,{_type:"",_allowed$Properties:"type,name,namespace".split(","),_check$Property:function(t,e){t!==this._type&&function n(t,e){e.includes(t)||o.Error.invalidEntity$Property()}(t,this._allowed$Properties)},_throwInvalidProperty:Ae(),_reMemberName:/.*/,_checkMemberName:function(t){this._reMemberName.exec(t)||this._throwInvalidProperty()},_reservedNames:"super,class,public,private,protected,static,mixin".split(","),_checkReservedMemberName:function(t){this._reservedNames.includes(t)&&this._throwInvalidProperty()},_checkMemberValue:M(["name","value"]," "),_checkProperty:function(t,e){this._checkMemberName(t),this._checkReservedMemberName(t),this._checkMemberValue(t,e)},_checkProperties:function(){S(this._initialDefinition,Te,this)},_name:"",_readName:function(){var t=this._initialDefinition;this._name=t["$"+this._type]||t.$name},_checkNameIsNotEmpty:function(){this._name||o.Error.missingEntityName()},_throwInvalidName:Ae(),_reName:/.*/,_checkName:function(){this._reName.exec(this._name)||this._throwInvalidName()},_namespace:"",_extractRelativeNamespaceFromName:function(){var t=/(.*)\.([^\.]+)$/.exec(this._name);if(t)return this._name=t[2],t[1]},_readNamespace:function(){var t=[this._initialDefinition.$namespace,this._extractRelativeNamespaceFromName()].filter(function(t){return t});t.length&&(this._namespace=t.join("."))},_checkNamespace:function(){/^(:?[a-z_$][a-zA-Z0-9]+(:?\.[a-z_$][a-zA-Z0-9]+)*)?$/.exec(this._namespace)||o.Error.invalidEntityNamespace()},check:function(){this._checkProperties(),this._readName(),this._checkNameIsNotEmpty(),this._readNamespace(),this._checkName(),this._checkNamespace()}}),Object.assign(ke.prototype,{_instanceBuilder:null,getInstanceBuilder:function(){return this._instanceBuilder||this._setInstanceBuilder(this._build()),this._instanceBuilder},_setInstanceBuilder:function(t){this._namespace&&(_e(this._namespace.split("."),!0)[this._name]=t),this._instanceBuilder=t,$e(this)},_build:s}),De.prototype=Object.create(ke.prototype),Object.assign(De.prototype,{constructor:De,_type:"class"}),je["class"]=De,Fe.prototype=Object.create(De.prototype),Object.assign(Fe.prototype,{_checkNameIsNotEmpty:s,_checkName:s}),Se(0,{invalidClassName:"Invalid class name",invalidClassProperty:"Invalid class property",invalidClassExtend:"Invalid class extend",invalidClassConstructor:"Invalid class constructor",invalidClassOverride:"Invalid class override"}),Object.assign(De.prototype,{_allowed$Properties:ke.prototype._allowed$Properties.concat(["extend"]),_throwInvalidProperty:o.Error.invalidClassProperty,_reMemberName:/^[a-z_][a-zA-Z0-9]*$/,_checkConstructorMember:function(t){"function"!=typeof t&&o.Error.invalidClassConstructor()},_checkOverridenMember:function(t,e){typeof t!=typeof e&&o.Error.invalidClassOverride()},_checkIfOverriddenMember:function(t,e){var n=this._extend.prototype[t];undefined!==n&&this._checkOverridenMember(e,n)},_checkMemberValue:function(t,e){"constructor"===t?this._checkConstructorMember(e):this._checkIfOverriddenMember(t,e)},_reName:/^[A-Z_$][a-zA-Z0-9]*$/,_throwInvalidName:o.Error.invalidClassName,_extend:Object,_extendDefinition:undefined,_readExtend:function(){var t=function e(t){return"string"==typeof t?_e(t.split(".")):t}(this._initialDefinition.$extend);t&&(this._extend=t)},_checkExtendIsNotAnInterface:function(){s.toString.call(this._extend).includes("interfaceConstructorFunction")&&o.Error.invalidClassExtend()},_checkExtend:function(){"function"!=typeof this._extend&&o.Error.invalidClassExtend(),this._checkExtendIsNotAnInterface()},check:function(){this._readExtend(),this._checkExtend(),this._extendDefinition=qe(this._extend),ke.prototype.check.call(this)}}),Se(0,{classConstructorFunction:"This is a class constructor function, use with new"}),Object.assign(De.prototype,{_resolvedConstructor:s});var Be=[];function We(t){Be.push(t)}function Ue(n){var r=function i(t){return Pe(t._extend)?{instance:"that",body:function e(t){return t._extend===t._resolvedConstructor?"var that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n":'var that,\n    $super = function () {\n        that = Reflect.construct(_classDef_._extend, arguments, _classDef_._instanceBuilder);\n    },\n    hasOwnProperty = function (name) {\n        return !!that && Object.prototype.hasOwnProperty.call(that, name);\n    },\n    proxy = new Proxy({}, {\n        get: function (obj, property) {\n            if (property === "hasOwnProperty") {\n              return hasOwnProperty;\n            }\n            if (!that && property === "$super") {\n              return $super;\n            }\n            return that[property];\n        },\n        set: function (obj, property, value) {\n            if (property !== "$super") {\n                that[property] = value;\n            }\n            return true;\n        }\n    });\n_classDef_._resolvedConstructor.apply(proxy, arguments);\n'}(t)}:{instance:"this",body:"_classDef_._resolvedConstructor.apply(this, arguments);"}}(n),t="if (!(this instanceof _classDef_._instanceBuilder)) gpf.Error.classConstructorFunction();\n"+Be.reduce(function(t,e){return e(n,t,r.instance)},r.body);return"this"!==r.instance&&(t+="\nreturn "+r.instance+";"),t}function Le(t){return we(function e(t){return{name:t._name,parameters:ye(t._resolvedConstructor).parameters,body:Ue(t)}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function Xe(){o.Error.invalidClassSuper()}function Ve(t){return function n(t){var e=ye(t);return e.body="return _superMethod_.apply(this, arguments);",we(e,{_superMethod_:t})}("function"==typeof t?t:Xe)}function ze(t,e,n){return"function"!=typeof n&&o.Error.invalidClassSuperMember(),function i(t,e,n){var r=ye(n);return r.body="return _superMethod_.apply(this === _$super_ ? _that_ : this, arguments);",we(r,{_that_:t,_$super_:e,_superMethod_:n})}(t,e,n)}Se(0,{invalidClassSuper:"Invalid class super",invalidClassSuperMember:"Invalid class super member"});var He=/\.\$super\.(\w+)\b/g;function Ze(t,e){!function n(t){Object.assign(t,{_extend:null,_extendDefinition:null})}(Me(t,function r(t){return{$name:t}}(e)))}Object.assign(De.prototype,{_get$Super:function(e,t,n){var r=this._extend.prototype,i=Ve(r[t]);return n.forEach(function(t){i[t]=ze(e,i,r[t])}),i},_superifiedBody:'var _super_;\nif (Object.prototype.hasOwnProperty.call(this, "$super")) {\n    _super_ = this.$super;\n}\nthis.$super = _classDef_._get$Super(this, _methodName_, _superMembers_);\ntry{\n    var _result_ = _method_.apply(this, arguments);\n} finally {\n    if (undefined === _super_) {\n        delete this.$super;\n    } else {\n        this.$super = _super_;\n    }\n}\nreturn _result_;',_getSuperifiedContext:function(t,e,n){return{_method_:t,_methodName_:e,_superMembers_:n,_classDef_:this}},_createSuperified:function(t,e,n){var r=ye(t);return r.body=this._superifiedBody,we(r,this._getSuperifiedContext(t,e,n))},_superify:function(t,e){return /\.\$super\b/.exec(t)?this._createSuperified(t,e,function n(t){return Ne(He,t).map(function(t){return t[1]})}(t)):t}}),Object.assign(De.prototype,{_build:function(){var t,e;return this._resolveConstructor(),t=Le(this),e=Object.create(this._extend.prototype),(t.prototype=e).constructor=t,this._buildPrototype(e),t},_addMethodToPrototype:function(t,e,n){t[e]=this._superify(n,e)},_addMemberToPrototype:function(t,e,n){"function"==typeof n?this._addMethodToPrototype(t,e,n):t[e]=n},_buildPrototype:function(n){S(this._initialDefinition,function(t,e){e.startsWith("$")||"constructor"===e||this._addMemberToPrototype(n,e,t)},this)},_setResolvedConstructorToInherited:function(){this._extend!==Object&&(this._resolvedConstructor=this._extend)},_resolveConstructor:function(){Object.prototype.hasOwnProperty.call(this._initialDefinition,"constructor")?this._resolvedConstructor=this._superify(this._initialDefinition.constructor,"constructor"):this._setResolvedConstructorToInherited()}}),Ze(Object,"Object"),S({"Array":Array,"Date":Date,"Error":Error,"Function":Function,"Number":Number,"RegExp":RegExp,"String":String},Ze),Se(0,{invalidClass$AbstractSpecification:"Invalid class $abstract specification",abstractClass:"Abstract Class"}),De.prototype._allowed$Properties.push("abstract");var Ge=De.prototype._check$Property;Object.assign(De.prototype,{_abstract:!1,_check$abstract:function(t){!0!==t&&o.Error.invalidClass$AbstractSpecification()},_check$Property:function(t,e){"abstract"===t?(this._check$abstract(e),this._abstract=!0):Ge.call(this,t,e)}}),We(function(t,e,n){return t._abstract?"if (this.constructor === _classDef_._instanceBuilder) gpf.Error.abstractClass();\n"+e:e}),Se(0,{invalidClass$SingletonSpecification:"Invalid class $singleton specification"}),De.prototype._allowed$Properties.push("singleton");var Qe=De.prototype._check$Property;function Je(t){ke.call(this,t)}function Ye(t){return we(function e(t){return{name:t._name,body:"gpf.Error.interfaceConstructorFunction();"}}(t),function n(t){return{gpf:o,_classDef_:t}}(t))}function Ke(t){return Ie(t).getInstanceBuilder()}function tn(t,r){var i=!0;return S(t.prototype,function(t,e){"constructor"!==e&&function n(t,e){return"function"!=typeof e||t.length!==e.length}(t,r[e])&&(i=!1)}),i}function en(t,e){return tn(t,e)?e:function r(t,e){if(tn(o.interfaces.IUnknown,e))return function n(t,e){return e.queryInterface(t)}(t,e)}(t,e)}function nn(t){return"string"==typeof t?_e(t.split(".")):t}Object.assign(De.prototype,{_singleton:!1,_singletonInstance:null,_check$singleton:function(t){!0!==t&&o.Error.invalidClass$SingletonSpecification()},_check$Property:function(t,e){"singleton"===t?(this._check$singleton(e),this._singleton=!0):Qe.call(this,t,e)}}),We(function(t,e,n){return t._singleton?"if (!_classDef_._singletonInstance) {\n"+e+"\n_classDef_._singletonInstance = "+n+";\n}\nreturn _classDef_._singletonInstance;":e}),Je.prototype=Object.create(ke.prototype),Object.assign(Je.prototype,{constructor:Je,_type:"interface"}),je["interface"]=Je,Se(0,{invalidInterfaceName:"Invalid interface name",invalidInterfaceProperty:"Invalid interface property"}),Object.assign(Je.prototype,{_throwInvalidProperty:o.Error.invalidInterfaceProperty,_reMemberName:/^[a-z][a-zA-Z0-9]*$/,_reservedNames:ke.prototype._reservedNames.concat("constructor"),_checkMemberValue:function(t,e){"function"!=typeof e&&o.Error.invalidInterfaceProperty()},_reName:/^I[a-zA-Z0-9]*$/,_throwInvalidName:o.Error.invalidInterfaceName}),Se(0,{"interfaceConstructorFunction":"This is an interface constructor function, do not invoke"}),Object.assign(Je.prototype,{_build:function(){var t,e;return delete(e=(t=Ye(this)).prototype).constructor,this._buildPrototype(e),t},_buildPrototype:function(n){S(this._initialDefinition,function(t,e){e.startsWith("$")||(n[e]=t)},this)}}),o.define=Ke,Se(0,{interfaceExpected:"Expected interface not implemented: {name}"});var rn;o.interfaces={isImplementedBy:function(t,e){return!!e&&tn(nn(t),function n(t){return t instanceof Function?t.prototype:t}(e))},query:function(t,e){return en(nn(t),e)}};function on(t,e){var n={$interface:"gpf.interfaces.I"+t};return Object.keys(e).forEach(function(t){n[t]=Ae(e[t])}),Ke(n)}function an(t,e){var n,r;return r=!1===t.ascending?(n="b"+e,"a"+e):(n="a"+e,"b"+e),"if("+n+"!=="+r+")return "+function i(t,e,n){return"string"===t?e+".localeCompare("+n+")":e+"-"+n}(t.type,n,r)+";"}function un(t){return M(["a","b"],function n(t){return function e(t){return"var "+t.map(function(t,e){return"a"+e+"=a."+t.property+",b"+e+"=b."+t.property}).join(",")+";"}(t)+t.map(an).join("")+"return 0;"}(t))}function sn(e,n){return function(t){return"("+t[e].map(rn).join(n)+")"}}on("Unknown",{"queryInterface":1}),o.createSortFunction=function(t){return un(P(t)?t:[t])};var cn={property:function(t){return"i."+t.property},eq:sn("eq","==="),ne:sn("ne","!=="),lt:sn("lt","<"),lte:sn("lte","<="),gt:sn("gt",">"),gte:sn("gte",">="),not:function(t){return"!"+rn(t.not)},like:function(t){var e=function n(t){return"/"+t.regexp+"/.exec("+rn(t.like)+")"}(t);return t.group?"("+e+"||[])["+t.group+"]":e},or:sn("or","||"),and:sn("and","&&"),undefined:function(t){return JSON.stringify(t)}},fn=Object.keys(cn);rn=function(t){var e=function n(t){if("object"==typeof t)return Object.keys(t).filter(function(t){return fn.includes(t)})[l]}(t);return(0,cn[e])(t)},o.createFilterFunction=function(t){return M(["i"],function e(t){return"return "+rn(t)}(t))};var ln=on("ReadableStream",{"read":1}),pn=on("WritableStream",{"write":1});function hn(t,e,n){return t||o.Error.interfaceExpected({name:n}),function i(t,e,n){var r=en(e,t);return r||o.Error.interfaceExpected({name:n}),r}(t,e,n)}function dn(t){return hn(t,ln,"gpf.interfaces.IReadableStream")}function _n(t){return hn(t,pn,"gpf.interfaces.IWritableStream")}on("Enumerator",{"reset":0,"moveNext":0,"getCurrent":0}),on("FileStorage",{"getInfo":1,"openTextStream":2,"close":1,"explore":1,"createDirectory":1,"deleteFile":1,"deleteDirectory":1}),Se(0,{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress",invalidStreamState:"Stream is in an invalid state"}),o.stream={};var mn="gpf.stream#progress",vn=mn+"/read",gn=mn+"/write";function bn(t){t.prototype[vn]=!1,t.prototype[gn]=!1}function yn(t,e,n){t[e]&&o.Error[n](),t[e]=!0}function wn(t){t[vn]=!1}function En(t){t[gn]=!1}function xn(t,e,n){return t.then(function(t){return n(e),Promise.resolve(t)},function(t){return n(e),Promise.reject(t)})}function On(r){return function(t){var e=_n(t);return function n(t){yn(t,vn,"readInProgress")}(this),xn(r.call(this,e),this,wn)}}function Sn(n){return function(t){return function e(t){yn(t,gn,"writeInProgress")}(this),xn(n.call(this,t),this,En)}}var Pn=Ke({$class:"gpf.stream.ReadableString",constructor:function(t){this._buffer=t},read:On(function(t){return t.write(this._buffer)}),_buffer:""}),jn=Ke({$class:"gpf.stream.WritableString",constructor:function(){this._buffer=[]},write:Sn(function(t){return this._buffer.push(t.toString()),Promise.resolve()}),toString:function(){return this._buffer.join("")},_buffer:[]});bn(Pn),bn(jn),Se(0,{incompatibleStream:"Incompatible stream"});var In={NOT_FOUND:0,DIRECTORY:1,FILE:2,UNKNOWN:3},Cn=0,Nn=1,kn=null;function An(t,e){t===v&&(kn=new e)}function Rn(t){t.length?t.pop():o.Error.unreachablePath()}function $n(t){var e=function n(t){return t.includes("\\")?t.toLowerCase().split("\\"):t.split("/")}(t);return function r(t){var e=t.pop();e&&t.push(e)}(e),e}function Tn(t){return $n(t).join("/")}function Dn(t){return t?$n(t).pop():""}function Fn(t){var e=Dn(t),n=e.lastIndexOf(".");return n===f?"":e.substring(n)}o.fs={types:{notFound:In.NOT_FOUND,directory:In.DIRECTORY,file:In.FILE,unknown:In.UNKNOWN},openFor:{reading:Cn,appending:Nn},getFileStorage:function(){return kn}},Se(0,{unreachablePath:"Unreachable path"});var Mn={"":function(t){t.length=0,t.push("")},".":s,"..":function(t){Rn(t)}};function qn(t){var e=$n(t);return O(arguments).forEach(function r(n,t){I($n(t),function(t){var e=Mn[t];e?e(n):n.push(t)})}.bind(null,e)),e.join("/")}function Bn(t,e){t.length*e.length&&function n(t,e){for(;t[l]===e[l];)t.shift(),e.shift()}(t,e)}function Wn(t){var e=$n(t);return Rn(e),e.join("/")}o.path={join:qn,parent:Wn,name:Dn,nameOnly:function(t){var e=Dn(t),n=e.lastIndexOf(".");return n===f?e:e.substring(l,n)},extension:Fn,relative:function zo(t,e){var n,r=$n(t),i=$n(e);for(Bn(r,i),n=r.length;n--;)i.unshift("..");return i.join("/")}};function Un(t,e){var n,r=-1;return{reset:function(){return r=-1,Promise.resolve()},moveNext:function(){return++r,n=undefined,r<e.length?t.getInfo(e[r]).then(function(t){return n=t}):Promise.resolve()},getCurrent:function(){return n}}}var Ln=Ke({$class:"gpf.node.BaseStream",constructor:function(t,e){this._stream=t,"function"==typeof e&&(this._close=e),t.on("error",this._onError.bind(this))},_close:s,close:function(){return this._close()},_stream:null,_invalid:!1,_reject:o.Error.invalidStreamState,_checkIfValid:function(){this._invalid&&o.Error.invalidStreamState()},_onError:function(t){this._invalid=!0,this._reject(t)}}),Xn=Ke({$class:"gpf.node.ReadableStream",$extend:"gpf.node.BaseStream",read:On(function(n){var r=this,i=r._stream;return new Promise(function(t,e){r._reject=e,r._checkIfValid(),i.on("data",r._onData.bind(r,n)).on("end",function(){r._invalid=!0,t()})})}),_onData:function(t,e){var n=this._stream;n.pause(),t.write(e).then(function(){n.resume()},this._reject)}}),Vn=Ke({$class:"gpf.node.WritableStream",$extend:"gpf.node.BaseStream",write:Sn(function(r){var i=this,o=i._stream;return new Promise(function(e,t){var n;i._reject=t,i._checkIfValid(),(n=o.write(r,function(t){!t&&n&&e()}))||o.once("drain",function(){e()})})})});function zn(e){return function(t){return t instanceof e?t.close():Promise.reject(new o.Error.IncompatibleStream)}}function Hn(t,e){return new Promise(function(n,r){a[t].apply(a,e.concat([function(t,e){t?r(t):n(e)}]))})}function Zn(t,e){return Hn(t,[Tn(e)])}function Gn(t,e){return Hn("open",[Tn(t),e.flags]).then(function(t){return new e.GpfStream(a[e.nodeStream]("",{fd:t,autoClose:!1}),Hn.bind(null,"close",[t]))})}function Qn(t){return t.isDirectory()?In.DIRECTORY:function e(t){return t.isFile()?In.FILE:In.UNKNOWN}(t)}An(p,Ke({$class:"gpf.node.FileStorage",getInfo:function(t){var e=Tn(t);return new Promise(function(t){a.exists(e,t)}).then(function(t){return t?Zn("stat",e).then(function(t){return{fileName:n.basename(e),filePath:Tn(n.resolve(e)),size:t.size,createdDateTime:t.ctime,modifiedDateTime:t.mtime,type:Qn(t)}}):{type:In.NOT_FOUND}})},openTextStream:function(t,e){return Cn===e?function n(t){return Gn(t,{flags:"r",GpfStream:Xn,nodeStream:"createReadStream"})}(t):function r(t){return Gn(t,{flags:"a",GpfStream:Vn,nodeStream:"createWriteStream"})}(t)},close:zn(Ln),explore:function(e){var n=this;return Zn("readdir",e).then(function(t){return Un(n,t.map(function(t){return qn(e,t)}))})},createDirectory:Zn.bind(null,"mkdir"),deleteFile:Zn.bind(null,"unlink"),deleteDirectory:Zn.bind(null,"rmdir")}));var Jn=Ke({$class:"gpf.wscript.BaseStream",constructor:function(t){this._file=t},close:function(){return new Promise(function(t){this._file.Close(),t()}.bind(this))}}),Yn=Ke({$class:"gpf.wscript.ReadableStream",$extend:"gpf.wscript.BaseStream",read:On(function(n){var r=this._file;return new Promise(function(t){return function e(){return n.write(r.Read(4096)).then(function(){if(!r.AtEndOfStream)return e()})}().then(t)})})}),Kn=Ke({$class:"gpf.wscript.WritableStream",$extend:"gpf.wscript.BaseStream",write:Sn(function(e){var n=this._file;return new Promise(function(t){n.Write(e),t()})})});function tr(t,e){return{type:e,fileName:t.Name.toLowerCase(),filePath:Tn(t.Path),size:t.Size,createdDateTime:new Date(t.DateCreated),modifiedDateTime:new Date(t.DateLastModified)}}function er(e,n){return new Promise(function(t){i[e]($n(n).join("\\"),!0),t()})}function nr(t){return i.FolderExists(t)?tr(i.GetFolder(t),In.DIRECTORY):function e(t){return i.FileExists(t)?tr(i.GetFile(t),In.FILE):{type:In.NOT_FOUND}}(t)}function rr(t){for(var e=new Enumerator(t),n=[];!e.atEnd();e.moveNext())n.push(e.item().Path);return n}Se(0,{pathNotExplorable:"Path not explorable"});An(m,Ke({$class:"gpf.wscript.FileStorage",getInfo:function(t){return Promise.resolve(nr($n(t).join("\\")))},openTextStream:function(t,e){var n=$n(t).join("\\");return new Promise(function(t){t(Cn===e?new Yn(i.OpenTextFile(n,1,!1)):new Kn(i.OpenTextFile(n,8,!0)))})},close:zn(Jn),explore:function(e){var r=this;return new Promise(function(t){t(Un(r,function n(t){var e;if(i.FolderExists(t))return rr((e=i.GetFolder(t)).SubFolders).concat(rr(e.Files));o.Error.pathNotExplorable()}($n(e).join("\\"))))})},createDirectory:function Ho(e,n){return new Promise(function(t){i[e]($n(n).join("\\")),t()})}.bind(null,"CreateFolder"),deleteFile:er.bind(null,"DeleteFile"),deleteDirectory:er.bind(null,"DeleteFolder")}));var ir=Object.prototype.toString;function or(t){return t instanceof Object&&"[object Object]"===ir.call(t)&&Object.getPrototypeOf(t)===Object.getPrototypeOf({})}o.isLiteralObject=or,Se(0,{missingNodeName:"Missing node name",unknownNamespacePrefix:"Unknown namespace prefix",unableToUseNamespaceInString:"Unable to use namespace in string"});var ar={"className":"class"},ur={"svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink"};function sr(t){var e=t.split(":");if(2===e.length)return{namespace:function n(t){var e=ur[t];return undefined===e&&o.Error.unknownNamespacePrefix(),e}(e[0]),name:e[1]}}function cr(t){t.includes(":")&&o.Error.unableToUseNamespaceInString()}function fr(t){return ar[t]||t}function lr(t,e){t.forEach(function(t){P(t)?lr(t,e):e(t)})}var pr=Ke({$class:"gpf.web.Tag",constructor:function(t,e,n){this._nodeName=t,this._attributes=e||{},this._children=n},_nodeName:"",_attributes:{},_children:[],_getAttributesAsString:function(){return Object.keys(this._attributes).map(function(t){return cr(t)," "+fr(t)+'="'+function e(t){return W(t,"html")}(this._attributes[t])+'"'},this).join("")},_getChildrenAsString:function(){var e=[];return lr(this._children,function(t){e.push(t.toString())}),e.join("")},_getClosingString:function(){return this._children.length?">"+this._getChildrenAsString()+"</"+this._nodeName+">":"/>"},toString:function(){return cr(this._nodeName),"<"+this._nodeName+this._getAttributesAsString()+this._getClosingString()},_createElement:function(t){var e=t.ownerDocument,n=sr(this._nodeName);return n?e.createElementNS(n.namespace,n.name):e.createElement(this._nodeName)},_setAttributesTo:function(r){S(this._attributes,function(t,e){var n=sr(e);n?r.setAttributeNS(n.namespace,fr(n.name),t):r.setAttribute(fr(e),t)})},_appendChildrenTo:function(e){var n=e.ownerDocument;lr(this._children,function(t){t instanceof pr?t.appendTo(e):e.appendChild(n.createTextNode(t.toString()))})},appendTo:function(t){var e=this._createElement(t);return this._setAttributesTo(e),this._appendChildrenTo(e),t.appendChild(e)}});o.web.createTagFunction=function Zo(r){return r||o.Error.missingNodeName(),function(t){var e,n=0;return or(t)&&(e=t,++n),new pr(r,e,E(arguments,n))}},o.http={};var hr="GET",dr="POST",_r="PUT",mr="OPTIONS",vr="DELETE",gr="HEAD",br=/([^:\s]+)\s*: ?([^\r]*)/gm,yr=1,wr=2;function Er(r){return function(e,n){n&&Object.keys(n).forEach(function(t){e[r](t,n[t])})}}function xr(n){return function(t,e){e?t[n](e):t[n]()}}function Or(e,r,i){return function(t){return{status:t[e],headers:function n(t){var e={};return I(Ne(br,t),function(t){e[t[yr]]=t[wr]}),e}(t[r]()),responseText:t[i]}}}var Sr;on("Thenable",{"then":2});function Pr(t){return o.interfaces.isImplementedBy(o.interfaces.IThenable,t)?t:Promise.resolve(t)}function jr(t,e){var n=Sr;return t===v&&(Sr=e),n}function Ir(n){return new Promise(function(t,e){Sr(n,t,e)})}function Cr(t,e,n){return Ir("string"==typeof e?{method:t,url:e,data:n}:Object.assign({method:t},e))}o.promisify=Pr,o.promisifyDefined=function Go(t){if(undefined!==t)return Pr(t)},Object.assign(o.http,{methods:{get:hr,post:dr,put:_r,options:mr,"delete":vr,head:gr},request:Ir,get:Cr.bind(o.http,hr),post:Cr.bind(o.http,dr),put:Cr.bind(o.http,_r),options:Cr.bind(o.http,mr),"delete":Cr.bind(o.http,vr),head:Cr.bind(o.http,gr)});var Nr=4,kr=Er("setRequestHeader"),Ar=xr("send"),Rr=Or("status","getAllResponseHeaders","responseText");function $r(t,e){var n=function r(t){var e=new XMLHttpRequest;return e.open(t.method,t.url),e}(t);kr(n,t.headers),function i(t,e){t.onreadystatechange=function(){t.readyState===Nr&&e(Rr(t))}}(n,e),Ar(n,t.data)}function Tr(t){var e=new jn;return dn(t).read(e).then(function(){return e.toString()})}function Dr(t){var e=Object.assign(r.parse(t.url),t);return function n(t,e){e&&(t.headers=Object.assign({"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(e)},t.headers))}(e,t.data),e}function Fr(t,e){var n=Dr(t);return function r(t){return"https:"===t.protocol?c:u}(n).request(n,function(t){!function i(e,n){e.setEncoding("utf8");var r=new Xn(e);Tr(r).then(function(t){r.close(),n({status:e.statusCode,headers:e.headers,responseText:t})})}(t,e)})}jr(t,$r),jr(h,$r),jr(p,function Qo(t,e,n){var r=Fr(t,e);r.on("error",n),function i(t,e){e?t.write(e,"utf8",function(){t.end()}):t.end()}(r,t.data)});var Mr=Er("setRequestHeader"),qr=xr("Send"),Br=Or("Status","GetAllResponseHeaders","ResponseText");jr(m,function Jo(t,e){var n=function r(t){var e=new ActiveXObject("WinHttp.WinHttpRequest.5.1");return e.Open(t.method,t.url),e}(t);Mr(n,t.headers),qr(n,t.data),function i(t,e){e(Br(t))}(n,e)});var Wr,Ur=Ke({$class:"gpf.java.BaseStream",constructor:function(t){this._stream=t},close:function(){return this._stream.close(),Promise.resolve()},_stream:null}),Lr=Ke({$class:"gpf.java.ReadableStream",$extend:Ur,_handleError:function(t){return t instanceof java.util.NoSuchElementException||t.message.startsWith("java.util.NoSuchElementException")?Promise.resolve():Promise.reject(t)},read:On(function(t){try{var e=new java.util.Scanner(this._stream);return t.write(String(e.useDelimiter("\\A").next()))}catch(e_){return this._handleError(e_)}})}),Xr=Ke({$class:"gpf.java.WritableStream",$extend:Ur,constructor:function(t){this.$super(t),this._writer=new java.io.OutputStreamWriter(t)},write:Sn(function(t){var e=this._writer;return e.write(t),e.flush(),Promise.resolve()}),close:function(){return this._writer.close(),this.$super()},_writer:null}),Vr=Er("setRequestProperty");function zr(e,n){(function r(t){var e=new Lr(function n(t){try{return t.getInputStream()}catch(e_){return t.getErrorStream()}}(t));return Tr(e).then(function(t){return e.close(),t})})(e).then(function(t){n({status:e.getResponseCode(),headers:function r(t){var e={},n=t.getHeaderFields();return I(n.keySet().toArray(),function(t){e[String(t)]=String(n.get(t).get(l))}),e}(e),responseText:t})})}function Hr(t,e){var n=new java.net.URL(t.url).openConnection();n.setRequestMethod(t.method),Vr(n,t.headers),function r(t,e){if(e){t.setDoOutput(!0);var n=new Xr(t.getOutputStream());return n.write(e).then(function(){n.close()})}return Promise.resolve()}(n,t.data).then(function(){zr(n,e)})}function Zr(t,e){var n;return t.every(function(t){return(n=function i(t,e){var n,r=t.url;if(r.lastIndex=0,n=r.exec(e.url))return t.response.apply(t,[e].concat(O(n)))}(t,e))===undefined}),n}function Gr(t){return Wr[t]||(Wr[t]=[]),Wr[t]}jr(d,Hr),jr(e,Hr);var Qr,Jr=0;function Yr(){Wr={}}function Kr(){}Yr(),o.http.mock=function Yo(t){var e=t.method.toUpperCase(),n=e+"."+Jr++;return Gr(e).unshift(Object.assign({id:n},t)),n},o.http.mock.remove=function Ko(e){var t=e.substring(l,e.indexOf("."));Wr[t]=Gr(t).filter(function(t){return t.id!==e})},o.http.mock.reset=Yr,Qr=jr(v,function ta(t,e,n){var r=function i(t){return Zr(Gr(t.method.toUpperCase()),t)}(t);undefined===r?Qr(t,e,n):e(r)}),Kr.prototype={execute:s};var ti=new Kr,ei=new Kr;ti.execute=function(t){t._readReject(t._readBuffer.shift())},ei.execute=function(t){t._readResolve()};var ni=Ke({$class:"gpf.stream.BufferedRead",constructor:function(){this._readBuffer=[]},_readBuffer:[],_readWriteToStream:null,_readResolve:null,_readReject:null,_readDataIsToken:function(t){return t instanceof Kr&&(t.execute(this),!0)},_readWriteToOutput:function(){var t=this,e=t._readBuffer.shift();return t._readDataIsToken(e)?Promise.resolve():t._readWriteToStream.write(e).then(function(){if(t._readBuffer.length)return t._readWriteToOutput();t._readNotWriting=!0})},_readNotWriting:!0,_readSafeWrite:function(){var e=this;e._readNotWriting&&(e._readNotWriting=!1,e._readWriteToOutput().then(undefined,function(t){e._readReject(t)}))},_readCheckIfData:function(){this._readBuffer.length&&this._readSafeWrite()},_readCheckIfOutput:function(){this._readWriteToStream&&this._readCheckIfData()},_appendToReadBuffer:function(t){return this._readBuffer=this._readBuffer.concat(E(arguments)),this._readCheckIfOutput(),this},_completeReadBuffer:function(){this._readBuffer.push(ei),this._readCheckIfOutput()},_setReadError:function(t){this._readBuffer.push(ti,t),this._readCheckIfOutput()},read:On(function(t){var n=this;return n._readWriteToStream=t,n._readCheckIfData(),new Promise(function(t,e){n._readResolve=t,n._readReject=e})})});bn(ni);var ri=/\r\n/g,ii=(Ke({$class:"gpf.stream.LineAdapter",$extend:ni,constructor:function(){this.$super(),this._buffer=[]},write:Sn(function(t){return this._buffer.push(t.toString()),this._process(),Promise.resolve()}),flush:function(){return this._buffer.length&&(this._buffer.push("\n"),this._process()),this._completeReadBuffer(),Promise.resolve()},_buffer:[],_consolidateLines:function(){return this._buffer.join("").replace(ri,"\n").split("\n")},_pushBackLastLineIfNotEmpty:function(t){var e=t.pop();e.length&&this._buffer.push(e)},_process:function(){var e=this,t=e._consolidateLines();e._buffer.length=0,e._pushBackLastLineIfNotEmpty(t),I(t,function(t){e._appendToReadBuffer(t)})}}),on("FlushableStream",{"flush":0})),oi={};function ai(t,e){t===v&&(oi=e)}function ui(t){return oi(t)}o.read=ui,o.fs&&(o.fs.read=ui);ai(t,function ea(t){return Ir({method:hr,url:t}).then(function(t){if(2!==Math.floor(t.status/100))throw new Error(t.responseText);return t.responseText})}),ai(e,function na(t){var o=java.nio.file.Paths.get(t);return java.nio.file.Files.exists(o)?new Promise(function(t,e){var n=java.nio.file.Files.newInputStream(o),r=new Lr(n),i=new jn;return r.read(i).then(function(){t(i.toString())})["catch"](e)}):Promise.reject(new Error("File not found"))}),ai(p,function ra(t){return new Promise(function(n,r){a.readFile(t,function(t,e){t?r(t):n(e.toString())})})}),ai(h,function ia(r){return new Promise(function(t,e){try{t(a.read(r))}catch(e_){e(new Error(e_))}})}),ai(d,function oa(e){return new Promise(function(t){t(readFile(e))})}),ai(m,function aa(n){return new Promise(function(t){var e=i.OpenTextFile(n,1,!1);t(e.ReadAll()),e.Close()})});var si={};function ci(t,e){return Promise.resolve(e)}function fi(e){var n=this;return function r(t,e){var n=t.preload[e];return n?Promise.resolve(n):ui(e)}(n,e).then(function(t){return n.preprocess({name:e,content:t,type:Fn(e).toLowerCase()})}).then(function(t){return function e(t){return si[t.type]||ci}(t).call(n,t.name,t.content)})}function li(t,e){return function r(t,e){return t._initialDefine=e.define,e.define=function n(){var t=this.gpf.require,e=this._initialDefine;return this.promise=e.apply(t,arguments),t.define=e,this.promise}.bind(t),t.gpf.require=e,t}(function n(){return{gpf:Object.create(o),promise:Promise.resolve(),_initialDefine:null}}(),Ei(t,{base:Wn(e)}))}si[".json"]=function(t,e){return JSON.parse(e)},Se(0,{noCommonJSDynamicRequire:"Dynamic require not supported"});var pi=/[^.]\brequire\b\s*\(\s*(?:['|"]([^"']+)['|"]|[^)]+)\s*\)/g;var hi,di=[null,function ua(t){return{dependencies:[],factory:t}},function sa(t,e){return{dependencies:t,factory:e}},function ca(t,e,n){return{dependencies:e,factory:n}}];function _i(t,e,n){var r={};return M(["gpf","define","module","require"],e)(t,function i(t,e,n){var r=di[arguments.length].apply(null,arguments);this.require.define(r.dependencies,function(t){return t.length=r.dependencies.length,r.factory.apply(null,E(t))})}.bind(t),r,function(t){return n[t]||o.Error.noCommonJSDynamicRequire()}),r.exports}hi=t===v?function fa(t,e){var n=location.pathname.toString();return n.endsWith("/")||(n=Wn(n)),"//# sourceURL="+location.origin+qn(n,t)+"?gpf.require\n"+e}:function la(t,e){return e},si[".js"]=function(n,r){var i=li(this,n);return function o(t,e){var n=Ne(pi,e);return n.length?li(this,t).gpf.require.define(n.map(function(t){return t[1]}).filter(function(t){return t}).reduce(function(t,e){return t[e]=e,t},{}),function(t){return t}):Promise.resolve({})}.call(this,n,r).then(function(t){var e=_i(i.gpf,hi(n,r),t);return undefined===e?i.promise:e})},Se(0,{invalidRequireConfigureOption:"Invalid configuration option",invalidRequireConfigureOptionValue:"Invalid configuration option value"});var mi={},vi=[];function gi(t,e,n){n?vi.unshift(t):vi.push(t),mi[t]=e}function bi(e){!function r(t){I(Object.keys(t),function(t){mi[t]||o.Error.invalidRequireConfigureOption()})}(e);var n=this;I(vi.filter(function(t){return e[t]!==undefined}),function(t){mi[t](n,e[t])})}function yi(t){return qn(this.base,t)}function wi(e){var t;return this.cache[e]?this.cache[e]:(t=fi.call(this,e),(this.cache[e]=t)["catch"](function(t){return function n(t,e){Array.isArray(t.requires)||(t.requires=[]),t.requires.push(e)}(t,e),Promise.reject(t)}))}function Ei(t,e){var n=Object.create(t),r={};return r.define=function o(e,t){var n=this,r=[],i=Object.keys(e);return I(i,function(t){r.push(wi.call(n,yi.call(n,e[t])))},n),Promise.all(r).then(function(n){var r;return"function"==typeof t?(r={},I(i,function(t,e){r[t]=n[e]}),t(r)):t})}.bind(n),r.resolve=yi.bind(n),r.configure=bi.bind(n),e&&r.configure(e),r}gi("base",function pa(t,e){!function n(t){"string"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.base=e}),gi("cache",function ha(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),I(Object.keys(n),function(t){e.cache[t]=Promise.resolve(n[t])})}),gi("clearCache",function da(t,e){!function n(t){"boolean"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),e&&(t.cache={})},!0),gi("preload",function _a(e,n){!function r(t){"object"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(n),I(Object.keys(n),function(t){e.preload[t]=n[t]})}),gi("preprocess",function ma(t,e){!function n(t){"function"!=typeof t&&o.Error.invalidRequireConfigureOptionValue()}(e),t.preprocess=e}),o.require=Ei({base:"",cache:{},preload:{},preprocess:function(t){return Promise.resolve(t)}});var xi=Ke({$class:"gpf.stream.ReadableArray",constructor:function(t){this._buffer=t},read:On(function(t){var e=this._buffer,n=0;return function r(){return e.length===n?Promise.resolve():t.write(e[n++]).then(r)}()}),_buffer:[]}),Oi=Ke({$class:"gpf.stream.WritableArray",constructor:function(){this._buffer=[]},write:Sn(function(t){return this._buffer.push(t),Promise.resolve()}),toArray:function(){return this._buffer},_buffer:[]});bn(xi),bn(Oi);var Si={flush:Promise.resolve.bind(Promise)};function Pi(t){return en(ii,t)||Si}function ji(e){var t=e.iReadableIntermediate,n=e.iWritableDestination;if(!e.readInProgress)try{e.readInProgress=!0,e.readPromise=t.read(n).then(function(){e.readInProgress=!1},function(t){e.readError=t,e.rejectWrite(t)})}catch(e_){e.readError=e_}}function Ii(t){if(t.readError)return Promise.reject(t.readError)}function Ci(t,e,n){var r=function u(t,e){return{iReadableIntermediate:dn(t),iWritableIntermediate:_n(t),iFlushableIntermediate:Pi(t),iWritableDestination:_n(e),iFlushableDestination:Pi(e),readInProgress:!1,readError:null,readPromise:Promise.resolve(),rejectWrite:s,flushed:!1}}(t,e),i=r.iFlushableIntermediate,o=r.iFlushableDestination,a=r.iWritableIntermediate;return ji(r),{flush:function(){return r.flushed=!0,Ii(r)||i.flush().then(function(){return r.readPromise}).then(function(){return o.flush()})},write:function(t){return ji(r),Ii(r)||function e(n,r){return new Promise(function(e,t){r.then(function(t){e(t),n.rejectWrite=s},t),n.rejectWrite=t})}(r,a.write(t))}}}function Ni(t){return O(t).length?function r(t){for(var e=t.length,n=t[--e];e;)n=Ci(t[--e],n);return n}(t):_n(t[l])}o.stream.pipe=function va(t,e){var n=dn(t),r=Ni(O(arguments)),i=Pi(r);try{return n.read(r).then(function(){return i.flush()})}catch(e_){return Promise.reject(e_)}};function ki(t){return W(t,"regexp")}B.regexp={"\\":"\\\\","-":"\\-","[":"\\[","]":"\\]","/":"\\/","{":"\\{","}":"\\}","(":"\\(",")":"\\)","*":"\\*","+":"\\+","?":"\\?",".":"\\.","^":"\\^","$":"\\$","|":"\\|"},Se(0,{invalidCSV:"Invalid CSV syntax (bad quote sequence or missing end of file)"}),o.stream.csv={};var Ai=";,\t ".split("");Ke({$class:"gpf.stream.csv.Parser",$extend:ni,constructor:function(t){this._readParserOptions(t),this._header?this._parseHeader():this._write=this._writeHeader},_readParserOptions:function(e){var n=this;e&&I(["header","separator","quote","newLine"],function(t){e[t]&&(n["_"+t]=e[t])})},_header:"",_separator:"",_deduceSeparator:function(){var e=this._header;this._separator=function a(t,e,n){for(var r,i=0,o=t.length;i<o&&!r;++i)r=e.call(n,t[i],i,t);return r}(Ai,function(t){if(e.includes(t))return t})||Ai[l]},_quote:'"',_newLine:"\n",_columns:[],_buildParsingHelpers:function(){this._unescapeDictionary={},this._unescapeDictionary[this._quote+this._quote]=this._quote,this._parser=new RegExp(q("^(?:([^QS][^S]*)|Q((?:[^Q]|QQ)+)Q)(?=$|S)",{Q:ki(this._quote),S:ki(this._separator)}))},_parseHeader:function(){this._separator||this._deduceSeparator(),this._columns=this._header.split(this._separator),this._buildParsingHelpers(),this._write=this._writeContent},_writeHeader:function(t){this._header=t,this._parseHeader()},_values:[],_content:"",_unescapeQuoted:function(t){return q(t,this._unescapeDictionary)},_addValue:function(t){t[1]?this._values.push(t[1]):this._values.push(this._unescapeQuoted(t[2]))},_nextValue:function(t){return this._content=this._content.substring(t),Boolean(this._content.length)},_checkAfterValue:function(t){var e=t[l].length;return this._content.charAt(e)?this._nextValue(++e):(delete this._content,!1)},_extractValue:function(){var t=this._parser.exec(this._content);return!!t&&(this._addValue(t),this._checkAfterValue(t))},_checkForValue:function(){return this._content.startsWith(this._separator)?(this._values.push(""),this._nextValue(this._separator.length)):this._extractValue()},_parseValues:function(){for(;this._checkForValue(););},_parseContent:function(){if(this._parseValues(),!this._content)return this._values},_processContent:function(t){return this._content?this._content=this._content+this._newLine+t:(this._values=[],this._content=t),this._parseContent()},_getRecord:function(n){var r={};return I(this._columns,function(t,e){n[e]!==undefined&&(r[t]=n[e])}),r},_writeContent:function(t){var e=this._processContent(t);e&&this._appendToReadBuffer(this._getRecord(e))},write:Sn(function(t){return this._write(t),Promise.resolve()}),flush:function(){if(this._content){var t=new o.Error.InvalidCSV;return this._setReadError(t),Promise.reject(t)}return this._completeReadBuffer(),Promise.resolve()}});o.attributes={};var Ri=Ke({$class:"gpf.attributes.Attribute",$abstract:!0,_memberName:undefined,getMemberName:function(){return this._memberName},_ClassConstructor:undefined,getClassConstructor:function(){return this._ClassConstructor},_check:function(t,e){},_build:function(t,e,n){}});Se(0,{unknownAttributesSpecification:"Unknown attributes specification",invalidAttributesSpecification:"Invalid attributes specification"});var $i="attributes",Ti="$"+$i,Di=/^\[([^\]]+)\]$|./,Fi=De.prototype._checkMemberName,Mi=De.prototype._checkMemberValue,qi=De.prototype._check$Property,Bi=De.prototype.check;function Wi(t,e){e._check(t,this)}function Ui(t){return Di.exec(t)[1]}Object.assign(De.prototype,{_hasInheritedMember:function(t){return this._extend&&this._extend.prototype[t]!==undefined},_hasMember:function(t){return Object.prototype.hasOwnProperty.call(this._initialDefinition,t)||this._hasInheritedMember(t)},_checkAttributeMemberExist:function(t){this._hasMember(t)||o.Error.unknownAttributesSpecification()},_checkMemberName:function(t){var e=Ui(t);e?(Fi.call(this,e),this._checkAttributeMemberExist(e)):Fi.call(this,t)},_checkAttributesSpecification:function(t){j(t)||o.Error.invalidAttributesSpecification(),I(t,function(t){t instanceof Ri||o.Error.invalidAttributesSpecification()})},_checkMemberValue:function(t,e){var n=Ui(t);n?(this._checkAttributesSpecification(e),this._addAttributesFor(n,e)):Mi.call(this,t,e)},_check$Property:function(t,e){$i===t?(this._checkAttributesSpecification(e),this._addAttributesFor(Ti,e)):qi.call(this,t,e)},check:function(){this._attributes={},Bi.call(this),this._forOwnAttributes(Wi)}}),De.prototype._allowed$Properties.push($i);var Li=De.prototype._addMemberToPrototype,Xi=De.prototype._buildPrototype;function Vi(t,e,n){qe(e.constructor)._singleton||(e._memberName=t,e._ClassConstructor=n.constructor),e._build(t,this,n)}function zi(t){if(t)return function e(t){return"object"!=typeof t&&o.Error.invalidParameter(),t.constructor}(t);o.Error.invalidParameter()}function Hi(t,e){return function n(t,e){return qe(t).getAttributes(e)}("function"==typeof t?t:zi(t),e)}Object.assign(De.prototype,{_attributes:{},_addAttributesFor:function(t,e){this._attributes[t]=e},_addMemberToPrototype:function(t,e,n){Ui(e)||Li.call(this,t,e,n)},_buildPrototype:function(t){Xi.call(this,t),this._forOwnAttributes(Vi,t)}}),Object.assign(De.prototype,{_collectOwnAttributes:function(o,a){S(this._attributes,function(t,e){var n=function r(t,e){return e?t.filter(function(t){return t instanceof e}):t}(t,a);n.length&&function i(t,e,n){t[e]=(t[e]||[]).concat(n)}(o,e,n)})},_getOwnAttributes:function(){var t={};return this._collectOwnAttributes(t),t},_collectAttributes:function(t,e){this._collectOwnAttributes(t,e),this._extendDefinition&&this._extendDefinition._collectAttributes(t,e)},_forOwnAttributes:function(r,i){var o=this,t=o._getOwnAttributes();S(t,function(t,e){var n;Ti!==e&&(n=e),I(t,function(t){r.call(o,n,t,i)})})},getAttributes:function(t){var e={};return this._collectAttributes(e,t),e}}),o.attributes.get=Hi;var Zi={},Gi=Ke({$class:"gpf.stream.AbstractOperator",_dataInPromise:undefined,_dataInResolve:s,_dataOutResolve:s,_dataOutReject:s,_waitForData:function(){var e=this;return e._dataInPromise||(e._dataInPromise=new Promise(function(t){e._dataInResolve=t}).then(function(t){return delete e._dataInPromise,delete e._dataInResolve,t})),e._dataInPromise},_writeData:function(t){var n=this;return n._waitForData(),n._dataInResolve(t),new Promise(function(t,e){n._dataOutResolve=t,n._dataOutReject=e}).then(function(t){return delete n._dataOutResolve,delete n._dataOutReject,t},function(t){return delete n._dataOutResolve,delete n._dataOutReject,Promise.reject(t)})},read:On(function(e){var n=this;return n._waitForData().then(function(t){return Zi!==t?e.write(t).then(n._dataOutResolve,n._dataOutReject):(n._dataOutResolve(),Promise.resolve())})}),_process:Ae(),write:Sn(function(t){return this._process(t)}),flush:function(){return this._dataInPromise?this._writeData(Zi):Promise.resolve()}});bn(Gi);Ke({$class:"gpf.stream.Filter",$extend:Gi,constructor:function(t){this._filter=t},_process:function(t){return this._filter(t)?this._writeData(t):Promise.resolve()}}),Ke({$class:"gpf.stream.Map",$extend:Gi,constructor:function(t){this._map=t},_process:function(t){return this._writeData(this._map(t))}}),on("XmlContentHandler",{"characters":1,"endDocument":0,"endElement":0,"endPrefixMapping":1,"processingInstruction":2,"startDocument":0,"startElement":2,"startPrefixMapping":2});function Qi(e,n){return function(t){t.match(e)||o.Error["invalidXml"+n]()}}Se(0,{invalidXmlElementName:"Invalid XML element name",invalidXmlAttributeName:"Invalid XML attribute name",invalidXmlNamespacePrefix:"Invalid XML namespace prefix",invalidXmlUseOfPrefixXmlns:"Invalid use of XML namespace prefix xmlns",invalidXmlUseOfPrefixXml:"Invalid use of XML namespace prefix xml",unknownXmlNamespacePrefix:"Unknown XML namespace prefix"});var Ji=/^[a-zA-Z_][a-zA-Z0-9_\-\.]*$/,Yi=/^(|[a-z_][a-zA-Z0-9_]*)$/,Ki=Qi(Ji,"ElementName"),to=Qi(Ji,"AttributeName"),eo=Qi(Yi,"NamespacePrefix");function no(t){"xmlns"===t&&o.Error.invalidXmlUseOfPrefixXmlns()}function ro(t,e){Ki(t),eo(e),no(e)}function io(t,e){e.includes(t)||o.Error.unknownXmlNamespacePrefix()}function oo(o,a){return function(t,e){var n,r,i=t.indexOf(":");i===f?o(t):(r=t.substring(l,i),n=t.substring(++i),a(n,r,e))}}var ao=oo(Ki,function ga(t,e,n){ro(t,e),"xml"===e?o.Error.invalidXmlUseOfPrefixXml():io(e,n)});var uo=oo(to,function ba(t,e,n){ro(t,e),"xml"===e?function r(t){"space"!==t&&o.Error.invalidXmlUseOfPrefixXml()}(t):io(e,n)});o.interfaces.promisify=function ya(n){return function(t){var e=en(n,t);return e||o.Error.interfaceExpected({name:ve(n)}),function i(n,t,r){var e=r.then;return r.then=function(){return i(n,t,e.apply(r,arguments))},S(t.prototype,function(t,e){r[e]=function(){var t=arguments;return r.then(function(){return Pr(n[e].apply(n,t))})}}),r}(e,n,Promise.resolve())}},Se(0,{invalidXmlWriterState:"Invalid XML Writer state"});Ke({$class:"gpf.xml.Writer",$extend:ni,constructor:function(){this._elements=[],this._nextNamespaces={},this._checkIfStarted=o.Error.invalidXmlWriterState},_elements:[],_nextNamespaces:{},_checkIfElementsExist:function(t){t!==Boolean(this._elements.length)&&o.Error.invalidXmlWriterState()},_checkState:function(t){this._checkIfStarted(),undefined!==t&&this._checkIfElementsExist(t)},_addContentToElement:function(t){t.content||(this._appendToReadBuffer(">"),t.content=!0)},_addContentToLastElement:function(){var t=this._elements[l];if(t)return this._addContentToElement(t)},_writeAttribute:function(t,e){this._appendToReadBuffer(" "+t+'="'),this._appendToReadBuffer(X(e.toString())),this._appendToReadBuffer('"')},_getNamespacePrefixes:function(){return this._elements.reduce(function(t,e){return t.concat(Object.keys(e.namespaces))},[])},_processAttributes:function(t){S(t,function(t,e){uo(e,this._getNamespacePrefixes()),this._writeAttribute(e,t)},this)},_processNamespaces:function(t){S(t,function(t,e){e?this._writeAttribute("xmlns:"+e,t):this._writeAttribute("xmlns",t)},this)},characters:function(t){return this._checkState(!0),this._addContentToLastElement(),this._appendToReadBuffer(X(t.toString())),Promise.resolve()},endDocument:function(){return this._checkState(!1),this._checkIfStarted=o.Error.invalidXmlWriterState,this._completeReadBuffer(),Promise.resolve()},endElement:function(){this._checkState(!0);var t=this._elements.shift();return t.content?this._appendToReadBuffer("</"+t.qName+">"):this._appendToReadBuffer("/>"),Promise.resolve()},endPrefixMapping:function(t){return this._checkState(),Promise.resolve()},processingInstruction:function(t,e){return this._checkState(!1),this._appendToReadBuffer("<?"+t+" "+e+"?>\n"),Promise.resolve()},startDocument:function(){return this._checkIfStarted=s,this.startDocument=o.Error.invalidXmlWriterState,this._checkState(!1),Promise.resolve()},startElement:function(t,e){var n=this._nextNamespaces;this._checkState(),this._addContentToLastElement(),this._elements.unshift({qName:t,namespaces:n}),this._nextNamespaces={},ao(t,this._getNamespacePrefixes()),this._appendToReadBuffer("<"+t),e&&this._processAttributes(e),this._processNamespaces(n)},startPrefixMapping:function(t,e){this._checkState(),function n(t){eo(t),no(t),"xml"===t&&o.Error.invalidXmlUseOfPrefixXml()}(t),this._nextNamespaces[t]&&o.Error.invalidXmlWriterState(),this._nextNamespaces[t]=e}});o.forEachAsync=function(t,e,n){if(j(t))return function s(n,r,i){var o=0,a=n.length;return function u(){if(o===a)return Promise.resolve();var t=o++;try{return Pr(r.call(i,n[t],t,n)).then(u)}catch(e_){return Promise.reject(e_)}}()}(t,e,n);o.Error.invalidParameter()},Se(0,{invalidSerialName:"Invalid serial name",invalidSerialType:"Invalid serial type",invalidSerialRequired:"Invalid serial required",invalidSerialReadOnly:"Invalid serial readOnly"}),o.serial={};var so={STRING:"string",INTEGER:"integer",DATETIME:"datetime"};o.serial.types={string:so.STRING,integer:so.INTEGER,datetime:so.DATETIME};var co=/^[a-z][a-z0-9_]*$/i;function fo(t){!function e(t){"string"!=typeof t&&o.Error.invalidSerialName()}(t.name),function n(t){t.match(co)||o.Error.invalidSerialName()}(t.name)}var lo=Object.keys(so).map(function(t){return so[t]});function po(t){undefined===t.type?t.type=so.STRING:function e(t){lo.includes(t)||o.Error.invalidSerialType()}(t.type)}function ho(t,e){"boolean"!=typeof t&&e()}function _o(t){var e=Object.assign(t);return[fo,po,function n(t){undefined===t.required?t.required=!1:ho(t.required,o.Error.invalidSerialRequired)},function r(t){undefined!==t.readOnly&&ho(t.readOnly,o.Error.invalidSerialReadOnly)}].forEach(function(t){t(e)}),e}function mo(t){t&&o.Error.classAttributeOnly()}function vo(t,e){var n=t._extend;n!==e&&function r(t,e){t instanceof e||o.Error.restrictedBaseClassAttribute()}(n.prototype,e)}function go(t,e,n){O(function i(t,e,n){var r=e.getAttributes(n);return t?r[t]:r[Ti]}(t,e,n)).length&&o.Error.uniqueAttributeUsedTwice()}Se(0,{classAttributeOnly:"Class attribute only",memberAttributeOnly:"Member attribute only",restrictedBaseClassAttribute:"Restricted base class attribute",uniqueAttributeUsedTwice:"Unique attribute used twice"});var bo=Ke({$class:"gpf.attributes.AttributeAttribute",$extend:Ri,$abstract:!0,_check:function(t,e){mo(t),vo(e,Ri),go(t,e,this.constructor)},_targetCheck:Ae(),_overrideTargetCheck:function(t){var n=this,r=t._check;t._check=function(t,e){n._targetCheck(t,e,this),r.call(this,t,e)}},_build:function(t,e,n){this._overrideTargetCheck(n)}}),yo=Ke({$class:"gpf.attributes.ClassAttribute",$extend:bo,$singleton:!0,_targetCheck:function(t,e){mo(t)}});o.attributes.ClassAttribute=yo;var wo=Ke({$class:"gpf.attributes.MemberAttribute",$extend:bo,$singleton:!0,_targetCheck:function(t,e){!function n(t){t||o.Error.memberAttributeOnly()}(t)}});o.attributes.MemberAttribute=wo;var Eo=Ke({$class:"gpf.attributes.AttributeForInstanceOf",$extend:bo,_BaseClass:null,constructor:function(t){"function"!=typeof t&&o.Error.invalidParameter(),this._BaseClass=t},_targetCheck:function(t,e){vo(e,this._BaseClass)}});o.attributes.AttributeForInstanceOf=Eo;var xo=Ke({$class:"gpf.attributes.UniqueAttribute",$extend:bo,$singleton:!0,_targetCheck:function(t,e,n){go(t,e,n.constructor)}});o.attributes.UniqueAttribute=xo;var Oo,So=Ke({$class:"gpf.attributes.Serializable",$extend:Ri,$attributes:[new wo,new xo],_property:null,constructor:function(t){this._property=t},_check:function(t,e){this._property=_o(Object.assign({name:function n(t){return t.startsWith("_")?t.substring(1):t}(t)},this._property||{}))},getProperty:function(){return Object.create(this._property)}});function Po(t){var e=Hi(t,So),n={};return S(e,function(t,e){n[e]=t[l].getProperty()}),n}function jo(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return!n.writable}function Io(n){var t=Po(n);return S(t,function(t,e){t.readOnly===undefined&&(t.readOnly=Oo(n,e))}),t}function Co(t,e){if(!e.readOnly)return t}function No(n,t,i){var o={};return S(t,function(t,e){!function r(t,e,n){n!==undefined&&(t[e]=n)}(o,t.name,i.call(n,n[e],t,e))}),o}function ko(n,i,o){var t=Io(n);S(t,function(t,e){Object.prototype.hasOwnProperty.call(i,t.name)&&function r(t,e,n){n!==undefined&&(t[e]=n)}(n,e,o.call(n,i[t.name],t,e))})}function Ao(t,e,n){var r=function i(t){return t||Ti}(e);t._attributes[r]=(t._attributes[r]||[]).concat(n),function o(e,n,t){t.forEach(function(t){Wi.call(e,n,t),Vi(n,t,e._instanceBuilder.prototype)})}(t,e,n)}Oo=Object.getOwnPropertyDescriptor?function(t,e){for(var n,r=t;r!==Object&&n===undefined;)n=jo(r,e),r=Object.getPrototypeOf(r);return n||!1}:function(){return!1},o.serial.get=Po,o.serial.toRaw=function(t,e){return"function"==typeof t&&o.Error.invalidParameter(),function n(t,e){return No(t,Io(t),e||Co)}(t,e)},o.serial.fromRaw=function(t,e,n){return"function"==typeof t&&o.Error.invalidParameter(),function r(t,e,n){ko(t,e,n||Co)}(t,e,n),t},Se(0,{es6classOnly:"ES6 class only"}),o.attributes.decorator=function wa(){var n=E(arguments);return function(t,e){Pe(t)||o.Error.es6classOnly(),Ao(qe(t),e,n)}}});