(function(f,h){if("function"===typeof define&&define.amd)define(["exports"],h);else if("undefined"!==typeof exports)h(exports);else if("undefined"!==typeof module&&module.exports)h(module.exports);else{var J={};h(J);f.gpf=J}})(this,function(f){function h(){}function J(a,b){if(void 0!==a)return a[b]}function cb(a,b){var c=a[b];void 0===c&&(c=a[b]={});return c}function K(a,b){var c,d;c=b?cb:J;"gpf"===a[0]?(d=f,a=a.slice(1)):d=k;return a.reduce(c,d)}function W(a,b){a=a.split(".");var c=a.pop(),d=K(a,
!0),e=!0,f;d[c]=function(){e&&(f=b(a),d[c]=f,e=!1);return f.apply(this,arguments)}}function db(){var a=Function.prototype.toString.apply(this),b=a.indexOf("function"),c=a.indexOf("(",b);return a.substr(b+9,c-b-9).replace(sa,"").trim()}function ta(a,b,c){function d(a){return function(b){e&&(e=!1,a(b))}}var e=!0;try{a(d(b),d(c))}catch(f){e&&(e=!1,c(f))}}function va(){var a=this;a._handlers.forEach(function(b){b.process(a)});a._handlers=[]}function X(a){this._state=!1;this._value=a;va.call(this)}function wa(a){try{p(a!==
this,"A promise cannot be resolved with itself.");if(a&&("object"===typeof a||"function"===typeof a)){var b=a.then;if("function"===typeof b){ta(b.bind(a),wa.bind(this),X.bind(this));return}}this._state=!0;this._value=a;va.call(this)}catch(c){X.apply(this,[c])}}function xa(){}function L(){var a=this;a.promise=new Promise(function(b,c){a.resolve=b;a.reject=c})}function ya(){return!1}function w(a,b){var c;void 0===b&&(b=a,a=[]);p("string"===typeof b&&b.length,"Source expected (or use _gpfEmptyFunc)");
if(0===a.length)return za(b);c=[].concat(a);c.push(b);return za.apply(null,c)}function Y(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function Aa(a){var b=typeof a;if("function"===b)return 1===a.length;if("object"!==b)return!1;a=a.dispatchEvent;return"function"===typeof a?1===a.length:!0}function Ba(a,b,c){var d=a.scope;"function"===typeof b.dispatchEvent?b=b.dispatchEvent.bind(b):"function"===typeof b?b=b.bind(d):(d=b[a.type]||b["*"]||h,b=d.bind(b.scope||b));b(a);void 0!==c&&c.resolve(a)}
function y(a,b,c){var d=null===this||"object"!==typeof this?k:this;p(Aa(c),"Expected a valid event handler");a instanceof C||(a=new f.events.Event(a,b,d));10<++Ca?(b=new L,setTimeout(Ba.bind(null,a,c,b),0)):(Ba(a,c),b=Promise.resolve(a));--Ca;return b}function u(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.apply(c,[a[d],d,a])}function Z(a,b){var c=a;u(b,function(a,b){c=c.split(b).join(a)});return c}function Da(a,b){a=Z(a,eb[b]);"javascript"===b&&(a='"'+a+'"');return a}function fb(a,b){this[0][b]=
a}function gb(a,b){var c=this[0],d=this[2];void 0===c[b]?c[b]=a:d(c,b,a)}function aa(a,b,c){var d;void 0===c?d=fb:(p("function"===typeof c,"Expected function"),d=gb);u(b,d,arguments);return a}function hb(a){return a.trim()}function Ea(a){this.parameters=[];void 0!==a&&this._extract(a)}function Fa(a){this._pending=[];this._done=[];!0===a?this._haveDifferentPrototypes=ya:this._alike=ya}function ib(a,b,c){return function(d){var e=new ba,f;e.code=a;e.name=b;d?(f={},u(d,function(a,b){f["{"+b+"}"]=a.toString()}),
d=Z(c,f)):d=c;e.message=d;return e}}function z(a,b){var c,d;g(a);for(c in b)if(b.hasOwnProperty(c)){d=++jb;f.Error["CODE_"+c.toUpperCase()]=d;var e=f.Error,n=c,l=c,ua=b[c],h=ib(d,l,ua);h.CODE=d;h.NAME=l;h.MESSAGE=ua;e[n]=h}}function Ga(a,b){M[b]=a;void 0===N[a]&&(N[a]=b)}function Ha(a,b){u(b,function(b,d){var e=a+d;0===b?Ga(e,"."+d):"string"===typeof b?b.split(",").forEach(function(a){Ga(e,"."+a)}):Ha(e+"/",b)})}function kb(a){a=M[a.toLowerCase()];void 0===a&&(a="application/octet-stream");return a}
function lb(a){a=N[a.toLowerCase()];void 0===a&&(a=".bin");return a}function Ia(){null===M&&(M={},N={},Ha("",mb))}function nb(a,b){return a.dt-b.dt}function ob(a,b){p("number"===typeof b,"Timeout is required");var c={id:++Ja,dt:new Date((new Date).getTime()+b),cb:a};F.push(c);F.sort(nb);return Ja}function pb(a){var b;F.every(function(c,d){return c.id===a?(b=d,!1):!0})||F.splice(b,1)}function qb(){for(var a=F,b,c;a.length;)b=a.shift(),c=new Date,b.dt>c&&ca(b.dt-c),b.cb()}function Ka(a,b,c){var d=c.length;
c=c.pad;var e;e=f.bin.isPow2(a.length);if(-1<e&&(void 0===d||32>=d*e)){var n=[],l,g,h;g=(1<<(void 0===d?32:d*e)-e)-1;for(l=(1<<e)-1;0!==b;)h=b&l,n.unshift(a.charAt(h)),b=b>>e&g;e=n}else{e=b;b=[];for(n=a.length;0!==e;)l=e%n,b.unshift(a.charAt(l)),e=(e-l)/n;e=b}if(void 0!==d)for(void 0===c&&(c=a.charAt(0));e.length<d;)e.unshift(c.charAt(e.length%c.length));else 0===e.length&&(e=[a.charAt(0)]);return e.join("")}function La(a,b,c){var d=a.length,e=0,f=0;for(void 0===c&&(c=a.charAt(0));f<b.length&&-1!==
c.indexOf(b.charAt(f));)++f;for(;f<b.length;)e=d*e+a.indexOf(b.charAt(f++));return e}function Ma(a){return a.toString()}function Na(a){var b=rb[typeof a];if(void 0!==b)return b(a);if(null===a)return"null";var c,d,e,b=a instanceof Array;c=[];for(d in a)"function"!==typeof a[d]&&(e=Na(a[d]),b?c.push(e):c.push(Da(d,"javascript")+":"+e));a=b?"["+c.join(",")+"]":"{"+c.join(",")+"}";return a}function sb(a){return w("return "+a)()}function A(a){if(-1<a.indexOf("/"))a=a.split("/");else if(-1<a.indexOf("\\"))a=
a.toLowerCase().split("\\");else return[a];a.length&&!a[a.length-1]&&a.pop();return a}function da(a){a=A(a);return a[a.length-1]}function ea(a){return a.split("*")}function O(a){"!"===a.charAt(0)&&(this.negative=!0,a=a.substr(1));var b=a.indexOf("**");-1===b?this.start=a.split("/").map(ea):(0<b&&(p("/"===a.charAt(b-1),"** must be preceded by /"),this.start=a.substr(0,b-1).split("/").map(ea)),b<a.length-2&&(p("/"===a.charAt(b+2),"** must be followed by /"),this.end=a.substr(b+3).split("/").map(ea).reverse()))}
function Oa(a){return a instanceof O?a:new O(a)}function Pa(a){return a instanceof Array?a.map(Oa):[Oa(a)]}function tb(a){var b=a.negative;return a.match(this.parts)?(this.result=!b,!1):b?(this.result=!0,!1):!0}function ub(a){var b=a.length-1;return"\r"===a.charAt(b)?a.substr(0,b):a}function Qa(a,b){b=b||{};this._lines=a.split("\n").map(ub);var c=b.header||this._lines.shift(),d;if(!(d=b.separator))a:{var e;for(d=0;4>d;++d)if(e=";,\t ".charAt(d),-1!==c.indexOf(e)){d=e;break a}d=";"}this._separator=
d;this._quote=b.quote||'"';this._columns=c.split(this._separator)}function fa(a){return"constructor"===a?"constructor ":a}function P(a){return"constructor "===a?"constructor":a}function vb(a){return function(){a.isConstructionAllowed()&&a._resolvedConstructor.apply(this,arguments)}}function Ra(a){return!a.toString().split("._super").every(function(a){return-1!=="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".indexOf(a.charAt(0))})}function Sa(a,b){return function(){var c=this._super,
d;this._super=a;try{d=b.apply(this,arguments)}finally{void 0===c?delete this._super:this._super=c}return d}}function G(a,b,c){this._uid=++wb;Ta[this._uid]=this;this._Subs=[];"function"===typeof a?(this._name=a.compatibleName()||"anonymous",this._Constructor=a):(this._name=a,this._Super=b,this._definition=c,this._build())}function q(a){var b;b=a[ga];void 0===b?(b=new G(a),a[ga]=b._uid):b=Ta[b];return b}function Ua(a,b,c){ha({"name is required (String)":"string"===typeof a,"base is required (String|Function)":"string"===
typeof b||b instanceof Function,"definition is required (Object)":"object"===typeof c});var d,e;-1<a.indexOf(".")&&(d=a.split("."),e=d.pop(),d=K(d,!0));"string"===typeof b&&(b=K(b.split(".")),p(b instanceof Function,"base must resolve to a function"));a=(new G(a,b,c))._Constructor;void 0!==d&&(d[e]=a);return a}function xb(a,b){var c=this[b];void 0!==c&&(this[a]=c,delete this[b])}function H(a,b,c){u(yb,xb,c);return Ua(a,b,c)}function Va(a,b){a+=".";b=a+b;return function(c,d,e){void 0===e&&"object"===
typeof d&&(e=d,d=b);-1===c.indexOf(".")&&(c=a+c);return H(c,d||b,e||{})}}function zb(a,b){b="$"+b;f[b]=function(){var c=w("return function "+b+"(args) {this.constructor.apply(this, args);};")();c.prototype=a.prototype;return function(){return new c(arguments)}}()}function Wa(a){return w(["idx"],"return this."+a+"[idx];")}function r(a,b,c){var d="$"===a.charAt(0),e;d?(a=a.substr(1),e=a+"Attribute"):e=a;b=Ab(e,b,c);d&&zb(b,a);return b}function Bb(){return this._MEMBER_}function Cb(a){var b=this._MEMBER_;
this._MEMBER_=a;return b}function Xa(a,b){var c,d,e,f;c=a.toString().split("_MEMBER_").join(b);e=c.indexOf("(")+1;f=c.indexOf(")",e)-1;d=c.substr(e,f-e+1).split(",").map(function(a){return a.trim()});e=c.indexOf("{")+1;f=c.lastIndexOf("}")-1;c=c.substr(e,f-e+1);return w(d,c)}function ia(a,b){var c,d,e,f;for(c in b.prototype)if("constructor"!==c&&(d=b.prototype[c],e=a[c],f=typeof e,typeof d!==f||"function"===f&&d.length!==e.length))return!1;return!0}function ja(a){var b;return(new f.attributes.Map(this)).getMemberAttributes("Class").filter(f.attributes.InterfaceImplementAttribute).every(function(c){b=
c._builder;return c._interfaceDefinition!==a||!b})?null:"function"===typeof b?b(this):this[b]()}function Db(a){return function(b){g(b);var c=ja.apply(this,arguments);null===c&&(c=a.apply(this,arguments));return c}}function Ya(a){var b=-1;return{reset:function(){b=-1},moveNext:function(c){var d;++b;d=b<a.length;!d&&c&&y.apply(this,["endOfData",{},c]);return d},current:function(){return a[b]}}}function Eb(a){var b=(new m.Map(a)).filter(m.EnumerableAttribute).getMembers();return Ya(a[b[0]])}function Fb(a){return function(b,
c,d){function e(a,b){y(a,b||{},d)}function n(a){"error"===a.type&&e(a);0===--g&&e("endOfData")}function l(c){var d=c.type;2===d?(++g,a.explore(c.filePath,function(a){"error"===a.type?e(a):D.IEnumerator.each(a.get("enumerator"),l,n)})):1===d&&(c=c.filePath,c=f.path.relative(b,c),h(k,c)&&e("data",{path:c}))}var g=0,h=f.path.match,k=f.path.compileMatchPattern(c);a.getInfo(b,function(a){"error"===a.type?e(a):l(a.get("info"))})}}var v="unknown",k=this,ka,g=h,E=h,la=!1,ma=!1,I,Q,na;"undefined"!==typeof WScript?
(v="wscript",k=function(){return this}.apply(null,[]),E=function(a){WScript.Quit(a)},k.console={log:function(a){WScript.Echo("    "+a)},info:function(a){WScript.Echo("[?] "+a)},warn:function(a){WScript.Echo("/!\\ "+a)},error:function(a){WScript.Echo("(X) "+a)}}):"undefined"!==typeof print&&"undefined"!==typeof java?(v="rhino",k=function(){return this}.apply(null,[]),E=function(a){java.lang.System.exit(a)},k.console={log:function(a){print("    "+a)},info:function(a){print("[?] "+a)},warn:function(a){print("/!\\ "+
a)},error:function(a){print("(X) "+a)}}):"undefined"!==typeof phantom&&phantom.version?(v="phantomjs",require("fs"),k=window,ma=la=!0,E=phantom.exit):"undefined"!==typeof module&&module.exports?(v="nodejs",require("path"),k=global,la=!0,E=process.exit):"undefined"!==typeof window&&(v="browser",k=window,ma=!0,E=h,I=window,Q=document,na=Q.getElementsByTagName("head")[0]||Q.documentElement);ka=k.gpf;f.noConflict=function(){void 0===ka?delete k.gpf:k.gpf=ka;return f};la&&(f.node={});f.web={};f.version=
function(){return"0.1.5-alpha"};f.host=function(){return v};f.context=function(a){return void 0===a?k:K(a.split("."))};f.loaded=function(a){a&&a();return!0};var p,ha;ha=p=h;var Za=Array.prototype.slice,oa={Array:{on:Array.prototype,every:function(a,b){var c=this.length,d;for(d=0;d<c;++d)if(!a.apply(b,[this[d],d,this]))return!1;return!0},filter:function(a,b){var c=[],d=this.length,e,f;for(e=0;e<d;++e)f=this[e],a.apply(b,[this[e],e,this])&&c.push(f);return c},forEach:function(a,b){var c=this.length,
d;for(d=0;d<c;++d)a.apply(b,[this[d],d,this])},indexOf:function(a,b){for(var c=b||0,d=this.length;c<d;){if(this[c]===a)return c;++c}return-1},map:function(a,b){var c=this.length,d=Array(c),e;for(e=0;e<c;++e)d[e]=a.apply(b,[this[e],e,this]);return d},reduce:function(a,b){var c=this.length,d=0,e;for(e=void 0===b?this[d++]:b;d<c;++d)e=a(e,this[d],d,this);return e}},Function:{on:Function.prototype,bind:function(a){var b=this,c=Za.apply(arguments,[1,arguments.length+1]);return function(){var d=Za.apply(arguments,
[0,arguments.length+1]);b.apply(a,c.concat(d))}}},Object:{on:Object,create:function(){function a(){}return function(b){a.prototype=b;var c=new a;a.prototype=null;c.__proto__||(c.__proto__=b);return c}}(),getPrototypeOf:function(a){return a.__proto__||a.constructor.prototype}},String:{on:String.prototype,trim:function(){var a=RegExp("^[\\s\ufeff\u00a0]+|[\\s\ufeff\u00a0]+$","g");return function(){return this.replace(a,"")}}()}};(function(){var a,b;for(a in oa)if(oa.hasOwnProperty(a)){b=oa[a];var c=
b.on,d=void 0;for(d in b)b.hasOwnProperty(d)&&"on"!==d&&void 0===c[d]&&(c[d]=b[d])}})();var sa=RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");(function(){return"functionName"!==function(){}.name})()?Function.prototype.compatibleName=db:Function.prototype.compatibleName=function(){return this.name};var t=f.Promise=function(a){ta(a,wa.bind(this),X.bind(this))};xa.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(a){var b=this;null===a._state?(a.hasOwnProperty("_handlers")||
(a._handlers=[]),a._handlers.push(b)):setTimeout(function(){var c,d;c=a._state?b.onFulfilled:b.onRejected;if(null===c)a._state?b.resolve(a._value):b.reject(a._value);else{try{d=c(a._value)}catch(e){b.reject(e);return}b.resolve(d)}},0)}};t.prototype={_state:null,_value:null,_handlers:[],then:function(a,b){var c=this;return new t(function(d,e){var f=new xa;void 0!==a&&(f.onFulfilled=a);void 0!==b&&(f.onRejected=b);f.resolve=d;f.reject=e;f.process(c)})},"catch":function(a){return this.then(null,a)}};
t.resolve=function(a){return new t(function(b){b(a)})};t.reject=function(a){return new t(function(b,c){g(b);c(a)})};t.all=function(a){return 0===a.length?t.resolve([]):new t(function(b,c){function d(f,l){try{f&&f instanceof t?f.then(function(a){d(a,l)},c):(a[l]=f,0===--e&&b(a))}catch(g){c(g)}}var e=a.length;a.forEach(d)})};t.race=function(a){return new t(function(b,c){a.forEach(function(a){a.then(b,c)})})};void 0===k.Promise&&(k.Promise=t);L.prototype={resolve:null,reject:null,promise:null};f.DeferredPromise=
L;var za=Function,Gb="break case class catch const continue debugger default delete do else export extends finally for function if import in instanceof let new return super switch this throw try typeof var void while with yield".split(" ");Y(f,{HOST_BROWSER:"browser",HOST_NODEJS:"nodejs",HOST_PHANTOMJS:"phantomjs",HOST_RHINO:"rhino",HOST_UNKNOWN:"unknown",HOST_WSCRIPT:"wscript"});f.events={isValidHandler:Aa};var C=f.events.Event=function(a,b,c){this.type=a;this.scope=null===c||"object"!==typeof c?
k:c;void 0!==b&&(this._params=b)};C.prototype={constructor:C,type:"",scope:null,_params:{},get:function(a){return this._params[a]}};var Ca=0;C.prototype.fire=function(a){return y.apply(this,[this,{},a])};f.events.fire=function(a,b,c){g(a,b,c);var d;this!==f.events&&(d=this);void 0===c&&(c=b,b={});return y.apply(d,[a,b,c])};f.events.getPromiseHandler=function(a){var b=new L;a(function(a){"error"===a.type?b.reject(a):b.resolve(a)});return b.promise};Y(f.events,{EVENT_ANY:"*",EVENT_ERROR:"error",EVENT_READY:"ready",
EVENT_DATA:"data",EVENT_END_OF_DATA:"endOfData",EVENT_CONTINUE:"continue",EVENT_STOP:"stop",EVENT_STOPPED:"stopped"});ma&&(f.web.include=function(){function a(a,b){this.id=++e;this.url=a;this.eventsHandler=b;f[this.id]=this}function b(){var a=f[this.id.substr(12)];a&&a.check(this)}function c(){var a=f[this.id.substr(12)];a&&a.failed(this)}function d(a){na.insertBefore(a,na.firstChild)}var e=0,f={};a.prototype={id:0,url:"",eventsHandler:null,clean:function(a){var b=a.parentNode;a.onerror=a.onload=
a.onreadystatechange=null;b&&b.removeChild(a);delete f[this.id]},check:function(a){var b=a.readyState;if(!b||-1<["loaded","complete"].indexOf(b))this.clean(a),setTimeout(y,0,"ready",{url:this.url},this.eventsHandler)},failed:function(a){this.clean(a);setTimeout(y,0,"error",{url:this.url},this.eventsHandler)}};return function(e,f){var n=new a(e,f),g=Q.createElement("script");g.language="javascript";g.src=e;g.id="gpf-include-"+n.id;g.onload=g.onreadystatechange=b;g.onerror=c;void 0!==g.async&&(g.async=
!0);setTimeout(d,0,g)}}());var R;R="browser"===v&&(I.HTMLCollection||I.NodeList)?function(a){return a instanceof Array||a instanceof I.HTMLCollection||a instanceof I.NodeList}:function(a){return a instanceof Array};f.isArrayLike=R;f.forEach=function(a,b,c){if(R(a)){var d,e=a.length;for(d=0;d<e;++d)b.apply(c,[a[d],d,a])}else u(a,b,c)};var eb={javascript:{"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"},xml:{"&":"&amp;","<":"&lt;",">":"&gt;"},html:{"&":"&amp;","<":"&lt;",">":"&gt;","\u00e9":"&eacute;",
"\u00e8":"&egrave;","\u00ea":"&ecirc;","\u00e1":"&aacute;","\u00e0":"&agrave;"}};f.extend=aa;var Hb={"boolean":function(a,b,c){g(c);if("string"===b)return"yes"===a||"true"===a?!0:0!==parseInt(a,10);if("number"===b)return 0!==a},number:function(a,b,c){g(c);if("string"===b)return parseFloat(a)},string:function(a,b,c){g(b,c);return a.toString()},object:function(a,b,c){g(a,b,c)}};f.value=function(a,b,c){var d=typeof a;c||(c=typeof b);if(c===d)return a;if("undefined"===d)return b;a=Hb[c](a,d,b);return void 0===
a?b:a};aa(f,{clone:function(a){return JSON.parse(JSON.stringify(a))},test:function(a,b){var c;if(a instanceof Array)for(c=a.length;0<c;){if(a[--c]===b)return c}else for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c},set:function(a,b){p(a instanceof Array,"gpf.set must be used with an Array");for(var c=a.length;0<c;)if(a[--c]===b)return a;a.push(b);return a},clear:function(a,b){var c;if(a instanceof Array)for(c=a.length;0<c;){if(a[--c]===b){a.splice(c,1);break}}else for(c in a)a.hasOwnProperty(c)&&
a[c]===b&&delete a[c];return a},xor:function(a,b){return a&&!b||!a&&b}});f.exit=function(a){void 0===a&&(a=0);E(a)};Ea.prototype={isNative:!1,name:"",parameters:[],body:"",replaceInBody:function(a){this.body=Z(this.body,a)},_extract:function(a){this.name=a.compatibleName();var b=Function.prototype.toString.call(a).replace(sa,""),c;0<a.length?(a=b.indexOf("(")+1,c=b.indexOf(")",a)-1,this.parameters=b.substr(a,c-a+1).split(",").map(hb)):this.parameters=[];-1<b.indexOf("[native")?this.isNative=!0:(a=
b.indexOf("{")+1,c=b.lastIndexOf("}")-1,this.body=b.substr(a,c-a+1))},generate:function(){return w("return "+this._toSource())()},_toSource:function(){return["function",this.name?" "+this.name:""," ("].concat(this.parameters).concat([") {\n",this.body,"\n}"]).join("")}};Fa.prototype={_pending:[],_done:[],_stack:function(a,b){var c=this._done,d,e;for(d=c.indexOf(a);-1<d;){e=d%2?c[d-1]:c[d+1];if(e===b)return;d=c.indexOf(a,d+1)}c=this._pending;c.push(a);c.push(b)},_haveDifferentPrototypes:function(a,
b){return a.constructor!==b.constructor},explore:function(){for(var a=this._pending,b=this._done,c,d;0!==a.length;)if(d=a.pop(),c=a.pop(),b.push(c,d),this._haveDifferentPrototypes(c,d)||this._checkMembersDifferences(c,d))return!1;return!0},_checkMembersDifferences:function(a,b){var c=0,d;for(d in a)if(a.hasOwnProperty(d)&&(++c,!this.like(a[d],b[d])))return!0;for(d in b)b.hasOwnProperty(d)&&--c;return 0!==c},_downcast:function(a){return"object"===typeof a?a instanceof String?a.toString():a.valueOf():
a},_alike:function(a,b){return this._downcast(a)===this._downcast(b)},like:function(a,b){if(a===b)return!0;if(typeof a!==typeof b)return this._alike(a,b);if(null===a||null===b||"object"!==typeof a)return!1;this._stack(a,b);return!0}};f.like=function(a,b,c){c=new Fa(c);return c.like(a,b)&&c.explore()};var ba=f.Error=function(){};ba.prototype={constructor:ba,code:0,name:"Error",message:""};var jb=0;z("boot",{notImplemented:"Not implemented",abstractMethod:"Abstract method",assertionFailed:"Assertion failed: {message}",
invalidParameter:"Invalid parameter"});f.mixins={EventDispatcher:{addEventListener:function(a,b){var c;c=this._eventDispatcherListeners;c||(c=this._eventDispatcherListeners={});void 0===c[a]&&(c[a]=[]);c[a].push(b);return this},removeEventListener:function(a,b){var c=this._eventDispatcherListeners,d;c&&(c=c[a],void 0!==c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1)));return this},dispatchEvent:function(a,b){var c,d,e;if(!this._eventDispatcherListeners)return this;a instanceof C?(c=a,d=a.type):d=a;e=this._eventDispatcherListeners[d];
if(void 0===e)return this;c||(c=new C(d,b,this));d=c;var f,g=e.length;for(f=0;f<g;++f)y.apply(d.scope,[d,{},e[f]]);return c}}};var mb={application:{javascript:"js"},image:{gif:0,jpeg:"jpg,jpeg",png:0},text:{css:0,html:"htm,html",plain:"txt,text,log"}},N=null,M=null;W("gpf.web.getMimeType",function(){Ia();return kb});W("gpf.web.getFileExtension",function(){Ia();return lb});var F=[],Ja=0,ca=h;f.handleTimeout=h;"undefined"===typeof setTimeout&&("wscript"===v?ca=function(a){WScript.Sleep(a)}:"rhino"===
v?ca=java.lang.Thread.sleep:console.warn("No implementation for setTimeout"),k.setTimeout=ob,k.clearTimeout=pb,f.handleTimeout=qb);var S=987654321,T=(new Date).getTime()&4294967295;f.bin={pow2:function(a){if(31===a)return 2147483648;if(32===a)return 4294967296;if(31>a)return 1<<a;var b=4294967296;for(a-=31;--a;)b*=2;return b},isPow2:function(a){if(0<a&&0===(a&a-1)){for(var b=0;1<a;)++b,a/=2;return b}return-1},toHexa:function(a,b,c){return Ka("0123456789ABCDEF",a,{length:b,pad:c})},fromHexa:function(a,
b){return La("0123456789ABCDEF",a,b)},toBase64:function(a,b,c){return Ka("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a,{length:b,pad:c})},fromBase64:function(a,b){return La("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a,b)},test:function(a,b){return(a&b)===b},clear:function(a,b){return a&~b},random:function(){S=36969*(S&65535)+(S>>16)&4294967295;T=18E3*(T&65535)+(T>>16)&4294967295;return((S<<16)+T&4294967295)+2147483647}};var pa,qa,rb={undefined:h,"function":h,
number:Ma,"boolean":Ma,string:function(a){return Da(a,"javascript")}};"undefined"===typeof JSON?(pa=Na,qa=sb,k.JSON={stringify:pa,parse:qa}):(pa=JSON.stringify,qa=JSON.parse);f.path={join:function(a){a=A(a);var b,c=arguments.length,d;for(b=1;b<c;++b){for(d=A(arguments[b]);".."===d[0];)if(d.shift(),a.length)a.pop();else return"";d.length&&(a=a.concat(d))}return a.join("/")},parent:function(a){a=A(a);a.pop();return a.join("/")},name:da,nameOnly:function(a){a=da(a);var b=a.lastIndexOf(".");return-1===
b?a:a.substr(0,b)},extension:function(a){a=da(a);var b=a.lastIndexOf(".");return-1===b?"":a.substr(b)},relative:function(a,b){a=A(a);b=A(b);for(var c;a.length&&b.length&&a[0]===b[0];)a.shift(),b.shift();for(c=a.length+1;--c;)b.unshift("..");return b.join("/")}};O.prototype={constructor:O,negative:!1,start:null,end:null,_matchName:function(a,b){var c=a.length,d,e,f=0;for(d=0;d<c;++d)if(e=a[d])if(f=b.indexOf(e,f),-1===f||0===d&&0<f)return!1;return!e||f+e.length===b.length},_matchStart:function(a){var b=
a.parts,c=b.length,d=a.startPos,e=this.start,f=e.length,g;for(g=0;g<f;++g)if(this._matchName(e[g],b[d])){if(++d>=c)return g===f-1&&!this.end}else return!1;a.startPos=d},_matchEnd:function(a){var b=a.parts;a=a.startPos;var c=b.length-1,d=this.end,e=d.length,f;for(f=0;f<e;++f)if(-1<c&&this._matchName(d[f],b[c])){if(c--<a)return!1}else return!1},match:function(a){var b={parts:a,startPos:0};return this.start&&(a=this._matchStart(b),void 0!==a)||this.end&&(a=this._matchEnd(b),void 0!==a)?a:!0}};aa(f.path,
{match:function(a,b){var c=A(b),d=Pa(a),c={parts:c};d.every(tb,c);return c.result||!1},compileMatchPattern:function(a){return Pa(a)}});f.js={keywords:function(){return[].concat(Gb)}};z("csv",{csvInvalid:"Invalid CSV syntax (bad quote sequence or missing end of file)"});Qa.prototype={_lines:[],_separator:"",_quote:"",_columns:[],_unquote:function(a){for(var b=this._quote,c=a.indexOf(b),d=!0;-1<c;){if(c===a.length-1){a=a.substr(0,c);d=!1;break}else if(a.charAt(c+1)===b)a=a.substr(0,c)+a.substr(c+1);
else throw f.Error.csvInvalid();c=a.indexOf(b,c+1)}return[a,d]},_processQuotedLineValue:function(a,b,c){var d=a[b],e=[a[b-1]];c.includeCarriageReturn?e.push("\r\n"):e.push(this._separator);d=this._unquote(d);e.push(d[0]);c.inQuotedString=d[1];a[b-1]=e.join("");c.includeCarriageReturn=!1;a.splice(b,1);return b},_processLineValue:function(a,b,c){var d=a[b];0===d.indexOf(this._quote)&&(c.inQuotedString=!0,d=this._unquote(d.substr(1)),a[b]=d[0],c.inQuotedString=d[1]);return b+1},_processLineValues:function(a,
b,c){var d;c.inQuotedString?(c.includeCarriageReturn=!0,a.unshift(b.pop()),d=1):(d=0,c.includeCarriageReturn=!1);for(;d<a.length;)d=c.inQuotedString?this._processQuotedLineValue(a,d,c):this._processLineValue(a,d,c);[].splice.apply(b,[b.length,0].concat(a));return!c.inQuotedString},_readValues:function(){for(var a=this._lines,b=this._separator,c=[],d={inQuotedString:!1,includeCarriageReturn:!1},e;a.length&&(e=a.shift().split(b),!this._processLineValues(e,c,d)););if(d.inQuotedString)throw f.Error.csvInvalid();
return c},read:function(){var a=this._readValues(),b={};this._columns.forEach(function(c,d){b[c]=a[d]});return b},readAll:function(){for(var a=[];this._lines.length;)a.push(this.read());return a}};f.csv={parse:function(a,b){return(new Qa(a,b)).readAll()}};z("define",{classMemberOverloadWithTypeChange:"You can't overload a member and change its type",classInvalidVisibility:"Invalid visibility keyword"});var ra=!0,Ta={},wb=0,ga="_gpf_"+f.bin.toHexa(f.bin.random(),8),$a=["public","protected","private",
"static"];G.prototype={constructor:G,_uid:0,_name:"",_Super:Object,_Subs:[],_definitionAttributes:null,_Constructor:h,_definitionConstructor:null,_resolvedConstructor:h,_definition:null,isConstructionAllowed:function(){return ra},addMember:function(a,b,c){if(void 0===c)c=0;else if(c=$a.indexOf(c),-1===c)throw f.Error.classInvalidVisibility();this._addMember(a,b,c)},_addMember:function(a,b,c){3===c?(p(void 0===this._Constructor[a],"Static members can't be overridden"),this._Constructor[a]=b):"constructor"===
a?this._addConstructor(b,c):this._addNonStaticMember(a,b,c)},_addConstructor:function(a,b){ha({"Constructor must be a function":"function"===typeof a,"Own constructor can't be overridden":null===this._definitionConstructor});Ra(a)&&(a=Sa(this._Super,a));g(b);this._definitionConstructor=a},_addNonStaticMember:function(a,b,c){var d=typeof b,e,n,l=this._Constructor.prototype;p(!l.hasOwnProperty(a),"Existing own member can't be overridden");e=this._Super.prototype[a];n=typeof e;if("undefined"!==n){if(null!==
e&&d!==n)throw f.Error.classMemberOverloadWithTypeChange();"function"===d&&Ra(b)&&(b=Sa(e,b))}g(c);l[a]=b},_filterAttribute:function(a,b){var c;if("["!==a.charAt(0)||"]"!==a.charAt(a.length-1))return!1;a=fa(a.substr(1,a.length-2));this._definitionAttributes?c=this._definitionAttributes[a]:this._definitionAttributes={};void 0===c&&(c=[]);this._definitionAttributes[a]=c.concat(b);return!0},_defaultVisibility:-1,_deduceVisibility:function(a){var b=this._defaultVisibility;-1===b&&(b="_"===a.charAt(0)?
1:0);return b},_processDefinitionMember:function(a,b){if(!this._filterAttribute(b,a)){var c=$a.indexOf(b);if(-1===c)return this._addMember(b,a,this._deduceVisibility(b));if(-1!==this._defaultVisibility)throw f.Error.classInvalidVisibility();this._processDefinition(a,c)}},_processDefinition:function(a,b){this._defaultVisibility=b;u(a,this._processDefinitionMember,this);this._defaultVisibility=-1;"wscript"===v&&a.constructor!==Object&&this._addConstructor(a.constructor,this._defaultVisibility)},_processAttributes:function(){var a=
this._definitionAttributes,b,c;a&&(p("function"===typeof B,"Attributes can't be defined before they exist"),b=this._Constructor,c=b.prototype,u(a,function(a,e){e=P(e);e in c||"Class"===e?B(b,e,a):console.error("gpf.define: Invalid attribute name '"+e+"'")}))},_getNewClassConstructor:function(a){var b=new Ea(vb);b.replaceInBody({"function":"function "+a});return b.generate()(this)},_safeNewSuper:function(){var a;ra=!1;a=new this._Super;ra=!0;return a},_build:function(){var a,b;a=this._name.split(".").pop();
this._Constructor=a=this._getNewClassConstructor(a);a[ga]=this._uid;b=this._safeNewSuper();a.prototype=b;b.constructor=a;q(this._Super)._Subs.push(a);this._processDefinition(this._definition,-1);this._processAttributes();this._resolveConstructor()},_resolveConstructor:function(){this._definitionConstructor?this._resolvedConstructor=this._definitionConstructor:Object!==this._Super&&(this._resolvedConstructor=this._Super)}};var yb={"-":"private","#":"protected","+":"public","~":"static"};f.define=function(a,
b,c){"object"===typeof b&&(c=b,b=void 0);void 0===b&&(b=Object);return Ua(a,b,c||{})};G.prototype._attributes=null;var m=f.attributes={},ab,Ab=Va("gpf.attributes","Attribute"),bb=H("gpf.attributes.Attribute",Object,{"#":{_member:"",_alterPrototype:function(a){g(a)}},"+":{getMemberName:function(){return this._member}}});H("gpf.attributes.Array",Object,{"-":{_array:[]},"+":{constructor:function(){this._array=[]},getItemsCount:w("return this._array.length;"),getItem:Wa("_array"),has:function(a){return!this._array.every(function(b){return!(b instanceof
a)})},filter:function(a){var b=new m.Array;b._array=this._array.filter(function(b){return b instanceof a});return b},forEach:function(a,b){this._array.forEach(a,b)},every:function(a,b){return this._array.every(a,b)}}});ab=new m.Array;H("gpf.attributes.Map",Object,{"-":{_members:{},_count:0,_copy:function(a,b,c){u(this._members,function(d,e){e=P(e);d._array.forEach(function(d){b&&!b(e,d,c)||a.add(e,d)})});return a},_filterCallback:function(a,b,c){g(a);return b instanceof c}},"+":{constructor:function(a){this._members=
{};a instanceof Function?this.fillFromClassDef(q(a)):void 0!==a&&this.fillFromObject(a)},fillFromClassDef:function(a){for(var b;a&&((b=a._attributes)&&b._copy(this),a=a._Super,a!==Object);)a=q(a);return this},fillFromObject:function(a){a=q(a.constructor);return this.fillFromClassDef(a)},getCount:function(){return this._count},add:function(a,b){a=fa(a);var c=this._members[a];void 0===c&&(c=this._members[a]=new m.Array);c._array.push(b);++this._count},filter:function(a){return this._copy(new m.Map,
this._filterCallback,a)},getMemberAttributes:function(a){a=fa(a);a=this._members[a];return void 0!==a&&a instanceof m.Array?a:ab},getMembers:function(){var a=[];u(this._members,function(b,c){g(b);a.push(P(c))});return a},forEach:function(a,b){u(this._members,function(c,d,e){a.apply(b,[c,P(d),e])})}}});var B=m.add=function(a,b,c){c instanceof m.Array?c=c._array:c instanceof Array||(c=[c]);var d=q(a),e=d._attributes,f,g;e||(e=d._attributes=new m.Map);d=c.length;for(f=0;f<d;++f)g=c[f],p(g instanceof
bb,"Expected attribute"),g._member=b,e.add(b,g),g._alterPrototype(a.prototype)};z("a_attributes",{onlyForAttributeClass:"The attribute {attributeName} can be used only on an Attribute class",onlyOnClassForAttributeClass:"The attribute {attributeName} must be used on Class",classOnlyAttribute:"The attribute {attributeName} can be used only for Class",memberOnlyAttribute:"The attribute {attributeName} can be used only for members",uniqueAttributeConstraint:"Attribute {attributeName} already defined on {className}",
uniqueMemberAttributeConstraint:"Attribute {attributeName} already defined on {className}::{memberName}"});var Ib=r("AttrClassOnlyAttribute",{"#":{_alterPrototype:function(a){if(!(a instanceof bb))throw f.Error.onlyForAttributeClass({attributeName:q(this.constructor)._name});if("Class"!==this._member)throw f.Error.onlyOnClassForAttributeClass({attributeName:q(this.constructor)._name});}}}),U=r("AttrConstraintAttribute",Ib,{"~":{originalAlterPrototype:"_alterPrototype:checked"},"-":{_checkAndAlterPrototype:function(a){var b=
this,c=m.AttrConstraintAttribute.originalAlterPrototype;(new m.Map(b)).filter(U).forEach(function(c){c.forEach(function(c){c._check(b,a)})});b[c](a)}},"#":{_check:function(a,b){g(a,b);throw f.Error.abstractMethod();},_alterPrototype:function(a){var b=m.AttrConstraintAttribute.originalAlterPrototype;this._super(a);void 0===a[b]&&(a[b]=a._alterPrototype,a._alterPrototype=this._checkAndAlterPrototype)}}});r("$ClassAttribute",U,{"#":{_check:function(a,b){g(b);if("Class"!==a._member){var c=q(a.constructor);
throw f.Error.classOnlyAttribute({attributeName:c._name});}}}});r("$MemberAttribute",U,{"#":{_check:function(a,b){g(b);if("Class"===a._member){var c=q(a.constructor);throw f.Error.memberOnlyAttribute({attributeName:c._name});}}}});r("$UniqueAttribute",U,{"-":{_classScope:!0},"#":{_check:function(a,b){var c,d,e,g,l=a._member;c=b.constructor;d=q(c);e=new m.Map(c);g=a.constructor;c=q(g);e=e.filter(g);if(this._classScope){if(1<e.getCount())throw f.Error.uniqueAttributeConstraint({attributeName:c._name,
className:d._name});}else if(1<e.getMemberAttributes(l).getItemsCount())throw f.Error.uniqueMemberAttributeConstraint({attributeName:c._name,className:d._name,memberName:l});}},"+":{constructor:function(a){void 0!==a&&(this._classScope=!0===a)}}});var V=r("ClassAttribute");r("$ClassProperty",V,{"[Class]":[f.$MemberAttribute(),f.$UniqueAttribute(!1)],"-":{_writeAllowed:!1,_publicName:void 0,_visibility:void 0},"#":{_alterPrototype:function(a){var b=this._member,c=this._publicName,d=this._visibility;
a=q(a.constructor);c||(c="_"===b.charAt(0)?b.substr(1):b);c=c.charAt(0).toUpperCase()+c.substr(1);this._writeAllowed&&a.addMember("set"+c,Xa(Cb,b),d);a.addMember("get"+c,Xa(Bb,b),d)}},"+":{constructor:function(a,b,c){a&&(this._writeAllowed=!0);"string"===typeof b&&(this._publicName=b);"string"===typeof c&&(this._visibility=c)}}});r("$ClassEventHandler",V,{"[Class]":[f.$MemberAttribute(),f.$UniqueAttribute(!1)]});r("$ClassNonSerialized",V,{"[Class]":[f.$MemberAttribute(),f.$UniqueAttribute(!1)]});
r("$ClassExtension",V,{"-":{_ofClass:h,_publicName:""},"+":{constructor:function(a,b){this._ofClass=a;"string"===typeof b&&(this._publicName=b)}}});z("interfaces",{interfaceExpected:"Expected interface not implemented: {name}"});var D=f.interfaces={isImplementedBy:function(a,b){a instanceof Function&&(a=a.prototype);return ia(a,b)},query:function(a,b,c){var d=null;if(ia(a,b))return a;ia(a,f.interfaces.IUnknown)&&(d=a.queryInterface(b));if(null===d&&(void 0===c||c))throw f.Error.interfaceExpected({name:q(b)._name});
return d}},x=Va("gpf.interfaces","Interface");H("gpf.interfaces.Interface",Object,{});x("IEventDispatcher",{addEventListener:function(a,b){g(a,b);return this},removeEventListener:function(a,b){g(a,b);return this},dispatchEvent:function(a,b){g(a,b)}});var Jb=x("IUnknown",{queryInterface:function(a){g(a);return null}});r("$InterfaceImplement",{"-":{"[_interfaceDefinition]":[f.$ClassProperty(!1)],_interfaceDefinition:h,"[_builder]":[f.$ClassProperty(!1)],_builder:null,_addMissingInterfaceMembers:function(a){var b=
this._interfaceDefinition.prototype,c;for(c in b)c in a||(a[c]=b[c])},_addQueryInterface:function(a){void 0===a.queryInterface?(a.queryInterface=ja,B(a.constructor,"Class",[f.$InterfaceImplement(Jb)])):ja!==a.queryInterface&&(a.queryInterface=Db(a.queryInterface))}},"#":{_alterPrototype:function(a){this._builder?this._addQueryInterface(a):(this._addMissingInterfaceMembers(a),(new f.attributes.Map).fillFromClassDef(q(this._interfaceDefinition)).forEach(function(b,c){B(a.constructor,c,b)}))}},"+":{constructor:function(a,
b){this._interfaceDefinition=a;b&&(this._builder=b)}}});z("i_enumerator",{enumerableInvalidMember:"$Enumerator can be associated to arrays only"});x("IEnumerator",{reset:function(){},"[moveNext]":[f.$ClassEventHandler()],moveNext:function(a){g(a);return!1},current:function(){return null},"~":{each:function(a,b,c){function d(b){y.apply(a,[b,{},c])}var e=D.query(a,D.IEnumerator),g;if(1<b.length)g=function(a){if(f.events.EVENT_CONTINUE===a.type){if(!e.moveNext(g))return}else{if(f.events.EVENT_STOP===
a.type)return d(f.events.EVENT_STOPPED);if(f.events.EVENT_DATA!==a.type)return d(a.type)}b(e.current(),g)},e.moveNext(g)&&b(e.current(),g);else for(g=function(a){if(f.events.EVENT_DATA!==a.type)return d(a);do b(e.current());while(e.moveNext(g))};e.moveNext(g);)b(e.current())},fromArray:Ya}});r("$Enumerable",m.ClassAttribute,{Class:[f.$UniqueAttribute(),f.$MemberAttribute()],_alterPrototype:function(a){if(!R(a[this._member]))throw f.Error.enumerableInvalidMember();B(a.constructor,"Class",[new m.InterfaceImplementAttribute(D.IEnumerator,
Eb)])}});var Kb=x("IReadOnlyArray",{getItemsCount:function(){return 0},getItem:function(a){g(a)}});x("IArray",Kb,{setItemsCount:function(a){g(a);return 0},setItem:function(a,b){g(a,b)}});r("$ClassIArray",m.ClassAttribute,{"[Class]":[f.$UniqueAttribute(),f.$MemberAttribute()],"-":{_writeAllowed:!1},"#":{_alterPrototype:function(a){var b=this._member;B(a.constructor,"Class",[f.$InterfaceImplement(this._writeAllowed?D.IArray:D.IReadOnlyArray)]);a.getItemsCount=w("return this."+b+".length;");a.getItem=
Wa(b);this._writeAllowed&&(a.setItemsCount=w(["count"],["var oldValue = this.",b,".length;this.",b,".length = count;return oldValue;"].join("")),a.setItem=w(["idx","value"],["var oldValue = this.",b,"[idx];this.",b,"[idx] = value;return oldValue;"].join("")))}},"+":{constructor:function(a){a&&(this._writeAllowed=!0)}}});B(m.Array,"_array",[f.$ClassIArray(!1)]);x("IReadableStream",{"[read]":[f.$ClassEventHandler()],read:function(a,b){g(a,b)}});x("IWritableStream",{"[write]":[f.$ClassEventHandler()],
write:function(a,b){g(a,b)}});x("IStream",{"[read]":[f.$ClassEventHandler()],read:function(a,b){g(a,b)},"[write]":[f.$ClassEventHandler()],write:function(a,b){g(a,b)}});x("IFileStorage",{"[getInfo]":[f.$ClassEventHandler()],getInfo:function(a,b){g(a,b)},"[readAsBinaryStream]":[f.$ClassEventHandler()],readAsBinaryStream:function(a,b){g(a,b)},"[writeAsBinaryStream]":[f.$ClassEventHandler()],writeAsBinaryStream:function(a,b){g(a,b)},close:function(a,b){g(a,b)},"[explore]":[f.$ClassEventHandler()],explore:function(a,
b){g(a,b)},"[createFolder]":[f.$ClassEventHandler()],createFolder:function(a,b){g(a,b)},"[deleteFile]":[f.$ClassEventHandler()],deleteFile:function(a,b){g(a,b)},"[deleteFolder]":[f.$ClassEventHandler()],deleteFolder:function(a,b){g(a,b)}});z("fs",{fileNotFound:"File not found"});f.fs={host:function(){return null},find:h};W("gpf.fs.find",function(){return Fb(f.fs.host())});Y(f.fs,{TYPE_NOT_FOUND:0,TYPE_FILE:1,TYPE_DIRECTORY:2,TYPE_UNKNOWN:99})});
