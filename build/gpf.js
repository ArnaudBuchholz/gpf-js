(function(e,m){"function"===typeof define&&define.amd?define(["exports"],m):"undefined"!==typeof exports?m(exports):"undefined"!==typeof module&&module.exports?m(module.exports):m(e.gpf={})})(this,function(e){var m,B=!1,q,y,s=function(a){return null===a||"object"!==typeof a?q:a},g=!1,n=!1,C,J,D=function(){};"undefined"!==typeof WScript?(m="wscript",B=!0,q=function(){return this}.apply(null,[]),y=function(a){WScript.Quit(a)},q.console={log:function(a){WScript.Echo("    "+a)},info:function(a){WScript.Echo("[?] "+
a)},warn:function(a){WScript.Echo("/!\\ "+a)},error:function(a){WScript.Echo("(X) "+a)}}):"undefined"!==typeof phantom&&phantom.version?(m="phantomjs",B="\\"===require("fs").separator,q=window,n=g=!0,y=phantom.exit):"undefined"!==typeof module&&module.exports?(m="nodejs",B="\\"===require("path").sep,q=global,g=!0,y=process.exit):("undefined"!==typeof window?(m="browser",q=window,n=!0):(m="unknown",q=this),y=D);g&&(e.node={});e.web={};n&&(C=document,J=C.getElementsByTagName("head")[0]||C.documentElement);
e.version=function(){return"0.1"};e.host=function(){return m};e.context=function(a){var b,c,d;if(void 0===a)return q;"string"===typeof a&&(a=a.split("."));b=a.length;c=0;"gpf"===a[0]?(d=e,++c):d=q;for(;c<b&&(d=d[a[c]],void 0!==d);++c);return d};e.loaded=function(a){a&&a();return!0};e.ASSERT=function(){};var E=Array.prototype.slice;void 0===Array.prototype.every&&(Array.prototype.every=function(a,b){var c=this.length,d;for(d=0;d<c;++d)if(!a.apply(b,[this[d],d,this]))return!1;return!0});void 0===Array.prototype.forEach&&
(Array.prototype.forEach=function(a,b){var c=this.length,d;for(d=0;d<c;++d)a.apply(b,[this[d],d,this])});void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){var c,d=this.length;for(c=void 0!==b?b:0;c<d;){if(this[c]===a)return c;++c}return-1});void 0===Array.prototype.map&&(Array.prototype.map=function(a,b){var c=this.length,d=Array(c),f;for(f=0;f<c;++f)d[f]=a.apply(b,[this[f],f,this]);return d});void 0===Function.prototype.bind&&(Function.prototype.bind=function(a){var b=this,
c=E.apply(arguments,[1]);return function(){var d=E.apply(arguments,[0]);b.apply(a,c.concat(d))}});(function(){return"functionName"!==function(){}.name?!0:!1})()?function(){var a=RegExp("//.*$|/\\*.*\\*/","g");Function.prototype.compatibleName=function(){var b=""+this,c=b.indexOf("function"),d=b.indexOf("(",c);return b.substr(c+9,d-c-9).replace(a,"").trim()}}():Function.prototype.compatibleName=function(){return this.name};e.setReadOnlyProperty=void 0===Object.defineProperty?function(a,b,c){a[b]=c;
return a}:function(a,b,c){Object.defineProperty(a,b,{enumerable:!0,configurable:!1,writable:!1,value:c});return a};void 0===String.prototype.trim&&function(){var a=RegExp("^[\\s\ufeff\u00a0]+|[\\s\ufeff\u00a0]+$","g");String.prototype.trim=function(){return this.replace(a,"")}}();var S=Function,T=function(){return!1},v=function(a,b){var c;void 0===b&&(b=a,a=[]);e.ASSERT("string"===typeof b&&b.length,"Source expected (or use _gpfEmptyFunc)");if(0===a.length)return S(b);c=[].concat(a);c.push(b);return S.apply(null,
c)},ja="break case catch continue debugger default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with".split(" ");e.events={};var K=e.events.Event=function(a,b,c){e.setReadOnlyProperty(this,"type",a);e.setReadOnlyProperty(this,"scope",s(c));void 0!==b&&(this._params=b)},U=0,V=function(a,b){var c=a.scope;e.ASSERT(b,"Expected eventsHandler");"function"===typeof b._dispatchEvent?b._dispatchEvent(a):"function"===typeof b.apply?b.apply(c,[a]):
(c=b[a.type],void 0===c&&(c=b["*"]),void 0!==c&&c.apply(b.scope||b,[a]))},ka=function(a,b,c){var d=s(this);a instanceof K||(a=new e.events.Event(a,b,d));10<++U?e.defer(V,0,null,[a,c]):V(a,c);--U;return a},la=function(a,b,c){var d=b.length,f=a.length-1;if(f!==d)for(a=E.apply(a,[0]),a[d]=a[f],--f,--d;d>f;)a[d]=b[d],--d;return c.apply(this,a)};K.prototype={constructor:K,type:"",scope:null,_params:{},get:function(a){return this._params[a]},fire:function(a){return e.events.fire(this,a)}};e.events.fire=
function(){var a=this;a===e.events&&(a=void 0);return la.apply(a,[arguments,[0,{}],ka])};var p=function(a,b){this.id=++p.id;this.src=a;this.eventsHandler=b;p.map[this.id]=this},ma=function(a){J.insertBefore(a,J.firstChild)},W=function(a){e.events.fire.apply(q,a)},na=function(a,b){var c=new p(a,b),d=C.createElement("script");d.language="javascript";d.src=a;d.id=c.id;d.onload=d.onreadystatechange=p.onLoad;d.onerror=p.onError;void 0!==d.async&&(d.async=!0);setTimeout(ma,0,d)};p.prototype={id:0,src:"",
eventsHandler:null,clean:function(a){var b=a.parentNode;a.onerror=a.onload=a.onreadystatechange=null;b&&b.removeChild(a);delete p.map[this.id]},check:function(a){var b=a.readyState;if(!b||-1<["loaded","complete"].indexOf(b))this.clean(a),setTimeout(W,0,["load",{url:this.src},this.eventsHandler])},failed:function(a){this.clean(a);setTimeout(W,0,["error",{url:this.src},this.eventsHandler])}};p.id=0;p.map={};p.onLoad=function(){var a=p.map[this.id];a&&a.check(this)};p.onError=function(){var a=p.map[this.id];
a&&a.failed(this)};n&&(e.web.include=na);var X=function(a,b,c){var d,f=a.length,e;for(e=0;e<f;++e)if(d=b.apply(this,[e,a[e],f]),void 0!==d)return d;return c},oa=function(a,b){var c=a.length,d;for(d=0;d<c;++d)b.apply(this,[d,a[d],c])},Y=function(a,b,c){var d,f;for(f in a)if(a.hasOwnProperty(f)&&(d=b.apply(this,[f,a[f]]),void 0!==d))return d;return c},Z=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b.apply(this,[c,a[c]])},pa=function(a,b){this[0][a]=b},qa=function(a,b){var c=this[0],d=this[2];void 0!==
c[a]?d(c,a,b):c[a]=b},ra={"boolean":function(a,b,c){return"string"===b?"yes"===a||"true"===a?!0:0!==parseInt(a,10):"number"===b?0!==a:c},number:function(a,b,c){return"string"===b?parseFloat(a):c},string:function(a,b,c){e.interfaces.ignoreParameter(b);e.interfaces.ignoreParameter(c);return a instanceof Date?e.dateToComparableFormat(a):a.toString()},object:function(a,b,c){return c instanceof Date&&"string"===b?e.dateFromComparableFormat(a):c}},$=function(a,b){var c=a,d;for(d in b)b.hasOwnProperty(d)&&
-1<c.indexOf(d)&&(c=c.split(d).join(b[d]));return c},sa={javascript:{"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"},xml:{"&":"&amp;","<":"&lt;",">":"&gt;"},html:{"&":"&amp;","<":"&lt;",">":"&gt;","\u00e9":"&eacute;","\u00e8":"&egrave;","\u00ea":"&ecirc;","\u00e1":"&aacute;","\u00e0":"&agrave;"}},aa=function(a,b){var c=sa[b];void 0!==c&&(a=$(a,c),"javascript"===b&&(a='"'+a+'"'));return a},L;L="browser"===m&&(window.HTMLCollection||window.NodeList)?function(a){return a instanceof Array||a instanceof
window.HTMLCollection||a instanceof window.NodeList}:function(a){return a instanceof Array};e.isArrayLike=L;e.each=function(a,b,c){if(3>arguments.length)e.isArrayLike(a)?oa.apply(this,arguments):Z.apply(this,arguments);else return e.isArrayLike(a)?X.apply(this,arguments):Y.apply(this,arguments)};e.extend=function(a,b,c){var d;void 0===c?d=pa:(e.ASSERT("function"===typeof c,"Expected function"),d=qa);Z.apply(arguments,[b,d]);return a};e.extend(e,{value:function(a,b,c){var d=typeof a;c||(c=typeof b);
return c===d?a:"undefined"!==d&&a?ra[c](a,d,b):b},clone:function(a){return e.json.parse(e.json.stringify(a))},test:function(a,b){var c;if(a instanceof Array)for(c=a.length;0<c;){if(a[--c]===b)return c}else for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c},set:function(a,b){e.ASSERT(a instanceof Array,"gpf.set must be used with an Array");for(var c=a.length;0<c;)if(a[--c]===b)return a;a.push(b);return a},clear:function(a,b){var c;if(a instanceof Array)for(c=a.length;0<c;){if(a[--c]===b){a.splice(c,
1);break}}else for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)break;return a},xor:function(a,b){return a&&!b||!a&&b},exit:function(a){void 0===a&&(a=0);y(a)}});g&&(e.node.buffer2JsArray=function(a){var b=[],c=a.length,d;for(d=0;d<c;++d)b.push(a.readUInt8(d));return b});var ba=function(a){this._pending=[];this._done=[];!0!==a?this._alike=T:this._haveDifferentPrototypes=T};ba.prototype={_pending:[],_done:[],_stack:function(a,b){var c=this._done,d,f;for(d=c.indexOf(a);-1<d;){f=d%2?c[d-1]:c[d+1];if(f===
b)return;d=c.indexOf(a,d+1)}c=this._pending;c.push(a);c.push(b)},_haveDifferentPrototypes:function(a,b){return a.prototype!==b.prototype},explore:function(){for(var a=this._pending,b,c,d=this._done,f,e;0!==a.length;){c=a.pop();b=a.pop();if(this._haveDifferentPrototypes(b,c))return!1;d.push(b,c);f=0;for(e in b)if(b.hasOwnProperty(e)&&(++f,!this.like(b,c)))return!1;for(e in c)c.hasOwnProperty(e)&&--f;if(0!==f)return!1}return!0},_downcast:function(a){if("object"===typeof a){if(a instanceof String)return a.toString();
if(a instanceof Number)return a.valueOf();if(a instanceof Boolean)return!!a}return a},_alike:function(a,b){return this._downcast(a)===this._downcast(b)},like:function(a,b){if(a===b)return!0;if(typeof a!==typeof b)return this._alike(a,b);if(null===a||null===b||"object"!==typeof a)return!1;this._stack(a,b);return!0}};e.like=function(a,b,c){c=new ba(c);return c.like(a,b)&&c.explore()};e.Callback=function(a,b){e.ASSERT(a,"Handler expected");this._handler=a;b&&(this._scope=s(b))};e.extend(e.Callback.prototype,
{_handler:D,_scope:null,handler:function(){return this._handler},scope:function(){return this._scope},call:function(){return this.apply(arguments[0],E.apply(arguments,[1]))},apply:function(a,b){var c=s(a||this._scope);return this._handler.apply(c,b||[])}});e.extend(e.Callback,{resolveScope:s,buildParamArray:function(a,b){var c,d,f;if(b)for(c=b.length,d=Array(a+c),f=0;f<c;++f)d[a]=b[f],++a;else d=Array(a);return d},doApply:function(a,b,c){for(var d=arguments.length,f=3,e=0;f<d;)c[e]=arguments[f],++f,
++e;return a.apply(b,c)},bind:function(a,b,c){e.ASSERT("string"===typeof b,"Expected method name");e.ASSERT("function"===typeof a[b],"Only methods can be bound");var d=b+":boundToThis",f;f=a[d];void 0===f&&(f=!0===c?function(){return a[b].apply(a,arguments)}:a[b].bind(a),a[d]=f);return f}});e.events.EventDispatcherImpl={_eventDispatcherListeners:null,addEventListener:function(a,b,c){var d=this._eventDispatcherListeners;d||(d=this._eventDispatcherListeners={});c||(c=!1);void 0===d[a]&&(d[a]=[]);c?
d[a].unshift(b):d[a].push(b);return this},removeEventListener:function(a,b){var c=this._eventDispatcherListeners,d;c&&(c=c[a],void 0!==c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1)));return this},_dispatchEvent:function(a,b){var c,d,f,k;if(!this._eventDispatcherListeners)return this;a instanceof e.events.Event?(c=a,d=a.type):d=a;f=this._eventDispatcherListeners[d];if(void 0===f)return this;c||(c=new e.events.Event(d,b,this));d=f.length;for(k=0;k<d;++k)e.events.fire.apply(this,[c,f[k]]);return this}};var ta=
{application:{javascript:"js"},image:{gif:0,jpeg:"jpg,jpeg",png:0},text:{css:0,html:"htm,html",plain:"txt,text,log"}},w=null,z=null,ca=function(a,b){var c,d,f,e,h,l;for(c in b)if(b.hasOwnProperty(c))if(d=a?a+"/"+c:c,e=b[c],0===e)f="."+c,z[f]=d,void 0===w[d]&&(w[d]=f);else if("string"===typeof e)for(e=e.split(","),h=e.length,l=0;l<h;++l)f="."+e[l],z[f]=d,void 0===w[d]&&(w[d]=f);else ca(d,e)},da=function(){null===z&&(z={},w={},ca("",ta))};e.web.getMimeType=function(a){da();a=z[a.toLowerCase()];void 0===
a&&(a="application/octet-stream");return a};e.web.getFileExtension=function(a){da();a=w[a.toLowerCase()];void 0===a&&(a=".bin");return a};"use strict";var A=function(a,b,c){"string"===typeof a&&(a=v(a));L(c)||(c=[]);return function(){a.apply(s(b),c)}},F=[],ua=function(a,b){return a._dt-b._dt};e.runAsyncQueue=D;"browser"===m?(A=function(a){a[0].apply(s(a[1]),a[2])},g=function(a,b,c,d){"string"===typeof a&&(a=v(a));b||(b=0);setTimeout(A,b,[a,c,d])}):"undefined"!==typeof setTimeout?g=function(a,b,c,
d){b||(b=0);setTimeout(A(a,c,d),b)}:"wscript"===m?(g=function(a,b,c,d){a=A(a,c,d);b||(b=0);a._dt=new Date(new Date- -b);F.push(a);F.sort(ua)},e.runAsyncQueue=function(){for(var a;F.length;)a=F.shift(),a._dt>new Date&&WScript.Sleep(a._dt-new Date),a()}):(console.warn("No implementation for gpf.defer"),g=function(a,b,c,d){A(a,c,d)()});e.defer=g;var M=function(a,b,c,d){var f=a.length,k=e.bin.isPow2(f),h,l=[],g;if(-1<k&&(void 0===c||32>=c*k))for(h=(1<<(void 0===c?32:c*k)-k)-1,f=(1<<k)-1;0!==b;)g=b&f,
l.unshift(a.charAt(g)),b=b>>k&h;else for(;0!==b;)g=b%f,l.unshift(a.charAt(g)),b=(b-g)/f;if(void 0!==c)for(void 0===d&&(d=a.charAt(0));l.length<c;)l.unshift(d.charAt(l.length%d.length));else 0===l.length&&(l=[a.charAt(0)]);return l.join("")},N=function(a,b,c){var d=a.length,f=0,e=0;for(void 0===c&&(c=a.charAt(0));e<b.length&&-1!==c.indexOf(b.charAt(e));)++e;for(;e<b.length;)f=d*f+a.indexOf(b.charAt(e++));return f};e.bin={pow2:function(a){return 1<<a},isPow2:function(a){if(0<a&&0===(a&a-1)){for(var b=
0;1<a;)++b,a>>=1;return b}return-1},toBaseANY:M,fromBaseANY:N,toHexa:function(a,b,c){return M("0123456789ABCDEF",a,b,c)},fromHexa:function(a,b){return N("0123456789ABCDEF",a,b)},toBase64:function(a,b,c){return M("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a,b,c)},fromBase64:function(a,b){return N("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a,b)},test:function(a,b){return(a&b)===b},clear:function(a,b){return a&~b}};var G;"undefined"===typeof JSON?(G=function(a){var b=
typeof a;if("undefined"!==b&&"function"!==b){if("number"===b||"boolean"===b)return a.toString();if("string"===b)return aa(a,"javascript");if(null===a)return"null";var c,d,f,b=a instanceof Array;c=[];for(d in a)"function"!==typeof a[d]&&(f=G(a[d]),b?c.push(f):c.push(aa(d,"javascript")+":"+f));a=b?"["+c.join(",")+"]":"{"+c.join(",")+"}";return a}},g=function(a){return v("return "+a)()}):(G=JSON.stringify,g=JSON.parse);e.json={stringify:G,parse:g};var O=function(a){return a.split("*")},H=function(a){"!"===
a.charAt(0)&&(this.negative=!0,a=a.substr(1));var b=a.indexOf("**");-1===b?this.start=a.split("/").map(O):(0<b&&(e.ASSERT("/"===a.charAt(b-1),"** must be preceded by /"),this.start=a.substr(0,b-1).split("/").map(O)),b<a.length-2&&(e.ASSERT("/"===a.charAt(b+2),"** must be followed by /"),this.end=a.substr(b+3).split("/").map(O).reverse()))},ea=function(a){return a instanceof H?a:new H(a)},fa=function(a){return a instanceof Array?a.map(ea):[ea(a)]},va=function(a){var b=a.negative;return a.match(this.parts)?
(this.result=!b,!1):b?(this.result=!0,!1):!0};H.prototype={constructor:H,negative:!1,start:null,end:null,_matchName:function(a,b){var c=a.length,d,f,e=0;for(d=0;d<c;++d)if(f=a[d])if(e=b.indexOf(f,e),-1===e||0===d&&0<e)return!1;return!f||e+f.length===b.length},match:function(a){var b=a.length,c=0,d=b-1,f,e,h;if(this.start)for(f=this.start,e=f.length,h=0;h<e;++h)if(this._matchName(f[h],a[c])){if(++c>=b)return h===e-1&&!this.end}else return!1;if(this.end)for(f=this.end,e=f.length,h=0;h<e;++h)if(-1<d&&
this._matchName(f[h],a[d])){if(d--<c)return!1}else return!1;return!0}};e.path={match:function(a,b){var c=b;B&&(c=c.toLowerCase().split("\\").join("/"));var d=c.split("/"),c=fa(a),d={parts:d};c.every(va,d);return d.result||!1},compileMatchPattern:function(a){return fa(a)}};var g=e.Error=function(){},wa=function(a,b,c){var d=function(d){var k=new e.Error,h,l;e.setReadOnlyProperty(k,"code",a);e.setReadOnlyProperty(k,"name",b);if(d){h={};for(l in d)d.hasOwnProperty(l)&&(h["{"+l+"}"]=d[l].toString());
d=$(c,h)}else d=c;e.setReadOnlyProperty(k,"message",d);return k};e.setReadOnlyProperty(d,"CODE",a);e.setReadOnlyProperty(d,"NAME",b);e.setReadOnlyProperty(d,"MESSAGE",c);return d},xa=0,n=function(a,b){var c,d;for(c in b)b.hasOwnProperty(c)&&(d=++xa,e.Error["CODE_"+c.toUpperCase()]=d,e.Error[c]=wa(d,c,b[c]))};g.prototype={constructor:g,code:0,name:"Error",message:""};n("boot",{NotImplemented:"Not implemented",Abstract:"Abstract",AssertionFailed:"Assertion failed: {message}"});e.js={keywords:function(){return[].concat(ja)}};
n("csv",{CsvInvalid:"Invalid CSV syntax (bad quote sequence or missing end of file)"});var ga=function(a,b){for(var c=a.indexOf(b),d=!0;-1<c;){if(c===a.length-1){a=a.substr(0,c);d=!1;break}else if(a.charAt(c+1)===b)a=a.substr(0,c)+a.substr(c+1);else throw e.Error.CsvInvalid();c=a.indexOf(b,c+1)}return[a,d]},ya=function(a){var b=a.length-1;return"\r"===a.charAt(b)?a.substr(0,b):a};e.csv={parse:function(a,b){b=b||{};var c=a.split("\n").map(ya),d=b.header||c.shift(),f;if(!(f=b.separator))a:{f=d;var k,
h;for(k=0;4>k;++k)if(h=";,\t ".charAt(k),-1!==f.indexOf(h)){f=h;break a}f=";"}k=f;var l,g,m;h=[];d=d.split(k);for(f=d.length;c.length;){a:{l=c;g=k;m=b.quote||'"';for(var p=[],n=void 0,q=!1,r=void 0,u=void 0,t=void 0,s=void 0,t=void 0;l.length;){n=l.shift();n=n.split(g);q?(r=!0,n.unshift(p.pop()),u=1):(u=0,r=!1);for(;u<n.length;)t=n[u],q?(s=[n[u-1]],r?s.push("\r\n"):s.push(g),t=ga(t,m),s.push(t[0]),q=t[1],n[u-1]=s.join(""),r=!1,n.splice(u,1)):(0===t.indexOf(m)&&(t=ga(t.substr(1),m),n[u]=t[0],q=t[1]),
++u);p=p.concat(n);if(q){if(0===l.length)throw e.Error.CsvInvalid();}else{l=p;break a}}l=void 0}g={};for(m=0;m<f;++m)g[d[m]]=l[m];h.push(g)}return h}};var P=["public","protected","private","static"],Q=!0,za=0,Aa=function(){var a=arguments,b=function(){a[0].apply(this,[b,arguments])};return b},Ba=function(a,b){return function(){var c=this._super,d;this._super=a;try{d=b.apply(this,arguments)}finally{void 0===c?delete this._super:this._super=c}return d}},ha={},I=function(a,b,c){this._uid=++za;ha[this._uid]=
this;this._Subs=[];"function"===typeof a?(this._name="anonymous",this._Constructor=a):(this._name=a,this._Super=b,this._definition=c,this._build())},x=function(a){var b;b=a._gpf;void 0===b?(b=new I(a),e.setReadOnlyProperty(a,"_gpf",b.uid())):b=ha[b];return b},Ca=function(a,b){if(Q){var c=x(a);c._defConstructor?c._defConstructor.apply(this,b):c._Super.apply(this,b)}};I.prototype={constructor:I,_uid:0,uid:function(){return this._uid},_name:"",name:function(){return this._name},nameOnly:function(){var a=
this._name,b=a.lastIndexOf(".");return-1===b?a:a.substr(b+1)},_Super:Object,Super:function(){return this._Super},_Subs:[],Subs:function(){return this._Subs},_attributes:null,attributes:function(){this._attributes||(this._attributes=new e.attributes.Map);return this._attributes},_Constructor:function(){},_defConstructor:null,Constructor:function(){return this._Constructor},_definition:null,addMember:function(a,b,c){var d=this._Constructor.prototype;e.ASSERT("constructor"!==a,"No constructor can be added");
e.ASSERT(void 0===d[a],"No member can be overridden");void 0===c?c=0:"string"===typeof c&&(c=P.indexOf(c),-1===c&&(c=0));this._addMember(a,b,c)},_addMember:function(a,b,c){var d=this._Constructor.prototype;3===c?e.setReadOnlyProperty(d.constructor,a,b):d[a]=b},_processMember:function(a,b){var c=this._definition[a],d="constructor"===a,f,k,h;f=typeof c;if(3===b)this._addMember(a,c,3);else{k=d?this._Super:this._Super.prototype[a];h=typeof k;if("undefined"!==h&&null!==k&&f!==h)throw e.Error.ClassMemberOverloadWithTypeChange();
if(f="function"===f){if(h="undefined"!==h)a:{var g;h=c.toString().split("._super");f=h.length;for(g=1;g<f;++g)if(-1==="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".indexOf(h[g].charAt(0))){h=!0;break a}h=!1}f=h}f&&(c=Ba(k,c));d?this._defConstructor=c:this._addMember(a,c,b)}},_processAttribute:function(a){var b,c=this._definition[a];a=a.substr(1,a.length-2);this._attributes||(this._attributes={});b=this._attributes[a];void 0===b&&(b=[]);this._attributes[a]=b.concat(c)},_processDefWithVisibility:function(a){var b=
this._definition,c,d;d=P[a];this._definition=c=b[d];try{for(d in c)if(c.hasOwnProperty(d))if("["===d.charAt(0)&&"]"===d.charAt(d.length-1))this._processAttribute(d);else{if("public"===d||"private"===d||"protected"===d||"static"===d)throw e.Error.ClassInvalidVisibility();this._processMember(d,a)}"wscript"===e.host()&&c.constructor!==Object&&this._processMember("constructor",a)}finally{this._definition=b}},_processDefinition:function(){var a=this._definition,b,c;for(b in a)a.hasOwnProperty(b)&&("["===
b.charAt(0)&&"]"===b.charAt(b.length-1)?this._processAttribute(b):(c=P.indexOf(b),-1===c?(c="_"===b.charAt(0)?1:0,this._processMember(b,c)):this._processDefWithVisibility(c)));"wscript"===e.host()&&a.constructor!==Object&&this._processMember("constructor",0)},_processAttributes:function(){var a=this._attributes,b,c,d;if(a)for(d in delete this._attributes,b=this._Constructor,c=b.prototype,a)a.hasOwnProperty(d)&&(d in c||"Class"===d?e.attributes.add(b,d,a[d]):console.error("gpf.define: Invalid attribute name '"+
d+"'"))},_build:function(){var a,b;a=this._name;a=a.substr(a.lastIndexOf(".")+1);b=Aa.toString();var c,d;c=b.indexOf("{")+1;d=b.lastIndexOf("}")-1;b=b.substr(c,d-c+1);a=b.replace("function","function "+a);this._Constructor=a=v(a)(Ca);e.setReadOnlyProperty(a,"_gpf",this._uid);Q=!1;b=new this._Super;Q=!0;a.prototype=b;b.constructor=a;x(this._Super).Subs().push(a);this._processDefinition();this._processAttributes()}};e.define=function(a,b,c){var d,f;"string"===typeof b?b=e.context(b):"object"===typeof b&&
(c=b,b=void 0);void 0===b&&(b=Object);-1<a.indexOf(".")&&(d=a.split("."),f=d.pop(),d=e.context(d));a=(new I(a,b,c||{})).Constructor();void 0!==d&&(d[f]=a);return a};var r=e.attributes={},R=0,ia=function(a,b){b="$"+b;e[b]=function(){var c=v("return function "+b+"(args) {this.constructor.apply(this, args);};")();c.prototype=a.prototype;return function(){return new c(arguments)}}()},Da=function(a,b){a+=".";return function(c,d,f){void 0===f&&"object"===typeof d?(f=d,d=a+b):void 0===d&&(d=a+b);-1===c.indexOf(".")&&
(c=a+c);return e.define(c,d,f)}}("gpf.attributes","Attribute"),g=function(a,b,c){var d="$"===a.charAt(0),e;d?(a=a.substr(1),e=a+"Attribute"):e=a;b=Da(e,b,c);d&&ia(b,a);return b};g("Attribute",{"protected":{_member:"",_alterPrototype:function(a){}},"public":{member:function(){return this._member}}});g("$Alias",{"private":{_name:""},"protected":{_alterPrototype:function(a){ia(a.constructor,this._name)}},"public":{constructor:function(a){this._name=a}}});e.define("gpf.attributes.Array",{"private":{_array:[]},
"public":{constructor:function(){this._array=[]},count:function(){return this._array.length},has:function(a){e.ASSERT("function"===typeof a,"Expected a class parameter");e.ASSERT(a.prototype instanceof r.Attribute,"Expected an Attribute-like class parameter");var b,c=this._array,d=c.length,f;for(b=0;b<d;++b)if(f=c[b],f instanceof a)return f;return null},filter:function(a){e.ASSERT("function"===typeof a,"Expected a class parameter");e.ASSERT(a.prototype instanceof r.Attribute,"Expected an Attribute-like class parameter");
var b,c=this._array,d=c.length,f,k=new r.Array,h=k._array;for(b=0;b<d;++b)f=c[b],f instanceof a&&h.push(f);return k},each:function(a){return X(this._array,a,void 0)}}});e.define("gpf.attributes.Map",{"private":{_members:{},_count:0,_copyTo:function(a,b,c){var d=this._members,e,k,h,g;if(this._count)for(e in d)if(d.hasOwnProperty(e))for(k=d[e]._array,h=0;h<k.length;++h)g=k[h],b&&!b(e,g,c)||a.add(e,g)},_filterCallback:function(a,b,c){return b instanceof c}},"public":{constructor:function(a){this._members=
{};this._count=0;void 0!==a&&this.fillFromObject(a)},count:function(){return this._count},add:function(a,b){var c=this._members[a];void 0===c&&(c=this._members[a]=new r.Array);c._array.push(b);++this._count},fillFromObject:function(a){a=x(a.constructor);return this.fillFromClassDef(a)},fillFromClassDef:function(a){for(var b;a;)if((b=a.attributes())&&b._copyTo(this),a=a.Super(),a!==Object)a=x(a);else break;return this._count},filter:function(a){e.ASSERT("function"===typeof a,"Expected a class parameter");
e.ASSERT(a.prototype instanceof r.Attribute,"Expected an Attribute-like class parameter");var b=new r.Map;this._copyTo(b,this._filterCallback,a);return b},member:function(a){a=this._members[a];void 0!==a&&a instanceof r.Array||(0===R&&(R=new r.Array),a=R);return a},members:function(){var a=this._members,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},each:function(a){return Y(this._members,a,void 0)},addTo:function(a){var b=this._members,c;for(c in b)b.hasOwnProperty(c)&&r.add(a,c,b[c])}}});
r.add=function(a,b,c){var d,e,g,h;d=x(a).attributes();e=c.length;for(g=0;g<e;++g)h=c[g],h._member=b,d.add(b,h),h._alterPrototype(a.prototype)};var Ea=function(){return this._MEMBER_},Fa=function(){var a=this._MEMBER_;0<arguments.length&&(this._MEMBER_=arguments[0]);return a},n=g("ClassAttribute");g("$ClassProperty",n,{"private":{_writeAllowed:!1,_publicName:void 0,_visibility:void 0},"protected":{_alterPrototype:function(a){var b=this._member,c=this._publicName;a=x(a.constructor);var d,e,g;c||(c=
b.substr(1));this._writeAllowed?(d=["value"],e=Fa.toString()):(d=[],e=Ea.toString());e=e.split("_MEMBER_").join(b);b=e.indexOf("{")+1;g=e.lastIndexOf("}")-1;e=e.substr(b,g-b+1);a.addMember(c,v(d,e),this._visibility)}},"public":{constructor:function(a,b,c){a&&(this._writeAllowed=!0);"string"===typeof b&&(this._publicName=b);"string"===typeof c&&(this._visibility=c)}}});g("$ClassEventHandler",n,{});g("$ClassExtension",n,{"private":{_ofClass:D,_publicName:""},"public":{constructor:function(a,b){this._ofClass=
a;"string"===typeof b&&(this._publicName=b)}}})});
