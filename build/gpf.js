!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else if("undefined"!=typeof module&&module.exports)b(module.exports);else{void 0===a&&(a=Function("return this;")());var c={};b(c),a.gpf=c}}(this,function(a){"use strict";function b(){}function c(a){return{log:function(b){a("    "+b)},info:function(b){a("[?] "+b)},warn:function(b){a("/!\\ "+b)},error:function(b){a("(X) "+b)}}}function d(){Dd.console=c(print),Ed=function(a){java.lang.System.exit(a)}}function e(a){WScript.Echo(a)}function f(a){return!!a&&Math.floor(a.length)===a.length}function g(a){return Id(a)||f(a)}function h(a,b,c){var d,e=a.length;for(d=0;d<e;++d)b.call(c,a[d],d,a)}function i(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function j(a,b,c){i(a,b,c),["constructor","toString"].forEach(function(d){a.hasOwnProperty(d)&&b.call(c,a[d],d,a)})}function k(a,b,c){var d,e,f=a.length;for(e=0;e<f&&!d;++e)d=b.call(c,a[e],e,a);return d}function l(a){Kd&&console.warn("ASSERTION FAILED: "+a)}function m(b,c){b||(l(c),a.Error.assertionFailed({message:c}))}function n(a,b){void 0===b&&(b="Assertion with no message",a=!1),m(a,b)}function o(a){Jd(a,m)}function p(a,b){var c;return 0===a.length?Cd(b):(c=[].concat(a),c.push(b),Cd.apply(null,c))}function q(a,b){return p(a,b)}function r(a,b){return void 0===b&&(b=a,a=[]),q(a,b)}function s(a){return a.charAt(0).toUpperCase()+a.substr(1)}function t(a,b){var c=a;return Jd(b,function(a,b){c=c.split(b).join(a)}),c}function u(a,b){return"javascript"===b?'"'+a+'"':a}function v(a,b){return u(t(a,Ld[b]),b)}function w(a,b){Jd(b,function(b,c){void 0===a[c]&&(a[c]=b)})}function x(a,b){b&&w(a.prototype,b)}function y(a,b){b&&w(a,b)}function z(a,b){var c=b.on;x(c,b.methods),y(c,b.statics)}function A(a,b){return void 0!==b?a.bind(b):a}function B(a,b){for(var c=a.length,d=0;d<c;)a.hasOwnProperty(d)&&b(a[d],d,a),++d}function C(a,b,c){for(var d=a.length;c<d;){if(a.hasOwnProperty(c)&&!0!==b(a[c],c,a))return!1;++c}return!0}function D(a,b){return C(a,b,0)}function E(a,b){var c,d=b.length;for(c=0;c<d;++c)a.push(b.charAt(c))}function F(a){var b=[];return"string"==typeof a?E(b,a):h(a,function(a){b.push(a)},0),b}function G(a){var b=F(a),c=arguments[1];return"function"==typeof c&&(b=b.map(c,arguments[2])),b}function H(a){return 0===a?[]:new Array(a).join(" ").split(" ").map(function(a,b){return"p"+b})}function I(a){var b=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return a.forEach(function(c,d){var e=d+1;b.push("if ("+e+" === l) { return new C("+a.slice(0,e).join(", ")+");}")}),b.join("\r\n")}function J(a){var b=H(a);return r(b,I(b))}function K(a,b){return b.length>Md.length&&(Md=J(b.length)),Md.apply(a,b)}function L(a){return 10>a?"0"+a:a}function M(a){return a.getUTCFullYear()+"-"+L(a.getUTCMonth()+1)+"-"+L(a.getUTCDate())+"T"+L(a.getUTCHours())+":"+L(a.getUTCMinutes())+":"+L(a.getUTCSeconds())+"."+(a.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}function N(a){return a[1]<12&&a[2]<32}function O(a){return a[3]<24&&a[4]<60&&a[5]<60}function P(a){if(N(a)&&O(a))return a}function Q(a,b){b?a.push(parseInt(b,10)):a.push(0)}function R(a){var b,c=[],d=a.length;for(b=1;b<d;++b)Q(c,a[b]);return c}function S(a){var b;if(a)return b=R(a),--b[1],P(b)}function T(a){if("string"==typeof a)return Nd.lastIndex=0,S(Nd.exec(a))}function U(){var a=arguments[0],b=T(a);return b?new Od(Od.UTC.apply(Od.UTC,b)):K(Od,arguments)}function V(){h(["prototype","UTC","parse","now"],function(a){U[a]=Od[a]})}function W(a){return"var me = this;\nreturn function ("+H(a).join(", ")+") {\n   var args = _gpfArrayPrototypeSlice.call(arguments, 0);\n    return me.apply(thisArg, prependArgs.concat(args));\n};"}function X(){var a=b.toString.call(this),c=a.indexOf("function"),d=a.indexOf("(",c);return a.substr(c+9,d-c-9).replace(Qd,"").trim()}function Y(a,b){this[b]=a}function Z(a,b,c){function d(a){return function(b){e&&(e=!1,a(b))}}var e=!0;try{a(d(b),d(c))}catch(e_){e&&(e=!1,c(e_))}}function $(){var a=this;a._handlers.forEach(function(b){b.process(a)}),a._handlers=[]}function _(a){var b=this;b._state=!1,b._value=a,$.call(b)}function aa(a){var b=this;try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void Z(c.bind(a),aa.bind(b),_.bind(b))}b._state=!0,b._value=a,$.call(b)}catch(e_){_.call(b,e_)}}function ba(){}function ca(a,b){return a.dt===b.dt?a.id-b.id:a.dt-b.dt}function da(a,b){var c={id:++Td,dt:(new Date).getTime()+b,cb:a};return Sd.push(c),Sd.sort(ca),Td}function ea(a){var b;Sd.every(function(c,d){return c.id!==a||(b=d,!1)})||Sd.splice(b,1)}function fa(){for(var a,b,c=Sd;c.length;){for(a=c.shift(),b=(new Date).getTime();a.dt>b;)Ud(a.dt-b),b=(new Date).getTime();a.cb()}}function ga(a){java.lang.Thread.sleep(a)}function ha(a){return function(b,c){"function"!=typeof b&&a(ka(b),c)}}function ia(a){var b,c;return b=a instanceof Array,c=[],b?(h(a,ha(function(a){c.push(a)})),"["+c.join(",")+"]"):(Jd(a,ha(function(a,b){c.push(v(b,"javascript")+":"+a)})),"{"+c.join(",")+"}")}function ja(a){return a.toString()}function ka(a){return Yd[typeof a](a)}function la(a){return r("return "+a)()}function ma(a,b){if(void 0!==a)return a[b]}function na(a,b){var c=a[b];return void 0===c&&(c=a[b]={}),c}function oa(b,c){var d;return"gpf"===b[0]?(d=a,b=b.slice(1)):d=Dd,b.reduce(c,d)}function pa(a,b){var c;return c=b?na:ma,oa(a,c)}function qa(a,b,c){function d(a){this._buildMessage(a)}return d.prototype=new Zd,Object.assign(d.prototype,{code:a,name:b,message:c}),d.prototype.constructor=d,Zd[s(b)]=d,function(a){throw new d(a)}}function ra(a,b,c){var d=qa(a,b,c);return d.CODE=a,d.NAME=b,d.MESSAGE=c,d}function sa(b,c){Jd(c,function(b,c){var d=++$d;a.Error["CODE_"+c.toUpperCase()]=d,a.Error[c]=ra(d,c,b)})}function ta(a){return a.trim()}function ua(a,b){var c=a.compatibleName();c&&(b.name=c)}function va(a,b,c){a.length&&(c.parameters=/\(\s*(\w+(?:\s*,\s*\w+)*)\s*\)/.exec(b)[1].split(",").map(ta))}function wa(a,b){var c=ta(/{((?:.*\n)*.*)}/.exec(a)[1]);c&&(b.body=c)}function xa(a,c){var d=b.toString.call(a).replace(Qd,"");va(a,d,c),wa(d,c)}function ya(a){var b={};return ua(a,b),xa(a,b),b}function za(a){return a.name?" "+a.name:""}function Aa(a){return a.parameters?a.parameters.join(", "):""}function Ba(a){return a.body?a.body.toString():""}function Ca(a){return"function"+za(a)+"("+Aa(a)+') {\n\t"use strict"\n'+Ba(a)+"\n}"}function Da(a,b){var c=Object.keys(b),d=c.map(function(a){return b[a]});return r(c,"return "+a).apply(null,d)}function Ea(a,b){return Da(Ca(a),b||{})}function Fa(a){var b;return Jd(_d,function(c,d){a["$"+d]&&(b=c)}),b}function Ga(b){var c=_d[b.$type];return void 0===c&&a.Error.invalidEntityType(),c}function Ha(a){var b,c=Fa(a);return c||(c=Ga(a)),b=new c(a),b.check(),b}function Ia(a,b){return a.exec(b)}function Ja(a,b){return a.lastIndex=0,Ia(a,b)}function Ka(a,b){for(var c=[],d=Ja(a,b);d;)c.push(d),d=Ia(a,b);return c}function La(a){this._initialDefinition=a}function Ma(b){return Ea({parameters:H(b),body:"_throw_();"},{_throw_:a.Error.abstractMethod})}function Na(b,c){-1===c.indexOf(b)&&a.Error.invalidEntity$Property()}function Oa(a,b){"$"===b.charAt(0)?this._check$Property(b.substr(1),a):this._checkProperty(b,a)}function Pa(a){var b=k(ae,function(b){if(b.getInstanceBuilder()===a)return b});return b||(b=k([].concat(ae).reverse(),function(b){if(a.prototype instanceof b.getInstanceBuilder())return b})),b}function Qa(a){La.call(this,a)}function Ra(a){return"string"==typeof a?pa(a.split(".")):a}function Sa(a){return{name:a._name,parameters:ya(a._resolvedConstructor).parameters,body:"if (!(this instanceof _classDef_._instanceBuilder)) gpf.Error.classConstructorFunction();\n_classDef_._resolvedConstructor.apply(this, arguments);"}}function Ta(b){return{gpf:a,_classDef_:b}}function Ua(a){return Ea(Sa(a),Ta(a))}function Va(){a.Error.invalidClassSuper()}function Wa(a){var b=ya(a);return b.body="return _superMethod_.apply(this, arguments);",Ea(b,{_superMethod_:a})}function Xa(a){return"function"!=typeof a&&(a=Va),Wa(a)}function Ya(a,b,c){var d=ya(c);return d.body="return _superMethod_.apply(this === _$super_ ? _that_ : this, arguments);",Ea(d,{_that_:a,_$super_:b,_superMethod_:c})}function Za(b,c,d){return"function"!=typeof d&&a.Error.invalidClassSuperMember(),Ya(b,c,d)}function $a(a){return Ka(be,a).map(function(a){return a[1]})}function _a(a){La.call(this,a)}function ab(a){return{name:a._name,body:"gpf.Error.interfaceConstructorFunction();"}}function bb(b){return{gpf:a,_classDef_:b}}function cb(a){return Ea(ab(a),bb(a))}function db(a){return Ha(a).getInstanceBuilder()}function eb(a,b){return"function"!=typeof b||a.length!==b.length}function fb(a,b){var c=!0;return Jd(a.prototype,function(a,d){"constructor"!==d&&eb(a,b[d])&&(c=!1)}),c}function gb(a,b){return b.queryInterface(a)}function hb(b,c){if(fb(a.interfaces.IUnknown,c))return gb(b,c)}function ib(a,b){return fb(a,b)?b:hb(a,b)}function jb(a){return"string"==typeof a?pa(a.split(".")):a}function kb(a){return a instanceof Function?a.prototype:a}function lb(a,b){var c={$interface:"gpf.interfaces.I"+a};return Object.keys(b).forEach(function(a){c[a]=Ma(b[a])}),db(c)}function mb(a){return"var "+a.map(function(a,b){return"a"+b+"=a."+a.property+",b"+b+"=b."+a.property}).join(",")+";"}function nb(a,b,c){return"string"===a?b+".localeCompare("+c+")":b+"-"+c}function ob(a,b){var c,d;return!1===a.ascending?(c="b"+b,d="a"+b):(c="a"+b,d="b"+b),"if("+c+"!=="+d+")return "+nb(a.type,c,d)+";"}function pb(a){return mb(a)+a.map(ob).join("")+"return 0;"}function qb(a){return r(["a","b"],pb(a))}function rb(a,b){return function(c){return"("+c[a].map(ce).join(b)+")"}}function sb(a){return"/"+a.regexp+"/.exec("+ce(a.like)+")"}function tb(a){if("object"==typeof a)return Object.keys(a).filter(function(a){return-1<ee.indexOf(a)})[0]}function ub(a){return"return "+ce(a)}function vb(b,c,d){var e=ib(c,b);return e||a.Error.interfaceExpected({name:d}),e}function wb(b,c,d){return b||a.Error.interfaceExpected({name:d}),vb(b,c,d)}function xb(a){return wb(a,fe,"gpf.interfaces.IReadableStream")}function yb(a){return wb(a,ge,"gpf.interfaces.IWritableStream")}function zb(a){a.prototype[he]=!1,a.prototype[ie]=!1}function Ab(b){b[he]&&a.Error.readInProgress(),b[he]=!0}function Bb(a){a[he]=!1}function Cb(b){b[ie]&&a.Error.writeInProgress(),b[ie]=!0}function Db(a){a[ie]=!1}function Eb(a){return function(b){var c=this,d=yb(b);return Ab(c),a.call(c,d).then(function(a){return Bb(c),Promise.resolve(a)},function(a){return Bb(c),Promise.reject(a)})}}function Fb(a){return function(b){var c=this;return Cb(c),a.call(c,b).then(function(a){return Db(c),Promise.resolve(a)},function(a){return Db(c),Promise.reject(a)})}}function Gb(a){var b=ne[Bd],c=new ke;return b.openTextStream(a,me.READING).then(function(a){return a.read(c)}).then(function(){return c.toString()})}function Hb(a){return oe[Bd](a)}function Ib(a){return-1<a.indexOf("\\")?a.toLowerCase().split("\\"):a.split("/")}function Jb(a){a[a.length-1]||a.pop()}function Kb(b){b.length?b.pop():a.Error.unreachablePath()}function Lb(a){var b=Ib(a);return Jb(b),b}function Mb(a){return Lb(a).join("/")}function Nb(a){return a?Lb(a).pop():""}function Ob(a){var b=Nb(a),c=b.lastIndexOf(".");return-1===c?"":b.substr(c)}function Pb(a,b){Lb(b).forEach(function(b){".."===b?Kb(a):a.push(b)})}function Qb(a){var b=Lb(a);return[].slice.call(arguments,1).forEach(Pb.bind(null,b)),b.join("/")}function Rb(a,b){for(;a[0]===b[0];)a.shift(),b.shift()}function Sb(a,b){a.length*b.length&&Rb(a,b)}function Tb(a){return a=Lb(a),Kb(a),a.join("/")}function Ub(a,b){var c,d=Lb(a),e=Lb(b);for(Sb(d,e),c=d.length+1;--c;)e.unshift("..");return e.join("/")}function Vb(a,b){var c,d=-1;return{reset:function(){return d=-1,Promise.resolve()},moveNext:function(){return++d,c=void 0,d<b.length?a.getInfo(b[d]).then(function(a){return c=a}):Promise.resolve()},getCurrent:function(){return c}}}function Wb(a,b){return new Promise(function(c,d){yd[a].apply(yd,b.concat([function(a,b){a?d(a):c(b)}]))})}function Xb(a,b){return Wb(a,[Mb(b)])}function Yb(a,b){return Wb("open",[Mb(a),b.flags]).then(function(a){return new b.GpfStream(yd[b.nodeStream]("",{fd:a,autoClose:!1}),Wb.bind(null,"close",[a]))})}function Zb(a){return Yb(a,{flags:"r",GpfStream:qe,nodeStream:"createReadStream"})}function $b(a){return Yb(a,{flags:"a",GpfStream:re,nodeStream:"createWriteStream"})}function _b(a){return a.isFile()?le.FILE:le.UNKNOWN}function ac(a){return a.isDirectory()?le.DIRECTORY:_b(a)}function bc(a,b){return{type:b,fileName:a.Name.toLowerCase(),filePath:Mb(a.Path),size:a.Size,createdDateTime:new Date(a.DateCreated),modifiedDateTime:new Date(a.DateLastModified)}}function cc(a,b){return new Promise(function(c){xd[a](Lb(b).join("\\")),c()})}function dc(a,b){return new Promise(function(c){xd[a](Lb(b).join("\\"),!0),c()})}function ec(a){return xd.FileExists(a)?bc(xd.GetFile(a),le.FILE):{type:le.NOT_FOUND}}function fc(a){return xd.FolderExists(a)?bc(xd.GetFolder(a),le.DIRECTORY):ec(a)}function gc(a){for(var b=new Enumerator(a),c=[];!b.atEnd();b.moveNext())c.push(b.item().Path);return c}function hc(b){var c;if(xd.FolderExists(b))return c=xd.GetFolder(b),gc(c.SubFolders).concat(gc(c.Files));a.Error.pathNotExplorable()}function ic(a){return a instanceof Object&&"[object Object]"===xe.call(a)&&Object.getPrototypeOf(a)===Object.getPrototypeOf({})}function jc(b){var c=ze[b];return void 0===c&&a.Error.unknownNamespacePrefix(),c}function kc(a){var b=a.split(":");if(2===b.length)return{namespace:jc(b[0]),name:b[1]}}function lc(b){-1!==b.indexOf(":")&&a.Error.unableToUseNamespaceInString()}function mc(a){return ye[a]||a}function nc(a,b){a.forEach(function(a){Id(a)?nc(a,b):b(a)})}function oc(b){return b||a.Error.missingNodeName(),function(a){var c,d;return ic(a)?(d=a,c=1):c=0,new Ae(b,d,[].slice.call(arguments,c))}}function pc(a){var b={};return h(Ka(Ce,a),function(a){b[a[1]]=a[2]}),b}function qc(a){return function(b,c){c&&Object.keys(c).forEach(function(d){b[a](d,c[d])})}}function rc(a){return function(b,c){c?b[a](c):b[a]()}}function sc(b){return a.interfaces.isImplementedBy(a.interfaces.IThenable,b)?b:Promise.resolve(b)}function tc(a){if(void 0!==a)return sc(a)}function uc(a){var b,c=a.url;if(c.lastIndex=0,b=c.exec(this.url))return tc(a.response.apply(null,[this].concat([].slice.call(b,1))))}function vc(a,b){return k(a,uc.bind(b))}function wc(a){return vc(De[a.method],a)}function xc(a){var b,c=a.method;return++Ee,b=c+"."+Ee,De[c].unshift(Object.assign({method:c,id:b},a)),b}function yc(a){var b=a.split(".")[0];De[b]=De[b].filter(function(b){return b.id!==a})}function zc(){Object.keys(Be).forEach(function(a){De[a]=[]})}function Ac(a){return wc(a)||new Promise(function(b,c){Fe[Bd](a,b,c)})}function Bc(a,b,c){return Ac("string"==typeof b?{method:a,url:b,data:c}:Object.assign({method:a},b))}function Cc(a){var b=new XMLHttpRequest;return b.open(a.method,a.url),b}function Dc(a,b){a.onreadystatechange=function(){4===a.readyState&&b()}}function Ec(a,b){var c=Cc(a);Ge(c,a.headers),Dc(c,function(){b({status:c.status,headers:pc(c.getAllResponseHeaders()),responseText:c.responseText})}),He(c,a.data)}function Fc(a){var b=new ke;return xb(a).read(b).then(function(){return b.toString()})}function Gc(a,b){a.setEncoding("utf8");var c=new qe(a);Fc(c).then(function(d){c.close(),b({status:a.statusCode,headers:a.headers,responseText:d})})}function Hc(a,b){b&&(a.headers=Object.assign({"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(b)},a.headers))}function Ic(a){var b=Object.assign(Hd.parse(a.url),a);return Hc(b,a.data),b}function Jc(a,b){var c=Ic(a);return Gd.request(c,function(a){Gc(a,b)})}function Kc(a,b){b?a.write(b,"utf8",function(){a.end()}):a.end()}function Lc(a){var b=new ActiveXObject("WinHttp.WinHttpRequest.5.1");return b.Open(a.method,a.url),b}function Mc(a,b){b({status:a.Status,headers:pc(a.GetAllResponseHeaders()),responseText:a.ResponseText})}function Nc(a,b){if(b){a.setDoOutput(!0);var c=new Me(a.getOutputStream());return c.write(b).then(function(){c.close()})}return Promise.resolve()}function Oc(a){try{return a.getInputStream()}catch(e_){return a.getErrorStream()}}function Pc(a){var b=new Le(Oc(a));return Fc(b).then(function(a){return b.close(),a})}function Qc(a){var b={},c=a.getHeaderFields();return h(c.keySet().toArray(),function(a){b[String(a)]=String(c.get(a).get(0))}),b}function Rc(a,b){Pc(a).then(function(c){b({status:a.getResponseCode(),headers:Qc(a),responseText:c})})}function Sc(a,b){var c=new java.net.URL(a.url).openConnection();c.setRequestMethod(a.method),Ne(c,a.headers),Nc(c,a.data).then(function(){Rc(c,b)})}function Tc(){}function Uc(a){return Ac({method:Be.GET,url:a}).then(function(a){return a.responseText})}function Vc(a){return Hb(Qb(".",a))}function Wc(a){var b=this;return Re(a).then(function(c){var d=Ue[Ob(a).toLowerCase()];return d?d.call(b,a,c):c})}function Xc(){return{gpf:Object.create(a),promise:Promise.resolve(),_initialDefine:null}}function Yc(){var a=this,b=a.gpf.require,c=a._initialDefine;return a.promise=c.apply(b,arguments),b.define=c,a.promise}function Zc(a,b){return a._initialDefine=b.define,b.define=Yc.bind(a),a.gpf.require=b,a}function $c(a,b){return Zc(Xc(),kd(a,{base:Tb(b)}))}function _c(a,b){var c=Ka(Ve,b);return c.length?$c(this,a).gpf.require.define(c.map(function(a){return a[1]}).filter(function(a){return a}).reduce(function(a,b){return a[b]=b,a},{}),function(a){return a}):Promise.resolve({})}function ad(a){return{dependencies:[],factory:a[0]}}function bd(a){return{dependencies:a[0],factory:a[1]}}function cd(a){return{dependencies:a[1],factory:a[2]}}function dd(a,b,c){var d=this,e=We[arguments.length](arguments);d.require.define(e.dependencies,function(a){return a.length=e.dependencies.length,e.factory.apply(null,[].slice.call(a))})}function ed(b,c,d){var e={};return r(["gpf","define","module","require"],c)(b,dd.bind(b),e,function(b){return d[b]||a.Error.noCommonJSDynamicRequire()}),e.exports}function fd(a){return"clearCache"===a?-1:1}function gd(b){var c=this;h(Object.keys(b).sort(function(a,b){return fd(a)-fd(b)}),function(d){(Xe[d]||a.Error.invalidRequireConfigureOption).call(c,b[d])},c)}function hd(a){return Qb(this.base,a)}function id(a){var b,c=this;return c.cache[a]?c.cache[a]:(b=Wc.call(c,a),c.cache[a]=b,b)}function jd(a,b){var c=this,d=[],e=Object.keys(a);return h(e,function(b){d.push(id.call(c,hd.call(c,a[b])))},c),Promise.all(d).then(function(a){var c,d;return"function"==typeof b?(d={},h(e,function(b,c){d[b]=a[c]}),c=b(d)):c=b,c})}function kd(a,b){var c=Object.create(a),d={};return d.define=jd.bind(c),d.resolve=hd.bind(c),d.configure=gd.bind(c),b&&d.configure(b),d}function ld(a){return ib(Te,a)||$e}function md(a,b){function c(){try{e=!1,g.read(j).then(function(){e=!0},function(a){f=a})}catch(e_){f=e_}}function d(){if(f)return Promise.reject(f)}var e,f,g=xb(a),h=yb(a),i=ld(a),j=yb(b),k=ld(b);return c(),{flush:function(){return d()||i.flush().then(function(){return k.flush()})},write:function(a){return d()||h.write(a).then(function(){e&&c()})}}}function nd(a){for(var b=a.length-1,c=a[b];b>0;)c=md(a[--b],c);return c}function od(a){return a.length>1?nd(a):yb(a[0])}function pd(a,b){var c=xb(a),d=od([].slice.call(arguments,1)),e=ld(d);try{return c.read(d).then(function(){return e.flush()})}catch(e_){return Promise.reject(e_)}}function qd(a){return bf.exec(a)[1]}function rd(a,b){return b?a.filter(function(a){return a instanceof b}):a}function sd(a,b,c){a[b]=(a[b]||[]).concat(c)}function td(a,b){var c=Pa(a);return c?c.getAttributes(b):{}}function ud(a,b){return"function"!=typeof a&&(a=a.constructor),td(a,b)}var vd,wd,xd,yd,zd,Ad={BROWSER:"browser",NASHORN:"nashorn",NODEJS:"nodejs",PHANTOMJS:"phantomjs",RHINO:"rhino",UNKNOWN:"unknown",WSCRIPT:"wscript"},Bd=Ad.UNKNOWN,Cd=Function,Dd=new Cd("return this")(),Ed=b,Fd={};"undefined"!=typeof WScript?Bd=Ad.WSCRIPT:"undefined"!=typeof print&&"undefined"!=typeof java?("\\"===String(java.lang.System.getProperty("file.separator")),Bd="undefined"==typeof readFile?Ad.NASHORN:Ad.RHINO):"undefined"!=typeof phantom&&phantom.version&&!document.currentScript?(Bd=Ad.PHANTOMJS,"\\"===require("fs").separator,Dd=window):"undefined"!=typeof module&&module.exports?(Bd=Ad.NODEJS,zd=require("path"),"\\"===zd.sep,Dd=global):"undefined"!=typeof window&&(Bd=Ad.BROWSER,Dd=window),a.hosts={browser:Ad.BROWSER,nashorn:Ad.NASHORN,nodejs:Ad.NODEJS,phantomjs:Ad.PHANTOMJS,rhino:Ad.RHINO,unknown:Ad.UNKNOWN,wscript:Ad.WSCRIPT},a.host=function(){return Bd},a.version=function(){return"0.2.4"},Fd[Ad.BROWSER]=function(){Ed=function(a){window.location="https://arnaudbuchholz.github.io/gpf/exit.html?"+(a||0)},vd=window,wd=document};var Gd,Hd;a.node={},Fd[Ad.NODEJS]=function(){yd=require("fs"),Gd=require("http"),Hd=require("url"),Ed=function(a){process.exit(a)}},Fd[Ad.PHANTOMJS]=function(){Ed=function(a){phantom.exit(a)},vd=window,wd=document,yd=require("fs")},a.java={},a.rhino=a.java,Fd[Ad.RHINO]=d,Fd[Ad.NASHORN]=d,Fd[Ad.UNKNOWN]=b,a.wscript={},Fd[Ad.WSCRIPT]=function(){xd=new ActiveXObject("Scripting.FileSystemObject"),Dd.console=c(e),Ed=function(a){WScript.Quit(a)}},Fd[Bd]();var Id=Array.isArray;a.isArrayLike=g;var Jd;Jd=Ad.WSCRIPT===Bd?j:i,a.forEach=function(a,b,c){if(g(a))return void h(a,b,c);Jd(a,b,c)};var Kd=!0;a.assert=n,a.asserts=o,a.preventAssertWarnings=function(a){Kd=!a};a.web={};var Ld={};Ld.javascript={"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"},Ld.xml={"&":"&amp;","<":"&lt;",">":"&gt;"},z("Array",{on:Array,methods:{every:function(a){return D(this,A(a,arguments[1]))},filter:function(a){var b=[];return a=A(a,arguments[1]),B(this,function(c,d,e){a(c,d,e)&&b.push(c)}),b},forEach:function(a){B(this,A(a,arguments[1]))},indexOf:function(a){var b=-1;return C(this,function(c,d){return c!==a||(b=d,!1)},arguments[1]||0),b},map:function(a){var b=new Array(this.length);return a=A(a,arguments[1]),B(this,function(c,d,e){b[d]=a(c,d,e)}),b},some:function(a){return a=A(a,arguments[1]),!D(this,function(b,c,d){return!a(b,c,d)})},reduce:function(a){var b,c=arguments[1],d=this.length,e=0;for(b=void 0===c?this[e++]:c;e<d;++e)b=a(b,this[e],e,this);return b}},statics:{from:G,isArray:function(a){return"[object Array]"==={}.toString.call(a)}}}),Id||(Id=Array.isArray);var Md=J(10);z("Date",{on:Date,methods:{toISOString:function(){return M(this)}},statics:{now:function(){return(new Date).getTime()}}});var Nd=/^([0-9][0-9][0-9][0-9])\-([0-9][0-9])\-([0-9][0-9])(?:T([0-9][0-9])\:([0-9][0-9])\:([0-9][0-9])(?:\.([0-9][0-9][0-9])Z)?)?$/,Od=Dd.Date;!function(){V();var a,b;try{a=M(new Date("2003-01-22T22:45:34.075Z")),b=M(new Date("2003-01-22"))}catch(e_){}"2003-01-22T22:45:34.075Z"===a&&"2003-01-22T00:00:00.000Z"===b||(Dd.Date=U)}();var Pd=Array.prototype.slice;z("Function",{on:Function,methods:{bind:function(a){var b=this,c=Pd.call(arguments,1);return r(["thisArg","prependArgs","_gpfArrayPrototypeSlice"],W(Math.max(this.length-c.length,0))).call(b,a,c,Pd)}}});var Qd=/\/\/.*$|\/\*(?:[^\*]*|\*[^\/]*)\*\//gm;!function(){return"functionName"!==r("return function functionName () {};")().name}()?Function.prototype.compatibleName=function(){return this.name}:Function.prototype.compatibleName=X,z("Object",{on:Object,statics:{assign:function(a,b){return[].slice.call(arguments,1).forEach(function(b){Jd(b,Y,a)}),a},create:function(){function a(){}return function(b){a.prototype=b;var c=new a;return a.prototype=null,c.__proto__||(c.__proto__=b),c}}(),getPrototypeOf:function(a){return a.__proto__?a.__proto__:a.constructor.prototype},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},values:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}}}),z("String",{on:String,methods:{trim:function(){var a=/^[\s\ufeff ]+|[\s\ufeff ]+$/g;return function(){return this.replace(a,"")}}()}});var Rd=a.Promise=function(a){Z(a,aa.bind(this),_.bind(this))};ba.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(a){var b=this;if(null===a._state)return a.hasOwnProperty("_handlers")||(a._handlers=[]),void a._handlers.push(b);setTimeout(function(){var c,d;if(null===(c=a._state?b.onFulfilled:b.onRejected))return void(a._state?b.resolve(a._value):b.reject(a._value));try{d=c(a._value)}catch(e_){return void b.reject(e_)}b.resolve(d)},0)}},Rd.prototype={_state:null,_value:null,_handlers:[],then:function(a,b){var c=this;return new Rd(function(d,e){var f=new ba;void 0!==a&&(f.onFulfilled=a),void 0!==b&&(f.onRejected=b),f.resolve=d,f.reject=e,f.process(c)})},"catch":function(a){return this.then(null,a)}},Rd.resolve=function(a){return new Rd(function(b){b(a)})},Rd.reject=function(a){return new Rd(function(b,c){c(a)})},Rd.all=function(a){return 0===a.length?Rd.resolve([]):new Rd(function(b,c){function d(f,g){try{if(f&&f instanceof Rd)return void f.then(function(a){d(a,g)},c);a[g]=f,0==--e&&b(a)}catch(e_){c(e_)}}var e=a.length;a.forEach(d)})},Rd.race=function(a){return new Rd(function(b,c){a.forEach(function(a){a.then(b,c)})})},void 0===Dd.Promise&&(Dd.Promise=Rd);var Sd=[],Td=0,Ud=b;a.handleTimeout=b;var Vd={};Vd[Ad.WSCRIPT]=function(a){WScript.Sleep(a)},Vd[Ad.RHINO]=ga,Vd[Ad.NASHORN]=ga,"undefined"==typeof setTimeout&&(Ud=Vd[Bd],void 0===Ud&&console.warn("No implementation for setTimeout"),Dd.setTimeout=da,Dd.clearTimeout=ea,a.handleTimeout=fa);var Wd,Xd,Yd={undefined:b,"function":b,number:ja,"boolean":ja,string:function(a){return v(a,"javascript")},object:function(a){return null===a?"null":ia(a)}};"undefined"==typeof JSON?(Wd=ka,Xd=la,Dd.JSON={stringify:Wd,parse:Xd}):(Wd=JSON.stringify,Xd=JSON.parse),a.context=function(a){return void 0===a?Dd:pa(a.split("."))},Ld.html=Object.assign({},Ld.xml,{"à":"&agrave;","á":"&aacute;","è":"&egrave;","é":"&eacute;","ê":"&ecirc;"});var Zd=a.Error=function(){};Zd.prototype=new Error,Object.assign(Zd.prototype,{constructor:Zd,code:0,name:"Error",message:"",_buildMessage:function(a){var b;a&&(b={},Jd(a,function(a,c){b["{"+c+"}"]=a.toString()}),this.message=t(this.message,b))}});var $d=0;sa("error",{notImplemented:"Not implemented",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),sa("define/detect",{invalidEntityType:"Invalid entity type"});var _d={};La.prototype={constructor:La,_initialDefinition:{}},sa("abstract",{abstractMethod:"Abstract method"}),sa("define/check",{invalidEntity$Property:"Invalid entity $ property",missingEntityName:"Missing entity name",invalidEntityNamespace:"Invalid entity namespace"}),Object.assign(La.prototype,{_type:"",_allowed$Properties:"type,name,namespace".split(","),_check$Property:function(a,b){a!==this._type&&Na(a,this._allowed$Properties)},_throwInvalidProperty:Ma(0),_reMemberName:/.*/,_checkMemberName:function(a){this._reMemberName.exec(a)||this._throwInvalidProperty()},_reservedNames:"super,class,public,private,protected,static,mixin".split(","),_checkReservedMemberName:function(a){-1!==this._reservedNames.indexOf(a)&&this._throwInvalidProperty()},_checkMemberValue:r(["name","value"]," "),_checkProperty:function(a,b){this._checkMemberName(a),this._checkReservedMemberName(a),this._checkMemberValue(a,b)},_checkProperties:function(){Jd(this._initialDefinition,Oa,this)},_name:"",_readName:function(){var a=this._initialDefinition;this._name=a["$"+this._type]||a.$name},_checkNameIsNotEmpty:function(){this._name||a.Error.missingEntityName()},_throwInvalidName:Ma(0),_reName:/.*/,_checkName:function(){this._reName.exec(this._name)||this._throwInvalidName()},_namespace:"",_extractRelativeNamespaceFromName:function(){var a=/(.*)\.([^\.]+)$/.exec(this._name);if(a)return this._name=a[2],a[1]},_readNamespace:function(){var a=[this._initialDefinition.$namespace,this._extractRelativeNamespaceFromName()].filter(function(a){return a});a.length>0&&(this._namespace=a.join("."))},_checkNamespace:function(){/^(:?[a-z_$][a-zA-Z0-9]+(:?\.[a-z_$][a-zA-Z0-9]+)*)?$/.exec(this._namespace)||a.Error.invalidEntityNamespace()},check:function(){this._checkProperties(),this._readName(),this._checkNameIsNotEmpty(),this._readNamespace(),this._checkName(),this._checkNamespace()}});var ae=[];Object.assign(La.prototype,{_instanceBuilder:null,getInstanceBuilder:function(){return this._instanceBuilder||this._setInstanceBuilder(this._build()),this._instanceBuilder},_setInstanceBuilder:function(a){this._namespace&&(pa(this._namespace.split("."),!0)[this._name]=a),this._instanceBuilder=a,ae.push(this)},_build:b}),Qa.prototype=Object.create(La.prototype),Object.assign(Qa.prototype,{constructor:Qa,_type:"class"}),_d["class"]=Qa,sa("define/class/check",{invalidClassName:"Invalid class name",invalidClassProperty:"Invalid class property",invalidClassExtend:"Invalid class extend",invalidClassConstructor:"Invalid class constructor",invalidClassOverride:"Invalid class override"}),Object.assign(Qa.prototype,{_allowed$Properties:La.prototype._allowed$Properties.concat(["extend"]),_throwInvalidProperty:a.Error.invalidClassProperty,_reMemberName:/^[a-z_][a-zA-Z0-9]*$/,_checkConstructorMember:function(b){"function"!=typeof b&&a.Error.invalidClassConstructor()},_checkOverridenMember:function(b,c){typeof b!=typeof c&&a.Error.invalidClassOverride()},_checkIfOverriddenMember:function(a,b){var c=this._extend.prototype[a];void 0!==c&&this._checkOverridenMember(b,c)},_checkMemberValue:function(a,b){"constructor"===a?this._checkConstructorMember(b):this._checkIfOverriddenMember(a,b)},_reName:/^[A-Z_$][a-zA-Z0-9]*$/,_throwInvalidName:a.Error.invalidClassName,_extend:Object,_extendDefinition:void 0,_readExtend:function(){var a=Ra(this._initialDefinition.$extend);a&&(this._extend=a,this._extendDefinition=Pa(a))},_checkExtendIsNotAnInterface:function(){-1!==b.toString.call(this._extend).indexOf("interfaceConstructorFunction")&&a.Error.invalidClassExtend()},_checkExtend:function(){"function"!=typeof this._extend&&a.Error.invalidClassExtend(),this._checkExtendIsNotAnInterface()},check:function(){this._readExtend(),this._checkExtend(),La.prototype.check.call(this)}}),sa("define/class/constructor",{"classConstructorFunction":"This is a class constructor function, use with new"}),Object.assign(Qa.prototype,{_resolvedConstructor:b}),sa("define/class/super",{invalidClassSuper:"Invalid class super",invalidClassSuperMember:"Invalid class super member"});var be=/\.\$super\.(\w+)\b/g;Object.assign(Qa.prototype,{_get$Super:function(a,b,c){var d=this._extend.prototype,e=Xa(d[b]);return c.forEach(function(b){e[b]=Za(a,e,d[b])}),e},_superifiedBody:'var _super_;\nif (this.hasOwnProperty("$super")) {\n    _super_ = this.$super;\n}\nthis.$super = _classDef_._get$Super(this, _methodName_, _superMembers_);\ntry{\n    var _result_ = _method_.apply(this, arguments);\n} finally {\n    if (undefined === _super_) {\n        delete this.$super;\n    } else {\n        this.$super = _super_;\n    }\n}\nreturn _result_;',_getSuperifiedContext:function(a,b,c){return{_method_:a,_methodName_:b,_superMembers_:c,_classDef_:this}},_createSuperified:function(a,b,c){var d=ya(a);return d.body=this._superifiedBody,Ea(d,this._getSuperifiedContext(a,b,c))},_superify:function(a,b){return /\.\$super\b/.exec(a)?this._createSuperified(a,b,$a(a)):a}}),Object.assign(Qa.prototype,{_build:function(){var a,b;return this._resolveConstructor(),a=Ua(this),b=Object.create(this._extend.prototype),a.prototype=b,b.constructor=a,this._buildPrototype(b),a},_addMethodToPrototype:function(a,b,c){a[b]=this._superify(c,b)},_addMemberToPrototype:function(a,b,c){"function"==typeof c?this._addMethodToPrototype(a,b,c):a[b]=c},_buildPrototype:function(a){Jd(this._initialDefinition,function(b,c){"$"!==c.charAt(0)&&"constructor"!==c&&this._addMemberToPrototype(a,c,b)},this)},_setResolvedConstructorToInherited:function(){this._extend!==Object&&(this._resolvedConstructor=this._extend)},_resolveConstructor:function(){
this._initialDefinition.hasOwnProperty("constructor")?this._resolvedConstructor=this._superify(this._initialDefinition.constructor,"constructor"):this._setResolvedConstructorToInherited()}}),_a.prototype=Object.create(La.prototype),Object.assign(_a.prototype,{constructor:_a,_type:"interface"}),_d.interface=_a,sa("define/interface/check",{invalidInterfaceName:"Invalid interface name",invalidInterfaceProperty:"Invalid interface property"}),Object.assign(_a.prototype,{_throwInvalidProperty:a.Error.invalidInterfaceProperty,_reMemberName:/^[a-z][a-zA-Z0-9]*$/,_reservedNames:La.prototype._reservedNames.concat("constructor"),_checkMemberValue:function(b,c){"function"!=typeof c&&a.Error.invalidInterfaceProperty()},_reName:/^I[a-zA-Z0-9]*$/,_throwInvalidName:a.Error.invalidInterfaceName}),sa("define/interface/constructor",{"interfaceConstructorFunction":"This is an interface constructor function, do not invoke"}),Object.assign(_a.prototype,{_build:function(){var a,b;return a=cb(this),b=a.prototype,delete b.constructor,this._buildPrototype(b),a},_buildPrototype:function(a){Jd(this._initialDefinition,function(b,c){"$"!==c.charAt(0)&&(a[c]=b)},this)}}),a.define=db,sa("interfaces",{interfaceExpected:"Expected interface not implemented: {name}"});a.interfaces={isImplementedBy:function(a,b){return!!b&&fb(jb(a),kb(b))},query:function(a,b){return ib(jb(a),b)}};lb("Unknown",{"queryInterface":1}),a.createSortFunction=function(a){return Id(a)||(a=[a]),qb(a)};var ce,de={property:function(a){return"i."+a.property},eq:rb("eq","==="),ne:rb("ne","!=="),lt:rb("lt","<"),lte:rb("lte","<="),gt:rb("gt",">"),gte:rb("gte",">="),not:function(a){return"!"+ce(a.not)},like:function(a){var b=sb(a);return a.group?"("+b+"||[])["+a.group+"]":b},or:rb("or","||"),and:rb("and","&&"),undefined:function(a){return JSON.stringify(a)}},ee=Object.keys(de);ce=function(a){var b=tb(a);return(0,de[b])(a)},a.createFilterFunction=function(a){return r(["i"],ub(a))};var fe=lb("ReadableStream",{"read":1}),ge=lb("WritableStream",{"write":1});lb("Enumerator",{"reset":0,"moveNext":0,"getCurrent":0}),lb("FileStorage",{"getInfo":1,"openTextStream":2,"close":1,"explore":1,"createDirectory":1,"deleteFile":1,"deleteDirectory":1}),sa("stream",{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress",invalidStreamState:"Stream is in an invalid state"}),a.stream={};var he="gpf.stream#progress/read",ie="gpf.stream#progress/write",je=db({$class:"gpf.stream.ReadableString",constructor:function(a){this._buffer=a},read:Eb(function(a){return a.write(this._buffer)}),_buffer:""}),ke=db({$class:"gpf.stream.WritableString",constructor:function(){this._buffer=[]},write:Fb(function(a){return this._buffer.push(a.toString()),Promise.resolve()}),toString:function(){return this._buffer.join("")},_buffer:[]});zb(je),zb(ke),sa("fs",{incompatibleStream:"Incompatible stream"});var le={NOT_FOUND:0,DIRECTORY:1,FILE:2,UNKNOWN:3},me={READING:0,APPENDING:1},ne={},oe={};a.fs={types:{notFound:le.NOT_FOUND,directory:le.DIRECTORY,file:le.FILE,unknown:le.UNKNOWN},openFor:{reading:me.READING,appending:me.APPENDING},getFileStorage:function(){return ne[Bd]||null},read:Hb},sa("path",{unreachablePath:"Unreachable path"}),a.path={join:Qb,parent:Tb,name:Nb,nameOnly:function(a){var b=Nb(a),c=b.lastIndexOf(".");return-1===c?b:b.substr(0,c)},extension:Ob,relative:Ub};var pe=db({$class:"gpf.node.BaseStream",constructor:function(a,b){this._stream=a,"function"==typeof b&&(this._close=b),a.on("error",this._onError.bind(this))},_close:b,close:function(){return this._close()},_stream:null,_invalid:!1,_reject:a.Error.invalidStreamState,_checkIfValid:function(){this._invalid&&a.Error.invalidStreamState()},_onError:function(a){this._invalid=!0,this._reject(a)}}),qe=db({$class:"gpf.node.ReadableStream",$extend:"gpf.node.BaseStream",read:Eb(function(a){var b=this,c=b._stream;return new Promise(function(d,e){b._reject=e,b._checkIfValid(),c.on("data",b._onData.bind(b,a)).on("end",function(){b._invalid=!0,d()})})}),_onData:function(a,b){var c=this,d=c._stream;d.pause(),a.write(b).then(function(){d.resume()},c._reject)}}),re=db({$class:"gpf.node.WritableStream",$extend:"gpf.node.BaseStream",write:Fb(function(a){var b=this,c=b._stream;return new Promise(function(d,e){if(b._reject=e,b._checkIfValid(),c.write(a))return d();c.once("drain",d)})})}),se=db({$class:"gpf.node.FileStorage",getInfo:function(a){return a=Mb(a),new Promise(function(b){yd.exists(a,b)}).then(function(b){return b?Xb("stat",a).then(function(b){return{fileName:zd.basename(a),filePath:Mb(zd.resolve(a)),size:b.size,createdDateTime:b.ctime,modifiedDateTime:b.mtime,type:ac(b)}}):{type:le.NOT_FOUND}})},openTextStream:function(a,b){return me.READING===b?Zb(a):$b(a)},close:function(b){return b instanceof pe?b.close():Promise.reject(new a.Error.IncompatibleStream)},explore:function(a){var b=this;return Xb("readdir",a).then(function(c){return Vb(b,c.map(function(b){return Qb(a,b)}))})},createDirectory:Xb.bind(null,"mkdir"),deleteFile:Xb.bind(null,"unlink"),deleteDirectory:Xb.bind(null,"rmdir")});ne[Ad.NODEJS]=new se,oe[Ad.NODEJS]=Gb;var te=db({$class:"gpf.wscript.BaseStream",constructor:function(a){this._file=a},close:function(){return new Promise(function(a){this._file.Close(),a()}.bind(this))}}),ue=db({$class:"gpf.wscript.ReadableStream",$extend:"gpf.wscript.BaseStream",read:Eb(function(a){var b=this,c=b._file;return new Promise(function(b){function d(){return a.write(c.Read(4096)).then(function(){if(!c.AtEndOfStream)return d()})}return d().then(b)})})}),ve=db({$class:"gpf.wscript.WritableStream",$extend:"gpf.wscript.BaseStream",write:Fb(function(a){var b=this,c=b._file;return new Promise(function(b){c.Write(a),b()})})});sa("fs/wscript",{pathNotExplorable:"Path not explorable"});var we=db({$class:"gpf.wscript.FileStorage",getInfo:function(a){return Promise.resolve(fc(Lb(a).join("\\")))},openTextStream:function(a,b){return a=Lb(a).join("\\"),new Promise(function(c){var d;d=me.READING===b?new ue(xd.OpenTextFile(a,1,!1)):new ve(xd.OpenTextFile(a,8,!0)),c(d)})},close:function(b){return b instanceof te?b.close():Promise.reject(new a.Error.IncompatibleStream)},explore:function(a){var b=this;return new Promise(function(c){c(Vb(b,hc(Lb(a).join("\\"))))})},createDirectory:cc.bind(null,"CreateFolder"),deleteFile:dc.bind(null,"DeleteFile"),deleteDirectory:dc.bind(null,"DeleteFolder")});ne[Ad.WSCRIPT]=new we,oe[Ad.WSCRIPT]=Gb,oe[Ad.BROWSER]=a.Error.notImplemented,oe[Ad.RHINO]=function(a){return new Promise(function(b){b(readFile(a))})},oe[Ad.PHANTOMJS]=function(a){return new Promise(function(b,c){try{b(yd.read(a))}catch(e_){c(new Error(e_))}})};var xe=Object.prototype.toString;a.isLiteralObject=ic,sa("web/tag",{missingNodeName:"Missing node name",unknownNamespacePrefix:"Unknown namespace prefix",unableToUseNamespaceInString:"Unable to use namespace in string"});var ye={"className":"class"},ze={"svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink"},Ae=db({$class:"gpf.web.Tag",constructor:function(a,b,c){this._nodeName=a,this._attributes=b||{},this._children=c},_nodeName:"",_attributes:{},_children:[],_getAttributesAsString:function(){return Object.keys(this._attributes).map(function(a){return lc(a)," "+mc(a)+'="'+v(this._attributes[a],"html")+'"'},this).join("")},_getChildrenAsString:function(){var a=[];return nc(this._children,function(b){a.push(b.toString())}),a.join("")},_getClosingString:function(){return this._children.length?">"+this._getChildrenAsString()+"</"+this._nodeName+">":"/>"},toString:function(){return lc(this._nodeName),"<"+this._nodeName+this._getAttributesAsString()+this._getClosingString()},_createElement:function(a){var b=a.ownerDocument,c=kc(this._nodeName);return c?b.createElementNS(c.namespace,c.name):b.createElement(this._nodeName)},_setAttributesTo:function(a){Jd(this._attributes,function(b,c){var d=kc(c);d?a.setAttributeNS(d.namespace,mc(d.name),b):a.setAttribute(mc(c),b)})},_appendChildrenTo:function(a){var b=a.ownerDocument;nc(this._children,function(c){c instanceof Ae?c.appendTo(a):a.appendChild(b.createTextNode(c.toString()))})},appendTo:function(a){var b=this._createElement(a);return this._setAttributesTo(b),this._appendChildrenTo(b),a.appendChild(b)}});a.web.createTagFunction=oc,a.http={};var Be={GET:"GET",POST:"POST",PUT:"PUT",OPTIONS:"OPTIONS",DELETE:"DELETE",HEAD:"HEAD"},Ce=/([^:\s]+)\s*: ?([^\r]*)/gm;lb("Thenable",{"then":2});a.promisify=sc,a.promisifyDefined=tc;var De={},Ee=0;zc(),a.http.mock=xc,a.http.mock.remove=yc,a.http.mock.reset=zc;var Fe={};Object.assign(a.http,{methods:{get:Be.GET,post:Be.POST,put:Be.PUT,options:Be.OPTIONS,"delete":Be.DELETE,head:Be.HEAD},request:Ac,get:Bc.bind(a.http,Be.GET),post:Bc.bind(a.http,Be.POST),put:Bc.bind(a.http,Be.PUT),options:Bc.bind(a.http,Be.OPTIONS),"delete":Bc.bind(a.http,Be.DELETE),head:Bc.bind(a.http,Be.HEAD)});var Ge=qc("setRequestHeader"),He=rc("send");Fe[Ad.BROWSER]=Fe[Ad.PHANTOMJS]=Ec,Fe[Ad.NODEJS]=function(a,b,c){var d=Jc(a,b);d.on("error",c),Kc(d,a.data)};var Ie=qc("setRequestHeader"),Je=rc("Send");Fe[Ad.WSCRIPT]=function(a,b){var c=Lc(a);Ie(c,a.headers),Je(c,a.data),Mc(c,b)};var Ke=db({$class:"gpf.java.BaseStream",constructor:function(a){this._stream=a},close:function(){return this._stream.close(),Promise.resolve()},_stream:null}),Le=db({$class:"gpf.java.ReadableStream",$extend:Ke,_handleError:function(a){return a instanceof java.util.NoSuchElementException||0===a.message.indexOf("java.util.NoSuchElementException")?Promise.resolve():Promise.reject(a)},read:Eb(function(a){try{var b=new java.util.Scanner(this._stream);return a.write(String(b.useDelimiter("\\A").next()))}catch(e_){return this._handleError(e_)}})}),Me=db({$class:"gpf.java.WritableStream",$extend:Ke,constructor:function(a){this.$super(a),this._writer=new java.io.OutputStreamWriter(a)},write:Fb(function(a){var b=this._writer;return b.write(a),b.flush(),Promise.resolve()}),close:function(){return this._writer.close(),this.$super()},_writer:null});oe[Ad.NASHORN]=function(a){var b=java.nio.file.Paths.get(a);return java.nio.file.Files.exists(b)?new Promise(function(a,c){var d=java.nio.file.Files.newInputStream(b),e=new Le(d),f=new ke;return e.read(f).then(function(){a(f.toString())})["catch"](c)}):Promise.reject(new Error("File not found"))};var Ne=qc("setRequestProperty");Fe[Ad.RHINO]=Sc,Fe[Ad.NASHORN]=Sc,Tc.prototype={execute:b};var Oe=new Tc,Pe=new Tc;Oe.execute=function(a){a._readReject(a._readBuffer.shift())},Pe.execute=function(a){a._readResolve()};var Qe=db({$class:"gpf.stream.BufferedRead",constructor:function(){this._readBuffer=[]},_readBuffer:[],_readWriteToStream:null,_readResolve:null,_readReject:null,_readDataIsToken:function(a){return a instanceof Tc&&(a.execute(this),!0)},_readWriteToOutput:function(){var a=this,b=a._readBuffer.shift();return a._readDataIsToken(b)?Promise.resolve():a._readWriteToStream.write(b).then(function(){if(a._readBuffer.length)return a._readWriteToOutput();a._readNotWriting=!0})},_readNotWriting:!0,_readSafeWrite:function(){var a=this;a._readNotWriting&&(a._readNotWriting=!1,a._readWriteToOutput().then(void 0,function(b){a._readReject(b)}))},_readCheckIfData:function(){this._readBuffer.length&&this._readSafeWrite()},_readCheckIfOutput:function(){this._readWriteToStream&&this._readCheckIfData()},_appendToReadBuffer:function(a){return this._readBuffer=this._readBuffer.concat([].slice.call(arguments)),this._readCheckIfOutput(),this},_completeReadBuffer:function(){this._readBuffer.push(Pe),this._readCheckIfOutput()},_setReadError:function(a){this._readBuffer.push(Oe,a),this._readCheckIfOutput()},read:Eb(function(a){var b=this;return b._readWriteToStream=a,b._readCheckIfData(),new Promise(function(a,c){b._readResolve=a,b._readReject=c})})});zb(Qe);var Re,Se=/\r\n/g,Te=(db({$class:"gpf.stream.LineAdapter",$extend:Qe,constructor:function(){this.$super(),this._buffer=[]},write:Fb(function(a){var b=this;return b._buffer.push(a.toString()),b._process(),Promise.resolve()}),flush:function(){return this._buffer.length&&(this._buffer.push("\n"),this._process()),this._completeReadBuffer(),Promise.resolve()},_buffer:[],_consolidateLines:function(){return this._buffer.join("").replace(Se,"\n").split("\n")},_pushBackLastLineIfNotEmpty:function(a){var b=a.pop();b.length&&this._buffer.push(b)},_process:function(){var a=this,b=a._consolidateLines();a._buffer.length=0,a._pushBackLastLineIfNotEmpty(b),h(b,function(b){a._appendToReadBuffer(b)})}}),lb("FlushableStream",{"flush":0}));Re=Bd===Ad.BROWSER?Uc:Vc;var Ue={};Ue[".json"]=function(a,b){return JSON.parse(b)},sa("require/javascript",{noCommonJSDynamicRequire:"Dynamic require not supported"});var Ve=/[^.]\brequire\b\s*\(\s*(?:['|"]([^"']+)['|"]|[^)]+)\s*\)/g,We=[null,ad,bd,cd];Ue[".js"]=function(a,b){var c=$c(this,a);return _c.call(this,a,b).then(function(a){var d=ed(c.gpf,b,a);return void 0===d?c.promise:d})},sa("require",{invalidRequireConfigureOption:"Invalid configuration option"});var Xe={base:function(a){this.base=a},cache:function(a){h(Object.keys(a),function(b){this.cache[b]=sc(a[b])},this)},clearCache:function(){this.cache={}}};a.require=kd({base:"",cache:{}});var Ye=db({$class:"gpf.stream.ReadableArray",constructor:function(a){this._buffer=a},read:Eb(function(a){function b(){return c.length===d?Promise.resolve():a.write(c[d++]).then(b)}var c=this._buffer,d=0;return b()}),_buffer:[]}),Ze=db({$class:"gpf.stream.WritableArray",constructor:function(){this._buffer=[]},write:Fb(function(a){return this._buffer.push(a),Promise.resolve()}),toArray:function(){return this._buffer},_buffer:[]});zb(Ye),zb(Ze);var $e={flush:Promise.resolve.bind(Promise)};a.stream.pipe=pd,Ld.regexp={"\\":"\\\\","-":"\\-","[":"\\[","]":"\\]","/":"\\/","{":"\\{","}":"\\}","(":"\\(",")":"\\)","*":"\\*","+":"\\+","?":"\\?",".":"\\.","^":"\\^","$":"\\$","|":"\\|"},sa("csv",{invalidCSV:"Invalid CSV syntax (bad quote sequence or missing end of file)"}),a.stream.csv={};var _e=";,\t ".split("");db({$class:"gpf.stream.csv.Parser",$extend:Qe,constructor:function(a){this._readParserOptions(a),this._header?this._parseHeader():this._write=this._writeHeader},_readParserOptions:function(a){var b=this;a&&h(["header","separator","quote","newLine"],function(c){a[c]&&(b["_"+c]=a[c])})},_header:"",_separator:"",_deduceSeparator:function(){var a=this._header;this._separator=k(_e,function(b){if(-1!==a.indexOf(b))return b})||_e[0]},_quote:'"',_newLine:"\n",_columns:[],_buildParsingHelpers:function(){this._unescapeDictionary={},this._unescapeDictionary[this._quote+this._quote]=this._quote,this._parser=new RegExp(t("^(?:([^QS][^S]*)|Q((?:[^Q]|QQ)+)Q)(?=$|S)",{Q:v(this._quote,"regexp"),S:v(this._separator,"regexp")}))},_parseHeader:function(){this._separator||this._deduceSeparator(),this._columns=this._header.split(this._separator),this._buildParsingHelpers(),this._write=this._writeContent},_writeHeader:function(a){this._header=a,this._parseHeader()},_values:[],_content:"",_unescapeQuoted:function(a){return t(a,this._unescapeDictionary)},_addValue:function(a){a[1]?this._values.push(a[1]):this._values.push(this._unescapeQuoted(a[2]))},_nextValue:function(a){return this._content=this._content.substr(a),this._content.length>0},_checkAfterValue:function(a){return this._content.charAt(a[0].length)?this._nextValue(a[0].length+1):(delete this._content,!1)},_extractValue:function(){var a=this._parser.exec(this._content);return!!a&&(this._addValue(a),this._checkAfterValue(a))},_checkForValue:function(){return this._content.charAt(0)===this._separator?(this._values.push(""),this._nextValue(1)):this._extractValue()},_parseValues:function(){for(;this._checkForValue(););},_parseContent:function(){if(this._parseValues(),!this._content)return this._values},_processContent:function(a){return this._content?this._content=this._content+this._newLine+a:(this._values=[],this._content=a),this._parseContent()},_getRecord:function(a){var b={};return h(this._columns,function(c,d){void 0!==a[d]&&(b[c]=a[d])}),b},_writeContent:function(a){var b=this._processContent(a);b&&this._appendToReadBuffer(this._getRecord(b))},write:Fb(function(a){return this._write(a),Promise.resolve()}),flush:function(){if(this._content){var b=new a.Error.InvalidCSV;return this._setReadError(b),Promise.reject(b)}return this._completeReadBuffer(),Promise.resolve()}});a.attributes={};var af=db({$class:"gpf.attributes.Attribute"});sa("define/class/attributes",{unknownAttributesSpecification:"Unknown attributes specification",invalidAttributesSpecification:"Invalid attributes specification"});var bf=/^\[([^\]]+)\]$|./,cf=Qa.prototype._checkMemberName,df=Qa.prototype._checkMemberValue,ef=Qa.prototype._check$Property;Object.assign(Qa.prototype,{_hasInheritedMember:function(a){return this._extend&&void 0!==this._extend.prototype[a]},_hasMember:function(a){return this._initialDefinition.hasOwnProperty(a)||this._hasInheritedMember(a)},_checkAttributeMemberExist:function(b){this._hasMember(b)||a.Error.unknownAttributesSpecification()},_checkMemberName:function(a){var b=qd(a);b?(cf.call(this,b),this._checkAttributeMemberExist(b)):cf.call(this,a)},_checkAttributesSpecification:function(b){g(b)||a.Error.invalidAttributesSpecification(),h(b,function(b){b instanceof af||a.Error.invalidAttributesSpecification()})},_checkMemberValue:function(a,b){qd(a)?this._checkAttributesSpecification(b):df.call(this,a,b)},_check$Property:function(a,b){"attributes"===a?this._checkAttributesSpecification(b):ef.call(this,a,b)}}),Qa.prototype._allowed$Properties.push("attributes");var ff=Qa.prototype._addMemberToPrototype,gf=Qa.prototype._buildPrototype;Object.assign(Qa.prototype,{_attributes:{},_addAttributesFor:function(a,b){this._attributes[a]=b},_addMemberToPrototype:function(a,b,c){var d=qd(b);d?this._addAttributesFor(d,c):ff.call(this,a,b,c)},_buildPrototype:function(a){var b=this._initialDefinition.$attributes;this._attributes={},b&&this._addAttributesFor("$attributes",b),gf.call(this,a)}}),Object.assign(Qa.prototype,{_collectAttributes:function(a,b){Jd(this._attributes,function(c,d){var e=rd(c,b);e.length&&sd(a,d,e)}),this._extendDefinition&&this._extendDefinition._collectAttributes(a,b)},getAttributes:function(a){var b={};return this._collectAttributes(b,a),b}}),a.attributes.get=ud,zb(db({$class:"gpf.stream.Filter",constructor:function(a){this._filter=a},_dataInPromise:void 0,_dataInResolve:b,_dataOutResolve:b,_dataOutReject:b,_waitForData:function(){var a=this;return a._dataInPromise||(a._dataInPromise=new Promise(function(b){a._dataInResolve=b}).then(function(b){return delete a._dataInPromise,delete a._dataInResolve,b})),a._dataInPromise},_writeData:function(a){var b=this;return b._waitForData(),b._dataInResolve(a),new Promise(function(a,c){b._dataOutResolve=a,b._dataOutReject=c}).then(function(a){return delete b._dataOutResolve,delete b._dataOutReject,a},function(a){return delete b._dataOutResolve,delete b._dataOutReject,Promise.reject(a)})},read:Eb(function(a){var b=this;return b._waitForData().then(function(c){return void 0!==c?a.write(c).then(b._dataOutResolve,b._dataOutReject):(b._dataOutResolve(),Promise.resolve())})}),write:Fb(function(a){var b=this;return b._filter(a)?b._writeData(a):Promise.resolve()}),flush:function(){return this._dataInPromise?this._writeData():Promise.resolve()}}))});