
(function(a,b){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],b);}else if(typeof exports!=="undefined"){b(exports);}else if(typeof module!=="undefined"&&module.exports){b(module.exports);}else{b(a.gpf={});}}(this,function(gpf){"use strict";var a="0.1",b,c;if("undefined"!==typeof WScript){b="wscript";c=function(){return this;}.apply(null,[]);c.console={log:function(d){WScript.Echo("    "+d);},info:function(d){WScript.Echo("[?] "+d);},warn:function(d){WScript.Echo("/!\\ "+d);},error:function(d){WScript.Echo("(X) "+d);}};}else if("undefined"!==typeof phantom&&phantom.version){b="phantomjs";c=window;}else if("undefined"!==typeof module&&module.exports){b="nodejs";c=global;}else if("undefined"!==typeof window){b="browser";c=window;}else{b="unknown";c=this;}gpf.version=function(){return a;};gpf.host=function(){return b;};if("nodejs"===gpf.host()||"phantomjs"===gpf.host()){gpf.node={};}gpf.context=function(d){var e,f,g;if(undefined===d){return c;}else{if("string"===typeof d){d=d.split(".");}e=d.length;f=0;if(d[0]==="gpf"){g=gpf;++f;}else{g=c;}for(;f<e;++f){g=g[d[f]];if(undefined===g){break;}}return g;}};gpf.loaded=function(d){if(d){d();}return true;};gpf.ASSERT=function(){};(function(){"use strict";if(undefined===Array.prototype.indexOf){Array.prototype.indexOf=function(d){var e=this.length;while(e--){if(this[e]===d){return e;}}return-1;};}if(undefined===Object.defineProperty){gpf.setReadOnlyProperty=function(d,e,f){d[e]=f;return d;};}else{gpf.setReadOnlyProperty=function(d,e,f){Object.defineProperty(d,e,{enumerable:true,configurable:false,writable:false,value:f});return d;};}}());var d=function(q,r,s){var t,u=q.length,v;for(v=0;v<u;++v){t=r.apply(this,[v,q[v]]);if(undefined!==t){return t;}}return s;},e=function(q,r){var s=q.length,t;for(t=0;t<s;++t){r.apply(this,[t,q[t]]);}},f=function(q,r,s){var t,u;for(u in q){if(q.hasOwnProperty(u)){t=r.apply(this,[u,q[u]]);if(undefined!==t){return t;}}}return s;},g=function(q,r){var s;for(s in q){if(q.hasOwnProperty(s)){r.apply(this,[s,q[s]]);}}},h=function(q,r){this[0][q]=r;},i=function(q,r){var s=this[0],t=this[2];if(undefined!==s[q]){t(s,q,r);}else{s[q]=r;}},j=function(q,r,s){var t,u,v,w=q.length;for(t=0;t<w;++t){u=q[t].a;v=q[t].b;if(u===r&&v===s||v===r&&u===s){return t;}}return undefined;},k=function(q,r,s){if(s&&("object"===typeof q||"object"===typeof r)){if(q instanceof String||r instanceof String){return q.toString()===r.toString();}if(q instanceof Number||r instanceof Number){return q.valueOf()===r.valueOf();}return false;}return false;},l=function(q,r,s,t){if(q!==r){if(typeof q!==typeof r&&!k(q,r,s)){return false;}if(null===q||null===r||"object"!==typeof q){return false;}if(undefined===j(t.done,q,r)){t.todo.push(q);t.todo.push(r);}}return true;},m=function(q,r,s){var t,u,v={todo:[q,r],done:[]};while(0!==v.todo.length){r=v.todo.pop();q=v.todo.pop();if(q.prototype!==r.prototype){return false;}v.done.push({a:q,b:r});u=0;for(t in q){if(q.hasOwnProperty(t)){++u;if(!l(q[t],r[t],s,v)){return false;}}}for(t in r){if(r.hasOwnProperty(t)){--u;}}if(0!==u){return false;}}return true;},n={boolean:function(q,r,s){if("string"===r){if("yes"===q||"true"===q){return true;}return 0!==parseInt(q,10);}if("number"===r){return 0!==q;}return s;},number:function(q,r,s){if("string"===r){return parseFloat(q);}return s;},string:function(q,r,s){gpf.interfaces.ignoreParameter(r);gpf.interfaces.ignoreParameter(s);if(q instanceof Date){return gpf.dateToComparableFormat(q);}return q.toString();},object:function(q,r,s){if(s instanceof Date&&"string"===r){return gpf.dateFromComparableFormat(q);}return s;}},o=Function,p=function(){return undefined;};if("browser"===gpf.host()&&window.HTMLCollection){gpf.isArrayLike=function(q){return q instanceof Array||q instanceof window.HTMLCollection||q instanceof window.NodeList;};}else{gpf.isArrayLike=function(q){return q instanceof Array;};}gpf.each=function(q,r,s){if(undefined===s){if(gpf.isArrayLike(q)){e.apply(this,arguments);}else{g.apply(this,arguments);}return undefined;}if(gpf.isArrayLike(q)){return d.apply(this,arguments);}return f.apply(this,arguments);};gpf.extend=function(q,r,s){var t;if(undefined===s){t=h;}else{t=i;}gpf.each.apply(arguments,[r,t]);return q;};gpf.extend(gpf,{_alpha:"abcdefghijklmnopqrstuvwxyz",_ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",_digit:"0123456789",_func:function(q){if(!q){return p;}else{return new o(q);}},emptyFunction:function(){return p;},value:function(q,r,s){var t=typeof q;if(!s){s=typeof r;}if(s===t){return q;}if("undefined"===t||!q){return r;}return n[s](q,t,r);},like:function(q,r,s){if(q===r){return true;}if(typeof q!==typeof r){return k(q,r,s);}if(null===q||null===r||"object"!==typeof q){return false;}return m(q,r,s);},clone:function(q){return gpf.json.parse(gpf.json.stringify(q));},test:function(q,r){var s;if(q instanceof Array){s=q.length;while(s>0){if(q[--s]===r){return s;}}}else{for(s in q){if(q.hasOwnProperty(s)&&q[s]===r){return s;}}}return undefined;},set:function(q,r){gpf.ASSERT(q instanceof Array,"gpf.set must be used with an Array");var s=q.length;while(s>0){if(q[--s]===r){return q;}}q.push(r);return q;},clear:function(q,r){var s;if(q instanceof Array){s=q.length;while(s>0){if(q[--s]===r){q.splice(s,1);break;}}}else{for(s in q){if(q.hasOwnProperty(s)&&q[s]===r){break;}}}return q;},xor:function(q,r){return q&&!r||!q&&r;},capitalize:function(q){return q.charAt(0).toUpperCase()+q.substr(1);},Callback:function(q,r){if(q){this._handler=q;}if(r){this._scope=r;}}});gpf.extend(gpf.Callback.prototype,{_handler:gpf._func(""),_scope:null,handler:function(){return this._handler;},scope:function(){return this._scope;},call:function(){var q=arguments[0],r=[],s=arguments.length,t;for(t=1;t<s;++t){r.push(arguments[t]);}return this.apply(q,r);},apply:function(q,r){var s=gpf.Callback.resolveScope(this._scope||q);return this._handler.apply(s,r||[]);}});gpf.extend(gpf.Callback,{resolveScope:function(q){if(null===q||undefined===q){q=gpf.context();}return q;},buildParamArray:function(q,r){var s,t,u;if(r){s=r.length;t=new Array(q+s);for(u=0;u<s;++u){t[q]=r[u];++q;}}else{t=new Array(q);}return t;},doApply:function(q,r,s){var t=arguments.length,u=3,v=0;while(u<t){s[v]=arguments[u];++u;++v;}return q.apply(r,s);},bind:function(q,r){gpf.ASSERT("string"===typeof r,"Provide method name");var s=r+":boundToThis";gpf.ASSERT("function"===typeof q[r],"Only methods can be bound");if(undefined===q[s]){q[s]=function(){return q[r].apply(q,arguments);};}return q[s];}});if(gpf.node){gpf.node.buffer2JsArray=function(q){var r=[],s=q.length,t;for(t=0;t<s;++t){r.push(q.readUInt8(t));}return r;};}var q=0,r=function(w,x,y){var z,A;if(y instanceof s){y._broadcastEvent(w);}else if("function"===typeof y||y instanceof gpf.Callback){y.apply(x,[w]);}else{z=y[w.type()];if(undefined===z){z=y["*"];}if(undefined!==z){A=y.scope;if(undefined!==A){x=A;}z.apply(x,[w]);}}},s=function(w){var x,y,z;this._listeners={};if(undefined!==w){this._events=w;y=w.length;for(x=0;x<y;++x){z=w[x];this["on"+z.charAt(0).toUpperCase()+z.substr(1)]=this._onEVENT(x);this._listeners[z]=[];}}},t=function(w){return function(){var x=[this._events[w]],y=arguments.length,z;for(z=0;z<y;++z){x.push(arguments[z]);}return this.addEventListener.apply(this,x);};},u=function(){s.apply(this,arguments);},v=function(w,x,y,z){this._type=w;if(undefined!==x){this._params=x;}if(y){this._cancelable=true;}if(z){this._scope=z;}};gpf.extend(s.prototype,{_listeners:{},_events:null,_onEVENT:function(w){var x=u.prototype._onEVENT.closures,y;if(!x){x=u.prototype._onEVENT.closures=[];}gpf.ASSERT(x.length>=w,"calls must be sequential");while(x.length<=w){y=x.length;x.push(t(y));}return x[w];},addEventListener:function(w,x,y){var z=this._listeners;if(!y){y=false;}if(undefined===z[w]){z[w]=[];}if(y){z[w].unshift(x);}else{z[w].push(x);}return this;},removeEventListener:function(w,x){var y=this._listeners[w],z;if(undefined!==y){z=y.indexOf(x);if(-1!==z){y.splice(z,1);}}return this;},_broadcastEvent:function(w,x){var y,z,A;if(w instanceof v){z=w.type();}else{z=w;}A=this._listeners[z];if(undefined===A){return this;}if(!(w instanceof v)){w=new gpf.events.Event(w,x,true,this);}for(y=0;y<A.length;++y){gpf.events.fire.apply(this,[w,A[y]]);if(w._propagationStopped){break;}}return this;}});u.prototype=new s;gpf.extend(u.prototype,{broadcastEvent:function(){return this._broadcastEvent.apply(this,arguments);}});gpf.extend(v.prototype,{_type:"",_params:{},_cancelable:false,_propagationStopped:false,_defaultPrevented:false,_scope:null,type:function(){return this._type;},scope:function(){return gpf.Callback.resolveScope(this._scope);},cancelable:function(){return this._cancelable;},preventDefault:function(){this._defaultPrevented=true;},defaultPrevented:function(){return this._defaultPrevented;},stopPropagation:function(){this._propagationStopped=true;},get:function(w){return this._params[w];},fire:function(w){return gpf.events.fire(this,w);}});gpf.events={Target:s,Broadcaster:u,Event:v,fire:function(w,x,y){var z;if(undefined===y){y=x;x=undefined;}if(!(w instanceof v)){w=new gpf.events.Event(w,x,true,this);}z=gpf.Callback.resolveScope(this);if(++q>10){gpf.defer(r,0,null,[w,z,y]);}else{r(w,z,y);}--q;return w;}};var w=0,x={},y=function(G){var H=G.scriptTag,I=G.headTag;H.onerror=H.onload=H.onreadystatechange=null;if(I&&H.parentNode){I.removeChild(H);}delete x[G.id];},z=function(){var G=x[this.id];if(!G.done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){setTimeout(function(){G.done=true;gpf.events.fire("load",{url:G.src},G.eventsHandler);},0);y(G);}},A=function(){var G=x[this.id];if(!G.done){G.done=true;gpf.events.fire("error",{url:G.src},G.eventsHandler);y(G);}},B={application:{javascript:"js"},image:{gif:0,jpeg:"jpg,jpeg",png:0},text:{css:0,html:"htm,html",plain:"txt,text,log"}},C=null,D=null,E=function(G,H){var I,J,K,L,M,N;for(I in H){if(H.hasOwnProperty(I)){if(G){J=G+"/"+I;}else{J=I;}L=H[I];if(0===L){K="."+I;D[K]=J;if(undefined===C[J]){C[J]=K;}}else if("string"===typeof L){L=L.split(",");M=L.length;for(N=0;N<M;++N){K="."+L[N];D[K]=J;if(undefined===C[J]){C[J]=K;}}}else{E(J,L);}}}},F=function(){if(null===D){D={};C={};E("",B);}};gpf.http={include:function(G,H){var I={src:G,id:"__gpf_http_"+ ++w,headTag:document.getElementsByTagName("head")[0]||document.documentElement,scriptTag:document.createElement("script"),done:false},J;if(undefined===H){H=new gpf.events.Broadcaster(["load","error"]);}I.eventsHandler=H;x[I.id]=I;J=I.scriptTag;J.language="javascript";J.src=G;J.id=I.id;J.onload=J.onreadystatechange=z;J.onerror=A;if(undefined!==J.async){J.async=true;}setTimeout(function(){I.headTag.insertBefore(J,I.headTag.firstChild);},0);},getMimeType:function(G){var H;F();H=D[G.toLowerCase()];if(undefined===H){H="application/octet-stream";}return H;},getFileExtension:function(G){var H;F();H=C[G.toLowerCase()];if(undefined===H){H=".bin";}return H;}};var G=function(I,J,K){if("string"===typeof I){I=gpf._func(I);}if(!J){J=null;}if(!K){K=[];}return function(){I.apply(gpf.Callback.resolveScope(J),K);};},H;gpf.runAsyncQueue=gpf._func();if("browser"===gpf.host()){G=function(I){I[0].apply(gpf.Callback.resolveScope(I[1]),I[2]);};gpf.defer=function(I,J,K,L){if("string"===typeof I){I=gpf._func(I);}if(!J){J=0;}setTimeout(G,J,[I,K,L]);};}else if("undefined"!==typeof setTimeout){gpf.defer=function(I,J,K,L){if(!J){J=0;}setTimeout(G(I,K,L),J);};}else{gpf._asyncQueue=[];H=function(I,J){return I._dt-J._dt;};gpf.defer=function(I,J,K,L){var M=G(I,K,L);if(!J){J=0;}M._dt=new Date(new Date- -J);gpf._asyncQueue.push(M);gpf._asyncQueue.sort(H);};gpf.runAsyncQueue=function(){var I=gpf._asyncQueue,J;while(I.length){J=I.shift();if(J._dt>new Date){WScript.Sleep(J._dt-new Date);}J();}};}var I=gpf._ALPHA+gpf._alpha+gpf._digit+"+/",J="0123456789ABCDEF",K=function(M,N,O,P){var Q=M.length,R=gpf.bin.isPow2(Q),S,T,U=[],V;if(-1<R&&(undefined===O||O*R<=32)){if(undefined===O){S=32;}else{S=O*R;}T=(1<<S-R)-1;S=(1<<R)-1;while(0!==N){V=N&S;U.unshift(M.charAt(V));N=N>>R&T;}}else{while(0!==N){V=N%Q;U.unshift(M.charAt(V));N=(N-V)/Q;}}if(undefined!==O){if(undefined===P){P=M.charAt(0);}while(U.length<O){U.unshift(P.charAt(U.length%P.length));}}else if(0===U.length){U=[M.charAt(0)];}return U.join("");},L=function(M,N,O){var P=M.length,Q=0,R=0;if(undefined===O){O=M.charAt(0);}while(R<N.length){if(-1===O.indexOf(N.charAt(R))){break;}else{++R;}}while(R<N.length){Q=P*Q+M.indexOf(N.charAt(R++));}return Q;};gpf.bin={pow2:function(M){return 1<<M;},isPow2:function(M){if(0<M&&0===(M&M-1)){var N=0;while(1<M){++N;M>>=1;}return N;}else{return-1;}},toBaseANY:K,fromBaseANY:L,toHexa:function(M,N,O){return K(J,M,N,O);},fromHexa:function(M,N){return L(J,M,N);},toBase64:function(M,N,O){return K(I,M,N,O);},fromBase64:function(M,N){return L(I,M,N);},test:function(M,N){return(M&N)===N;},clear:function(M,N){return M&~N;}};gpf.json={};if("undefined"===typeof JSON){var M=function(O){var P,Q,R,S;P=O instanceof Array;Q=[];for(R in O){if("function"===typeof O[R]){continue;}S=N(O[R]);if(P){Q.push(S);}else{Q.push(R+": "+S);}}if(P){return"["+Q.join(", ")+"]";}else{return"{"+Q.join(", ")+"}";}},N=function(O){var P=typeof O;if("undefined"===P||"function"===P){return;}else if("number"===P||"boolean"===P){return O.toString();}else if("string"===P){return gpf.escapeFor(O,"javascript");}if(null===O){return"null";}else{return M(O);}};gpf.json.stringify=N;gpf.json.parse=function(O){return gpf._func("return "+O)();};}else{gpf.json.stringify=JSON.stringify;gpf.json.parse=JSON.parse;}var R="public|protected|private|static".split("|"),S=0,T=1,U=3,V=true,W=0,X=gpf._alpha+gpf._ALPHA+gpf._digit+"_",Y=function(ab){var bb;ab=ab.toString();bb=ab.indexOf("._super");if(-1===bb){return false;}return-1===X.indexOf(ab.charAt(bb+7));},Z=function(ab,bb){return function(){var cb=this._super,db;this._super=ab;db=bb.apply(this,arguments);if(undefined===cb){delete this._super;}else{this._super=cb;}return db;};};gpf.ClassDefinition=function(ab,bb,cb){this._uid=++W;this._Subs=[];if("function"===typeof ab){this._Constructor=ab;}else{this._name=ab;this._Base=bb;this._definition=cb;this._build();}};gpf.extend(gpf.ClassDefinition.prototype,{_uid:0,uid:function(){return this._uid;},_name:"",name:function(){return this._name;},nameOnly:function(){var ab=this._name,bb=ab.lastIndexOf(".");if(-1===bb){return ab;}else{return ab.substr(bb+1);}},_Base:Object,Base:function(){return this._Base;},_Subs:[],Subs:function(){return this._Subs;},_attributes:null,attributes:function(){if(!this._attributes){this._attributes=new gpf.attributes.Map;}return this._attributes;},_Constructor:function(){},_defConstructor:null,Constructor:function(){return this._Constructor;},_definition:null,addMember:function(ab,bb,cb){var db=this._Constructor.prototype;gpf.ASSERT(ab!=="constructor","No constructor can be added");gpf.ASSERT(undefined===db[ab],"No member can be overridden");if(undefined===cb){cb=S;}else if("string"===typeof cb){cb=R.indexOf(cb);if(-1===cb){cb=S;}}this._addMember(ab,bb,cb);},_addMember:function(ab,bb,cb){var db=this._Constructor.prototype;if(U===cb){gpf.setReadOnlyProperty(db.constructor,ab,bb);}else{db[ab]=bb;}},_processMember:function(ab,bb){var cb=this._definition[ab],db=ab==="constructor",eb,fb,gb;eb=typeof cb;if(U===bb){this._addMember(ab,cb,U);return;}if(db){fb=this._Base;}else{fb=this._Base.prototype[ab];}gb=typeof fb;if("undefined"!==gb&&null!==fb&&eb!==gb){throw gpf.Error.ClassMemberOverloadWithTypeChange();}if("function"===eb&&"undefined"!==gb&&Y(cb)){cb=Z(fb,cb);}if(db){this._defConstructor=cb;}else{this._addMember(ab,cb,bb);}},_processAttribute:function(ab){var bb,cb=this._definition[ab];ab=ab.substr(1,ab.length-2);if(!this._attributes){this._attributes={};}bb=this._attributes[ab];if(undefined===bb){bb=[];}this._attributes[ab]=bb.concat(cb);},_processDefWithVisibility:function(ab){var bb=this._definition,cb,db;db=R[ab];cb=bb[db];this._definition=cb;try{for(db in cb){if(cb.hasOwnProperty(db)){if("["===db.charAt(0)&&"]"===db.charAt(db.length-1)){this._processAttribute(db);}else if("public"===db||"private"===db||"protected"===db||"static"===db){throw gpf.Error.ClassInvalidVisibility();}else{this._processMember(db,ab);}}}if("wscript"===gpf.host()&&cb.constructor!==Object){this._processMember("constructor",ab);}}catch(e){throw e;}finally{this._definition=bb;}},_processDefinition:function(){var ab=this._definition,bb,cb;for(bb in ab){if(ab.hasOwnProperty(bb)){if("["===bb.charAt(0)&&"]"===bb.charAt(bb.length-1)){this._processAttribute(bb);}else{cb=R.indexOf(bb);if(-1===cb){if(bb.charAt(0)==="_"){cb=T;}else{cb=S;}this._processMember(bb,cb);}else{this._processDefWithVisibility(cb);}}}}if("wscript"===gpf.host()&&ab.constructor!==Object){this._processMember("constructor",S);}},_processAttributes:function(){var ab=this._attributes,bb,cb,db;if(ab){delete this._attributes;bb=this._Constructor;cb=bb.prototype;for(db in ab){if(ab.hasOwnProperty(db)){if(db in cb||db==="Class"){gpf.attributes.add(bb,db,ab[db]);}else{console.error("gpf.define: Invalid attribute name '"+db+"'");}}}}},_build:function(){var ab,bb,cb;ab=gpf._func(Q(this._name))(gpf);this._Constructor=ab;ab._gpf=this;V=false;bb=new this._Base;V=true;ab.prototype=bb;bb.constructor=ab;cb=gpf.classDef(this._Base);cb.Subs().push(ab);this._processDefinition();this._processAttributes();}});gpf.classDef=function(ab){if(undefined===ab._gpf){ab._gpf=new gpf.ClassDefinition(ab);}return ab._gpf;};gpf._classInit=function(ab,bb){if(V){var cb=gpf.classDef(ab);if(cb._defConstructor){cb._defConstructor.apply(this,bb);}else{cb._Base.apply(this,bb);}}};function O(){var gpf=arguments[0],ab=_CONSTRUCTOR_=function(){gpf._classInit.apply(this,[ab,arguments]);};return ab;}function P(){var gpf=arguments[0],ab=function _CONSTRUCTOR_(){gpf._classInit.apply(this,[ab,arguments]);};return ab;}function Q(ab){var bb,cb,db,eb;if(-1<ab.indexOf(".")){bb=O;}else{bb=P;}cb=bb.toString().replace("_CONSTRUCTOR_",ab);db=cb.indexOf("{")+1;eb=cb.lastIndexOf("}")-1;return cb.substr(db,eb-db+1);}gpf.define=function(ab,bb,cb){var db,eb,fb,gb,hb;if("string"===typeof bb){bb=gpf.context(bb);}else if("object"===typeof bb){cb=bb;bb=undefined;}if(undefined===bb){bb=Object;}if(-1<ab.indexOf(".")){eb=ab.split(".");gb=eb.pop();fb=gpf.context(eb);}hb=new gpf.ClassDefinition(ab,bb,cb||{});db=hb.Constructor();if(undefined!==fb){fb[gb]=db;}return db;};gpf._genDefHandler=function(ab,bb){ab=ab+".";return function(cb,db,eb){var fb;if(undefined===eb&&"object"===typeof db){eb=db;db=ab+bb;}else if(undefined===db){db=ab+bb;}if(-1===cb.indexOf(".")){cb=ab+cb;}fb=gpf.define(cb,db,eb);return fb;};};var bb=0,cb=gpf._genDefHandler("gpf.attributes","Attribute");gpf.attributes={};function ab(db,eb){eb="$"+eb;gpf[eb]=function(){var fb=gpf._func("return function "+eb+"(args) {"+"this.constructor.apply(this, args);"+"};")();fb.prototype=db.prototype;return function(){return new fb(arguments);};}();}gpf._defAttr=function(db,eb,fb){var gb=db.charAt(0)==="$",hb,ib;if(gb){db=db.substr(1);hb=db+"Attribute";}else{hb=db;}ib=cb(hb,eb,fb);if(gb){ab(ib,db);}return ib;};gpf._defAttr("Attribute",{protected:{_member:"",_alterPrototype:function(db){gpf.interfaces.ignoreParameter(db);}},public:{member:function(){return this._member;}}});gpf._defAttr("$Alias",{private:{_name:""},protected:{_alterPrototype:function(db){ab(db.constructor,this._name);}},public:{constructor:function(db){this._name=db;}}});gpf.define("gpf.attributes.Array",{private:{_array:[]},public:{constructor:function(){this._array=[];},has:function(db){gpf.ASSERT("function"===typeof db,"Expected a class parameter");gpf.ASSERT(db.prototype instanceof gpf.attributes.Attribute,"Expected an Attribute-like class parameter");var eb,fb=this._array,gb=fb.length,hb;for(eb=0;eb<gb;++eb){hb=fb[eb];if(hb instanceof db){return hb;}}return null;},filter:function(db){gpf.ASSERT("function"===typeof db,"Expected a class parameter");gpf.ASSERT(db.prototype instanceof gpf.attributes.Attribute,"Expected an Attribute-like class parameter");var eb,fb=this._array,gb=fb.length,hb,ib=new gpf.attributes.Array,jb=ib._array;for(eb=0;eb<gb;++eb){hb=fb[eb];if(hb instanceof db){jb.push(hb);}}return ib;},each:function(db,eb,fb){eb=gpf.Callback.resolveScope(eb);fb=gpf.Callback.buildParamArray(1,fb);var gb,hb=this._array,ib=hb.length,jb;for(gb=0;gb<ib;++gb){jb=gpf.Callback.doApply(db,eb,fb,hb[gb]);if(undefined!==jb){return jb;}}}}});gpf.define("gpf.attributes.Map",{private:{_members:{},_count:0,_copyTo:function(db,eb,fb){var gb=this._members,hb,ib,jb,kb;if(this._count){for(hb in gb){if(gb.hasOwnProperty(hb)){ib=gb[hb]._array;for(jb=0;jb<ib.length;++jb){kb=ib[jb];if(!eb||eb(hb,kb,fb)){db.add(hb,kb);}}}}}},_filterCallback:function(db,eb,fb){gpf.interfaces.ignoreParameter(db);return eb instanceof fb;}},public:{constructor:function(db){this._members={};this._count=0;if(undefined!==db){this.fillFromObject(db);}},count:function(){return this._count;},add:function(db,eb){var fb=this._members[db];if(undefined===fb){fb=this._members[db]=new gpf.attributes.Array;}fb._array.push(eb);++this._count;},fillFromObject:function(db){return this.fillFromClassDef(gpf.classDef(db.constructor));},fillFromClassDef:function(db){var eb;while(db){eb=db.attributes();if(eb){eb._copyTo(this);}if(db.Base()!==Object){db=gpf.classDef(db.Base());}else{break;}}return this._count;},filter:function(db){gpf.ASSERT("function"===typeof db,"Expected a class parameter");gpf.ASSERT(db.prototype instanceof gpf.attributes.Attribute,"Expected an Attribute-like class parameter");var eb=new gpf.attributes.Map;this._copyTo(eb,this._filterCallback,db);return eb;},member:function(db){var eb=this._members[db];if(undefined===eb||!(eb instanceof gpf.attributes.Array)){if(0===bb){bb=new gpf.attributes.Array;}eb=bb;}return eb;},members:function(){var db=this._members,eb=[],fb;for(fb in db){if(db.hasOwnProperty(fb)){eb.push(fb);}}return eb;},each:function(db,eb,fb){eb=gpf.Callback.resolveScope(eb);fb=gpf.Callback.buildParamArray(2,fb);var gb=this._members,hb,ib;for(hb in gb){if(gb.hasOwnProperty(hb)){ib=gpf.Callback.doApply(db,eb,fb,hb,gb[hb]);if(undefined!==ib){return ib;}}}},addTo:function(db){var eb=this._members,fb;for(fb in eb){if(eb.hasOwnProperty(fb)){gpf.attributes.add(db,fb,eb[fb]);}}}}});gpf.attributes.add=function(db,eb,fb){var gb,hb,ib,jb;gb=gpf.classDef(db).attributes();hb=fb.length;for(ib=0;ib<hb;++ib){jb=fb[ib];jb._member=eb;gb.add(eb,jb);jb._alterPrototype(db.prototype);}};gpf.define("gpf.Error",{public:{code:0,name:"Error",message:""}});var db={"NotImplemented":"Not implemented","Abstract":"Abstract","AssertionFailed":"Assertion failed: {message}","ClassMemberOverloadWithTypeChange":"You can't overload a member to change its type","ClassInvalidVisibility":"Invalid visibility keyword","InterfaceExpected":"Expected interface not implemented: {name}","EnumerableInvalidMember":"$Enumerable can be associated to arrays only","PatternUnexpected":"Invalid syntax (unexpected)","PatternEmpty":"Empty pattern","PatternInvalidSyntax":"Invalid syntax","PatternEmptyGroup":"Syntax error (empty group)","HtmlHandlerMultiplicityError":"Too many $HtmlHandler attributes for '{member}'","HtmlHandlerMissing":"No $HtmlHandler attributes","HtmlHandlerNoDefault":"No default $HtmlHandler attribute","EngineStackUnderflow":"Stack underflow","EngineTypeCheck":"Type check","EncodingNotSupported":"Encoding not supported","EncodingEOFWithUnprocessedBytes":"Unexpected end of stream: unprocessed bytes","XmlInvalidName":"Invalid XML name","ParamsNameRequired":"Missing name","ParamsTypeUnknown":"Type unknown","ParamsRequiredMissing":"Required parameter '{name}' is missing","FileNotFound":"File not found"},eb=function(hb,ib){var jb=db[ib],kb=function(lb){var mb=new gpf.Error,nb,ob;mb.code=hb;mb.name=ib;if(lb){nb={};for(ob in lb){if(lb.hasOwnProperty(ob)){nb["{"+ob+"}"]=lb[ob].toString();}}mb.message=gpf.replaceEx(db[ib],nb);}else{mb.message=jb;}return mb;};kb.CODE=hb;kb.NAME=ib;kb.MESSAGE=jb;return kb;},fb,gb=0;for(fb in db){if(db.hasOwnProperty(fb)){++gb;gpf.Error["CODE_"+fb.toUpperCase()]=gb;gpf.Error[fb]=eb(gb,fb);}}var hb=function(){return this._MEMBER_;},ib=function(){var kb=this._MEMBER_;if(0<arguments.length){this._MEMBER_=arguments[0];}return kb;},jb=gpf._defAttr("ClassAttribute");gpf._defAttr("$ClassProperty",jb,{private:{_writeAllowed:false,_publicName:undefined,_visibility:undefined},protected:{_alterPrototype:function(kb){var lb=this._member,mb=this._publicName,nb=gpf.classDef(kb.constructor),ob,pb,qb;if(!mb){mb=lb.substr(1);}if(this._writeAllowed){ob=ib.toString();}else{ob=hb.toString();}ob=ob.split("_MEMBER_").join(lb);pb=ob.indexOf("{")+1;qb=ob.lastIndexOf("}")-1;ob=ob.substr(pb,qb-pb+1);nb.addMember(mb,gpf._func(ob),this._visibility);}},public:{constructor:function(kb,lb,mb){if(kb){this._writeAllowed=true;}if("string"===typeof lb){this._publicName=lb;}if("string"===typeof mb){this._visibility=mb;}}}});gpf._defAttr("$ClassEventHandler",jb,{});gpf._defAttr("$ClassExtension",jb,{private:{_ofClass:gpf.emptyFunction(),_publicName:""},public:{constructor:function(kb,lb){this._ofClass=kb;if("string"===typeof lb){this._publicName=lb;}}}});var kb=gpf._defAttr("JsonAttribute",{}),lb=gpf._defAttr("$JsonIgnore",kb,{});gpf.json.load=function(mb,nb){var ob=mb.constructor.prototype,pb=new gpf.attributes.Map(mb),qb,rb;for(qb in ob){if("function"===typeof ob[qb]||pb.member(qb).has(lb)){continue;}if(0===qb.indexOf("_")){rb=qb.substr(1);}else{rb=qb;}if(rb in nb){mb[qb]=nb[rb];}else{mb[qb]=ob[qb];}}return mb;};gpf.json.save=function(mb){var nb={},ob=mb.constructor.prototype,pb=new gpf.attributes.Map(mb),qb,rb,sb;for(qb in ob){if("function"===typeof ob[qb]||pb.member(qb).has(lb)){continue;}if(0===qb.indexOf("_")){rb=qb.substr(1);}else{rb=qb;}sb=mb[qb];if(sb!==ob[qb]){nb[rb]=sb;}}return nb;};gpf.interfaces={isImplementedBy:function(ob,pb){var qb;for(qb in pb.prototype){if("constructor"===qb||"extend"===qb){continue;}if(typeof pb.prototype[qb]!==typeof ob[qb]){return false;}}return true;},query:function(ob,pb,qb){var rb=null;if(gpf.interfaces.isImplementedBy(ob,pb)){return ob;}else if(gpf.interfaces.isImplementedBy(ob,gpf.interfaces.IUnknown)){rb=ob.queryInterface(pb);}if(null===rb&&qb){throw gpf.Error.InterfaceExpected({name:gpf.classDef(pb).name()});}return rb;}};if(!gpf.interfaces.ignoreParameter){gpf.interfaces.ignoreParameter=function(){};}gpf._defIntrf=gpf._genDefHandler("gpf.interfaces","Interface");gpf._defIntrf("Interface");gpf._defIntrf("IEventTarget",{addEventListener:function(ob,pb,qb,rb){gpf.interfaces.ignoreParameter(ob);gpf.interfaces.ignoreParameter(pb);gpf.interfaces.ignoreParameter(qb);gpf.interfaces.ignoreParameter(rb);},removeEventListener:function(ob,pb,qb){gpf.interfaces.ignoreParameter(ob);gpf.interfaces.ignoreParameter(pb);gpf.interfaces.ignoreParameter(qb);}});gpf._defIntrf("IUnknown",{queryInterface:function(ob){gpf.interfaces.ignoreParameter(ob);return null;}});function mb(ob){var pb=new gpf.attributes.Map(this).member("Class").filter(gpf.attributes.InterfaceImplementAttribute),qb,rb;for(qb=0;qb<pb.length();++qb){rb=pb.get(qb);if(rb._interfaceDefinition===ob){if(rb._builder){return rb._builder(this);}break;}}return null;}function nb(ob){return function(){var pb=mb.apply(this,arguments);if(null===pb){pb=ob.apply(this,arguments);}return pb;};}gpf._defAttr("$InterfaceImplement",{private:{"[_interfaceDefinition]":[gpf.$ClassProperty(false,"which")],_interfaceDefinition:gpf.emptyFunction(),"[_builder]":[gpf.$ClassProperty(false,"how")],_builder:null},protected:{_alterPrototype:function(ob){var pb=this._interfaceDefinition.prototype,qb=gpf.classDef(this._interfaceDefinition),rb,sb;sb=new gpf.attributes.Map;sb.fillFromClassDef(qb);sb.addTo(ob.constructor);if(!this._builder){for(rb in pb){if(!(rb in ob)){ob[rb]=pb[rb];}}return;}if(undefined!==ob.queryInterface){if(mb!==ob.queryInterface){ob.queryInterface=nb(ob.queryInterface);}}else{ob.queryInterface=mb;gpf.attributes.add(ob.constructor,"Class",[gpf.$InterfaceImplement(gpf.interfaces.IUnknown)]);}}},public:{constructor:function(ob,pb){this._interfaceDefinition=ob;if(pb){this._builder=pb;}}}});var qb=gpf.interfaces,rb=gpf.attributes;gpf._defIntrf("IEnumerable",{reset:function(){},moveNext:function(){return false;},current:function(){return null;}});function ob(sb){var tb=-1;return{reset:function(){tb=-1;},moveNext:function(){++tb;return tb<sb.length;},current:function(){return sb[tb];}};}function pb(sb){var tb=new rb.Map(sb).filter(rb.EnumerableAttribute),ub=tb.members();gpf.ASSERT(ub.length===1,"Only one member can be defined as enumerable");return ob(sb[ub[0]]);}gpf._defAttr("$Enumerable",rb.ClassAttribute,{_alterPrototype:function(sb){if(!gpf.isArrayLike(sb[this._member])){throw gpf.Error.EnumerableInvalidMember();}rb.add(sb.constructor,"Class",[new rb.InterfaceImplementAttribute(qb.IEnumerable,pb)]);}});var sb=gpf.interfaces,tb=gpf.attributes,ub;ub=gpf._defIntrf("IReadOnlyArray",{length:function(){return 0;},get:function(vb){sb.ignoreParameter(vb);return undefined;}});gpf._defIntrf("IArray",ub,{set:function(vb,wb){sb.ignoreParameter(vb);sb.ignoreParameter(wb);return undefined;}});gpf._defAttr("ClassArrayInterfaceAttribute",tb.ClassAttribute,{"[Class]":[gpf.$Alias("ClassIArray")],_writeAllowed:false,constructor:function(vb){if(vb){this._writeAllowed=true;}},_alterPrototype:function(vb){var wb;if(this._writeAllowed){wb=sb.IArray;}else{wb=sb.IReadOnlyArray;}tb.add(vb.constructor,"Class",[gpf.$InterfaceImplement(wb)]);vb.length=gpf._func("return this."+this._member+".length;");vb.get=gpf._func("return this."+this._member+"[arguments[0]];");if(this._writeAllowed){vb.set=gpf._func("var i=arguments[0],"+"v=this."+this._name+"[i];this."+this._member+"[i]=arguments[1];return v;");}}});tb.add(tb.Array,"_array",[gpf.$ClassIArray(false)]);gpf.arrayOrItem=function(vb,wb){if(undefined===wb){return Array.prototype.slice.call(vb,0);}else if(0===vb.length){return undefined;}else if(-1===wb){return vb[vb.length-1];}else if(wb<-1||wb>vb.length-1){return undefined;}else{return vb[wb];}};var vb=gpf.interfaces,wb=gpf.events.fire,xb=256,yb=0,zb=1,Ab=2,Bb=3;gpf._defIntrf("IReadableStream",{"[read]":[gpf.$ClassEventHandler()],read:function(Cb,Db){gpf.interfaces.ignoreParameter(Cb);gpf.interfaces.ignoreParameter(Db);},static:{EVENT_ERROR:"error",EVENT_DATA:"data",EVENT_END_OF_STREAM:"eos",EXCEPTION_READ_IN_PROGRESS:{message:"Read in progress"}}});gpf._defIntrf("IWritableStream",{"[write]":[gpf.$ClassEventHandler()],write:function(Cb,Db){gpf.interfaces.ignoreParameter(Cb);gpf.interfaces.ignoreParameter(Db);},static:{EVENT_ERROR:"error",EVENT_READY:"ready",EXCEPTION_WRITE_IN_PROGRESS:{message:"Read in progress"}}});gpf._defIntrf("IStream",{"[read]":[gpf.$ClassEventHandler()],read:function(Cb,Db){gpf.interfaces.ignoreParameter(Cb);gpf.interfaces.ignoreParameter(Db);},"[write]":[gpf.$ClassEventHandler()],write:function(Cb,Db){gpf.interfaces.ignoreParameter(Cb);gpf.interfaces.ignoreParameter(Db);}});gpf._defIntrf("ITextStream",vb.IStream,{});gpf.stream={};gpf.define("gpf.stream.BufferedOnRead",{"[Class]":[gpf.$InterfaceImplement(vb.IReadableStream)],protected:{_buffer:[],_bufferLength:0,_readSize:xb,_addToBuffer:function(Cb){gpf.interfaces.ignoreParameter(Cb);throw gpf.Error.Abstract();},_endOfInputStream:function(){},_readFromBuffer:function(Cb){gpf.ASSERT(0!==this._buffer.length,"Buffer is not empty");if("string"===this._buffer[0]){return this._readFromStringBuffer(Cb);}else{return this._readFromByteBuffer(Cb);}},_readFromStringBuffer:function(Cb){var Db=gpf.stringExtractFromStringArray(this._buffer,Cb);this._bufferLength-=Db.length;return Db;},_readFromByteBuffer:function(Cb){this._bufferLength-=Cb;return this._buffer.splice(0,Cb);}},public:{constructor:function(Cb){this._iStream=vb.query(Cb,vb.IReadableStream,true);this._buffer=[];},read:function(Cb,Db){var Eb=this._iState,Fb=this._bufferLength;if(zb===Eb){throw vb.IReadableStream.EXCEPTION_READ_IN_PROGRESS;}else if(Cb<Fb||Fb&&Bb===Eb){if(0===Cb||Cb>Fb){Cb=Fb;}wb.apply(this,[vb.IReadableStream.EVENT_DATA,{buffer:this._readFromBuffer(Cb)},Db]);}else if(Bb===Eb){wb.apply(this,[vb.IReadableStream.EVENT_END_OF_STREAM,Db]);}else{if(yb===this._iState){this._cbRead=new gpf.Callback(this._onRead,this);}this._iState=zb;this._size=Cb;this._eventsHandler=Db;this._iStream.read(this._readSize,this._cbRead);}}},private:{_iStream:null,_cbRead:null,_iState:yb,_size:0,_eventsHandler:null,_onRead:function(Cb){var Db=Cb.type();if(Db===vb.IReadableStream.EVENT_END_OF_STREAM){this._iState=Bb;this._endOfInputStream();return this.read(this._size,this._eventsHandler);}else if(Db===vb.IReadableStream.EVENT_ERROR){wb.apply(this,[Cb,this._eventsHandler]);}else{this._iState=Ab;this._addToBuffer(Cb.get("buffer"));if(0<this._bufferLength){return this.read(this._size,this._eventsHandler);}else{this._iStream.read(xb,this._cbRead);}}}}});gpf.define("gpf.stream.BitReader","gpf.stream.BufferedOnRead",{"[Class]":[gpf.$InterfaceImplement(vb.IReadableStream)],protected:{_addToBuffer:function(Cb){this._buffer=this._buffer.concat(Cb);this._bufferLength+=Cb.length*8;},_readFromBuffer:function(Cb){var Db=this._buffer,Eb=[],Fb=this._bit,Gb,Hb=0,Ib=0;Gb=Db[0];while(0<Cb){--Cb;Ib<<=1;if(0!==(Gb&Fb)){Ib|=1;}--this._bufferLength;if(Fb===1){Db.shift();Gb=Db[0];Fb=128;}else{Fb>>=1;}if(Hb===7){Eb.push(Ib);Ib=0;Hb=0;}else{++Hb;}}if(Hb!==0){Eb.push(Ib);}this._bit=Fb;return Eb;}},private:{_bit:128}});var Cb=gpf.define("AbstractStreamReader",{public:{constructor:function(Fb,Gb){this._scope=gpf.Callback.resolveScope(Fb);this._eventsHandler=Gb;},read:function(Fb){Fb.read(this._readSize,gpf.Callback.bind(this,"callback"));}},protected:{_readSize:0,_consolidateBuffer:function(){throw gpf.Error.Abstract();return[];},_addBuffer:function(Fb){gpf.interfaces.ignoreParameter(Fb);throw gpf.Error.Abstract();}},private:{_scope:null,_eventsHandler:null,callback:function(Fb){var Gb=Fb.type(),Hb=Fb.scope();if(Gb===vb.IReadableStream.EVENT_END_OF_STREAM){wb.apply(this._scope,[vb.IReadableStream.EVENT_DATA,{buffer:this._consolidateBuffer()},this._eventsHandler]);}else if(Gb===vb.IReadableStream.EVENT_ERROR){wb.apply(this._scope,[Fb,this._eventsHandler]);}else{this._addBuffer(Fb.get("buffer"));this.read(Hb);}}}}),Db=gpf.define("StreamReader",Cb,{public:{constructor:function(Fb,Gb,Hb){this._super(Fb,Gb);this._concatMethod=Hb;}},protected:{_consolidateBuffer:function(){return this._concatMethod(this._buffer);},_addBuffer:function(Fb){this._buffer=this._concatMethod(this._buffer,Fb);}},private:{_buffer:undefined,_concatMethod:null}}),Eb=gpf.define("B64StreamReader",Cb,{public:{constructor:function(Fb,Gb){this._super(Fb,Gb);this._buffer=[];}},protected:{_readSize:6,_consolidateBuffer:function(){return this._buffer.join("");},_addBuffer:function(Fb){this._buffer.push(gpf.bin.toBase64(Fb[0]));}},private:{_buffer:[]}});gpf.stream.readAll=function(Fb,Gb,Hb){Fb=gpf.interfaces.query(Fb,vb.IReadableStream,true);new Db(this,Hb,Gb).read(Fb);};gpf.stream.readAllAsB64=function(Fb,Gb){Fb=new gpf.stream.BitReader(Fb);new Eb(this,Gb).read(Fb);};if(gpf.node){gpf.define("gpf.node.ReadableStream",{"[Class]":[gpf.$InterfaceImplement(vb.IReadableStream)],public:{constructor:function(Fb){this._stream=Fb;this._stream.on("data",gpf.Callback.bind(this,"_onData"));this._stream.on("end",gpf.Callback.bind(this,"_onEnd"));this._stream.on("error",gpf.Callback.bind(this,"_onError"));},"[read]":[gpf.$ClassEventHandler()],read:function(Fb,Gb){if(null!==this._eventsHandler){throw vb.IReadableStream.EXCEPTION_READ_IN_PROGRESS;}this._eventsHandler=Gb;this._stream.read(Fb);}},protected:{_eventsHandler:null,_getEventsHandler:function(){var Fb=this._eventsHandler;this._eventsHandler=null;return Fb;},_onData:function(Fb){gpf.events.fire("data",{buffer:gpf.node.buffer2JsArray(Fb)},this._getEventsHandler());},_onEnd:function(){gpf.events.fire("eos",this._getEventsHandler());},_onError:function(Fb){gpf.events.fire("error",{error:Fb},this._getEventsHandler());}},private:{_stream:null}});gpf.define("gpf.node.WritableStream",{"[Class]":[gpf.$InterfaceImplement(vb.IWritableStream)],public:{constructor:function(Fb){this._stream=Fb;},"[write]":[gpf.$ClassEventHandler()],write:function(Fb,Gb){gpf.interfaces.ignoreParameter(Fb);gpf.interfaces.ignoreParameter(Gb);}},private:{_stream:null}});}var Hb=gpf.interfaces,Ib=gpf.events.fire,Jb={javascript:{"\\":"\\\\","\"":"\\\"","\n":"\\n","\r":"\\r","\t":"\\t"},xml:{"&":"&amp;","<":"&lt;",">":"&gt;"},html:{"&":"&amp;","<":"&lt;",">":"&gt;","\xE9":"&eacute;","\xE8":"&egrave;","\xEA":"&ecirc;","\xE1":"&aacute;","\xE0":"&agrave;"}},Kb=gpf.define("StringStream",{"[Class]":[gpf.$InterfaceImplement(gpf.interfaces.ITextStream)],public:{constructor:function(Lb){if(undefined!==Lb&&Lb.length){this._buffer=[Lb];}else{this._buffer=[];}},read:function(Lb,Mb){var Nb;if(0===this._buffer.length){Ib.apply(this,[Hb.IReadableStream.EVENT_END_OF_STREAM,Mb]);}else{Nb=gpf.stringExtractFromStringArray(this._buffer,Lb);Ib.apply(this,[Hb.IReadableStream.EVENT_DATA,{buffer:Nb},Mb]);}},write:function(Lb,Mb){gpf.ASSERT(Lb&&Lb.length,"Write must contain data");this._buffer.push(Lb);Ib.apply(this,[Hb.IReadableStream.EVENT_READY,Mb]);},consolidateString:function(){return this._buffer.join("");}},private:{_buffer:[]}});gpf.extend(gpf,{"[capitalize]":[gpf.$ClassExtension(String)],"[replaceEx]":[gpf.$ClassExtension(String)],replaceEx:function(Lb,Mb){var Nb=Lb,Ob;for(Ob in Mb){if(Mb.hasOwnProperty(Ob)){if(-1<Nb.indexOf(Ob)){Nb=Nb.split(Ob).join(Mb[Ob]);}}}return Nb;},"[escapeFor]":[gpf.$ClassExtension(String)],escapeFor:function(Lb,Mb){var Nb=Jb[Mb];if(undefined!==Nb){Lb=gpf.replaceEx(Lb,Nb);if("javascript"===Mb){Lb="\""+Lb+"\"";}}return Lb;},"[stringExtractFromStringArray]":[gpf.$ClassExtension(String,"fromStringArray")],stringExtractFromStringArray:function(Lb,Mb){var Nb=Lb.length,Ob,Pb,Qb,Rb;if(!Mb){Ob=Lb.splice(0,Nb).join("");}else{Pb=0;do{Qb=Lb[Pb];Rb=Qb.length;if(Rb<=Mb){++Pb;Mb-=Rb;}else{break;}}while(0<Mb&&Pb<Nb);if(0===Mb){Ob=Lb.splice(0,Pb).join("");}else if(Pb<Nb){Ob=[];if(0<Pb){Ob.push(Lb.splice(0,Pb-1).join(""));}Qb=Lb.shift();Ob.push(Qb.substr(0,Mb));Lb.unshift(Qb.substr(Mb));Ob=Ob.join("");}else{Ob=Lb.splice(0,Nb).join("");}}return Ob;},"[stringToStream]":[gpf.$ClassExtension(String,"toStream")],stringToStream:function(Lb){return new Kb(Lb);},"[stringFromStream]":[gpf.$ClassExtension(String,"fromStream")],stringFromStream:function(Lb,Mb){if(Lb instanceof Kb){Ib.apply(this,[Hb.IReadableStream.EVENT_DATA,{buffer:Lb.consolidateString()},Mb]);}else{gpf.stream.readAll(Lb,Fb,Mb);}},"[stringFromFile]":[gpf.$ClassExtension(String,"fromFile")],stringFromFile:function(Lb,Mb,Nb){gpf.fs.getInfo(Lb,new Gb(Lb,Mb,Nb));}});function Fb(Lb,Mb){if(undefined===Lb){return[Mb];}else if(undefined!==Mb){Lb.push(Mb);return Lb;}else{return Lb.join("");}}function Gb(Lb,Mb,Nb){this._path=Lb;this._encoding=Mb;this._eventsHandler=Nb;this.scope=this;}Gb.prototype={_path:null,_encoding:"",_eventsHandler:null,_step:0,scope:null};Gb.prototype.ready=function(Lb){if(0===this._step){var Mb=Lb.get("info");if(Mb.type===gpf.fs.TYPE_NOT_FOUND){gpf.events.fire("error",{error:gpf.Error.FileNotFound()},this._eventsHandler);return;}this._step=1;gpf.fs.readAsBinaryStream(this._path,this);}else{var Nb=Lb.get("stream");var Ob=gpf.encoding.createDecoder(Nb,this._encoding);gpf.stringFromStream(Ob,this);}};Gb.prototype["*"]=function(Lb){gpf.events.fire(Lb,this._eventsHandler);};var Mb=gpf.interfaces,Nb=gpf.events.fire,Ob=gpf.define("ArrayStream",{"[Class]":[gpf.$InterfaceImplement(gpf.interfaces.IStream)],public:{constructor:function(Pb){if(undefined!==Pb&&Pb.length){this._buffer=[].concat(Pb);}else{this._buffer=[];}},read:function(Pb,Qb){var Rb;if(0===this._buffer.length){Nb.apply(this,[Mb.IReadableStream.EVENT_END_OF_STREAM,Qb]);}else if(undefined===Pb||Pb>this._buffer.length){Rb=this._buffer;this._buffer=[];Nb.apply(this,[Mb.IReadableStream.EVENT_DATA,{buffer:Rb},Qb]);}else{Rb=this._buffer.splice(0,Pb);Nb.apply(this,[Mb.IReadableStream.EVENT_DATA,{buffer:Rb},Qb]);}},write:function(Pb,Qb){gpf.ASSERT(Pb&&Pb.length,"Write must contain data");this._buffer=this._buffer.concat(Pb);Nb.apply(this,[Mb.IWritableStream.EVENT_READY,Qb]);},consolidateArray:function(){return[].concat(this._buffer);}},private:{_buffer:[]}});gpf.extend(gpf,{"[arrayToStream]":[gpf.$ClassExtension(Array,"toStream")],arrayToStream:function(Pb){return new Ob(Pb);},"[arrayFromStream]":[gpf.$ClassExtension(Array,"fromStream")],arrayFromStream:function(Pb,Qb){if(Pb instanceof Ob){Nb.apply(this,[Mb.IReadableStream.EVENT_DATA,{buffer:Pb.consolidateArray()},Qb]);return;}else{gpf.stream.readAll(Pb,Lb,Qb);}}});function Lb(Pb,Qb){if(undefined===Pb){return Qb;}else if(undefined!==Qb){Pb=Pb.concat(Qb);return Pb;}else{return Pb;}}var Pb=function(Qb){if(10>Qb){return"0"+Qb;}else{return Qb;}};gpf.extend(gpf,{"[dateToComparableFormat]":[gpf.$ClassExtension(Date,"toComparableFormat")],dateToComparableFormat:function(Qb,Rb){if(undefined===Rb){Rb=true;}var Sb=[Qb.getFullYear(),"-",Pb(Qb.getMonth()+1),"-",Pb(Qb.getDate())];if(Rb){Sb.push(" ",Pb(Qb.getHours()),":",Pb(Qb.getMinutes()),":",Pb(Qb.getSeconds()));}return Sb.join("");},"[dateFromComparableFormat]":[gpf.$ClassExtension(String)],dateFromComparableFormat:function(Qb){var Rb=new Date;Rb.setFullYear(parseInt(Qb.substr(0,4),10),parseInt(Qb.substr(5,2),10)-1,parseInt(Qb.substr(8,2),10));if(10<Qb.length){Rb.setHours(parseInt(Qb.substr(11,2),10),parseInt(Qb.substr(14,2),10),parseInt(Qb.substr(17,2),10),0);}else{Rb.setHours(0,0,0,0);}return Rb;}});var Qb=gpf.events.fire,Rb=function(Tb){var Ub;if(this._list.length){Ub=this._list.shift();this._pos=0;Qb.apply(this,[gpf.Promise.THEN,Tb,Ub]);}},Sb=function(Tb){var Ub,Vb;while(this._list.length){Ub=this._list.shift();if(undefined===Vb){Vb=Qb.apply(this,[gpf.Promise.FAIL,Tb,Ub]);}else{Qb.apply(this,[Vb,Ub]);}if(Vb._propagationStopped){break;}}};gpf.define("gpf.Promise",{private:{_list:[],_pos:0},public:{constructor:function(){this._list=[];},then:function(Tb){this._list.splice(this._pos,0,Tb);++this._pos;return this;},resolve:function(Tb){gpf.defer(Rb,0,this,[Tb]);},reject:function(Tb){gpf.defer(Sb,0,this,[Tb]);}},static:{THEN:"then",REJECT:"reject"}});var Tb=gpf.interfaces,Ub=gpf.events.fire,Vb={},Wb=function(bc){return function(){this._calls.push(new Zb(true,bc,arguments,0));this._start();return this;};},Xb=function(bc,cc){return function(){this._calls.push(new Zb(false,bc,arguments,cc));this._start();return this;};},Yb=function(bc){var cc={public:{},static:{interface:bc}},dc=cc.public,ec=new gpf.attributes.Map,fc=bc.prototype,gc,hc;ec.fillFromClassDef(gpf.classDef(bc));for(gc in fc){if(fc.hasOwnProperty(gc)){hc=fc[gc];if("constructor"===gc){continue;}gpf.ASSERT("function"===typeof hc,"Only methods");if(ec.member(gc).has(gpf.attributes.ClassEventHandlerAttribute)){dc[gc]=Xb(gc,hc.length);}else{dc[gc]=Wb(gc);}}}return cc;},Zb=gpf.define("MethodCall",{private:{_synchronous:true,_name:"",_args:[],_length:0},public:{constructor:function(bc,cc,dc,ec){this._synchronous=bc;this._name=cc;this._args=dc;this._length=ec;},apply:function(bc,cc){var dc=this._args,ec=bc[this._name],fc,gc,hc;if(this._synchronous){ec.apply(bc,dc);cc.call();}else{gc=this._length;fc=new Array(gc);fc[--gc]=cc;if(gc>dc.length){gc=dc.length;}for(hc=0;hc<gc;++hc){fc[hc]=dc[hc];}ec.apply(bc,fc);}}}}),ac=gpf.define("WrapInterface",{private:{_iHandler:null,_calls:[],_callback:null,_catch:null,_finally:null,_finalEventType:"done",_asyncResult:function(bc){var cc=this._iHandler,dc;if(bc&&bc.type()==="error"){if(this._catch){Ub.apply(cc,[bc,this._catch]);}return;}dc=this._calls;if(dc.length){dc.shift().apply(cc,this._callback);}else if(this._finally){Ub.apply(cc,[this._finalEventType,this._finally]);}},_needStart:true,_start:function(){if(this._needStart){this._needStart=false;gpf.defer(this._asyncResult,0,this);}}},public:{constructor:function(bc){this._iHandler=Tb.query(bc,this.constructor.interface);this._calls=[];this._callback=new gpf.Callback(this._asyncResult,this);},$catch:function(bc){this._catch=bc;this._start();return this;},$finally:function(bc,cc){this._finally=bc;if(cc){this._finalEventType=cc;}this._start();return this;}}});Tb.wrap=function(bc){var cc=gpf.classDef(bc),dc=Vb[cc.uid()],ec;if(undefined===dc){if(bc===Tb.Interface){dc=ac;}else{ec=Tb.wrap(cc.Base());dc=gpf.define("Wrap"+cc.nameOnly(),ec,Yb(bc));}Vb[cc.uid()]=dc;}return dc;};gpf.define("gpf.Parser",{public:{constructor:function(){this.reset();},reset:function(bc){this._pos=0;this._line=0;this._column=0;this._setParserState(bc);},currentPos:function(){return{pos:this._pos,line:this._line,column:this._column};},parse:function(){var bc=arguments.length,cc,dc;for(cc=0;cc<bc;++cc){dc=arguments[cc];if(null===dc){this._finalizeParserState();}else{gpf.ASSERT("string"===typeof dc,"string expected");this._parse(dc);}}},setOutputHandler:function(bc){gpf.ASSERT(bc instanceof Array||bc.apply,"Invalid output handler");this._outputHandler=bc;}},protected:{_initialParserState:null,_ignoreCarriageReturn:false,_ignoreLineFeed:false,_finalizeParserState:function(){this._pState(0);},_setParserState:function(bc){if(!bc){bc=this._initialParserState;}if(bc!==this._pState){this._pState=bc;}},_output:function(bc){var cc=this._outputHandler;if(cc instanceof Array){cc.push(bc);}else if(null!==cc){cc.apply(this,[bc]);}}},private:{_pos:0,_line:0,_column:0,_pState:null,_outputHandler:null,_parse:function(bc){var cc,dc,ec,fc,gc=false;cc=bc.length;for(dc=0;dc<cc;++dc){ec=bc.charAt(dc);if("\r"===ec&&this._ignoreCarriageReturn){ec=0;}if("\n"===ec&&this._ignoreLineFeed){gc=true;ec=0;}if(ec){fc=this._pState.apply(this,[ec]);if(undefined!==fc){this._setParserState(fc);}}++this._pos;if("\n"===ec||gc){++this._line;this._column=0;}else{++this._column;}}}},static:{FINALIZE:null}});gpf.define("gpf.ParserStream",gpf.stream.BufferedOnRead,{public:{constructor:function(bc,cc){this._super(cc);this._parser=bc;this._parser.setOutputHandler(new gpf.Callback(this._output,this));}},protected:{_addToBuffer:function(bc){this._parser.parse(bc);},_endOfInputStream:function(){this._parser.parse(gpf.Parser.FINALIZE);},_readFromBuffer:gpf.stream.BufferedOnRead.prototype._readFromStringBuffer},private:{_output:function(bc){this._buffer.push(bc);this._bufferLength+=bc.length;}}});var bc=gpf.bin.test,cc=gpf.bin.clear,dc=gpf._defIntrf("ITokenizer",{write:function(kc){gpf.interfaces.ignoreParameter(kc);return-1;}}),ec=gpf.define("PatternItem",{private:{"[_min]":[gpf.$ClassProperty(true)],_min:1,"[_max]":[gpf.$ClassProperty(true)],_max:1},public:{parse:function(kc){gpf.interfaces.ignoreParameter(kc);throw gpf.Error.Abstract();return ec.PARSE_IGNORED;},finalize:function(){},reset:function(kc){gpf.interfaces.ignoreParameter(kc);},write:function(kc,lc){gpf.interfaces.ignoreParameter(kc);gpf.interfaces.ignoreParameter(lc);throw gpf.Error.Abstract();return-1;}},static:{PARSE_IGNORED:0,PARSE_PROCESSED:1,PARSE_END_OF_PATTERN:2,PARSE_PROCESSED_EOP:3,CHARS_QUANTIFICATION:"?*+",WRITE_NO_MATCH:-1,WRITE_NEED_DATA:0,WRITE_MATCH:1,WRITE_PATTERN_END:2,WRITE_FINAL_MATCH:3}}),fc=gpf.define("PatternChar",ec,{private:{_match:""},public:{parse:function(kc){this._match=kc;return ec.PARSE_PROCESSED_EOP;},write:function(kc,lc){gpf.interfaces.ignoreParameter(kc);if(lc===this._match){return ec.WRITE_FINAL_MATCH;}return ec.WRITE_NO_MATCH;}}}),gc=gpf.define("PatternRange",ec,{private:{_inc:"",_exc:"",_inRange:false,_parse:function(kc,lc){var mc,nc;if("^"===kc){this._exc=[];}else if("]"===kc){if(this._inRange){throw gpf.Error.PatternInvalidSyntax();}return true;}else if("-"===kc){if(this._inRange||0===lc.length){throw gpf.Error.PatternInvalidSyntax();}this._inRange=true;}else{if(this._inRange){mc=lc[lc.length-1].charCodeAt(0);nc=kc.charCodeAt(0);while(--nc>mc){lc.push(String.fromCharCode(nc));}lc.push(kc);delete this._inRange;}else{lc.push(kc);}}return false;}},public:{parse:function(kc){var lc;if(this.hasOwnProperty("_exc")){if("^"===kc){throw gpf.Error.PatternInvalidSyntax();}lc=this._exc;}else{lc=this._inc;}if("["===kc){if(this.hasOwnProperty("_inc")){throw gpf.Error.PatternInvalidSyntax();}this._inc=[];}else if(this._parse(kc,lc)){return ec.PARSE_PROCESSED_EOP;}return ec.PARSE_PROCESSED;},finalize:function(){this._inc=this._inc.join("");if(this.hasOwnProperty("_exc")){this._exc=this._exc.join("");}},write:function(kc,lc){gpf.interfaces.ignoreParameter(kc);var mc;if(this._inc.length){mc=-1<this._inc.indexOf(lc);}else{mc=true;}if(mc&&this._exc.length){mc=-1===this._exc.indexOf(lc);}if(mc){return ec.WRITE_FINAL_MATCH;}else{return ec.WRITE_NO_MATCH;}}}}),hc=gpf.define("PatternGroup",ec,{private:{_items:[],_choice:false,_optionals:[],_parsedParenthesis:false,_parsedItem:null,_getItems:function(kc){if(this._choice){if(undefined===kc){kc=this._items.length-1;}return this._items[kc];}return this._items;},_lastItem:function(){var kc=this._getItems();return kc[kc.length-1];},_push:function(kc){this._getItems().push(kc);this._parsedItem=kc;return kc;},_parseItem:function(kc){var lc=this._parsedItem,mc;if(lc){mc=lc.parse(kc);if(bc(mc,ec.PARSE_END_OF_PATTERN)){lc.finalize();this._parsedItem=null;mc=cc(mc,ec.PARSE_END_OF_PATTERN);}}else{mc=0;}return mc;},_parseQuantity:function(kc){var lc=this._lastItem();if("*"===kc){lc._min=0;lc._max=0;}else if("+"===kc){lc._max=0;}else if("?"===kc){lc._min=0;}return ec.PARSE_PROCESSED;},_getOptional:function(kc){var lc;lc=kc.length;while(lc--){if(0!==kc[lc].min()){++lc;break;}}return lc;},_reset:function(kc,lc){lc.count=0;lc.sub={};kc.reset(lc.sub);},_getItem:function(kc,lc){var mc=this._getItems(kc.choice);if(lc<mc.length){return mc[lc];}return null;},_writeNoMatch:function(kc,lc,mc){if(lc.count<kc.min()||lc.length>lc.matchingLength+1){return ec.WRITE_NO_MATCH;}kc=this._getItem(lc,lc.index+1);if(null===kc){return ec.WRITE_NO_MATCH;}++lc.index;this._reset(kc,lc);return this.write(lc,mc);},_writeMatch:function(kc,lc){var mc=this._getItem(lc,lc.index+1),nc;if(this._choice&&-1<lc.choice){nc=this._optionals[lc.choice];}else{nc=this._optionals[0];}++lc.count;if(0===kc.max()){this._reset(kc,lc);if(null!==mc&&nc>lc.index){return ec.WRITE_NEED_DATA;}else{return ec.WRITE_MATCH;}}else if(lc.count===kc.max()){if(null===mc){return ec.WRITE_FINAL_MATCH;}++lc.index;this._reset(mc,lc);if(nc<=lc.index){return ec.WRITE_MATCH;}}return ec.WRITE_NEED_DATA;}},public:{constructor:function(){this._items=[];},parse:function(kc){var lc=this._parseItem(kc);if(0!==lc){return lc;}if(-1<ec.CHARS_QUANTIFICATION.indexOf(kc)){return this._parseQuantity(kc);}if("|"===kc){if(!this._choice){this._items=[this._items];this._choice=true;}this._items.push([]);return ec.PARSE_PROCESSED;}else if("["===kc){this._push(new gc);}else if("("===kc){if(this._parsedParenthesis){this._push(new hc);}else{this._parsedParenthesis=true;return ec.PARSE_PROCESSED;}}else if(")"===kc){return ec.PARSE_PROCESSED_EOP;}else{this._push(new fc);}return this._parseItem(kc);},finalize:function(){var kc,lc,mc;mc=this._optionals=[];if(this._choice){kc=this._items.length;for(lc=0;lc<kc;++lc){mc.push(this._getOptional(this._items[lc]));}}else{mc.push(this._getOptional(this._items));}},reset:function(kc){var lc;kc.index=0;if(this._choice){kc.choice=-1;}lc=this._getItems(0)[0];this._reset(lc,kc);},write:function(kc,lc){var mc,nc,oc,pc;if(this._choice&&-1===kc.choice){mc=this._items.length;for(nc=0;nc<mc;++nc){oc=this._items[nc][0];this._reset(oc,kc);pc=oc.write(kc.sub,lc);if(ec.WRITE_NO_MATCH!==pc){kc.choice=nc;return this._writeMatch(oc,kc);}}if(nc===mc){return ec.WRITE_NO_MATCH;}}oc=this._getItem(kc,kc.index);pc=oc.write(kc.sub,lc);if(ec.WRITE_NEED_DATA===pc){return pc;}else if(ec.WRITE_NO_MATCH===pc){return this._writeNoMatch(oc,kc,lc);}else{return this._writeMatch(oc,kc);}}}}),ic=gpf.define("PatternParser",gpf.Parser,{private:{"[_patternItem]":[gpf.$ClassProperty()],_patternItem:null},protected:{_initialParserState:function(kc){this._patternItem.parse(kc);},_finalizeParserState:function(){var kc=this._patternItem;kc.parse(")");kc.finalize();}},public:{constructor:function(){this._super.apply(this,arguments);this._patternItem=new hc;this._patternItem.parse("(");}}}),jc=gpf.define("PatternTokenizer",{"[Class]":[gpf.$InterfaceImplement(dc)],private:{_patternItem:null,_stopMatching:false,_lastResult:0,_totalLength:0,_state:{}},public:{constructor:function(kc){this._patternItem=kc;this._state={};this._patternItem.reset(this._state);},write:function(kc){var lc;if(this._stopMatching){return this._lastResult;}++this._totalLength;lc=this._patternItem.write(this._state,kc);if(0<lc){this._lastResult=this._totalLength;this._stopMatching=bc(lc,ec.WRITE_PATTERN_END);}else if(ec.WRITE_NO_MATCH===lc){this._stopMatching=true;if(0===this._lastResult){this._lastResult=-1;}}return this._lastResult;}}});gpf.define("gpf.Pattern",{private:{_patternItem:null},public:{constructor:function(kc){var lc=new ic;lc.parse(kc,null);this._patternItem=lc.patternItem();},allocate:function(){return new jc(this._patternItem);}}});var kc="error",lc="unknown",mc="keyword",nc="identifier",oc="string",pc="number",qc="symbol",rc="comment",sc="space",tc=99,uc=0,vc=gpf._alpha+gpf._ALPHA+"_$",wc=2,xc=3,yc=4,zc=5,Ac=6,Bc=7,Cc=8,Dc=9,Ec="(){}[]<>|&?,.;:!=+-*/%^~",Fc=10,Gc=11,Hc=" \t\r\n",Ic=12,Jc=0,Kc=0,Lc=1,Mc=2,Nc=3,Oc=4,Pc=["Parsing aborted","Unknown token","Unterminated string","Unterminated comment","Invalid or unsupported string escape"],Qc=function(){return{pos:0,line:0,column:0,state:uc,chars:[],nextPos:0,nextLine:0,nextColumn:0,eventsHandler:null,that:null};},Rc=("break,case,catch,continue,debugger,default,delete,do,"+"else,finally,for,function,if,in,instanceof,new,return,switch,"+"this,throw,try,typeof,var,void,while,with").split(","),Sc=function(){var dd={};dd[uc]=lc;dd[Fc]=qc;dd[Cc]=rc;dd[Dc]=rc;dd[xc]=oc;dd[zc]=oc;dd[Gc]=pc;dd[Ic]=sc;return dd;}(),Tc=function(dd,ed){var fd,gd,hd,id={token:"",pos:dd.pos,line:dd.line,column:dd.column,code:0,message:""};if(undefined!==ed){gd=kc;dd.state=tc;id.code=ed;id.message=Pc[ed-Jc];}else{fd=dd.chars.join("");if(wc===dd.state){if(undefined!==gpf.test(Rc,fd)){gd=mc;}else{gd=nc;}}else{gd=Sc[dd.state];}id.token=fd;}hd=gpf.events.fire.apply(dd.that,[gd,id,dd.eventsHandler]);if(hd.defaultPrevented()){Tc(dd,Kc);}else if(undefined!==ed){throw 0;}dd.state=uc;dd.chars=[];dd.pos=dd.nextPos;dd.line=dd.nextLine;dd.column=dd.nextColumn;},Uc=[0,function(dd,ed,fd){gpf.interfaces.ignoreParameter(ed);if(-1<"(){}[].,;:?".indexOf(dd)){return false;}if(-1<"!^~*/%".indexOf(dd)){return"="===fd;}return"="===fd||dd===fd;},function(dd,ed,fd){if(-1<"+-|&".indexOf(dd)){return false;}if("<"===dd){return"<"===ed[1]&&"="===fd;}if(-1<"=!".indexOf(dd)){return"="===fd;}if(">"===dd){return"="!==ed[1]&&("="===fd||">"===fd);}return false;},function(dd,ed,fd){return">"===dd&&"="!==ed[2]&&"="===fd;},function(){return false;}],Vc=function(dd,ed){var fd=dd[0];return Uc[dd.length](fd,dd,ed);},Wc=function(){var dd={};dd[wc]=function(ed,fd){if(-1===vc.indexOf(fd)&&("0">fd||fd>"9")){Tc(ed);}else{ed.chars.push(fd);}};dd[Gc]=function(ed,fd){if("0">fd||fd>"9"){Tc(ed);}else{ed.chars.push(fd);}};dd[xc]=dd[zc]=function(ed,fd){ed.chars.push(fd);if("\\"===fd){++ed.state;}else if("\n"===fd){Tc(ed,Mc);}else if(xc===ed.state&&"\""===fd){Tc(ed);return true;}else if(zc===ed.state&&"'"===fd){Tc(ed);return true;}return false;};dd[yc]=dd[Ac]=function(ed,fd){if("\\"===fd||"r"===fd||"n"===fd||"t"===fd||"\""===fd||"'"===fd){--ed.state;ed.chars.push(fd);}else{Tc(ed,Oc);}};dd[Bc]=function(ed,fd){if("/"===fd){ed.state=Cc;ed.chars.push(fd);}else if("*"===fd){ed.state=Dc;ed.chars.push(fd);}else{ed.state=Fc;if(Vc(ed.chars,fd)){ed.chars.push(fd);}else{Tc(ed);}}};dd[Cc]=function(ed,fd){if("\n"===fd){Tc(ed);}else{ed.chars.push(fd);}};dd[Dc]=function(ed,fd){ed.chars.push(fd);if("/"===fd&&ed.chars[ed.chars.length-2]==="*"){Tc(ed);return true;}return false;};dd[Ic]=function(ed,fd){if(-1<Hc.indexOf(fd)){ed.chars.push(fd);}else{Tc(ed);}};dd[Fc]=function(ed,fd){if(-1<Ec.indexOf(fd)){if(Vc(ed.chars,fd)){ed.chars.push(fd);}else{Tc(ed);}}else{Tc(ed);}};return dd;}(),Xc=function(dd,ed){dd.chars=[ed];if(-1<vc.indexOf(ed)){dd.state=wc;}else if("0"<=ed&&ed<="9"){dd.state=Gc;}else if("\""===ed){dd.state=xc;}else if("'"===ed){dd.state=zc;}else if("/"===ed){dd.state=Bc;}else if(-1<Ec.indexOf(ed)){dd.state=Fc;}else if(-1<Hc.indexOf(ed)){dd.state=Ic;}else{Tc(dd,Lc);}},Yc=function(dd,ed){var fd=Wc[dd.state];if(undefined!==fd){if(fd(dd,ed)){return;}}if(uc===dd.state){Xc(dd,ed);}},Zc=function(dd,ed){++dd.nextPos;if("\n"===ed){++dd.nextLine;dd.nextColumn=0;}else{++dd.nextColumn;}},ad=function(dd,ed){Yc(dd,ed);Zc(dd,ed);},bd=function(){var dd={};dd[wc]=1;dd[Gc]=1;dd[Cc]=1;dd[Fc]=1;dd[Bc]=2;dd[Dc]=3;dd[xc]=4;dd[zc]=4;dd[yc]=4;dd[Ac]=4;return dd;}(),cd=function(dd){var ed=bd[dd.state];if(1===ed){Tc(dd);}else if(2===ed){dd.state=Fc;Tc(dd);}else if(3===ed){Tc(dd,Nc);}else if(4===ed){Tc(dd,Mc);}gpf.ASSERT(uc===dd.state||tc===dd.state||Ic===dd.state,"Unexpected non-final state");};gpf.js={};gpf.extend(gpf.js,{keywords:function(){return Rc;},"[tokenize]":[gpf.$ClassEventHandler()],tokenize:function(dd,ed){var fd,gd,hd=Qc();hd.eventsHandler=ed;hd.that=this;try{for(fd=0,gd=dd.length;fd<gd;++fd){ad(hd,dd.charAt(fd));}cd(hd);}catch(e){if("number"!==typeof e){throw e;}}},tokenizeEx:function(dd,ed,fd){var gd,hd;if(undefined===fd){fd=Qc();}fd.eventsHandler=ed;fd.that=this;try{if(null===dd){cd(fd);fd=null;}else{for(gd=0,hd=dd.length;gd<hd;++gd){ad(fd,dd.charAt(gd));}}}catch(e){if("number"!==typeof e){throw e;}}return fd;}});(function(){"use strict";var dd=function(id){var jd=[],kd=id.length,ld,md;for(ld=0;ld<kd;++ld){md=id.charCodeAt(ld);if(md<128){jd.push(md);}else if(md>127&&md<2048){jd.push(md>>6|192);jd.push(md&63|128);}else{jd.push(md>>12|224);jd.push(md>>6&63|128);jd.push(md&63|128);}}return jd;},ed=function(id,jd){var kd=[],ld=id.length,md=0,nd,od,pd;while(md<ld){nd=id[md];if(nd<128){kd.push(String.fromCharCode(nd));}else if(nd>191&&nd<224){if(md+1===ld){break;}od=id[++md];kd.push(String.fromCharCode((nd&31)<<6|od&63));}else{if(md+2>=ld){break;}od=id[++md];pd=id[++md];kd.push(String.fromCharCode((nd&15)<<12|(od&63)<<6|pd&63));}++md;}while(md<ld){jd.push(id[md++]);}return kd.join("");},fd={"utf-8":[dd,ed]},gd=gpf.define("EncoderStream",gpf.stream.BufferedOnRead,{public:{constructor:function(id,jd){this._super(jd);this._encoder=id;}},protected:{_addToBuffer:function(id){this._buffer=this._buffer.concat(this._encoder(id));this._bufferLength=this._buffer.length;},_readFromBuffer:gpf.stream.BufferedOnRead.prototype._readFromByteBuffer},private:{_encoder:null}}),hd=gpf.define("DecoderStream",gpf.stream.BufferedOnRead,{public:{constructor:function(id,jd){this._super(jd);this._decoder=id;}},protected:{_addToBuffer:function(id){var jd;if(this._unprocessed.length){id=this._unprocessed.concat(id);}this._unprocessed=[];jd=this._decoder(id,this._unprocessed);this._buffer.push(jd);this._bufferLength+=jd.length;},_endOfInputStream:function(){if(this._unprocessed.length){throw gpf.Error.EncodingEOFWithUnprocessedBytes();}},_readFromBuffer:gpf.stream.BufferedOnRead.prototype._readFromStringBuffer},private:{_decoder:null,_unprocessed:[]}});gpf.encoding={UTF_8:"utf-8",createEncoder:function(id,jd){var kd=fd[jd];if(undefined===kd){throw gpf.Error.EncodingNotSupported();}return new gd(kd[0],id);},createDecoder:function(id,jd){var kd=fd[jd];if(undefined===kd){throw gpf.Error.EncodingNotSupported();}return new hd(kd[1],id);}};}());var dd=gpf.interfaces,ed=gpf.attributes,fd=gpf.events.fire;gpf.xml={};gpf._defIntrf("IXmlSerializable",{"[toXml]":[gpf.$ClassEventHandler()],toXml:function(gd,hd){dd.ignoreParameter(gd);dd.ignoreParameter(hd);}});gpf._defIntrf("IXmlContentHandler",{"[characters]":[gpf.$ClassEventHandler()],characters:function(gd,hd){dd.ignoreParameter(gd);dd.ignoreParameter(hd);},"[endDocument]":[gpf.$ClassEventHandler()],endDocument:function(gd){dd.ignoreParameter(gd);},"[endElement]":[gpf.$ClassEventHandler()],endElement:function(gd){dd.ignoreParameter(gd);},endPrefixMapping:function(gd){dd.ignoreParameter(gd);},"[ignorableWhitespace]":[gpf.$ClassEventHandler()],ignorableWhitespace:function(gd,hd){dd.ignoreParameter(gd);dd.ignoreParameter(hd);},"[processingInstruction]":[gpf.$ClassEventHandler()],processingInstruction:function(gd,hd,id){dd.ignoreParameter(gd);dd.ignoreParameter(hd);dd.ignoreParameter(id);},setDocumentLocator:function(gd){dd.ignoreParameter(gd);},skippedEntity:function(gd){dd.ignoreParameter(gd);},"[startDocument]":[gpf.$ClassEventHandler()],startDocument:function(gd){dd.ignoreParameter(gd);},"[startElement]":[gpf.$ClassEventHandler()],startElement:function(gd,hd,id,jd,kd){dd.ignoreParameter(gd);dd.ignoreParameter(hd);dd.ignoreParameter(id);dd.ignoreParameter(jd);dd.ignoreParameter(kd);},startPrefixMapping:function(gd,hd){dd.ignoreParameter(gd);dd.ignoreParameter(hd);}});var gd=gpf._defAttr("XmlAttribute",{protected:{_alterPrototype:function(ud){if(undefined===ud.toXml){ed.add(ud.constructor,"Class",[gpf.$InterfaceImplement(dd.IXmlSerializable)]);ud.toXml=rd;ed.add(ud.constructor,"Class",[gpf.$InterfaceImplement(dd.IXmlContentHandler,td)]);}}}}),hd=gpf._defAttr("$XmlIgnore",gd,{}),id=gpf._defAttr("$XmlAttribute",gd,{private:{"[_name]":[gpf.$ClassProperty()],_name:""},public:{constructor:function(ud){gpf.ASSERT(gpf.xml.isValidName(ud),"Valid XML attribute name");this._name=ud;}}}),jd=gpf._defAttr("XmlRawElementAttribute",gd,{private:{"[_name]":[gpf.$ClassProperty()],_name:""},public:{constructor:function(ud){gpf.ASSERT(gpf.xml.isValidName(ud),"Valid XML element name");this._name=ud;}}}),kd=gpf._defAttr("$XmlElement",jd,{private:{"[_objClass]":[gpf.$ClassProperty()],_objClass:null},public:{constructor:function(ud,vd){this._super(ud);if(vd){this._objClass=vd;}}}}),ld=gpf._defAttr("$XmlList",jd,{}),md=function(ud,vd){var wd,xd,yd=null,zd=null,Ad;for(wd=0;wd<ud.length();++wd){xd=ud.get(wd);if(!(xd instanceof kd)){continue;}Ad=xd.objClass();if(Ad){if(vd instanceof Ad){if(!zd||Ad.prototype instanceof zd.objClass()){zd=xd;}}}else if(!yd){yd=xd;}}if(null!==zd){return zd;}else{return yd;}},nd=function(ud,vd,wd,xd){var yd;if(vd instanceof Array||xd.has(ld)||"object"===wd||xd.has(kd)){return"";}yd=xd.has(id);if(yd&&yd.name()){ud=yd.name();}else{if("_"===ud.charAt(0)){ud=ud.substr(1);}}return ud;},od=function(ud,vd,wd,xd){var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd;yd=ud[vd];if(yd instanceof Date){yd=gpf.dateToComparableFormat(yd,true);}zd=xd.member(vd);if("_"===vd.charAt(0)){vd=vd.substr(1);}Ad=zd.has(ld);if(yd instanceof Array||Ad){if(Ad&&Ad.name()){Bd=true;wd.startElement("",Ad.name());}zd=zd.filter(kd);for(Cd=0;Cd<yd.length;++Cd){Dd=yd[Cd];Ed=md(zd,Dd);if(Ed&&Ed.name()){Fd=Ed.name();}else{Fd="item";}qd(Dd,wd,Fd);}if(Bd){wd.endElement();}return;}Ad=zd.has(kd);if(Ad&&Ad.name()){Fd=Ad.name();}qd(yd,wd,Fd);},pd=function(ud,vd,wd,xd){var yd,zd,Ad,Bd,Cd,Dd=0,Ed=0,Fd;for(zd in ud.constructor.prototype){Ad=ud[zd];if(Ad instanceof Date){Ad=gpf.dateToComparableFormat(Ad,true);}Bd=typeof Ad;if("function"===Bd){continue;}yd=xd.member(zd);if(yd.has(hd)){continue;}Cd=nd(zd,Ad,Bd,yd);if(Cd){if(0===Ed){Ed={};}Ed[Cd]=Ad.toString();}else{if(0===Dd){Dd=[];}Dd.push(zd);}}vd.startElement("",wd,wd,Ed);if(Dd){for(Fd=0;Fd<Dd.length;++Fd){od(ud,Dd[Fd],vd,xd);}}},qd=function(ud,vd,wd){var xd=new ed.Map(ud).filter(gd),yd;if(!wd){yd=xd.member("Class").has(kd);if(yd){wd=yd.name();}else{wd=gpf.classDef(ud.constructor).name();if(!wd){wd="object";}}}if("object"!==typeof ud){vd.startElement("",wd);vd.characters(gpf.value(ud,""));}else{pd(ud,vd,wd,xd);}vd.endElement();},rd=function(ud,vd){var wd=gpf.interfaces.wrap(dd.IXmlContentHandler),xd=new wd(ud);xd.$catch(vd).$finally(vd,"ready");qd(this,xd);},sd=gpf.define("FromXmlContentHandler",{"[Class]":[gpf.$InterfaceImplement(dd.IXmlContentHandler)],_target:null,_firstElement:true,_forward:[],constructor:function(ud){this._target=ud;this._firstElement=true;this._forward=[];},_fillFromAttributes:function(ud){var vd=new ed.Map(this._target),wd=this._target.constructor.prototype,xd,yd,zd;for(xd in wd){if("function"===typeof wd[xd]){continue;}yd=vd.member(xd).filter(id);if(0<yd.length()){gpf.ASSERT(yd.length()===1,"Expected one attribute only");zd=yd.get(0).name();}else{if(xd.charAt(0)==="_"){zd=xd.substr(1);}else{continue;}}if(zd in ud){this._target[xd]=gpf.value(ud[zd],wd[xd]);}}},_fillFromElement:function(ud,vd,wd,xd){var yd=new ed.Map(this._target).filter(jd),zd=this._forward[0],Ad,Bd,Cd,Dd,Ed,Fd;gpf.interfaces.ignoreParameter(ud);gpf.interfaces.ignoreParameter(wd);gpf.interfaces.ignoreParameter(xd);if(undefined===zd){Ad=yd.members();}else{gpf.ASSERT(zd.type!==0,"No content handler here");Ad=[zd.member];}for(Bd=0;Bd<Ad.length;++Bd){Cd=Ad[Bd];Dd=yd.member(Cd);for(Ed=0;Ed<Dd.length();++Ed){Fd=Dd.get(Ed);if(Fd.name()===vd){if(this._fillFromRawElement(Cd,Fd)){return;}}}}},_fillFromRawElement:function(ud,vd){var wd,xd;if(vd instanceof kd){if(vd.objClass()){wd=new(vd.objClass());this._target[ud]=wd;xd=dd.query(wd,dd.IXmlContentHandler);}if(xd){xd={type:0,iXCH:xd};}else{xd={type:1,member:ud,buffer:[]};}}else if(vd instanceof ld){this._target[ud]=[];xd={type:2,member:ud};}if(xd){xd.depth=1;this._forward.unshift(xd);return true;}else{return false;}},characters:function(ud,vd){var wd=this._forward[0];if(undefined!==wd){if(0===wd.type){wd.iXCH.characters.apply(wd.iXCH,arguments);}else if(1===wd.type){wd.buffer.push(ud);}}fd.apply(this,["ready",vd]);},endDocument:function(ud){fd.apply(this,["ready",ud]);},endElement:function(ud){var vd=this._forward[0],wd,xd;if(undefined!==vd){if(0===vd.type){vd.iXCH.endElement.apply(vd.iXCH,arguments);}else if(1===vd.type){wd=this._target[vd.member];xd=vd.buffer.join("");if(wd instanceof Array){wd.push(xd);}else{this._target[vd.member]=gpf.value(xd,wd);}}if(0===--vd.depth){this._forward.shift();}}fd.apply(this,["ready",ud]);},endPrefixMapping:function(ud){dd.ignoreParameter(ud);},ignorableWhitespace:function(ud,vd){dd.ignoreParameter(ud);fd.apply(this,["ready",vd]);},processingInstruction:function(ud,vd,wd){dd.ignoreParameter(ud);dd.ignoreParameter(vd);fd.apply(this,["ready",wd]);},setDocumentLocator:function(ud){dd.ignoreParameter(ud);},skippedEntity:function(ud){dd.ignoreParameter(ud);},startDocument:function(ud){fd.apply(this,["ready",ud]);},startElement:function(ud,vd,wd,xd,yd){var zd=this._forward[0];gpf.interfaces.ignoreParameter(ud);gpf.interfaces.ignoreParameter(vd);gpf.interfaces.ignoreParameter(wd);if(undefined!==zd){if(0===zd.type){++zd.depth;zd.iXCH.startElement.apply(zd.iXCH,arguments);}else{this._fillFromElement.apply(this,arguments);}}else if(this._firstElement){this._firstElement=false;this._fillFromAttributes(xd);}else{this._fillFromElement.apply(this,arguments);}fd.apply(this,["ready",yd]);},startPrefixMapping:function(ud,vd){dd.ignoreParameter(ud);dd.ignoreParameter(vd);}}),td=function(ud){return new sd(ud);};gpf.define("gpf.xml.Writer",{"[Class]":[gpf.$InterfaceImplement(dd.IXmlContentHandler)],private:{_stream:null,_branch:[],_pendingPrefixMappings:[],_buffer:[],_eventsHandler:null,_closeLeafForContent:function(){var ud;if(this._branch.length){ud=this._branch[this._branch.length-1];if(!ud.hasContent){this._buffer.push(">");ud.hasContent=true;}}},_flush:function(ud){this._eventsHandler=ud;this._flushed();},_flushed:function(ud){var vd;if(ud&&ud.type()===dd.IWritableStream.EVENT_ERROR){fd.apply(this,[ud,this._eventsHandler]);}else if(0===this._buffer.length){vd=this._eventsHandler;this._eventsHandler=null;fd.apply(this,[dd.IWritableStream.EVENT_READY,vd]);}else{this._stream.write(this._buffer.shift(),gpf.Callback.bind(this,"_flushed"));}}},public:{constructor:function(ud){this._stream=dd.query(ud,dd.IWritableStream,true);this._branch=[];this._pendingPrefixMappings=[];this._buffer=[];},characters:function(ud,vd){gpf.ASSERT(null===this._eventsHandler,"Write in progress");this._closeLeafForContent();this._buffer.push(ud);this._flush(vd);},endDocument:function(ud){gpf.ASSERT(null===this._eventsHandler,"Write in progress");this._flush(ud);},endElement:function(ud){gpf.ASSERT(null===this._eventsHandler,"Write in progress");var vd=this._branch.pop();if(vd.hasContent){this._buffer.push("</",vd.qName,">");}else{this._buffer.push("/>");}this._flush(ud);},endPrefixMapping:function(ud){gpf.interfaces.ignoreParameter(ud);},ignorableWhitespace:function(ud,vd){gpf.ASSERT(null===this._eventsHandler,"Write in progress");this._closeLeafForContent();this._buffer.push(ud);this._flush(vd);},processingInstruction:function(ud,vd,wd){gpf.ASSERT(null===this._eventsHandler,"Write in progress");this._buffer.push("<?",ud," ",gpf.escapeFor(vd,"xml"),"?>");this._flush(wd);},setDocumentLocator:function(ud){gpf.interfaces.ignoreParameter(ud);},skippedEntity:function(ud){gpf.interfaces.ignoreParameter(ud);},startDocument:function(ud){gpf.ASSERT(null===this._eventsHandler,"Write in progress");this._flush(ud);},startElement:function(ud,vd,wd,xd,yd){gpf.ASSERT(null===this._eventsHandler,"Write in progress");var zd,Ad,Bd,Cd;if(undefined===wd&&!ud){wd=vd;}this._closeLeafForContent();var Dd={hasContent:false,qName:wd};this._branch.push(Dd);this._buffer.push("<",wd);if(xd){for(zd in xd){if(xd.hasOwnProperty(zd)){this._buffer.push(" ",zd,"=\"");Ad=gpf.escapeFor(xd[zd].toString(),"xml");if(-1<Ad.indexOf("\"")){Ad=gpf.replaceEx(Ad,{"\"":"&quot;"});}this._buffer.push(Ad,"\"");}}}Bd=this._pendingPrefixMappings.length;if(Bd){for(Cd=0;Cd<Bd;++Cd){this._buffer.push(" ",this._pendingPrefixMappings[Cd]);}this._pendingPrefixMappings=[];}this._flush(yd);},startPrefixMapping:function(ud,vd){this._pendingPrefixMappings.push(["xmlns:",ud,":\"",gpf.escapeFor(vd,"xml"),"\""].join(""));}}});gpf.xml.convert=function(ud,vd,wd){var xd;if("string"===typeof ud){throw gpf.Error.NotImplemented();}else if("object"===typeof ud){xd=dd.query(ud,dd.IXmlSerializable);if(null===xd){xd=new gpf.xml.ConstNode(ud);}xd.toXml(vd,wd);}};var ud=gpf._alpha+gpf._ALPHA+"_",vd=ud+"012345789.-";gpf.extend(gpf.xml,{isValidName:function(wd){var xd;if(0===wd.length||-1===ud.indexOf(wd.charAt(0))){return false;}for(xd=1;xd<wd.length;++xd){if(-1===vd.indexOf(wd.charAt(xd))){return false;}}return true;},toValidName:function(wd){var xd;if(gpf.xml.isValidName(wd)){return wd;}xd="_"+wd;if(!gpf.xml.isValidName(xd)){throw gpf.Error.XmlInvalidName();}return xd;}});var xd=gpf.interfaces;gpf.extend(gpf.xml,{NODE_INVALID:0,NODE_ELEMENT:1,NODE_ATTRIBUTE:2,NODE_TEXT:3,NODE_ENTITY_REFERENCE:5,NODE_PROCESSING_INSTRUCTION:7,NODE_COMMENT:8,NODE_DOCUMENT:9});gpf._defIntrf("IXmlConstNode",{attributes:function(yd){gpf.interfaces.ignoreParameter(yd);return"";},children:function(yd){if(undefined===yd){return[];}else{return undefined;}},localName:function(){return"";},namespaceURI:function(){return"";},nextSibling:function(){return null;},nodeName:function(){return"";},nodeType:function(){return 0;},nodeValue:function(){return null;},ownerDocument:function(){return null;},parentNode:function(){return null;},prefix:function(){return"";},previousSibling:function(){return null;},textContent:function(){return"";}});gpf.define("gpf.xml.ConstNode",{"[Class]":[gpf.$InterfaceImplement(xd.IXmlConstNode),gpf.$InterfaceImplement(xd.IXmlSerializable)],_obj:null,_name:"",_parentNode:null,_attributes:{},_elements:{},_children:[],constructor:function(yd,zd){this._obj=yd;this._attributes=null;this._elements=null;this._children=null;if(undefined===zd){this._name="root";}else{this._name=zd;}},_members:function(){var yd,zd,Ad;this._attributes={};this._elements={};if("object"===typeof this._obj&&!(this._obj instanceof Array)){for(yd in this._obj){if(this._obj.hasOwnProperty(yd)){zd=this._obj[yd];if(null===zd){continue;}Ad=gpf.xml.toValidName(yd);if("object"===typeof zd){this._elements[yd]=Ad;}else{this._attributes[yd]=Ad;}}}}},attributes:function(yd){var zd,Ad,Bd;if(null===this._attributes){this._members();}if(undefined===yd){zd={};for(Ad in this._attributes){if(this._attributes.hasOwnProperty(Ad)){Bd=this._attributes[Ad];zd[Bd]=this._obj[Ad];}}return zd;}for(Ad in this._attributes){if(this._attributes.hasOwnProperty(Ad)){if(yd===this._attributes[Ad]){return this._obj[Ad];}}}return undefined;},children:function(yd){var zd,Ad,Bd,Cd;if(null===this._children){if(null===this._elements){this._members();}this._children=[];if(this._obj instanceof Array){for(zd=0;zd<this._obj.length;++zd){Ad=new gpf.xml.ConstNode(this._obj[zd],"item");Ad._parentNode=this;this._children.push(Ad);}}else{for(Bd in this._elements){if(this._elements.hasOwnProperty(Bd)){Cd=this._elements[Bd];Ad=new gpf.xml.ConstNode(this._obj[Bd],Cd);Ad._parentNode=this;this._children.push(Ad);}}}}return gpf.arrayOrItem(this._children,yd);},localName:function(){return this._name;},namespaceURI:function(){return"";},nextSibling:function(){var yd;if(null!==this._parentNode){yd=gpf.test(this._parentNode._children,this);if(undefined!==yd&&yd<this._parentNode._children.length-1){return this._parentNode._children[yd+1];}}return null;},nodeName:function(){return this._name;},nodeType:function(){return gpf.xml.NODE_ELEMENT;},nodeValue:function(){return this._obj;},ownerDocument:function(){return null;},parentNode:function(){return this._parentNode;},prefix:function(){return"";},previousSibling:function(){var yd;if(null!==this._parentNode){yd=gpf.test(this._parentNode._children,this);if(0<yd){return this._parentNode._children[yd-1];}}return null;},textContent:function(){if("object"!==typeof this._obj){return gpf.value(this._obj,"");}else{return"";}},toXml:function(yd,zd){gpf.xml.nodeToXml(this,yd,zd);}});function wd(yd,zd){var Ad=yd.localName(),Bd=yd.attributes(),Cd=yd.children(),Dd=yd.textContent(),Ed;zd.startElement("",Ad,Ad,Bd);if(Dd){zd.characters(Dd);}else{for(Ed=0;Ed<Cd.length;++Ed){wd(Cd[Ed],zd);}}zd.endElement();}gpf.xml.nodeToXml=function(yd,zd,Ad){var Bd=gpf.interfaces.wrap(xd.IXmlContentHandler),Cd=new Bd(zd);Cd.$catch(Ad).$finally(Ad,"ready");wd(yd,Cd);};function yd(Ed,Fd,Gd,Hd){var Id,Jd;for(Id=0;Id<Ed.length;++Id){Jd=Ed[Id];Fd(Jd,Gd,Hd);}}function zd(Ed,Fd,Gd){var Hd=Ed.children(),Id,Jd,Kd;for(Jd=0;Jd<Hd.length;++Jd){Kd=true;Id=Hd[Jd];if(Fd.name&&Id.localName()!==Fd.name){Kd=false;}else if(Fd.text&&Id.textContent()!==Fd.text){Kd=false;}if(Kd){Gd.push(Id);}if(undefined!==Fd.relative&&!Fd.relative){zd(Id,Fd,Gd);}}}function Ad(Ed,Fd,Gd){var Hd,Id,Jd;if(Fd.name){Jd=Ed.attributes(Fd.name);if(undefined!==Jd&&(!Fd.text||Jd===Fd.text)){Gd.push(Ed);}}else{Hd=Ed.attributes();for(Id in Hd){if(Hd.hasOwnProperty(Id)){Jd=Hd[Id];if(!Fd.text||Jd===Fd.text){Gd.push(Ed);break;}}}}}function Bd(Ed,Fd,Gd){if(gpf.xml.NODE_ELEMENT===Fd.type){yd(Ed,zd,Fd,Gd);}else if(gpf.xml.NODE_ATTRIBUTE===Fd.type){yd(Ed,Ad,Fd,Gd);}}function Cd(Ed,Fd,Gd){var Hd,Id,Jd,Kd,Ld;if(Fd.and){Id=Fd.and;Jd=0;}else if(Fd.or){Id=Fd.or;Jd=1;}for(Kd=0;Kd<Id.length;++Kd){Ld=Id[Kd];if(Ld.and||Ld.or){Hd=[];Cd(Ed,Ld,Hd);}else{Hd=Dd(Ed,Ld);}if(0===Jd&&Hd.length===0){return;}if(1===Jd&&Hd.length!==0){Gd.push(Ed);return;}}if(0===Jd){Gd.push(Ed);}}function Dd(Ed,Fd){var Gd,Hd=[Ed];while(Fd){Gd=[];Bd(Hd,Fd,Gd);if(0===Gd.length){return[];}Hd=Gd;if(Fd.filter){Gd=[];yd(Hd,Cd,Fd.filter,Gd);if(0===Gd.length){return[];}Hd=Gd;}Fd=Fd.then;}return Gd;}gpf.define("gpf.xml.XPath",{_xpath:null,constructor:function(Ed){this._reset();if("string"===typeof Ed){this._xpath=this._compile(Ed);}else{this._xpath=Ed;}},_reset:function(){},_compile:function(Ed){gpf.interfaces.ignoreParameter(Ed);this._xpath=null;},selectNodes:function(Ed){return Dd(Ed,this._xpath);}});gpf.define("gpf.Parameter",{private:{"[_name]":[gpf.$ClassProperty(),gpf.$XmlAttribute("name")],_name:"","[_description]":[gpf.$ClassProperty(),gpf.$XmlElement("description")],_description:"","[_type]":[gpf.$ClassProperty(),gpf.$XmlAttribute("type")],_type:"string","[_required]":[gpf.$ClassProperty(),gpf.$XmlAttribute("required")],_required:false,"[_defaultValue]":[gpf.$ClassProperty(),gpf.$XmlElement("default")],_defaultValue:undefined,"[_prefix]":[gpf.$ClassProperty(),gpf.$XmlAttribute("prefix")],_prefix:"","[_multiple]":[gpf.$ClassProperty(),gpf.$XmlAttribute("multiple")],_multiple:false,"[_hidden]":[gpf.$ClassProperty(),gpf.$XmlAttribute("hidden")],_hidden:false},public:{},static:{VERBOSE:"verbose",HELP:"help",TYPE_BOOLEAN:"boolean",TYPE_NUMBER:"number",TYPE_STRING:"string",DEFAULTS:{"string":"","boolean":false,"number":0},create:function(Ed){var Fd=[],Gd=Ed.length,Hd,Id;for(Hd=0;Hd<Gd;++Hd){Id=Ed[Hd];if(!(Id instanceof gpf.Parameter)){Id=this._createFromObject(Id);}Fd.push(Id);}return Fd;},_createFromObject:function(Ed){var Fd=new gpf.Parameter,Gd;if(Ed===gpf.Parameter.VERBOSE||Ed.prefix===gpf.Parameter.VERBOSE){Ed={name:"verbose",description:"Enable verbose mode",type:"boolean",defaultValue:false,prefix:gpf.Parameter.VERBOSE};}else if(Ed===gpf.Parameter.HELP||Ed.prefix===gpf.Parameter.HELP){Ed={name:"help",description:"Display help",type:"boolean",defaultValue:false,prefix:gpf.Parameter.HELP};}gpf.json.load(Fd,Ed);if(!Fd._name){throw gpf.Error.ParamsNameRequired();}Gd=this.DEFAULTS[Fd._type];if(undefined===Gd){throw gpf.Error.ParamsTypeUnknown();}if(Fd.hasOwnProperty("_defaultValue")){Fd._defaultValue=gpf.value(Fd._defaultValue,Gd,Fd._type);}return Fd;},getOnPrefix:function(Ed,Fd){var Gd,Hd,Id;if(undefined===Fd){Fd=0;}Gd=Ed.length;if("number"===typeof Fd){Hd=Fd;Fd="";}else{Hd=0;}for(;Hd<Gd;++Hd){Id=Ed[Hd];if(Id._prefix===Fd){return Id;}}return null;},getByName:function(Ed,Fd){var Gd,Hd,Id;Gd=Ed.length;for(Hd=0;Hd<Gd;++Hd){Id=Ed[Hd];if(Id._name===Fd){return Id;}}return null;},parse:function(Ed,Fd){var Gd={},Hd,Id,Jd,Kd,Ld,Md=0;Ed=gpf.Parameter.create(Ed);Hd=Fd.length;for(Id=0;Id<Hd;++Id){Jd=this.getPrefixValuePair(Fd[Id]);if(Jd instanceof Array){Kd=this.getOnPrefix(Ed,Jd[0]);Jd=Jd[1];}else{Kd=this.getOnPrefix(Ed,Md);Md=Ed.indexOf(Kd)+1;}if(!Kd){continue;}if(undefined===Jd){if("boolean"===Kd._type){Jd=!Kd._defaultValue;}else{continue;}}Jd=gpf.value(Jd,Kd._defaultValue,Kd._type);Ld=Kd._name;if(Kd._multiple){if(undefined===Gd[Ld]){Gd[Ld]=[];}Gd[Ld].push(Jd);if(Kd._prefix===""){--Md;}}else{Gd[Ld]=Jd;}}this._finalizeParse(Ed,Gd);return Gd;},_finalizeParse:function(Ed,Fd){var Gd,Hd,Id,Jd,Kd;Gd=Ed.length;for(Hd=0;Hd<Gd;++Hd){Id=Ed[Hd];Jd=Id._name;if(undefined===Fd[Jd]){if(Id._required){throw gpf.Error.ParamsRequiredMissing({name:Jd});}Kd=Id._defaultValue;if(undefined!==Kd){if(Id._multiple){Kd=[Kd];}Fd[Jd]=Kd;}}}},getPrefixValuePair:function(Ed){var Fd;if(Ed.charAt(0)==="-"){Ed=Ed.substr(1);Fd=Ed.indexOf(":");if(-1<Fd){return[Ed.substr(0,Fd),Ed.substr(Fd+1)];}else{return[Ed];}}Fd=Ed.indexOf("=");if(-1<Fd){return[Ed.substr(0,Fd),Ed.substr(Fd+1)];}return Ed;},usage:function(Ed){gpf.interface.ignoreParameter(Ed);return"";}}});gpf.fs={TYPE_NOT_FOUND:0,TYPE_FILE:1,TYPE_DIRECTORY:2,TYPE_UNKNOWN:99,getInfo:function(Ed,Fd){gpf.interfaces.ignoreParameter(Ed);gpf.interfaces.ignoreParameter(Fd);throw gpf.Error.Abstract();},readAsBinaryStream:function(Ed,Fd){gpf.interfaces.ignoreParameter(Ed);gpf.interfaces.ignoreParameter(Fd);throw gpf.Error.Abstract();},writeAsBinaryStream:function(Ed,Fd){gpf.interfaces.ignoreParameter(Ed);gpf.interfaces.ignoreParameter(Fd);throw gpf.Error.Abstract();},close:function(Ed){gpf.interfaces.ignoreParameter(Ed);throw gpf.Error.Abstract();}};if(gpf.node){var Ed,Fd=function(){if(undefined===Ed){Ed=require("fs");}return Ed;},Gd=function(Hd,Id){gpf.events.fire("error",{error:Hd},Id);};gpf.fs.getInfo=function(Hd,Id){Fd().exists(Hd,function(Jd){if(Jd){Fd().stat(Hd,function(Kd,Ld){var Md;if(Kd){Gd(Kd,Id);}else{Md={size:Ld.size,createdDateTime:Ld.ctime,modifiedDateTime:Ld.mtime};if(Ld.isDirectory()){Md.type=gpf.fs.TYPE_DIRECTORY;}else if(Ld.isFile()){Md.type=gpf.fs.TYPE_FILE;}else{Md.type=gpf.fs.TYPE_UNKNOWN;}gpf.events.fire("ready",{info:Md},Id);}});}else{gpf.events.fire("ready",{info:{type:gpf.fs.TYPE_NOT_FOUND}},Id);}});};gpf.fs.readAsBinaryStream=function(Hd,Id){var Jd=Fd().createReadStream(Hd);gpf.events.fire("ready",{stream:new gpf.node.ReadableStream(Jd)},Id);};gpf.fs.writeAsBinaryStream=function(Hd,Id){var Jd=Fd().createWriteStream(Hd);gpf.events.fire("ready",{stream:new gpf.node.WritableStream(Jd)},Id);};gpf.fs.close=function(Hd){gpf.interfaces.ignoreParameter(Hd);};}gpf.html={ELEMENT_NODE:1,TEXT_NODE:3};var Td=gpf.interfaces,Ud=gpf.events.fire;gpf.define("gpf.html.MarkdownParser","gpf.Parser",{public:{constructor:function(){this._super.apply(this,arguments);this._openedTags=[];}},protected:{_ignoreCarriageReturn:true,_initialParserState:function(Vd){var Wd,Xd=0<this._openedTags.length;if("#"===Vd){this._hLevel=1;Wd=this._parseTitle;}else if("*"===Vd||"0"<=Vd&&"9">=Vd){if(Vd!=="*"){this._numericList=1;}else{this._numericList=0;}Wd=this._parseList;Xd=false;}else if(" "!==Vd&&"\t"!==Vd&&"\n"!==Vd){if(Xd){this._output(" ");Xd=false;}else{this._openTag("p");}Wd=this._parseContent(Vd);if(!Wd){Wd=this._parseContent;}}if(Xd){this._closeTags();}return Wd;},_finalizeParserState:function(){this._closeTags();}},private:{_openedTags:[],_closeTags:function(){var Vd;while(this._openedTags.length){Vd=this._openedTags.pop();this._output("</"+Vd+">");if("p"===Vd){break;}}},_openList:function(Vd){var Wd,Xd=this._openedTags.length;while(Xd){Wd=this._openedTags.pop();--Xd;this._output("</"+Wd+">");if("li"===Wd){break;}}if(Xd){Wd=this._openedTags[Xd-1];if(Wd!==Vd){this._openedTags.pop();this._output("</"+Wd+">");}else{return;}}this._openTag(Vd);},_toggleTag:function(Vd){var Wd=this._openedTags.length;if(Wd&&this._openedTags[Wd-1]===Vd){this._openedTags.pop();this._output("</"+Vd+">");}else{this._openTag(Vd);}},_openTag:function(Vd){this._output("<"+Vd+">");this._openedTags.push(Vd);},_hLevel:1,_parseTitle:function(Vd){if("#"===Vd){++this._hLevel;}else{this._openTag("h"+this._hLevel);return this._parseText;}},_numericList:false,_parseList:function(Vd){var Wd=0<this._openedTags.length,Xd;if(" "===Vd){if(this._numericList){Xd="ol";}else{Xd="ul";}this._openList(Xd);this._openTag("li");}else if(this._numericList&&("0"<=Vd&&"9">=Vd||"."===Vd)){return;}else if("*"===Vd){if(Wd){this._output(" ");}this._openTag("strong");}return this._parseContent;},_handleEntities:function(Vd){if("<"===Vd){this._output("&lt;");}else if(">"===Vd){this._output("&gt;");}else if("&"===Vd){this._output("&amp;");}else{return false;}return true;},_escapeChar:"",_escapeCount:0,_parseEscape:function(Vd){var Wd=this._escapeChar,Xd;if(Vd===Wd){Xd=++this._escapeCount;if("-"===Wd&&3===Xd){this._output("&mdash;");return this._parseContent;}}else{Xd=this._escapeCount+1;while(--Xd){this._output(Wd);}this._setParserState(this._parseContent);return this._parseContent(Vd);}},_parseContent:function(Vd){if(this._handleEntities(Vd)){return;}if("*"===Vd){return this._parseItalic;}else if("`"===Vd){this._toggleTag("code");return this._parseMonospace;}else if("["===Vd){return this._startLink(0);}else if("!"===Vd){return this._parseImage;}else if("-"===Vd){this._escapeCount=1;this._escapeChar="-";return this._parseEscape;}else if("\n"===Vd){return null;}else{this._output(Vd);}},_parseItalic:function(Vd){if("*"===Vd){this._toggleTag("strong");}else{this._toggleTag("em");this._output(Vd);}return this._parseContent;},_parseText:function(Vd){if(this._handleEntities(Vd)){return;}if("\n"===Vd){this._closeTags();return null;}else{this._output(Vd);}},_parseMonospace:function(Vd){if("`"===Vd){this._toggleTag("code");return this._parseContent;}else{this._output(Vd);}},_linkType:0,_linkState:0,_linkText:[],_linkUrl:[],_startLink:function(Vd){this._linkType=Vd;this._linkState=0;this._linkText=[];this._linkUrl=[];return this._parseLink;},_finishLink:function(){var Vd=this._linkUrl.join(""),Wd=this._linkText.join("");if(0===this._linkType){this._output("<a href=\"");this._output(Vd);this._output("\">");this._output(Wd);this._output("</a>");}else if(1===this._linkType){this._output("<img src=\"");this._output(Vd);this._output("\" alt=\"");this._output(Wd);this._output("\" title=\"");this._output(Wd);this._output("\">");}return this._parseContent;},_parseLink:function(Vd){var Wd=this._linkState;if("]"===Vd&&0===Wd){++this._linkState;}else if("("===Vd&&1===Wd){++this._linkState;}else if(")"===Vd&&2===Wd){return this._finishLink();}else if(0===Wd){this._linkText.push(Vd);}else if(2===Wd){if(-1==="\t\n".indexOf(Vd)){this._linkUrl.push(Vd);}}},_parseImage:function(Vd){if("["===Vd){return this._startLink(1);}else{this._output("!");this._setParserState(this._parseContent);return this._parseContent(Vd);}}}});gpf.define("gpf.html.File",{"[Class]":[gpf.$InterfaceImplement(gpf.interfaces.ITextStream)],public:{constructor:function(Vd){this._file=Vd;},name:function(){return this._file.name;},size:function(){return this._file.size;},read:function(Vd,Wd){var Xd=this,Yd=this._reader,Zd=this._file.size-this._pos,ae;if(0===Zd){Ud.apply(this,[Td.IReadableStream.EVENT_END_OF_STREAM,Wd]);return;}this._eventsHandler=Wd;if(null===Yd){Yd=this._reader=new FileReader;Yd.onloadend=function(be){Xd._onLoadEnd(be);};}if(0===Vd||Vd>Zd){Vd=Zd;}ae=this._file.slice(this._pos,Vd);this._pos+=Vd;Yd.readAsArrayBuffer(ae);}},private:{_file:null,_reader:null,_pos:0,_eventsHandler:null,_onLoadEnd:function(Vd){var Wd=Vd.target,Xd,Yd,Zd,ae;gpf.ASSERT(Wd===this._reader,"Unexpected change of reader");if(Wd.error){Ud.apply(this,[Td.IReadableStream.ERROR,{error:{name:Wd.error.name,message:Wd.error.message}},this._eventsHandler]);}else if(Wd.readyState===FileReader.DONE){Xd=new Int8Array(Wd.result);Yd=Xd.length;Zd=[];for(ae=0;ae<Yd;++ae){Zd.push(Xd[ae]);}Ud.apply(this,[Td.IReadableStream.EVENT_DATA,{buffer:Zd},this._eventsHandler]);}}}});var Vd=gpf._defAttr("HtmlAttribute",{}),Wd=gpf._defAttr("$HtmlHandler",Vd,{private:{_selector:"",_globalSelector:false},protected:{_select:function(Yd){var Zd=this._selector;if(Zd){if(this._globalSelector){return document.querySelector(Zd);}else{return Yd.querySelector(Zd);}}return undefined;}},public:{constructor:function(Yd,Zd){if(Yd){this._selector=Yd;}if(undefined!==Zd){this._globalSelector=Zd===true;}}}}),Xd=gpf._defAttr("$HtmlEvent",Wd,{private:{_event:""},public:{constructor:function(Yd,Zd,ae){Wd.apply(this,[Zd,ae]);this._event=Yd;}}});function Hd(Yd,Zd){var ae;if(1!==Zd.length()){throw gpf.Error.HtmlHandlerMultiplicityError({member:Yd});}ae=Zd.get(0);if(!(ae instanceof Xd)){return ae;}return null;}function Id(Yd,Zd){var ae=Hd(Yd,Zd);if(ae&&!ae._selector){return ae;}}gpf.html.handle=function(Yd,Zd){var ae=new gpf.attributes.Map(Yd).filter(Vd),be=ae.filter(Wd),ce,de;if(0===be.count()){throw gpf.Error.HtmlHandlerMissing();}ce=be.each(Id);if(undefined===ce){throw gpf.Error.HtmlHandlerNoDefault();}ce=ce.member();if(undefined===Zd){Zd=Yd[ce];gpf.ASSERT(Zd,"Handle not previously set");}else{if("string"===typeof Zd){Zd=document.querySelector(Zd);}gpf.ASSERT(Zd,"Selector does not resolve to DOM");if(!Zd){return;}Yd[ce]=Zd;}be.each(Jd,Yd,[Zd]);de=ae.filter(Xd);if(0<de.count()){de.each(Kd,Yd,[Zd]);}return Zd;};function Jd(Yd,Zd,ae){var be=Hd(Yd,Zd);if(!be||!be._selector){return;}ae=be._select(ae);if(!ae){return;}this[Yd]=ae;}function Kd(Yd,Zd,ae){Zd.each(Ld,this,[Yd,ae]);}function Ld(Yd,Zd,ae){var be=Yd._event,ce=Zd+":$HtmlEvent("+be+","+Yd._selector+")";ae=Yd._select(ae);if(!ae){return;}if(!this[ce]){ae.addEventListener(be,gpf.Callback.bind(this,Zd));this[ce]=true;}}gpf.extend(gpf.html,{hasClass:function(Yd,Zd){var ae,be,ce;if("string"===typeof Zd){Zd=[Zd];}gpf.ASSERT(Zd instanceof Array,"Expected array");ae=Yd.className.split(" ");be=Zd.length;for(ce=0;ce<be;++ce){if(undefined!==gpf.test(ae,Zd[ce])){return true;}}return false;},alterClass:function(Yd,Zd,ae){var be,ce,de,ee;if(Yd.className){be=Yd.className.split(" ");}else{be=[];}ce=be.length;if(undefined!==ae){if("string"===typeof ae){ae=[ae];}gpf.ASSERT(ae instanceof Array,"Expected array");de=ae.length;for(ee=0;ee<de;++ee){gpf.clear(be,ae[ee]);}}if(undefined!==Zd){if("string"===typeof Zd){Zd=[Zd];}gpf.ASSERT(Zd instanceof Array,"Expected array");de=Zd.length;for(ee=0;ee<de;++ee){gpf.set(be,Zd[ee]);}}if(ce!==be.length){Yd.className=be.join(" ");}return Yd;},addClass:function(Yd,Zd){return gpf.html.alterClass(Yd,Zd,undefined);},removeClass:function(Yd,Zd){return gpf.html.alterClass(Yd,undefined,Zd);}});var Yd=null,Zd=null,ae=false,be,ce,de,ee="";function Md(){var fe=[];if(ae){fe.push(".gpf-top { top: ",de,"px; }\n");}Zd.innerHTML=fe.join("");}function Nd(){be=window.innerWidth;ce=window.innerHeight;var fe,ge=false,he=[],ie=[];if(be>ce){fe="gpf-landscape";}else{fe="gpf-portrait";}if(ee!==fe){he.push(ee);ee=fe;ie.push(fe);ge=true;}gpf.html.alterClass(document.body,ie,he);Yd.broadcastEvent("resize",{width:be,height:ce});if(ge){Yd.broadcastEvent("rotate",{orientation:fe});}}function Od(){de=window.scrollY;if(ae&&Zd){Md();}Yd.broadcastEvent("scroll",{top:de});}function Pd(){Nd();Od();}gpf.html.responsive=function(fe){var ge,he;if(fe&&undefined!==fe.monitorTop){ae=fe.monitorTop;}ge=ae;if(ge){if(!Zd){he=document.getElementsByTagName("head")[0]||document.documentElement;Zd=document.createElement("style");Zd.setAttribute("type","text/css");Zd=he.appendChild(Zd);}}else if(Zd){Zd.parentNode.removeChild(Zd);Zd=null;}if(null===Yd){Yd=new gpf.events.Broadcaster(["resize","rotate","scroll"]);window.addEventListener("resize",Nd);window.addEventListener("scroll",Od);gpf.defer(Pd,0);}return Yd;};var fe=[];function Qd(){var ge=document.getElementsByTagName("script"),he=ge.length,ie,je,ke;for(ie=0;ie<he;++ie){je=ge[ie];ke=je.getAttribute("gpf-loaded");if(ke){je.removeAttribute("gpf-loaded");ke=ke.split(",");he=ke.length;for(ie=0;ie<he;++ie){fe.push(ke[ie]);}}}if(fe.length){Sd();}}function Rd(ge){console.error("gpf-loaded: failed to include '"+ge.get("url")+"'");}function Sd(){if(!fe.length){return;}var ge=fe.shift();gpf.http.include(ge,{load:Sd,error:Rd});}if("browser"===gpf.host()||"phantomjs"===gpf.host()){Qd();}function ge(he){var ie,je;if(he instanceof Array){he=gpf.Parameter.parse([{name:"port",type:"number",defaultValue:80,prefix:"port"},{name:"root",type:"string",defaultValue:".",prefix:"root"},{name:"chunkSize",type:"number",defaultValue:65536,prefix:"chunk"},gpf.Parameter.VERBOSE,gpf.Parameter.HELP],he);}console.log("GPF "+gpf.version()+" web server");if(he.root==="."){he.root=process.cwd();}if(he.verbose){je=0;for(ie in he){if(he.hasOwnProperty(ie)){if(ie.length>je){je=ie.length;}}}++je;for(ie in he){if(he.hasOwnProperty(ie)){console.log(["\t",ie,new Array(je-ie.length+1).join(" "),": ",he[ie]].join(""));}}}return he;}var he=gpf.define("ResponseHandler",{private:{_options:null,_request:null,_response:null,_parsedUrl:null,_filePath:"",_extName:""},public:{constructor:function(ie,je,ke){var le=require("url"),me=require("path");this._options=ie;this._request=je;this._response=ke;this._parsedUrl=le.parse(je.url);this._filePath=me.join(this._options.root,this._parsedUrl.pathname);this._extName=me.extname(this._filePath).toLowerCase();ke._gpf=this;ke.plain=he._plain;},process:function(){var ie=require("fs");if(ie.existsSync(this._filePath)){if(".jsp"===this._extName){this.plain(500,"JSP not handled yet");}else{this.fromFile(this._filePath);}}else{this.plain(404,"No file found");}},plain:function(ie,je){var ke=this._response;ke.writeHead(ie,{"Content-Type":"text/plain"});ke.write(["port    : "+this._options.port,"method  : "+this._request.method,"url     : "+this._request.url,"root    : "+this._options.root,"path    : "+this._filePath,"headers : "+JSON.stringify(this._request.headers,null,"\t\t"),je].join("\n"));ke.end();},fromFile:function(ie){var je=this,ke=require("fs"),le=require("path"),me=le.extname(ie).toLowerCase(),ne=je._options.chunkSize,oe,pe=0,qe,re,se,te,ue;se=function(){if(re){ke.close(re);}je._response.end();};te=function(){var ve=qe-pe;if(0===ve){se();return;}if(ve>ne){ve=ne;}ke.read(re,oe,0,ve,pe,ue);};ue=function(ve,we,xe){if(ve){console.error(["Error while sending '",ie,"' (",ve,")"].join(""));se();return;}pe+=we;je._response.write(xe,te);};ke.stat(ie,function(ve,we){var xe;if(ve){je._response.plain(500,"Unable to access file ("+ve+")");return;}if(we.isDirectory()){je._response.plain(200,"Directory.");return;}else if(!we.isFile()){je._response.plain(200,"Not a file.");return;}qe=we.size;xe=gpf.http.getMimeType(me);if(je._options.verbose){console.log("\tMime type  : "+xe);console.log("\tFile size  : "+qe);}ke.open(ie,"r",function(ye,ze){if(ye){je._response.plain(500,"Unable to open file ("+ye+")");return;}je._response.writeHead(200,{"Content-Type":xe,"Content-Length":qe});re=ze;if(je._options.verbose){console.log("\tFile handle: "+ze);}oe=new Buffer(ne);te();});});}},static:{_plain:function(ie,je){return this._gpf.plain(ie,je);},_fromFile:function(ie){return this._gpf.fromFile(ie);}}});gpf.runWebServer=function(ie){ie=ge(ie);global.require=require;require("http").createServer(function(je,ke){if(ie.verbose){console.log([je.method,"     ".substr(je.method.length),je.url].join(""));}var le=new he(ie,je,ke);le.process();}).on("close",function(){console.log("Closed.");}).listen(ie.port);if(ie.verbose){console.log("Listening... (CTRL+C to stop)");}};(function(){var ie,je;if("nodejs"!==gpf.host()){return;}ie=require("path");je=ie.basename(process.argv[1],".js");if(je==="boot"||je==="gpf"||je==="gpf-debug"){gpf.runWebServer(process.argv.slice(2));}}());}));