
(function (a, b) {"use strict";if (typeof define === "function" && define.amd) {define(["exports"], b);} else if (typeof exports !== "undefined") {b(exports);} else {b(a.gpf = {});}}(this, function (a) {"use strict";var a, b;if ("undefined" !== typeof WScript) {a = "wscript";b = function () {return this;}.apply(null, []);b.console = {log: function (c) {WScript.Echo("    " + c);},info: function (c) {WScript.Echo("[?] " + c);},warn: function (c) {WScript.Echo("/!\\ " + c);},error: function (c) {WScript.Echo("(X) " + c);}};} else if ("undefined" !== typeof module && module.exports) {a = "nodejs";b = global;} else if ("undefined" !== typeof window) {a = "browser";b = window;} else {a = "unknown";b = this;}gpf.host = function () {return a;};gpf.context = function (c) {var d, e, f;if (undefined === c) {return b;} else {if ("string" === typeof c) {c = c.split(".");}d = c.length;e = 0;if (c[0] === "gpf") {f = gpf;++e;} else {f = b;}for (; e < d; ++e) {f = f[c[e]];if (undefined === f) {break;}}return f;}};gpf.loaded = function (c) {if (c) {c();}return true;};gpf.NOT_IMPLEMENTED = function () {console.error("Not implemented");throw { message: "Not implemented" };};gpf.ASSERT = function () {};var c = function (o, p, q) {var r, s = o.length, t;for (t = 0; t < s; ++t) {r = p.apply(this, [t,o[t]]);if (undefined !== r) {return r;}}return q;}, d = function (o, p) {var q = o.length, r;for (r = 0; r < q; ++r) {p.apply(this, [r,o[r]]);}}, e = function (o, p, q) {var r, s;for (s in o) {if (o.hasOwnProperty(s)) {r = p.apply(this, [s,o[s]]);if (undefined !== r) {return r;}}}return q;}, f = function (o, p) {var q;for (q in o) {if (o.hasOwnProperty(q)) {p.apply(this, [q,o[q]]);}}}, g = function (o, p) {this[0][o] = p;}, h = function (o, p) {var q = this[0], r = this[2];if (undefined !== q[o]) {r(q, o, p);} else {q[o] = p;}}, i = function (o, p, q) {var r, s, t, u = o.length;for (r = 0; r < u; ++r) {s = o[r].a;t = o[r].b;if (s === p && t === q || t === p && s === q) {return r;}}return undefined;}, j = function (o, p, q) {if (q && ("object" === typeof o || "object" === typeof p)) {if (o instanceof String || p instanceof String) {return o.toString() === p.toString();}if (o instanceof Number || p instanceof Number) {return o.valueOf() === p.valueOf();}return false;}return false;}, k = function (o, p, q, r) {if (o !== p) {if (typeof o !== typeof p && !j(o, p, q)) {return false;}if (null === o || null === p || "object" !== typeof o) {return false;}if (undefined === i(r.done, o, p)) {r.todo.push(o);r.todo.push(p);}}return true;}, l = function (o, p, q) {var r, s, t = {todo: [o,p],done: []};while (0 !== t.todo.length) {p = t.todo.pop();o = t.todo.pop();if (o.prototype !== p.prototype) {return false;}t.done.push({a: o,b: p});s = 0;for (r in o) {if (o.hasOwnProperty(r)) {++s;if (!k(o[r], p[r], q, t)) {return false;}}}for (r in p) {if (p.hasOwnProperty(r)) {--s;}}if (0 !== s) {return false;}}return true;}, m = {boolean: function (o, p, q) {if ("string" === p) {if ("yes" === o || "true" === o) {return true;}return 0 !== parseInt(o, 10);}if ("number" === p) {return 0 !== o;}return q;},number: function (o, p, q) {if ("string" === p) {return parseFloat(o);}return q;},string: function (o, p, q) {gpf.interfaces.ignoreParameter(p);gpf.interfaces.ignoreParameter(q);if (o instanceof Date) {return gpf.dateToComparableFormat(o);}return o.toString();},object: function (o, p, q) {if (q instanceof Date && "string" === p) {return gpf.dateFromComparableFormat(o);}return q;}}, n = Function;gpf.each = function (o, p, q) {if (undefined === q) {if (o instanceof Array) {d.apply(this, arguments);} else {f.apply(this, arguments);}return undefined;}if (o instanceof Array) {return c.apply(this, arguments);}return e.apply(this, arguments);};gpf.extend = function (o, p, q) {var r;if (undefined === q) {r = g;} else {r = h;}gpf.each.apply(arguments, [p,r]);return o;};gpf.extend(gpf, {_alpha: "abcdefghijklmnopqrstuvwxyz",_ALPHA: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",_func: function (o) {return new n(o);},value: function (o, p, q) {var r = typeof o;if (!q) {q = typeof p;}if (q === r) {return o;}if ("undefined" === r || !o) {return p;}return m[q](o, r, p);},like: function (o, p, q) {if (o === p) {return true;}if (typeof o !== typeof p) {return j(o, p, q);}if (null === o || null === p || "object" !== typeof o) {return false;}return l(o, p, q);},clone: function (o) {return gpf.json.parse(gpf.json.stringify(o));},test: function (o, p) {var q;if (o instanceof Array) {q = o.length;while (q > 0) {if (o[--q] === p) {return q;}}} else {for (q in o) {if (o.hasOwnProperty(q) && o[q] === p) {return q;}}}return undefined;},set: function (o, p) {gpf.ASSERT(o instanceof Array, "gpf.set must be used with an Array");var q = o.length;while (q > 0) {if (o[--q] === p) {return o;}}o.push(p);return o;},clear: function (o, p) {var q;if (o instanceof Array) {q = o.length;while (q > 0) {if (o[--q] === p) {o.splice(q, 1);break;}}} else {for (q in o) {if (o.hasOwnProperty(q) && o[q] === p) {break;}}}return o;},xor: function (o, p) {return o && !p || !o && p;},capitalize: function (o) {return o.charAt(0).toUpperCase() + o.substr(1);},Callback: function (o, p) {if (o) {this._handler = o;}if (p) {this._scope = p;}}});gpf.extend(gpf.Callback.prototype, {_handler: gpf._func(""),_scope: null,handler: function () {return this._handler;},scope: function () {return this._scope;},call: function () {var o = arguments[0], p = [], q = arguments.length, r;for (r = 1; r < q; ++r) {p.push(arguments[r]);}return this.apply(o, p);},apply: function (o, p) {var q = gpf.Callback.resolveScope(this._scope || o);return this._handler.apply(q, p);}});gpf.Callback.resolveScope = function (o) {if (!o) {o = gpf.context();}return o;};var o = function (s) {var t, u, v;this._listeners = {};if (undefined !== s) {this._events = s;u = s.length;for (t = 0; t < u; ++t) {v = s[t];this["on" + v.charAt(0).toUpperCase() + v.substr(1)] = this._onEVENT(t);this._listeners[v] = [];}}}, p = function (s) {return function () {var t = this._events[s], u = arguments.length, v;for (v = 0; v < u; ++v) {t.push(arguments[v]);}return this.addEventListener.apply(this, t);};}, q = function () {o.apply(this, arguments);}, r = function (s, t, u, v) {this._type = s;if (undefined !== t) {this._params = t;}if (u) {this._cancelable = true;}if (v) {this._scope = v;}};gpf.extend(o.prototype, {_listeners: {},_events: null,_onEVENT: function (s) {var t = q.prototype._onEVENT.closures, u;if (!t) {t = q.prototype._onEVENT.closures = [];}gpf.ASSERT(t.length >= s, "calls must be sequential");while (t.length <= s) {u = t.length;t.push(p(u));}return t[s];},addEventListener: function (s, t, u, v) {var w = this._listeners;if ("boolean" === typeof u) {v = u;u = undefined;} else {if (!u) {u = null;}if (!v) {v = false;}}if (t instanceof gpf.Callback) {if (u && u !== t.scope()) {t = t.handler();}}if (!(t instanceof gpf.Callback)) {t = new gpf.Callback(t, u);}if (undefined === w[s]) {w[s] = [];}if (v) {w[s].unshift(t);} else {w[s].push(t);}return this;},removeEventListener: function (s, t, u) {var v = this._listeners[s], w, x;if (undefined !== v) {if (t instanceof gpf.Callback) {if (!u) {u = t.scope();}t = t.handler();}x = v.length;while (x > 0) {w = v[--x];if (w.handler() === t && w.scope() === u) {v.splice(x, 1);break;}}}return this;},_broadcastEvent: function (s, t) {var u, v, w;if (s instanceof r) {v = s.type();} else {v = s;}w = this._listeners[v];if (undefined === w) {return this;}if (s instanceof r) {for (u = 0; u < w.length; ++u) {w[u].apply(s._scope, [s]);if (s._propagationStopped) {break;}}} else {for (u = 0; u < w.length; ++u) {w[u].apply(null, [s,t]);}}return this;}});q.prototype = new o;gpf.extend(q.prototype, { broadcastEvent: function () {return this._broadcastEvent.apply(this, arguments);} });gpf.extend(r.prototype, {_type: "",_params: {},_cancelable: false,_propagationStopped: false,_defaultPrevented: false,_scope: null,type: function () {return this._type;},cancelable: function () {return this._cancelable;},preventDefault: function () {this._defaultPrevented = true;},defaultPrevented: function () {return this._defaultPrevented;},stopPropagation: function () {this._propagationStopped = true;},get: function (s) {return this._params[s];},fire: function (s) {return gpf.events.fire(this, s);}});gpf.events = {Target: o,Broadcaster: q,Event: r,fire: function (s, t, u) {var v;if (undefined === u) {u = t;t = undefined;}if (!(s instanceof r)) {s = new gpf.events.Event(s, t, true, this);}v = gpf.Callback.resolveScope(s._scope);if (u instanceof q) {u.broadcastEvent(s);} else if ("function" === typeof u || u instanceof gpf.Callback) {u.apply(v, [s]);} else {u = u[s.type()];if (undefined !== typeof u) {u.apply(v, [s]);}}return s;}};var s = 0, t = {}, u = function (x) {var y = x.scriptTag, z = x.headTag;y.onerror = y.onload = y.onreadystatechange = null;if (z && y.parentNode) {z.removeChild(y);}delete t[x.id];}, v = function () {var x = t[this.id];if (!x.done && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")) {setTimeout(function () {x.done = true;gpf.events.fire("load", { url: x.src }, x.eventsHandler);}, 0);u(x);}}, w = function () {var x = t[this.id];if (!x.done) {x.done = true;gpf.events.fire("error", { url: x.src }, x.eventsHandler);u(x);}};gpf.http = { include: function (x, y) {var z = {src: x,id: "__gpf_http_" + ++s,headTag: document.getElementsByTagName("head")[0] || document.documentElement,scriptTag: document.createElement("script"),done: false}, A;if (undefined === y) {y = new gpf.events.Broadcaster(["load","error"]);}z.eventsHandler = y;t[z.id] = z;A = z.scriptTag;A.language = "javascript";A.src = x;A.id = z.id;A.onload = A.onreadystatechange = v;A.onerror = w;if (undefined !== A.async) {A.async = true;}setTimeout(function () {z.headTag.insertBefore(A, z.headTag.firstChild);}, 0);} };var x = [], y = function (z, A, B) {if (!A) {A = null;}if (!B) {B = [];}return function () {z.apply(gpf.Callback.resolveScope(A), B);};};if ("wscript" === gpf.host()) {gpf.defer = function (z, A, B, C) {gpf.interfaces.ignoreParameter(A);x.push(y(z, B, C));};gpf.runAsyncQueue = function () {var z;while (x.length) {z = x.shift();z();}};} else {gpf.defer = function (z, A, B, C) {if (!A) {A = 0;}setTimeout(y(z, B, C), A);};gpf.runAsyncQueue = function () {};}var z = gpf._ALPHA + gpf._alpha + "0123456789+/", A = "0123456789ABCDEF", B = function (D, E, F, G) {var H = D.length, I = gpf.bin.isPow2(H), J, K, L = [], M;if (-1 < I && (undefined === F || F * I <= 32)) {if (undefined === F) {J = 32;} else {J = F * I;}K = (1 << J - I) - 1;J = (1 << I) - 1;while (0 !== E) {M = E & J;L.unshift(D.charAt(M));E = E >> I & K;}} else {while (0 !== E) {M = E % H;L.unshift(D.charAt(M));E = (E - M) / H;}}if (undefined !== F) {if (undefined === G) {G = D.charAt(0);}while (L.length < F) {L.unshift(G.charAt(L.length % G.length));}} else if (0 === L.length) {L = [D.charAt(0)];}return L.join("");}, C = function (D, E, F) {var G = D.length, H = 0, I = 0;if (undefined === F) {F = D.charAt(0);}while (I < E.length) {if (-1 === F.indexOf(E.charAt(I))) {break;} else {++I;}}while (I < E.length) {H = G * H + D.indexOf(E.charAt(I++));}return H;};gpf.bin = {pow2: function (D) {return 1 << D;},isPow2: function (D) {if (0 < D && 0 === (D & D - 1)) {var E = 0;while (1 < D) {++E;D >>= 1;}return E;} else {return -1;}},toBaseANY: B,fromBaseANY: C,toHexa: function (D, E, F) {return B(A, D, E, F);},fromHexa: function (D, E) {return C(A, D, E);},toBase64: function (D, E, F) {return B(z, D, E, F);},fromBase64: function (D, E) {return C(z, D, E);}};gpf.json = {};if ("undefined" === typeof JSON) {var D = function (F) {var G, H, I, J;G = F instanceof Array;H = [];for (I in F) {if ("function" === typeof F[I]) {continue;}J = E(F[I]);if (G) {H.push(J);} else {H.push(I + ": " + J);}}if (G) {return "[" + H.join(", ") + "]";} else {return "(" + H.join(", ") + ")";}}, E = function (F) {var G = typeof F;if ("undefined" === G || "function" === G) {return;} else if ("number" === G || "boolean" === G) {return F.toString();} else if ("string" === G) {return gpf.escapeFor(F, "javascript");}if (null === F) {return "null";} else {return D(F);}};gpf.json.stringify = E;gpf.json.parse = function (F) {return gpf._func("return " + F)();};} else {gpf.json.stringify = JSON.stringify;gpf.json.parse = JSON.parse;}var J = "public|protected|private|static".split("|"), K = 0, L = 3, M = true;gpf.ClassDefinition = function (N, O, P) {this._Subs = [];if ("function" === typeof N) {this._Constructor = N;} else {this._name = N;this._Base = O;this._definition = P;this._build();}};gpf.extend(gpf.ClassDefinition.prototype, {_name: "",name: function () {return this._name;},_Base: Object,Base: function () {return this._Base;},_Subs: [],Subs: function () {return this._Subs;},_attributes: null,attributes: function () {if (!this._attributes) {this._attributes = new gpf.attributes.Map;}return this._attributes;},_Constructor: function () {},_defConstructor: null,Constructor: function () {return this._Constructor;},_definition: null,_processMember: function (N, O) {var P = this._Constructor.prototype, Q = this._definition[N], R, S, T, U;R = typeof Q;if (L === O) {P.constructor[N] = Q;return;}S = this._Base.prototype[N];T = typeof S;if ("undefined" !== T && null !== S && R !== T) {throw { message: "You can't overload a member to change its type" };}if ("function" === R && "undefined" !== T) {U = N;if ("_" === U.charAt(0)) {U = U.substr(1);}U = gpf.capitalize(U);P["_base" + U] = S;}if ("constructor" === N) {this._defConstructor = Q;} else {P[N] = Q;}},_processAttribute: function (N) {var O, P = this._definition[N];N = N.substr(1, N.length - 2);if (!this._attributes) {this._attributes = {};}O = this._attributes[N];if (undefined === O) {O = [];}this._attributes[N] = O.concat(P);},_processDefWithVisibility: function (N) {var O = this._definition, P, Q;Q = J[N];P = O[Q];this._definition = P;try {for (Q in P) {if (P.hasOwnProperty(Q)) {if ("[" === Q.charAt(0) && "]" === Q.charAt(Q.length - 1)) {this._processAttribute(Q);} else if ("public" === Q || "private" === Q || "protected" === Q || "static" === Q) {throw { message: "Invalid visibility keyword" };} else {this._processMember(Q, N);}}}if ("wscript" === gpf.host() && P.constructor !== Object) {this._processMember("constructor", N);}} catch (e) {throw e;} finally {this._definition = O;}},_processDefinition: function () {var N = this._definition, O, P;for (O in N) {if (N.hasOwnProperty(O)) {if ("[" === O.charAt(0) && "]" === O.charAt(O.length - 1)) {this._processAttribute(O);} else {P = J.indexOf(O);if (-1 === P) {this._processMember(O, K);} else {this._processDefWithVisibility(P);}}}}if ("wscript" === gpf.host() && N.constructor !== Object) {this._processMember("constructor", K);}},_processAttributes: function () {var N = this._attributes, O, P, Q;if (N) {delete this._attributes;O = this._Constructor;P = O.prototype;for (Q in N) {if (N.hasOwnProperty(Q)) {if (Q in P || Q === "Class") {gpf.attributes.add(O, Q, N[Q]);} else {console.error("gpf.define: Invalid attribute name '" + Q + "'");}}}}},_build: function () {var N, O, P;N = gpf._func(H(this._name))(gpf);this._Constructor = N;N._gpf = this;M = false;O = new this._Base;M = true;N.prototype = O;O.constructor = N;P = gpf.classDef(this._Base);P.Subs().push(N);this._processDefinition();this._processAttributes();if (this._defConstructor) {O._baseConstructor = I(this._Base);}}});gpf.classDef = function (N) {if (undefined === N._gpf) {N._gpf = new gpf.ClassDefinition(N);}return N._gpf;};gpf._classInit = function (N, O) {if (M) {var P = gpf.classDef(N);if (P._defConstructor) {P._defConstructor.apply(this, O);} else {P._Base.apply(this, O);}}};function F() {var N = arguments[0], O = _CONSTRUCTOR_ = function () {N._classInit.apply(this, [O,arguments]);};return O;}function G() {var N = arguments[0], O = function _CONSTRUCTOR_() {N._classInit.apply(this, [O,arguments]);};return O;}function H(N) {var O, P, Q, R;if (-1 < N.indexOf(".")) {O = F;} else {O = G;}P = O.toString().replace("_CONSTRUCTOR_", N);Q = P.indexOf("{") + 1;R = P.lastIndexOf("}") - 1;return P.substr(Q, R - Q + 1);}function I(N) {return function () {N.apply(this, arguments);};}gpf.define = function (N, O, P) {var Q, R, S, T, U;if ("string" === typeof O) {O = gpf.context(O);} else if ("object" === typeof O) {P = O;O = undefined;}if (undefined === O) {O = Object;}if (-1 < N.indexOf(".")) {R = N.split(".");T = R.pop();S = gpf.context(R);}U = new gpf.ClassDefinition(N, O, P || {});Q = U.Constructor();if (undefined !== S) {S[T] = Q;}return Q;};gpf._genDefHandler = function (N, O) {N = N + ".";return function (P, Q, R) {var S;if (undefined === R && "object" === typeof Q) {R = Q;Q = N + O;} else if (undefined === Q) {Q = N + O;}if (-1 === P.indexOf(".")) {P = N + P;}S = gpf.define(P, Q, R);return S;};};var O = 0, P = gpf._genDefHandler("gpf.attributes", "Attribute");gpf.attributes = {};function N(Q, R) {R = "$" + R;gpf[R] = function () {var S = gpf._func("return function " + R + "(args) {" + "this.constructor.apply(this, args);" + "};")();S.prototype = Q.prototype;return function () {return new S(arguments);};}();}gpf._defAttr = function (Q, R, S) {var T = Q.charAt(0) === "$", U, V;if (T) {Q = Q.substr(1);U = Q + "Attribute";} else {U = Q;}V = P(U, R, S);if (T) {N(V, Q);}return V;};gpf._defAttr("Attribute", {_member: "",member: function (Q) {var R = this._member;if (Q) {this._member = Q;}return R;},alterPrototype: function (Q) {gpf.interfaces.ignoreParameter(Q);}});gpf._defAttr("$Alias", {_name: "",constructor: function (Q) {this._name = Q;},alterPrototype: function (Q) {N(Q.constructor, this._name);}});gpf.define("gpf.attributes.Array", {_array: [],constructor: function () {this._array = [];},has: function (Q) {gpf.ASSERT("function" === typeof Q);var R, S;for (R = 0; R < this._array.length; ++R) {S = this._array[R];if (S instanceof Q) {return S;}}return null;},filter: function (Q) {gpf.ASSERT("function" === typeof Q);var R, S, T = new gpf.attributes.Array;for (R = 0; R < this._array.length; ++R) {S = this._array[R];if (S instanceof Q) {T._array.push(S);}}return T;}});gpf.define("gpf.attributes.Map", {_members: {},_count: 0,constructor: function (Q) {this._members = {};this._count = 0;if (undefined !== Q) {this.fillFromObject(Q);}},count: function () {return this._count;},add: function (Q, R) {var S = this._members[Q];if (undefined === S) {S = this._members[Q] = new gpf.attributes.Array;}S._array.push(R);++this._count;},_copyTo: function (Q, R, S) {var T, U, V, W;if (this._count) {for (T in this._members) {if (this._members.hasOwnProperty(T)) {U = this._members[T]._array;for (V = 0; V < U.length; ++V) {W = U[V];if (!R || R(T, W, S)) {Q.add(T, W);}}}}}},_filterCallback: function (Q, R, S) {gpf.interfaces.ignoreParameter(Q);return R instanceof S;},fillFromObject: function (Q) {var R = gpf.classDef(Q.constructor), S;while (R) {S = R.attributes();if (S) {S._copyTo(this);}if (R.Base() !== Object) {R = gpf.classDef(R.Base());} else {break;}}return this._count;},filter: function (Q) {gpf.ASSERT("function" === typeof Q);var R = new gpf.attributes.Map;this._copyTo(R, this._filterCallback, Q);return R;},member: function (Q) {var R = this._members[Q];if (undefined === R) {if (0 === O) {O = new gpf.attributes.Array;}R = O;}return R;},members: function () {var Q = [], R;for (R in this._members) {if (this._members.hasOwnProperty(R)) {Q.push(R);}}return Q;}});gpf.attributes.add = function (Q, R, S) {var T, U, V, W;T = gpf.classDef(Q).attributes();U = S.length;for (V = 0; V < U; ++V) {W = S[V];W.member(R);T.add(R, W);W.alterPrototype(Q.prototype);}};gpf.define("gpf.Error", {_message: "",_name: "",constructor: function (Q, R, S) {this._message = Q;if (R) {this._name = R;} else {this._name = "Error";}if (S) {gpf.extend(this, S);}},message: function () {return this._message;},name: function () {return this._name;}});var Q = function (T) {return gpf._func("return this." + T + ";");}, R = function (T) {return gpf._func("var r = this." + T + "; if (0 < arguments.length) { this." + T + " = arguments[0]; } return r;");}, S = gpf._defAttr("ClassAttribute");gpf._defAttr("$ClassProperty", S, {_writeAllowed: false,_publicName: "",constructor: function (T, U) {if (T) {this._writeAllowed = true;}if ("string" === typeof U) {this._publicName = U;}},alterPrototype: function (T) {var U = this._member, V = this._publicName;if (!V) {V = U.substr(1);}if (this._writeAllowed) {T[V] = R(U);} else {T[V] = Q(U);}}});gpf._defAttr("$ClassEventMethod", S, {});gpf._defAttr("$ClassExtension", S, {_ofClass: 0,_publicName: "",constructor: function (T, U) {this._ofClass = T;if ("string" === typeof U) {this._publicName = U;}}});gpf.interfaces = {isImplementedBy: function (V, W) {var X;for (X in W.prototype) {if ("constructor" === X || "extend" === X) {continue;}if (typeof W.prototype[X] !== typeof V[X]) {return false;}}return true;},query: function (V, W, X) {var Y = null;if (gpf.interfaces.isImplementedBy(V, W)) {return V;} else if (gpf.interfaces.isImplementedBy(V, gpf.interfaces.IUnknown)) {Y = V.queryInterface(W);}if (null === Y && X) {throw { message: "expected " + gpf.classDef(W).name() };}return Y;}};if (!gpf.interfaces.ignoreParameter) {gpf.interfaces.ignoreParameter = function () {};}gpf._defIntrf = gpf._genDefHandler("gpf.interfaces", "Interface");gpf._defIntrf("Interface");gpf._defIntrf("IEventTarget", {addEventListener: function (V, W, X, Y) {gpf.interfaces.ignoreParameter(V);gpf.interfaces.ignoreParameter(W);gpf.interfaces.ignoreParameter(X);gpf.interfaces.ignoreParameter(Y);},removeEventListener: function (V, W, X) {gpf.interfaces.ignoreParameter(V);gpf.interfaces.ignoreParameter(W);gpf.interfaces.ignoreParameter(X);}});gpf._defIntrf("IUnknown", { queryInterface: function (V) {gpf.interfaces.ignoreParameter(V);return null;} });function T(V) {var W = new gpf.attributes.Map(this).member("Class").filter(gpf.attributes.InterfaceImplementAttribute), X, Y;for (X = 0; X < W.length(); ++X) {Y = W.get(X);if (Y._interfaceDefinition === V) {if (Y._builder) {return Y._builder(this);}break;}}return null;}function U(V) {return function () {var W = T.apply(this, arguments);if (null === W) {W = V.apply(this, arguments);}return W;};}gpf._defAttr("$InterfaceImplement", {"[_interfaceDefinition]": [gpf.$ClassProperty(false, "which")],_interfaceDefinition: 0,"[_builder]": [gpf.$ClassProperty(false, "how")],_builder: null,constructor: function (V, W) {this._interfaceDefinition = V;if (W) {this._builder = W;}},alterPrototype: function (V) {if (!this._builder) {return;}if (undefined !== V.queryInterface) {if (T !== V.queryInterface) {V.queryInterface = U(V.queryInterface);}} else {V.queryInterface = T;gpf.attributes.add(V.constructor, "Class", [gpf.$InterfaceImplement(gpf.interfaces.IUnknown)]);}}});var X = gpf.interfaces, Y = gpf.attributes;gpf._defIntrf("IEnumerable", {reset: function () {},moveNext: function () {return false;},current: function () {return null;}});function V(Z) {var ab = -1;return {reset: function () {ab = -1;},moveNext: function () {++ab;return ab < Z.length;},current: function () {return Z[ab];}};}function W(Z) {var ab = new Y.Map(Z).filter(Y.EnumerableAttribute), bb = ab.members();gpf.ASSERT(bb.length === 1);return V(Z[bb[0]]);}gpf._defAttr("$Enumerable", Y.ClassAttribute, { alterPrototype: function (Z) {if (!(Z[this._member] instanceof Array)) {throw { message: "$Enumerable can be associated to arrays only" };}Y.add(Z.constructor, "Class", [new Y.InterfaceImplementAttribute(X.IEnumerable, W)]);} });var Z = gpf.interfaces, ab = gpf.attributes, bb;bb = gpf._defIntrf("IReadOnlyArray", {length: function () {return 0;},get: function (cb) {Z.ignoreParameter(cb);return undefined;}});gpf._defIntrf("IArray", bb, { set: function (cb, db) {Z.ignoreParameter(cb);Z.ignoreParameter(db);return undefined;} });gpf._defAttr("ClassArrayInterfaceAttribute", ab.ClassAttribute, {"[Class]": [gpf.$Alias("ClassIArray")],_writeAllowed: false,constructor: function (cb) {if (cb) {this._writeAllowed = true;}},alterPrototype: function (cb) {var db;if (this._writeAllowed) {db = Z.IArray;} else {db = Z.IReadOnlyArray;}ab.add(cb.constructor, "Class", [gpf.$InterfaceImplement(db)]);cb.length = gpf._func("return this." + this._member + ".length;");cb.get = gpf._func("return this." + this._member + "[arguments[0]];");if (this._writeAllowed) {cb.set = gpf._func("var i=arguments[0]," + "v=this." + this._name + "[i];this." + this._member + "[i]=arguments[1];return v;");}}});ab.add(ab.Array, "_array", [gpf.$ClassIArray(false)]);gpf.arrayOrItem = function (cb, db) {if (undefined === db) {return Array.prototype.slice.call(cb, 0);} else if (0 === cb.length) {return undefined;} else if (-1 === db) {return cb[cb.length - 1];} else if (db < -1 || db > cb.length - 1) {return undefined;} else {return cb[db];}};var cb = gpf.interfaces;gpf._defIntrf("IReadableStream", {read: function (db, eb) {gpf.interfaces.ignoreParameter(db);gpf.interfaces.ignoreParameter(eb);},static: {EVENT_ERROR: "error",EVENT_DATA: "data",EVENT_END_OF_STREAM: "eos",EXCEPTION_READ_IN_PROGRESS: { message: "Read in progress" }}});gpf._defIntrf("IWritableStream", {write: function (db, eb) {gpf.interfaces.ignoreParameter(db);gpf.interfaces.ignoreParameter(eb);},static: {EVENT_ERROR: "error",EVENT_READY: "ready",EXCEPTION_WRITE_IN_PROGRESS: { message: "Read in progress" }}});gpf._defIntrf("IStream", {read: function (db, eb) {gpf.interfaces.ignoreParameter(db);gpf.interfaces.ignoreParameter(eb);},write: function (db, eb) {gpf.interfaces.ignoreParameter(db);gpf.interfaces.ignoreParameter(eb);}});gpf._defIntrf("ITextStream", cb.IStream, {});cb.ITextStream._write = function () {var db, eb;for (db = 0; db < arguments.length; ++db) {eb = arguments[db];if (null !== eb && "string" !== typeof eb) {eb = eb.toString();}this.write_(eb);}if (0 === db) {this.write_(null);}};var db = gpf.interfaces, eb = {javascript: {"\\": "\\\\","\"": "\\\"","\n": "\\n","\r": "\\r","\t": "\\t"},xml: {"&": "&amp;","<": "&lt;",">": "&gt;"},html: {"&": "&amp;","<": "&lt;",">": "&gt;","\xE9": "&eacute;","\xE8": "&egrave;","\xEA": "&ecirc;","\xE1": "&aacute;","\xE0": "&agrave;"}}, fb = gpf.define("StringStream", gpf.events.Target, {"[Class]": [gpf.$InterfaceImplement(gpf.interfaces.ITextStream)],_buffer: [],_pos: 0,constructor: function (gb) {if (undefined !== gb && gb.length) {this._buffer = [gb];} else {this._buffer = [];}this._pos = 0;},read: function (gb, hb) {var ib, jb, kb;if (0 === this._buffer.length) {gpf.events.fire(db.IReadableStream.EVENT_END_OF_STREAM, hb);} else if (undefined === gb) {gpf.events.fire(db.IReadableStream.EVENT_DATA, { buffer: this.consolidateString() }, hb);} else {ib = this._buffer[0];jb = ib.length;if (gb > jb - this._pos) {gb = jb - this._pos;}kb = ib.substr(this._pos, gb);this._pos += gb;if (this._pos === jb) {this._buffer.shift();this._pos = 0;}gpf.events.fire(db.IReadableStream.EVENT_DATA, { buffer: this.consolidateString() }, kb);}},write: function (gb, hb) {if (gb && gb.length) {this._buffer.push(gb);}gpf.events.fire(db.IReadableStream.EVENT_READY, hb);},consolidateString: function () {if (this._pos !== 0) {this._buffer.unshift(this._buffer.shift().substr(this._pos));}return this._buffer.join("");}});gpf.extend(gpf, {"[capitalize]": [gpf.$ClassExtension(String)],"[replaceEx]": [gpf.$ClassExtension(String)],replaceEx: function (gb, hb) {var ib = gb, jb;for (jb in hb) {if (hb.hasOwnProperty(jb)) {if (-1 < ib.indexOf(jb)) {ib = ib.split(jb).join(hb[jb]);}}}return ib;},"[escapeFor]": [gpf.$ClassExtension(String)],escapeFor: function (gb, hb) {var ib = eb[hb];if (undefined !== ib) {gb = gpf.replaceEx(gb, ib);if ("javascript" === hb) {gb = "\"" + gb + "\"";}}return gb;},"[stringToStream]": [gpf.$ClassExtension(String, "toStream")],stringToStream: function (gb) {return new fb(gb);},"[stringFromStream]": [gpf.$ClassExtension(String, "fromStream")],stringFromStream: function (gb) {if (gb instanceof fb) {return gb.consolidateString();} else {gpf.NOT_IMPLEMENTED();return null;}}});var gb = function (hb) {if (10 > hb) {return "0" + hb;} else {return hb;}};;gpf.extend(gpf, {"[dateToComparableFormat]": [gpf.$ClassExtension(Date, "toComparableFormat")],dateToComparableFormat: function (hb, ib) {if (undefined === ib) {ib = true;}var jb = [hb.getFullYear(),"-",gb(hb.getMonth() + 1),"-",gb(hb.getDate())];if (ib) {jb.push(" ", gb(hb.getHours()), ":", gb(hb.getMinutes()), ":", gb(hb.getSeconds()));}return jb.join("");},"[dateFromComparableFormat]": [gpf.$ClassExtension(String)],dateFromComparableFormat: function (hb) {var ib = new Date;ib.setFullYear(parseInt(hb.substr(0, 4), 10), parseInt(hb.substr(5, 2), 10) - 1, parseInt(hb.substr(8, 2), 10));if (10 < hb.length) {ib.setHours(parseInt(hb.substr(11, 2), 10), parseInt(hb.substr(14, 2), 10), parseInt(hb.substr(17, 2), 10), 0);} else {ib.setHours(0, 0, 0, 0);}return ib;}});var hb = gpf.interfaces, ib = 256, jb = 0, kb = 1, lb = 2, mb = 3, nb = gpf._defIntrf("ITokenizer", { write: function (vb) {gpf.interfaces.ignoreParameter(vb);return -1;} }), ob = gpf.define("PatternItem", {"[_type]": [gpf.$ClassProperty()],_type: -1,"[_parent]": [gpf.$ClassProperty(true)],_parent: null,next: function (vb) {if (undefined === vb) {return this._next;} else {this._next = vb;vb.parent(this._parent);}},_next: null,"[_min]": [gpf.$ClassProperty(true)],_min: 1,"[_max]": [gpf.$ClassProperty(true)],_max: 1,constructor: function (vb) {this._type = vb;},add: function (vb, wb) {gpf.interfaces.ignoreParameter(vb);gpf.interfaces.ignoreParameter(wb);},finalize: function () {},reset: function (vb) {gpf.interfaces.ignoreParameter(vb);},write: function (vb, wb) {gpf.interfaces.ignoreParameter(vb);gpf.interfaces.ignoreParameter(wb);return -1;}}), pb = gpf.define("PatternSimpleItem", ob, {"[_seq]": [gpf.$ClassProperty(false, "sequence")],_seq: "",constructor: function () {this._baseConstructor(ob.TYPE_SIMPLE);this._seq = [];},add: function (vb, wb) {gpf.interfaces.ignoreParameter(wb);this._seq.push(vb);},finalize: function () {this._seq = this._seq.join("");},reset: function (vb) {vb.pos = 0;},write: function (vb, wb) {if (wb !== this._seq.charAt(vb.pos)) {return ob.WRITE_NO_MATCH;}++vb.pos;if (vb.pos < this._seq.length) {return ob.WRITE_NEED_DATA;} else {return ob.WRITE_MATCH;}}}), qb = gpf.define("PatternRangeItem", ob, {_inc: "",_exc: "",constructor: function () {this._baseConstructor(ob.TYPE_RANGE);this._inc = [];},hasExclude: function () {return this.hasOwnProperty("_exc");},enterExclude: function () {this._exc = [];},add: function (vb, wb) {var xb, yb, zb;if (this.hasExclude()) {xb = this._exc;} else {xb = this._inc;}if (wb) {yb = xb[xb.length - 1].charCodeAt(0);zb = vb.charCodeAt(0);while (--zb > yb) {xb.push(String.fromCharCode(zb));}xb.push(vb);} else {xb.push(vb);}},finalize: function () {this._inc = this._inc.join("");if (this.hasExclude()) {this._exc = this._exc.join("");}},write: function (vb, wb) {gpf.interfaces.ignoreParameter(vb);var xb;if (this._inc.length) {xb = -1 < this._inc.indexOf(wb);} else {xb = true;}if (xb && this._exc.length) {xb = -1 === this._exc.indexOf(wb);}if (xb) {return ob.WRITE_MATCH;} else {return ob.WRITE_NO_MATCH;}}}), rb = gpf.define("PatternChoiceItem", ob, {_choices: [],next: function (vb) {if (undefined === vb) {return null;} else {var wb = vb.parent(), xb;this._choices.push(vb);vb.parent(this);if (1 === this._choices.length) {if (null === wb) {return;}if (wb.type() !== ob.TYPE_GROUP) {throw { message: "Unexpected" };}xb = gpf.test(wb._items, vb);if (undefined === xb) {throw { message: "Unexpected" };}wb._items[xb] = this;this._parent = wb;}}},constructor: function () {this._baseConstructor(ob.TYPE_CHOICE);this._choices = [];},write: function (vb, wb) {var xb = {}, yb, zb, Ab;for (yb = this._choices.length; yb > 0;) {zb = this._choices[--yb];zb.reset(xb);Ab = zb.write(xb, wb);if (ob.WRITE_NO_MATCH !== Ab) {vb.replaceItem = zb;gpf.extend(vb, xb);return Ab;}}return ob.WRITE_NO_MATCH;}}), sb = gpf.define("PatternGroupItem", ob, {_items: [],next: function (vb) {if (undefined === vb) {return this._next;} else {if (this._items.length) {this._next = vb;vb.parent(this._parent);} else {this._items.push(vb);vb.parent(this);}}},constructor: function () {this._baseConstructor(ob.TYPE_GROUP);this._items = [];},reset: function (vb) {this._items[0].reset(vb);},write: function (vb, wb) {var xb = this._items[0];vb.replaceItem = xb;return xb.write(vb, wb);}}), tb = gpf.define("PatternParserContext", {_root: null,_item: null,_inRange: false,_afterChar: null,parse: null,constructor: function () {this.parse = this._stateItem;},root: function () {if (null === this._item) {throw { message: "Empty pattern" };}this._item.finalize();if (this.parse !== this._stateItem && this.parse !== this._stateCount) {throw { message: "Invalid syntax" };}return this._root;},_getItem: function (vb, wb) {var xb = this._item, yb;if (wb || null === xb || vb !== xb.type()) {yb = ob.create(vb);if (null !== xb) {xb.finalize();xb.next(yb);} else {this._root = yb;}this._item = yb;xb = yb;}return xb;},_stateItem: function (vb) {if ("[" === vb) {this._getItem(ob.TYPE_RANGE, true);this.parse = this._stateCharMatchRange;} else if ("(" === vb) {this._getItem(ob.TYPE_GROUP, true);} else {this._getItem(ob.TYPE_SIMPLE);this._afterChar = this._stateCount;this._stateChar(vb);}},_stateCharMatchRange: function (vb) {var wb = this._getItem(ob.TYPE_RANGE);if ("^" === vb && !wb.hasExclude()) {wb.enterExclude();} else if ("]" === vb) {this.parse = this._stateCount;} else {this._inRange = false;this._afterChar = this._stateCharRangeSep;this._stateChar(vb);}},_stateCharRangeSep: function (vb) {if ("-" === vb) {this._inRange = true;this._afterChar = this._stateCharMatchRange;this.parse = this._stateChar;} else {this._stateCharMatchRange(vb);}},_stateChar: function (vb) {if ("\\" === vb) {this.parse = this._stateEscapedChar;} else {this._item.add(vb, this._inRange);this.parse = this._afterChar;}},_stateEscapedChar: function (vb) {this._item.add(vb, this._inRange);this.parse = this._afterChar;},_stateCountByChar: {"?": function () {var vb = this._splitSimpleOnMinMax();vb.min(0);},"+": function () {var vb = this._splitSimpleOnMinMax();vb.max(0);},"*": function () {var vb = this._splitSimpleOnMinMax();vb.min(0);vb.max(0);},"|": function () {var vb = this._item, wb = vb.parent();if (null === wb || wb.type() !== ob.TYPE_CHOICE) {wb = ob.create(ob.TYPE_CHOICE);wb.next(vb);}if (vb === this._root) {this._root = wb;}vb.finalize();this._item = wb;},")": function () {var vb = this._item;vb.finalize();while (vb.type() !== ob.TYPE_GROUP) {vb = vb.parent();}if (vb === this._item) {throw { message: "Syntax error (empty group)" };}this._item = vb;return 0;}},_splitSimpleOnMinMax: function () {var vb = this._item, wb;if (vb.type() === ob.TYPE_SIMPLE && vb.sequence().length > 1) {wb = vb.sequence().pop();vb = this._getItem(ob.TYPE_SIMPLE, true);vb.add(wb);}return vb;},_stateCount: function (vb) {var wb = this._stateCountByChar[vb];if (undefined === wb) {this._stateItem(vb);} else {if (undefined === wb.apply(this, arguments)) {this.parse = this._stateItem;}}}}), ub = gpf.define("PatternTokenizer", {"[Class]": [gpf.$InterfaceImplement(nb)],_pattern: null,_item: null,_state: {result: 0,length: 0,matchingLength: 0,count: 0},constructor: function (vb) {this._pattern = vb;this._item = vb._root;this._state = {result: 0,length: 0,matchingLength: 0,count: 0};this._item.reset(this._state);},_getNext: function (vb) {var wb = vb.next();while (null === wb) {vb = vb.parent();if (null === vb) {break;}wb = vb.next();}return wb;},_writeNoMatch: function (vb) {var wb = this._state, xb = this._item;if (wb.count < xb.min() || wb.length > wb.matchingLength + 1) {wb.result = -1;this._item = null;return -1;}xb = this._getNext(xb);if (null === xb) {if (0 === wb.matchingLength) {wb.result = -1;} else {wb.result = wb.matchingLength;}this._item = null;return wb.result;}xb.reset(wb);this._item = xb;wb.count = 0;--wb.length;return this.write(vb);},_writeMatch: function () {var vb = this._state, wb = this._item, xb = this._getNext(wb);vb.matchingLength = vb.length;++vb.count;if (0 === wb.max()) {wb.reset(vb);if (null !== xb) {vb.result = ob.WRITE_NEED_DATA;} else {vb.result = vb.length;}} else if (vb.count === wb.max()) {wb = xb;this._item = wb;if (null === wb) {vb.result = vb.length;} else {wb.reset(vb);vb.count = 0;vb.result = 0;if (0 === wb.min()) {xb = this._getNext(wb);while (xb && 0 === xb.min()) {xb = this._getNext(xb);}if (!xb) {vb.result = vb.matchingLength;}}}} else {vb.result = ob.WRITE_NEED_DATA;}return vb.result;},write: function (vb) {var wb, xb = this._state, yb = this._item;if (null !== yb) {wb = yb.write(xb, vb);++xb.length;if (undefined !== xb.replaceItem) {this._item = xb.replaceItem;}if (ob.WRITE_NEED_DATA === wb) {return xb.result;}if (ob.WRITE_NO_MATCH === wb) {return this._writeNoMatch(vb);} else {return this._writeMatch();}}return xb.result;}});gpf.extend(ob, {TYPE_SIMPLE: 0,TYPE_RANGE: 1,TYPE_CHOICE: 2,TYPE_GROUP: 3,WRITE_NO_MATCH: -1,WRITE_NEED_DATA: 0,WRITE_MATCH: 1,_factory: null,create: function (vb) {var wb = ob._factory;if (!wb) {wb = ob._factory = {};wb[this.TYPE_SIMPLE] = pb;wb[this.TYPE_RANGE] = qb;wb[this.TYPE_CHOICE] = rb;wb[this.TYPE_GROUP] = sb;}return new wb[vb];}});gpf.define("gpf.Pattern", {_root: null,constructor: function (vb) {var wb = new tb, xb, yb = vb.length;for (xb = 0; xb < yb; ++xb) {wb.parse(vb.charAt(xb));}this._root = wb.root();},allocate: function () {return new ub(this);}});gpf.define("gpf.Parser", {public: {constructor: function () {this.reset();},reset: function (vb) {this._pos = 0;this._line = 0;this._column = 0;this._setParserState(vb);},currentPos: function () {return {pos: this._pos,line: this._line,column: this._column};},parse: function () {var vb = arguments.length, wb, xb;for (wb = 0; wb < vb; ++wb) {xb = arguments[wb];if (null === xb) {this._parseEnd();} else {gpf.ASSERT("string" === typeof xb);this._parse(xb);}}},setOutputHandler: function (vb) {gpf.ASSERT(vb instanceof Array || vb.apply);this._outputHandler = vb;}},protected: {_initialParserState: null,_ignoreCarriageReturn: false,_ignoreLineFeed: false,_setParserState: function (vb) {if (!vb) {vb = this._initialParserState;}if (vb !== this._pState) {this._pState = vb;}},_output: function (vb) {var wb = this._outputHandler;if (wb instanceof Array) {wb.push(vb);} else if (null !== wb) {wb.apply(this, [vb]);}}},private: {_pos: 0,_line: 0,_column: 0,_pState: null,_outputHandler: null,_parse: function (vb) {var wb, xb, yb, zb, Ab = false;wb = vb.length;for (xb = 0; xb < wb; ++xb) {yb = vb.charAt(xb);if ("\r" === yb && this._ignoreCarriageReturn) {yb = 0;}if ("\n" === yb && this._ignoreLineFeed) {Ab = true;yb = 0;}if (yb) {zb = this._pState(yb);if (undefined !== zb) {this._setParserState(zb);}}++this._pos;if ("\n" === yb || Ab) {++this._line;this._column = 0;} else {++this._column;}}},_parseEnd: function () {this._pState(0);}},static: { FINALIZE: null }});gpf.define("gpf.ParserStream", {"[Class]": [gpf.$InterfaceImplement(hb.IReadableStream)],public: {constructor: function (vb, wb) {this._parser = vb;this._parser.setOutputHandler(new gpf.Callback(this._output, this));this._iStream = hb.query(wb, hb.IReadableStream, true);this._outputBuffer = [];},read: function (vb, wb) {var xb = this._iState, yb, zb = this._outputBufferLength;if (kb === xb) {throw hb.IReadableStream.EXCEPTION_READ_IN_PROGRESS;} else if (vb < zb || zb && mb === xb) {yb = this._outputBuffer.shift();zb = yb.length;if (vb && vb < zb) {this._outputBuffer.unshift(yb.substr(vb));yb = yb.substr(0, vb);zb = vb;}this._outputBufferLength -= zb;gpf.events.fire(hb.IReadableStream.EVENT_DATA, { buffer: yb }, wb);} else if (mb === xb) {gpf.events.fire(hb.IReadableStream.EVENT_END_OF_STREAM, wb);} else {if (jb === this._iState) {this._cbRead = new gpf.Callback(this._onRead, this);}this._iState = kb;this._size = vb;this._eventsHandler = wb;this._iStream.read(ib, this._cbRead);}}},private: {_parser: null,_iStream: null,_cbRead: null,_outputBuffer: [],_outputBufferLength: 0,_iState: jb,_size: 0,_eventsHandler: null,_onRead: function (vb) {var wb = vb.type();if (wb === hb.IReadableStream.EVENT_END_OF_STREAM) {this._iState = mb;this._parser.parse(gpf.Parser.FINALIZE);return this.read(this._size, this._eventsHandler);} else if (wb === hb.IReadableStream.EVENT_ERROR) {gpf.events.fire(vb, this._eventsHandler);} else {this._iState = lb;this._parser.parse(vb.get("buffer"));}},_output: function (vb) {this._outputBuffer.push(vb);this._outputBufferLength += vb.length;}}});var vb = "error", wb = "unknown", xb = "keyword", yb = "identifier", zb = "string", Ab = "number", Bb = "symbol", Cb = "comment", Db = "space", Eb = 99, Fb = 0, Gb = gpf._alpha + gpf._ALPHA + "_$", Hb = 2, Ib = 3, Jb = 4, Kb = 5, Lb = 6, Mb = 7, Nb = 8, Ob = 9, Pb = "(){}[]<>|&?,.;:!=+-*/%^~", Qb = 10, Rb = 11, Sb = " \t\r\n", Tb = 12, Ub = 0, Vb = 0, Wb = 1, Xb = 2, Yb = 3, Zb = 4, ac = ["Parsing aborted","Unknown token","Unterminated string","Unterminated comment","Invalid or unsupported string escape"], bc = function () {return {pos: 0,line: 0,column: 0,state: Fb,chars: [],nextPos: 0,nextLine: 0,nextColumn: 0,eventsHandler: null,that: null};}, cc = ("break,case,catch,continue,debugger,default,delete,do," + "else,finally,for,function,if,in,instanceof,new,return,switch," + "this,throw,try,typeof,var,void,while,with").split(","), dc = function () {var oc = {};oc[Fb] = wb;oc[Qb] = Bb;oc[Nb] = Cb;oc[Ob] = Cb;oc[Ib] = zb;oc[Kb] = zb;oc[Rb] = Ab;oc[Tb] = Db;return oc;}(), ec = function (oc, pc) {var qc, rc, sc, tc = {token: "",pos: oc.pos,line: oc.line,column: oc.column,code: 0,message: ""};if (undefined !== pc) {rc = vb;oc.state = Eb;tc.code = pc;tc.message = ac[pc - Ub];} else {qc = oc.chars.join("");if (Hb === oc.state) {if (undefined !== gpf.test(cc, qc)) {rc = xb;} else {rc = yb;}} else {rc = dc[oc.state];}tc.token = qc;}sc = gpf.events.fire.apply(oc.that, [rc,tc,oc.eventsHandler]);if (sc.defaultPrevented()) {ec(oc, Vb);} else if (undefined !== pc) {throw 0;}oc.state = Fb;oc.chars = [];oc.pos = oc.nextPos;oc.line = oc.nextLine;oc.column = oc.nextColumn;}, fc = [0,function (oc, pc, qc) {gpf.interfaces.ignoreParameter(pc);if (-1 < "(){}[].,;:?".indexOf(oc)) {return false;}if (-1 < "!^~*/%".indexOf(oc)) {return "=" === qc;}return "=" === qc || oc === qc;},function (oc, pc, qc) {if (-1 < "+-|&".indexOf(oc)) {return false;}if ("<" === oc) {return "<" === pc[1] && "=" === qc;}if (-1 < "=!".indexOf(oc)) {return "=" === qc;}if (">" === oc) {return "=" !== pc[1] && ("=" === qc || ">" === qc);}return false;},function (oc, pc, qc) {return ">" === oc && "=" !== pc[2] && "=" === qc;},function () {return false;}], gc = function (oc, pc) {var qc = oc[0];return fc[oc.length](qc, oc, pc);}, hc = function () {var oc = {};oc[Hb] = function (pc, qc) {if (-1 === Gb.indexOf(qc) && ("0" > qc || qc > "9")) {ec(pc);} else {pc.chars.push(qc);}};oc[Rb] = function (pc, qc) {if ("0" > qc || qc > "9") {ec(pc);} else {pc.chars.push(qc);}};oc[Ib] = oc[Kb] = function (pc, qc) {pc.chars.push(qc);if ("\\" === qc) {++pc.state;} else if ("\n" === qc) {ec(pc, Xb);} else if (Ib === pc.state && "\"" === qc) {ec(pc);return true;} else if (Kb === pc.state && "'" === qc) {ec(pc);return true;}return false;};oc[Jb] = oc[Lb] = function (pc, qc) {if ("\\" === qc || "r" === qc || "n" === qc || "t" === qc || "\"" === qc || "'" === qc) {--pc.state;pc.chars.push(qc);} else {ec(pc, Zb);}};oc[Mb] = function (pc, qc) {if ("/" === qc) {pc.state = Nb;pc.chars.push(qc);} else if ("*" === qc) {pc.state = Ob;pc.chars.push(qc);} else {pc.state = Qb;if (gc(pc.chars, qc)) {pc.chars.push(qc);} else {ec(pc);}}};oc[Nb] = function (pc, qc) {if ("\n" === qc) {ec(pc);} else {pc.chars.push(qc);}};oc[Ob] = function (pc, qc) {pc.chars.push(qc);if ("/" === qc && pc.chars[pc.chars.length - 2] === "*") {ec(pc);return true;}return false;};oc[Tb] = function (pc, qc) {if (-1 < Sb.indexOf(qc)) {pc.chars.push(qc);} else {ec(pc);}};oc[Qb] = function (pc, qc) {if (-1 < Pb.indexOf(qc)) {if (gc(pc.chars, qc)) {pc.chars.push(qc);} else {ec(pc);}} else {ec(pc);}};return oc;}(), ic = function (oc, pc) {oc.chars = [pc];if (-1 < Gb.indexOf(pc)) {oc.state = Hb;} else if ("0" <= pc && pc <= "9") {oc.state = Rb;} else if ("\"" === pc) {oc.state = Ib;} else if ("'" === pc) {oc.state = Kb;} else if ("/" === pc) {oc.state = Mb;} else if (-1 < Pb.indexOf(pc)) {oc.state = Qb;} else if (-1 < Sb.indexOf(pc)) {oc.state = Tb;} else {ec(oc, Wb);}}, jc = function (oc, pc) {var qc = hc[oc.state];if (undefined !== qc) {if (qc(oc, pc)) {return;}}if (Fb === oc.state) {ic(oc, pc);}}, kc = function (oc, pc) {++oc.nextPos;if ("\n" === pc) {++oc.nextLine;oc.nextColumn = 0;} else {++oc.nextColumn;}}, lc = function (oc, pc) {jc(oc, pc);kc(oc, pc);}, mc = function () {var oc = {};oc[Hb] = 1;oc[Rb] = 1;oc[Nb] = 1;oc[Qb] = 1;oc[Mb] = 2;oc[Ob] = 3;oc[Ib] = 4;oc[Kb] = 4;oc[Jb] = 4;oc[Lb] = 4;return oc;}(), nc = function (oc) {var pc = mc[oc.state];if (1 === pc) {ec(oc);} else if (2 === pc) {oc.state = Qb;ec(oc);} else if (3 === pc) {ec(oc, Yb);} else if (4 === pc) {ec(oc, Xb);}gpf.ASSERT(Fb === oc.state || Eb === oc.state || Tb === oc.state, "Unexpected non-final state");};gpf.js = {};gpf.extend(gpf.js, {keywords: function () {return cc;},tokenize: function (oc, pc) {var qc, rc, sc = bc();sc.eventsHandler = pc;sc.that = this;try {for (qc = 0, rc = oc.length; qc < rc; ++qc) {lc(sc, oc.charAt(qc));}nc(sc);} catch (e) {if ("number" !== typeof e) {throw e;}}},tokenizeEx: function (oc, pc, qc) {var rc, sc;if (undefined === qc) {qc = bc();}qc.eventsHandler = pc;qc.that = this;try {if (null === oc) {nc(qc);qc = null;} else {for (rc = 0, sc = oc.length; rc < sc; ++rc) {lc(qc, oc.charAt(rc));}}} catch (e) {if ("number" !== typeof e) {throw e;}}return qc;}});gpf.html = {};gpf.define("gpf.html.MarkdownParser", "gpf.Parser", {public: { constructor: function () {this._baseConstructor(arguments);this._openedTags = [];} },protected: {_ignoreCarriageReturn: true,_initialParserState: function (oc) {var pc, qc = this._inParagraph;if ("#" === oc) {this._hLevel = 1;pc = this._parseTitle;} else if ("*" === oc) {pc = this._parseList;qc = false;} else if (" " !== oc && "\t" !== oc && "\n" !== oc) {if (!qc) {this._openTag("p");this._inParagraph = true;} else {this._output(" ");qc = false;}pc = this._parseContent(oc);if (!pc) {pc = this._parseContent;}}if (qc) {this._closeTags();}return pc;}},private: {_inParagraph: false,_openedTags: [],_closeTags: function () {var oc;while (this._openedTags.length) {oc = this._openedTags.pop();this._output("</" + oc + ">");if ("p" === oc) {break;}}this._inParagraph = false;},_openTag: function (oc) {this._output("<" + oc + ">");this._openedTags.push(oc);},_hLevel: 1,_parseTitle: function (oc) {if ("#" === oc) {++this._hLevel;} else {this._openTag("h" + this._hLevel);this._setParserState(this._parseText);}},_parseList: function (oc) {var pc = this._inParagraph, qc;if (" " === oc) {if (pc) {this._closeTags();}} else if ("*" === oc) {if (pc) {this._output(" ");}this._openTag("b");}return this._parseContent;},_parseContent: function (oc) {if ("*" === oc) {this._openTag("em");} else if ("\n" === oc) {return null;} else {this._output(oc);}},_parseText: function (oc) {if ("\n" === oc) {this._closeTags();return null;} else {this._output(oc);}}}});var oc = gpf.interfaces, pc = gpf.attributes;;gpf.xml = {};gpf._defIntrf("IXmlSerializable", { toXml: function (qc, rc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);} });gpf._defIntrf("IXmlContentHandler", {characters: function (qc, rc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);},endDocument: function (qc) {oc.ignoreParameter(qc);},endElement: function (qc) {oc.ignoreParameter(qc);},endPrefixMapping: function (qc) {oc.ignoreParameter(qc);},ignorableWhitespace: function (qc, rc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);},processingInstruction: function (qc, rc, sc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);oc.ignoreParameter(sc);},setDocumentLocator: function (qc) {oc.ignoreParameter(qc);},skippedEntity: function (qc) {oc.ignoreParameter(qc);},startDocument: function (qc) {oc.ignoreParameter(qc);},startElement: function (qc, rc, sc, tc, uc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);oc.ignoreParameter(sc);oc.ignoreParameter(tc);oc.ignoreParameter(uc);},startPrefixMapping: function (qc, rc) {oc.ignoreParameter(qc);oc.ignoreParameter(rc);}});var qc = gpf._defAttr("XmlAttribute", { alterPrototype: function (Ec) {if (undefined === Ec.toXml) {pc.add(Ec.constructor, "Class", [gpf.$InterfaceImplement(oc.IXmlSerializable)]);Ec.toXml = Bc;pc.add(Ec.constructor, "Class", [gpf.$InterfaceImplement(oc.IXmlContentHandler, Dc)]);}} }), rc = gpf._defAttr("$XmlIgnore", qc, {}), sc = gpf._defAttr("$XmlAttribute", qc, {"[_name]": [gpf.$ClassProperty()],_name: "",constructor: function (Ec) {gpf.ASSERT(gpf.xml.isValidName(Ec), "Valid XML attribute name");this._name = Ec;}}), tc = gpf._defAttr("XmlRawElementAttribute", qc, {"[_name]": [gpf.$ClassProperty()],_name: "",constructor: function (Ec) {gpf.ASSERT(gpf.xml.isValidName(Ec), "Valid XML element name");this._name = Ec;}}), uc = gpf._defAttr("$XmlElement", tc, {"[_objClass]": [gpf.$ClassProperty()],_objClass: null,constructor: function (Ec, Fc) {this._baseConstructor(Ec);if (Fc) {this._objClass = Fc;}}}), vc = gpf._defAttr("$XmlList", tc, {}), wc = function (Ec, Fc) {var Gc, Hc, Ic = null, Jc = null, Kc;for (Gc = 0; Gc < Ec.length(); ++Gc) {Hc = Ec.get(Gc);if (!(Hc instanceof uc)) {continue;}Kc = Hc.objClass();if (Kc) {if (Fc instanceof Kc) {if (!Jc || Kc.prototype instanceof Jc.objClass()) {Jc = Hc;}}} else if (!Ic) {Ic = Hc;}}if (null !== Jc) {return Jc;} else {return Ic;}}, xc = function (Ec, Fc, Gc, Hc) {var Ic;if (Fc instanceof Array || Hc.has(vc) || "object" === Gc || Hc.has(uc)) {return "";}Ic = Hc.has(sc);if (Ic && Ic.name()) {Ec = Ic.name();} else {if ("_" === Ec.charAt(0)) {Ec = Ec.substr(1);}}return Ec;}, yc = function (Ec, Fc, Gc, Hc) {var Ic, Jc, Kc, Lc, Mc, Nc, Oc, Pc;Ic = Ec[Fc];if (Ic instanceof Date) {Ic = gpf.dateToComparableFormat(Ic, true);}Jc = Hc.member(Fc);if ("_" === Fc.charAt(0)) {Fc = Fc.substr(1);}Kc = Jc.has(vc);if (Ic instanceof Array || Kc) {if (Kc && Kc.name()) {Lc = true;Gc.startElement("", Kc.name());}Jc = Jc.filter(uc);for (Mc = 0; Mc < Ic.length; ++Mc) {Nc = Ic[Mc];Oc = wc(Jc, Nc);if (Oc && Oc.name()) {Pc = Oc.name();} else {Pc = "item";}Ac(Nc, Gc, Pc);}if (Lc) {Gc.endElement();}return;}Kc = Jc.has(uc);if (Kc && Kc.name()) {Pc = Kc.name();}Ac(Ic, Gc, Pc);}, zc = function (Ec, Fc, Gc, Hc) {var Ic, Jc, Kc, Lc, Mc, Nc = 0, Oc = 0, Pc;for (Jc in Ec.constructor.prototype) {Kc = Ec[Jc];if (Kc instanceof Date) {Kc = gpf.dateToComparableFormat(Kc, true);}Lc = typeof Kc;if ("function" === Lc) {continue;}Ic = Hc.member(Jc);if (Ic.has(rc)) {continue;}Mc = xc(Jc, Kc, Lc, Ic);if (Mc) {if (0 === Oc) {Oc = {};}Oc[Mc] = Kc.toString();} else {if (0 === Nc) {Nc = [];}Nc.push(Jc);}}Fc.startElement("", Gc, Gc, Oc);if (Nc) {for (Pc = 0; Pc < Nc.length; ++Pc) {yc(Ec, Nc[Pc], Fc, Hc);}}}, Ac = function (Ec, Fc, Gc) {var Hc = new pc.Map(Ec).filter(qc), Ic;if (!Gc) {Ic = Hc.member("Class").has(uc);if (Ic) {Gc = Ic.name();} else {Gc = gpf.classDef(Ec.constructor).name();if (!Gc) {Gc = "object";}}}if ("object" !== typeof Ec) {Fc.startElement("", Gc);Fc.characters(gpf.value(Ec, ""));} else {zc(Ec, Fc, Gc, Hc);}Fc.endElement();}, Bc = function (Ec) {Ac(this, oc.query(Ec, oc.IXmlContentHandler, true));}, Cc = gpf.define("FromXmlContentHandler", {"[Class]": [gpf.$InterfaceImplement(oc.IXmlContentHandler)],_target: null,_firstElement: true,_forward: [],constructor: function (Ec) {this._target = Ec;this._firstElement = true;this._forward = [];},_fillFromAttributes: function (Ec) {var Fc = new pc.Map(this._target), Gc = this._target.constructor.prototype, Hc, Ic, Jc;for (Hc in Gc) {if ("function" === typeof Gc[Hc]) {continue;}Ic = Fc.member(Hc).filter(sc);if (0 < Ic.length()) {gpf.ASSERT(Ic.length() === 1);Jc = Ic.get(0).name();} else {if (Hc.charAt(0) === "_") {Jc = Hc.substr(1);} else {continue;}}if (Jc in Ec) {this._target[Hc] = gpf.value(Ec[Jc], Gc[Hc]);}}},_fillFromElement: function (Ec, Fc, Gc, Hc) {var Ic = new pc.Map(this._target).filter(tc), Jc = this._forward[0], Kc, Lc, Mc, Nc, Oc, Pc;gpf.interfaces.ignoreParameter(Ec);gpf.interfaces.ignoreParameter(Gc);gpf.interfaces.ignoreParameter(Hc);if (undefined === Jc) {Kc = Ic.members();} else {gpf.ASSERT(Jc.type !== 0, "No content handler here");Kc = [Jc.member];}for (Lc = 0; Lc < Kc.length; ++Lc) {Mc = Kc[Lc];Nc = Ic.member(Mc);for (Oc = 0; Oc < Nc.length(); ++Oc) {Pc = Nc.get(Oc);if (Pc.name() === Fc) {if (this._fillFromRawElement(Mc, Pc)) {return;}}}}},_fillFromRawElement: function (Ec, Fc) {var Gc, Hc;if (Fc instanceof uc) {if (Fc.objClass()) {Gc = new (Fc.objClass());this._target[Ec] = Gc;Hc = oc.query(Gc, oc.IXmlContentHandler);}if (Hc) {Hc = {type: 0,iXCH: Hc};} else {Hc = {type: 1,member: Ec,buffer: []};}} else if (Fc instanceof vc) {this._target[Ec] = [];Hc = {type: 2,member: Ec};}if (Hc) {Hc.depth = 1;this._forward.unshift(Hc);return true;} else {return false;}},characters: function (Ec) {var Fc = this._forward[0];if (undefined !== Fc) {if (0 === Fc.type) {Fc.iXCH.characters.apply(Fc.iXCH, arguments);} else if (1 === Fc.type) {Fc.buffer.push(Ec);}}},endDocument: function () {},endElement: function () {var Ec = this._forward[0], Fc, Gc;if (undefined !== Ec) {if (0 === Ec.type) {Ec.iXCH.endElement.apply(Ec.iXCH, arguments);} else if (1 === Ec.type) {Fc = this._target[Ec.member];Gc = Ec.buffer.join("");if (Fc instanceof Array) {Fc.push(Gc);} else {this._target[Ec.member] = gpf.value(Gc, Fc);}}if (0 === --Ec.depth) {this._forward.shift();}}},endPrefixMapping: function (Ec) {oc.ignoreParameter(Ec);},ignorableWhitespace: function (Ec) {oc.ignoreParameter(Ec);},processingInstruction: function (Ec, Fc) {oc.ignoreParameter(Ec);oc.ignoreParameter(Fc);},setDocumentLocator: function (Ec) {oc.ignoreParameter(Ec);},skippedEntity: function (Ec) {oc.ignoreParameter(Ec);},startDocument: function () {},startElement: function (Ec, Fc, Gc, Hc) {var Ic = this._forward[0];gpf.interfaces.ignoreParameter(Ec);gpf.interfaces.ignoreParameter(Fc);gpf.interfaces.ignoreParameter(Gc);if (undefined !== Ic) {if (0 === Ic.type) {++Ic.depth;Ic.iXCH.startElement.apply(Ic.iXCH, arguments);} else {this._fillFromElement.apply(this, arguments);}} else if (this._firstElement) {this._firstElement = false;this._fillFromAttributes(Hc);} else {this._fillFromElement.apply(this, arguments);}},startPrefixMapping: function (Ec, Fc) {oc.ignoreParameter(Ec);oc.ignoreParameter(Fc);}}), Dc = function (Ec) {return new Cc(Ec);};gpf.define("gpf.xml.Writer", {"[Class]": [gpf.$InterfaceImplement(oc.IXmlContentHandler)],_stream: null,_branch: [],_pendingPrefixMappings: [],constructor: function (Ec) {this._stream = Ec;this._branch = [];this._pendingPrefixMappings = [];},_closeLeafForContent: function () {var Ec;if (this._branch.length) {Ec = this._branch[this._branch.length - 1];if (!Ec.hasContent) {this._stream.write(">");Ec.hasContent = true;}}},characters: function (Ec) {this._closeLeafForContent();this._stream.write(Ec);},endDocument: function () {},endElement: function () {var Ec = this._branch.pop(), Fc = this._stream;if (Ec.hasContent) {Fc.write("</");Fc.write(Ec.qName);Fc.write(">");} else {Fc.write("/>");}},endPrefixMapping: function (Ec) {gpf.interfaces.ignoreParameter(Ec);},ignorableWhitespace: function (Ec) {this._closeLeafForContent();this._stream.write(Ec);},processingInstruction: function (Ec, Fc) {var Gc = this._stream;Gc.write("<?");Gc.write(Ec);Gc.write(" ");Gc.write(gpf.escapeFor(Fc, "xml"));Gc.write("?>");},setDocumentLocator: function (Ec) {gpf.interfaces.ignoreParameter(Ec);},skippedEntity: function (Ec) {gpf.interfaces.ignoreParameter(Ec);},startDocument: function () {},startElement: function (Ec, Fc, Gc, Hc) {var Ic, Jc, Kc, Lc = this._stream;if (undefined === Gc && !Ec) {Gc = Fc;}this._closeLeafForContent();var Mc = {hasContent: false,qName: Gc};this._branch.push(Mc);Lc.write("<");Lc.write(Gc);if (Hc) {for (Ic in Hc) {if (Hc.hasOwnProperty(Ic)) {Lc.write(" ");Lc.write(Ic);Lc.write("=\"");Jc = gpf.escapeFor(Hc[Ic].toString(), "xml");if (-1 < Jc.indexOf("\"")) {Jc = gpf.replaceEx(Jc, { "\"": "&quot;" });}Lc.write(Jc);Lc.write("\"");}}}if (this._pendingPrefixMappings.length) {for (Kc = 0; Kc < this._pendingPrefixMappings.length; ++Kc) {Lc.write(" ");Lc.write(this._pendingPrefixMappings);}this._pendingPrefixMappings = [];}},startPrefixMapping: function (Ec, Fc) {var Gc = ["xmlns:",Ec,":\"",gpf.escapeFor(Fc, "xml"),"\""].join(""), Hc = this._branch[this._branch.length], Ic = this._stream;if (Hc.hasContent) {this._pendingPrefixMappings.push(Gc);} else {Ic.write(" ");Ic.write(Gc);}}});gpf.xml.convert = function (Ec, Fc) {var Gc, Hc;Gc = oc.query(Fc, oc.IXmlContentHandler, true);if ("string" === typeof Ec) {gpf.NOT_IMPLEMENTED();} else if ("object" === typeof Ec) {Hc = oc.query(Ec, oc.IXmlSerializable);if (null !== Hc) {Hc.toXml(Gc);} else {new gpf.xml.ConstNode(Ec).toXml(Gc);}}};var Ec = gpf._alpha + gpf._ALPHA + "_", Fc = Ec + "012345789.-";gpf.extend(gpf.xml, {isValidName: function (Gc) {var Hc;if (0 === Gc.length || -1 === Ec.indexOf(Gc.charAt(0))) {return false;}for (Hc = 1; Hc < Gc.length; ++Hc) {if (-1 === Fc.indexOf(Gc.charAt(Hc))) {return false;}}return true;},toValidName: function (Gc) {var Hc;if (gpf.xml.isValidName(Gc)) {return Gc;}Hc = "_" + Gc;if (!gpf.xml.isValidName(Hc)) {throw { message: "Invalid name" };}return Hc;}});var Gc = gpf.interfaces;gpf.extend(gpf.xml, {NODE_INVALID: 0,NODE_ELEMENT: 1,NODE_ATTRIBUTE: 2,NODE_TEXT: 3,NODE_ENTITY_REFERENCE: 5,NODE_PROCESSING_INSTRUCTION: 7,NODE_COMMENT: 8,NODE_DOCUMENT: 9});gpf._defIntrf("IXmlConstNode", {attributes: function (Hc) {gpf.interfaces.ignoreParameter(Hc);return "";},children: function (Hc) {if (undefined === Hc) {return [];} else {return undefined;}},localName: function () {return "";},namespaceURI: function () {return "";},nextSibling: function () {return null;},nodeName: function () {return "";},nodeType: function () {return 0;},nodeValue: function () {return null;},ownerDocument: function () {return null;},parentNode: function () {return null;},prefix: function () {return "";},previousSibling: function () {return null;},textContent: function () {return "";}});gpf.define("gpf.xml.ConstNode", {"[Class]": [gpf.$InterfaceImplement(Gc.IXmlConstNode),gpf.$InterfaceImplement(Gc.IXmlSerializable)],_obj: null,_name: "",_parentNode: null,_attributes: {},_elements: {},_children: [],constructor: function (Hc, Ic) {this._obj = Hc;this._attributes = null;this._elements = null;this._children = null;if (undefined === Ic) {this._name = "root";} else {this._name = Ic;}},_members: function () {var Hc, Ic, Jc;this._attributes = {};this._elements = {};if ("object" === typeof this._obj && !(this._obj instanceof Array)) {for (Hc in this._obj) {if (this._obj.hasOwnProperty(Hc)) {Ic = this._obj[Hc];if (null === Ic) {continue;}Jc = gpf.xml.toValidName(Hc);if ("object" === typeof Ic) {this._elements[Hc] = Jc;} else {this._attributes[Hc] = Jc;}}}}},attributes: function (Hc) {var Ic, Jc, Kc;if (null === this._attributes) {this._members();}if (undefined === Hc) {Ic = {};for (Jc in this._attributes) {if (this._attributes.hasOwnProperty(Jc)) {Kc = this._attributes[Jc];Ic[Kc] = this._obj[Jc];}}return Ic;}for (Jc in this._attributes) {if (this._attributes.hasOwnProperty(Jc)) {if (Hc === this._attributes[Jc]) {return this._obj[Jc];}}}return undefined;},children: function (Hc) {var Ic, Jc, Kc, Lc;if (null === this._children) {if (null === this._elements) {this._members();}this._children = [];if (this._obj instanceof Array) {for (Ic = 0; Ic < this._obj.length; ++Ic) {Jc = new gpf.xml.ConstNode(this._obj[Ic], "item");Jc._parentNode = this;this._children.push(Jc);}} else {for (Kc in this._elements) {if (this._elements.hasOwnProperty(Kc)) {Lc = this._elements[Kc];Jc = new gpf.xml.ConstNode(this._obj[Kc], Lc);Jc._parentNode = this;this._children.push(Jc);}}}}return gpf.arrayOrItem(this._children, Hc);},localName: function () {return this._name;},namespaceURI: function () {return "";},nextSibling: function () {var Hc;if (null !== this._parentNode) {Hc = gpf.test(this._parentNode._children, this);if (undefined !== Hc && Hc < this._parentNode._children.length - 1) {return this._parentNode._children[Hc + 1];}}return null;},nodeName: function () {return this._name;},nodeType: function () {return gpf.xml.NODE_ELEMENT;},nodeValue: function () {return this._obj;},ownerDocument: function () {return null;},parentNode: function () {return this._parentNode;},prefix: function () {return "";},previousSibling: function () {var Hc;if (null !== this._parentNode) {Hc = gpf.test(this._parentNode._children, this);if (0 < Hc) {return this._parentNode._children[Hc - 1];}}return null;},textContent: function () {if ("object" !== typeof this._obj) {return gpf.value(this._obj, "");} else {return "";}},toXml: function (Hc) {gpf.xml.nodeToXml(this, Hc);}});gpf.xml.nodeToXml = function (Hc, Ic) {var Jc = Hc.localName(), Kc = Hc.attributes(), Lc = Hc.children(), Mc = Hc.textContent(), Nc;Ic.startElement("", Jc, Jc, Kc);if (Mc) {Ic.characters(Mc);} else {for (Nc = 0; Nc < Lc.length; ++Nc) {gpf.xml.nodeToXml(Lc[Nc], Ic);}}Ic.endElement();};function Hc(Nc, Oc, Pc, Qc) {var Rc, Sc;for (Rc = 0; Rc < Nc.length; ++Rc) {Sc = Nc[Rc];Oc(Sc, Pc, Qc);}}function Ic(Nc, Oc, Pc) {var Qc = Nc.children(), Rc, Sc, Tc;for (Sc = 0; Sc < Qc.length; ++Sc) {Tc = true;Rc = Qc[Sc];if (Oc.name && Rc.localName() !== Oc.name) {Tc = false;} else if (Oc.text && Rc.textContent() !== Oc.text) {Tc = false;}if (Tc) {Pc.push(Rc);}if (undefined !== Oc.relative && !Oc.relative) {Ic(Rc, Oc, Pc);}}}function Jc(Nc, Oc, Pc) {var Qc, Rc, Sc;if (Oc.name) {Sc = Nc.attributes(Oc.name);if (undefined !== Sc && (!Oc.text || Sc === Oc.text)) {Pc.push(Nc);}} else {Qc = Nc.attributes();for (Rc in Qc) {if (Qc.hasOwnProperty(Rc)) {Sc = Qc[Rc];if (!Oc.text || Sc === Oc.text) {Pc.push(Nc);break;}}}}}function Kc(Nc, Oc, Pc) {if (gpf.xml.NODE_ELEMENT === Oc.type) {Hc(Nc, Ic, Oc, Pc);} else if (gpf.xml.NODE_ATTRIBUTE === Oc.type) {Hc(Nc, Jc, Oc, Pc);}}function Lc(Nc, Oc, Pc) {var Qc, Rc, Sc, Tc, Uc;if (Oc.and) {Rc = Oc.and;Sc = 0;} else if (Oc.or) {Rc = Oc.or;Sc = 1;}for (Tc = 0; Tc < Rc.length; ++Tc) {Uc = Rc[Tc];if (Uc.and || Uc.or) {Qc = [];Lc(Nc, Uc, Qc);} else {Qc = Mc(Nc, Uc);}if (0 === Sc && Qc.length === 0) {return;}if (1 === Sc && Qc.length !== 0) {Pc.push(Nc);return;}}if (0 === Sc) {Pc.push(Nc);}}function Mc(Nc, Oc) {var Pc, Qc = [Nc];while (Oc) {Pc = [];Kc(Qc, Oc, Pc);if (0 === Pc.length) {return [];}Qc = Pc;if (Oc.filter) {Pc = [];Hc(Qc, Lc, Oc.filter, Pc);if (0 === Pc.length) {return [];}Qc = Pc;}Oc = Oc.then;}return Pc;}gpf.define("gpf.xml.XPath", {_xpath: null,constructor: function (Nc) {this._reset();if ("string" === typeof Nc) {this._xpath = this._compile(Nc);} else {this._xpath = Nc;}},_reset: function () {},_compile: function (Nc) {gpf.interfaces.ignoreParameter(Nc);this._xpath = null;},selectNodes: function (Nc) {return Mc(Nc, this._xpath);}});}));