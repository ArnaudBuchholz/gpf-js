!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else if("undefined"!=typeof module&&module.exports)b(module.exports);else{var c={};b(c),a.gpf=c}}(this,function(a){"use strict";function b(){}function c(a){return null===a||"object"!=typeof a?mb:a}function d(a,b){return void 0!==a?a[b]:void 0}function e(a,b){var c=a[b];return void 0===c&&(c=a[b]={}),c}function f(b,c){var f,g;return f=c?e:d,"gpf"===b[0]?(g=a,b=b.slice(1)):g=mb,b.reduce(f,g)}function g(a,b){a=a.split(".");var c,d=a.pop(),e=f(a,!0),g=!0;e[d]=function(){return g&&(c=b(a),e[d]=c,g=!1),c.apply(this,arguments)}}function h(a,b,c){return ub.apply(a,[b||0,c||a.length+1])}function i(a){return 10>a?"0"+a:a}function j(){var a=Function.prototype.toString.apply(this),b=a.indexOf("function"),c=a.indexOf("(",b);return a.substr(b+9,c-b-9).replace(wb,"").trim()}function k(a){var b,c,d,e,f;if("string"==typeof a&&(xb.lastIndex=0,b=xb.exec(a))){for(d=[],e=b.length-1,f=0;e>f;++f)c=b[f+1],c?d.push(parseInt(b[f+1],10)):d.push(0);if(--d[1],d[1]<12&&d[2]<32&&d[3]<24&&d[4]<60&&d[5]<60)return d}}function l(){var a=arguments[0],b=k(a);return b?new yb(yb.UTC.apply(yb.UTC,b)):rb.apply(yb,arguments)}function m(a,b,c){function d(a){return function(b){e&&(e=!1,a(b))}}var e=!0;try{a(d(b),d(c))}catch(f){e&&(e=!1,c(f))}}function n(){var a=this;a._handlers.forEach(function(b){b.process(a)}),a._handlers=[]}function o(a){var b=this;b._state=!1,b._value=a,n.call(b)}function p(a){var b=this;try{if(sb(a!==b,"A promise cannot be resolved with itself."),a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void m(c.bind(a),p.bind(b),o.bind(b))}b._state=!0,b._value=a,n.call(b)}catch(d){o.apply(b,[d])}}function q(){}function r(){return!1}function s(a,b){var c;return void 0===b&&(b=a,a=[]),sb("string"==typeof b&&b.length,"Source expected (or use _gpfEmptyFunc)"),0===a.length?Mb(b):(c=[].concat(a),c.push(b),Mb.apply(null,c))}function t(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function u(a){var b,c=typeof a;return"function"===c?1===a.length:"object"!==c?!1:(b=a.dispatchEvent,"function"==typeof b?1===b.length:!0)}function v(a,c){var d,e=a.scope;return"function"==typeof c.dispatchEvent?c.dispatchEvent.bind(c):"function"==typeof c?c.bind(e):(d=c[a.type]||c["*"]||b,d.bind(c.scope||c))}function w(a,b,c){var d=v(a,b);d(a),void 0!==c&&c(a)}function x(b,d,e){var f=c(this);return sb(u(e),"Expected a valid event handler"),b instanceof Ub||(b=new a.events.Event(b,d,f)),new Promise(function(a){++Vb>10?setTimeout(w.bind(null,b,e,a),0):(w(b,e),a(b)),--Vb})}function y(a){return new Promise(function(b,c){a(function(a){Bb===a.type?c(a.get("error")):b(a)})})}function z(a,b,c){var d,e=a.length;for(d=0;e>d;++d)b.apply(c,[a[d],d,a])}function A(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.apply(c,[a[d],d,a])}function B(a){return a.charAt(0).toUpperCase()+a.substr(1)}function C(a,b){var c=a;return A(b,function(a,b){c=c.split(b).join(a)}),c}function D(a,b){return a=C(a,Xb[b]),"javascript"===b&&(a='"'+a+'"'),a}function E(a,b){this[0][b]=a}function F(a,b){var c=this[0],d=this[2];void 0===c[b]?c[b]=a:d(c,b,a)}function G(a,b,c){var d;return void 0===c?d=E:(sb("function"==typeof c,"Expected function"),d=F),A(b,d,arguments),a}function H(a,b,c){var d,e=typeof a;return c||(c=typeof b),c===e?a:"undefined"===e?b:(d=Yb[c](a,e,b),void 0===d?b:d)}function I(a){return a.trim()}function J(a){this.parameters=[],void 0!==a&&this._extract(a)}function K(a){this._pending=[],this._done=[],!0===a?this._haveDifferentPrototypes=r:this._alike=r}function L(a,b,c){return function(d){var e,f,g=new Zb;return g.code=a,g.name=b,d?(f={},A(d,function(a,b){f["{"+b+"}"]=a.toString()}),e=C(c,f)):e=c,g.message=e,g}}function M(a,b,c){var d=L(a,b,c);return d.CODE=a,d.NAME=b,d.MESSAGE=c,d}function N(b,c){var d,e;nb(b);for(d in c)c.hasOwnProperty(d)&&(e=++$b,a.Error["CODE_"+d.toUpperCase()]=e,a.Error[d]=M(e,d,c[d]))}function O(a){var b=a._eventDispatcherListeners;return b||(b=a._eventDispatcherListeners={}),b}function P(a,b){var c=O(this);return void 0===c[a]&&(c[a]=[]),c[a].push(b),this}function Q(a,b){var c,d,e=this._eventDispatcherListeners;return e&&(c=e[a],void 0!==c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1))),this}function R(a,b){var c,d=b.length;for(c=0;d>c;++c)x.apply(a.scope,[a,{},b[c]])}function S(a,b){var c,d,e,f=this._eventDispatcherListeners;return f?(a instanceof Ub?(c=a,d=a.type):d=a,e=this._eventDispatcherListeners[d],void 0===e?this:(c||(c=new Ub(d,b,this)),R(c,e),c)):this}function T(a,b){bc[b]=a,void 0===ac[a]&&(ac[a]=b)}function U(a,b){A(b,function(b,c){var d=a+c;0===b?T(d,"."+c):"string"==typeof b?b.split(",").forEach(function(a){T(d,"."+a)}):U(d+"/",b)})}function V(a){var b=bc[a.toLowerCase()];return void 0===b&&(b="application/octet-stream"),b}function W(a){var b=ac[a.toLowerCase()];return void 0===b&&(b=".bin"),b}function X(){null===bc&&(bc={},ac={},U("",_b))}function Y(a,b){return a.dt-b.dt}function Z(a,b){sb("number"==typeof b,"Timeout is required");var c={id:++dc,dt:new Date((new Date).getTime()+b),cb:a};return cc.push(c),cc.sort(Y),dc}function $(a){var b;cc.every(function(c,d){return c.id===a?(b=d,!1):!0})||cc.splice(b,1)}function _(){for(var a,b,c=cc;c.length;)a=c.shift(),b=new Date,a.dt>b&&ec(a.dt-b),a.cb()}function aa(a,b,c){var d,e,f,g=a.base,h=a.value,i=[];for(d=void 0===c?32:c*b,e=(1<<d-b)-1,d=(1<<b)-1;0!==h;)f=h&d,i.unshift(g.charAt(f)),h=h>>b&e;return i}function ba(a){for(var b,c=a.base,d=a.value,e=[],f=c.length;0!==d;)b=d%f,e.unshift(c.charAt(b)),d=(d-b)/f;return e}function ca(b,c){var d=a.bin.isPow2(b.base.length);return d>-1&&(void 0===c||32>=c*d)?aa(b,d,c):ba(b)}function da(a,b,c){var d=c.length,e=c.pad,f=ca({base:a,value:b},d);if(void 0!==d)for(void 0===e&&(e=a.charAt(0));f.length<d;)f.unshift(e.charAt(f.length%e.length));else 0===f.length&&(f=[a.charAt(0)]);return f.join("")}function ea(a,b,c){var d=a.length,e=0,f=0;for(void 0===c&&(c=a.charAt(0));f<b.length&&-1!==c.indexOf(b.charAt(f));)++f;for(;f<b.length;)e=d*e+a.indexOf(b.charAt(f++));return e}function fa(a){var b,c,d,e;b=a instanceof Array,c=[];for(d in a)"function"!=typeof a[d]&&(e=ha(a[d]),b?c.push(e):c.push(D(d,"javascript")+":"+e));return b?"["+c.join(",")+"]":"{"+c.join(",")+"}"}function ga(a){return a.toString()}function ha(a){var b=lc[typeof a];return void 0!==b?b(a):null===a?"null":fa(a)}function ia(a){return s("return "+a)()}function ja(a){if(-1<a.indexOf("/"))a=a.split("/");else{if(!(-1<a.indexOf("\\")))return[a];a=a.toLowerCase().split("\\")}return a.length&&!a[a.length-1]&&a.pop(),a}function ka(a){return a=ja(a),a[a.length-1]}function la(a){return a.split("*")}function ma(a){"!"===a.charAt(0)&&(this.negative=!0,a=a.substr(1));var b=a.indexOf("**");-1===b?this.start=a.split("/").map(la):(b>0&&(sb("/"===a.charAt(b-1),"** must be preceded by /"),this.start=a.substr(0,b-1).split("/").map(la)),b<a.length-2&&(sb("/"===a.charAt(b+2),"** must be followed by /"),this.end=a.substr(b+3).split("/").map(la).reverse()))}function na(a){return a instanceof ma?a:new ma(a)}function oa(a){return a instanceof Array?a.map(na):[na(a)]}function pa(a){var b=a.negative;return a.match(this.parts)?(this.result=!b,!1):b?(this.result=!0,!1):!0}function qa(a,b){var c=ja(b),d=oa(a),e={parts:c};return d.every(pa,e),e.result}function ra(a){var b,c,d=mc.length;for(b=0;d>b;++b)if(c=mc.charAt(b),-1!==a.indexOf(c))return c;return mc.charAt(0)}function sa(a){var b=a.length-1;return"\r"===a.charAt(b)?a.substr(0,b):a}function ta(a,b){b=b||{},this._lines=a.split("\n").map(sa);var c=b.header||this._lines.shift();this._separator=b.separator||ra(c),this._quote=b.quote||'"',this._columns=c.split(this._separator)}function ua(a){return"constructor"===a?"constructor ":a}function va(a){return"constructor "===a?"constructor":a}function wa(a){return function(){a.isConstructionAllowed()&&a._resolvedConstructor.apply(this,arguments)}}function xa(a){var b=a.toString().split("._super");return!b.every(function(a){return-1!==Sb.indexOf(a.charAt(0))})}function ya(a,b){return function(){var c,d=this._super;this._super=a;try{c=b.apply(this,arguments)}finally{void 0===d?delete this._super:this._super=d}return c}}function za(a,b,c){this._uid=++pc,oc[this._uid]=this,this._Subs=[],"function"==typeof a?(this._name=a.compatibleName()||"anonymous",this._Constructor=a):(this._name=a,this._Super=b,this._definition=c,this._build())}function Aa(a){var b,c=a[qc];return void 0===c?(b=new za(a),a[qc]=b._uid):b=oc[c],b}function Ba(a,b,c){tb({"name is required (String)":"string"==typeof a,"base is required (String|Function)":"string"==typeof b||b instanceof Function,"definition is required (Object)":"object"==typeof c});var d,e,g,h,i;return-1<a.indexOf(".")&&(e=a.split("."),h=e.pop(),g=f(e,!0)),"string"==typeof b&&(b=f(b.split(".")),sb(b instanceof Function,"base must resolve to a function")),i=new za(a,b,c),d=i._Constructor,void 0!==g&&(g[h]=d),d}function Ca(a,b){var c=this[b];void 0!==c&&(this[a]=c,delete this[b])}function Da(a,b,c){return A(wc,Ca,c),Ba(a,b,c)}function Ea(a,b){return a+=".",b=a+b,function(c,d,e){return void 0===e&&"object"==typeof d&&(e=d,d=b),-1===c.indexOf(".")&&(c=a+c),Da(c,d||b,e||{})}}function Fa(b,c){c="$"+c,a[c]=function(){var a=s("return function "+c+"(args) {this.constructor.apply(this, args);};")();return a.prototype=b.prototype,function(){return new a(arguments)}}()}function Ga(a){return s("return this."+a+".length;")}function Ha(a){return s(["idx"],"return this."+a+"[idx];")}function Ia(a,b,c){var d,e,f="$"===a.charAt(0);return f?(a=a.substr(1),d=a+"Attribute"):d=a,e=Bc(d,b,c),f&&Fa(e,a),e}function Ja(b,c){throw nb(b,c),a.Error.abstractMethod()}function Ka(){return this._MEMBER_}function La(a){var b=this._MEMBER_;return this._MEMBER_=a,b}function Ma(a,b){var c,d,e,f;return c=a.toString().split("_MEMBER_").join(b),e=c.indexOf("(")+1,f=c.indexOf(")",e)-1,d=c.substr(e,f-e+1).split(",").map(function(a){return a.trim()}),e=c.indexOf("{")+1,f=c.lastIndexOf("}")-1,c=c.substr(e,f-e+1),s(d,c)}function Na(a,b){var c,d,e,f;for(c in b.prototype)if("constructor"!==c){if(d=b.prototype[c],e=a[c],f=typeof e,typeof d!==f)return!1;if("function"===f&&d.length!==e.length)return!1}return!0}function Oa(b,c,d){var e=null;if(Na(b,c))return b;if(Na(b,a.interfaces.IUnknown)&&(e=b.queryInterface(c)),null===e&&(void 0===d||d))throw a.Error.interfaceExpected({name:Aa(c)._name});return e}function Pa(b){var c,d=new a.attributes.Map(this).getMemberAttributes("Class").filter(a.attributes.InterfaceImplementAttribute);return d.every(function(a){return c=a._builder,a._interfaceDefinition!==b||!c})?null:"function"==typeof c?c(this):this[c]()}function Qa(a){return function(b){nb(b);var c=Pa.apply(this,arguments);return null===c&&(c=a.apply(this,arguments)),c}}function Ra(b,c,d){function e(a){x.apply(b,[a,{},d])}var f,g=Ic.query(b,Ic.IEnumerator);if(1<c.length)f=function(b){if(a.events.EVENT_CONTINUE===b.type){if(!g.moveNext(f))return}else{if(a.events.EVENT_STOP===b.type)return e(a.events.EVENT_STOPPED);if(a.events.EVENT_DATA!==b.type)return e(b.type)}c(g.current(),f)},g.moveNext(f)&&c(g.current(),f);else for(f=function(b){if(a.events.EVENT_DATA!==b.type)return e(b);do c(g.current());while(g.moveNext(f))};g.moveNext(f);)c(g.current())}function Sa(a){var b=-1;return{reset:function(){b=-1},moveNext:function(c){var d;return++b,d=b<a.length,!d&&c&&x.apply(this,[Eb,{},c]),d},current:function(){return a[b]}}}function Ta(a){var b=new Ac.Map(a).filter(Ac.EnumerableAttribute),c=b.getMembers();return Sa(a[c[0]])}function Ua(b){return function(c,d,e){function f(a,b){x(a,b||{},e)}function g(a){Bb===a.type&&f(a),0===--i&&f(Eb)}function h(d){var e,l,m=d.type;Kb===m?(++i,b.explore(d.filePath,function(a){Bb===a.type?f(a):Ic.IEnumerator.each(a.get("enumerator"),h,g)})):Jb===m&&(e=d.filePath,l=a.path.relative(c,e),j(k,l)&&f(Db,{path:l}))}var i=0,j=a.path.match,k=a.path.compileMatchPattern(d);b.getInfo(c,function(a){Bb===a.type?f(a):h(a.get("info"))})}}function Va(a,b){this._readable=Oa(a.readable,Ic.IReadableStream,!0),this._writable=Oa(a.writable,Ic.IWritableStream,!0),void 0!==a.chunkSize&&(this._chunkSize=a.chunkSize),this._eventsHandler=b}function Wa(a,b){var c=new Va(a,b);c.ready()}function Xa(a,b){for(var c,d,e=a.length,f=0;b>0&&e>f&&(c=a[f],d=c.length,b>=d);)++f,b-=d;return{count:f,remaining:b}}function Ya(a,b,c){var d,e;return sb(b<=a.length,"itemsCount within strings range"),d=b>0?a.splice(0,b):[],a.length&&c&&(e=a.shift(),d.push(e.substr(0,c)),a.unshift(e.substr(c))),d.join("")}function Za(a,b){var c=Xa(a,b);return Ya(a,c.count,c.remaining)}var $a,_a,ab,bb,cb,db="0.1.5-alpha",eb="browser",fb="nodejs",gb="phantomjs",hb="rhino",ib="unknown",jb="wscript",kb=ib,lb=!1,mb=this,nb=b,ob=b,pb=!1,qb=!1,rb=function(){var a,b=["var C = this,","    p = arguments,","    l = p.length;"],c=[],d=Function;for(a=0;10>a;++a)c.push("p["+a+"]");for(a=0;10>a;++a)b.push("    if ("+a+" === l) {"),b.push("        return new C("+c.slice(0,a).join(", ")+");"),b.push("    }");return new d(b.join("\r\n"))}();"undefined"!=typeof WScript?(kb=jb,lb=!0,mb=function(){return this}.call(null),ob=function(a){WScript.Quit(a)},mb.console={log:function(a){WScript.Echo("    "+a)},info:function(a){WScript.Echo("[?] "+a)},warn:function(a){WScript.Echo("/!\\ "+a)},error:function(a){WScript.Echo("(X) "+a)}}):"undefined"!=typeof print&&"undefined"!=typeof java?(kb=hb,lb=!1,mb=function(){return this}.call(null),ob=function(a){java.lang.System.exit(a)},mb.console={log:function(a){print("    "+a)},info:function(a){print("[?] "+a)},warn:function(a){print("/!\\ "+a)},error:function(a){print("(X) "+a)}}):"undefined"!=typeof phantom&&phantom.version?(kb=gb,lb="\\"===require("fs").separator,mb=window,pb=!0,qb=!0,ob=phantom.exit):"undefined"!=typeof module&&module.exports?(kb=fb,cb=require("path"),lb="\\"===cb.sep,mb=global,pb=!0,ob=process.exit):"undefined"!=typeof window&&(kb=eb,mb=window,qb=!0,ob=b,_a=window,ab=document,bb=ab.getElementsByTagName("head")[0]||ab.documentElement),$a=mb.gpf,a.noConflict=function(){return void 0===$a?delete mb.gpf:mb.gpf=$a,a},pb&&(a.node={}),a.web={},a.version=function(){return db},a.host=function(){return kb},a.context=function(a){return void 0===a?mb:f(a.split("."))},a.loaded=function(a){return a&&a(),!0};var sb,tb;sb=b,tb=b;var ub=Array.prototype.slice,vb={Array:{on:Array.prototype,every:function(a){var b,c=arguments[1],d=this.length;for(b=0;d>b;++b)if(!a.apply(c,[this[b],b,this]))return!1;return!0},filter:function(a){var b,c,d=arguments[1],e=[],f=this.length;for(b=0;f>b;++b)c=this[b],a.apply(d,[this[b],b,this])&&e.push(c);return e},forEach:function(a){var b,c=arguments[1],d=this.length;for(b=0;d>b;++b)a.apply(c,[this[b],b,this])},indexOf:function(a){for(var b=arguments[1],c=b||0,d=this.length;d>c;){if(this[c]===a)return c;++c}return-1},map:function(a){var b,c=arguments[1],d=this.length,e=new Array(d);for(b=0;d>b;++b)e[b]=a.apply(c,[this[b],b,this]);return e},reduce:function(a){var b,c=arguments[1],d=this.length,e=0;for(b=void 0===c?this[e++]:c;d>e;++e)b=a(b,this[e],e,this);return b}},Function:{on:Function.prototype,bind:function(a){var b=this,c=h(arguments,1);return function(){var d=h(arguments,0);b.apply(a,c.concat(d))}}},Object:{on:Object,create:function(){function a(){}return function(b){a.prototype=b;var c=new a;return a.prototype=null,c.__proto__||(c.__proto__=b),c}}(),getPrototypeOf:function(a){return a.__proto__||a.constructor.prototype},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},values:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}},String:{on:String.prototype,trim:function(){var a=new RegExp("^[\\s\ufeff ]+|[\\s\ufeff ]+$","g");return function(){return this.replace(a,"")}}()},Date:{on:Date.prototype,toISOString:function(){return[this.getUTCFullYear(),"-",i(this.getUTCMonth()+1),"-",i(this.getUTCDate()),"T",i(this.getUTCHours()),":",i(this.getUTCMinutes()),":",i(this.getUTCSeconds()),".",(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5),"Z"].join("")}}};!function(){function a(a,b){for(var c in b)if(b.hasOwnProperty(c)){if("on"===c)continue;void 0===a[c]&&(a[c]=b[c])}}var b,c;for(b in vb)vb.hasOwnProperty(b)&&(c=vb[b],a(c.on,c))}();var wb=new RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");(function(){function a(){}return"functionName"!==a.name})()?Function.prototype.compatibleName=j:Function.prototype.compatibleName=function(){return this.name};var xb=new RegExp(["^([0-9][0-9][0-9][0-9])","\\-","([0-9][0-9])","\\-","([0-9][0-9])","(?:T","([0-9][0-9])","\\:","([0-9][0-9])","\\:","([0-9][0-9])","(?:\\.","([0-9][0-9][0-9])","Z)?)?$"].join("")),yb=mb.Date;["prototype","UTC","parse","now"].forEach(function(a){l[a]=yb[a]}),function(){var a=!1;try{var b=new Date("2003-01-22T22:45:34.075Z"),c=new Date("2003-01-22");a=2003===b.getUTCFullYear()&&0===b.getUTCMonth()&&22===b.getUTCDate()&&22===b.getUTCHours()&&45===b.getUTCMinutes()&&34===b.getUTCSeconds()&&75===b.getUTCMilliseconds()&&2003===c.getUTCFullYear()&&0===c.getUTCMonth()&&22===c.getUTCDate()}catch(d){}a||(mb.Date=l)}();var zb=a.Promise=function(a){m(a,p.bind(this),o.bind(this))};q.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(a){var b=this;return null===a._state?(a.hasOwnProperty("_handlers")||(a._handlers=[]),void a._handlers.push(b)):void setTimeout(function(){var c,d;if(c=a._state?b.onFulfilled:b.onRejected,null===c)return void(a._state?b.resolve(a._value):b.reject(a._value));try{d=c(a._value)}catch(e){return void b.reject(e)}b.resolve(d)},0)}},zb.prototype={_state:null,_value:null,_handlers:[],then:function(a,b){var c=this;return new zb(function(d,e){var f=new q;void 0!==a&&(f.onFulfilled=a),void 0!==b&&(f.onRejected=b),f.resolve=d,f.reject=e,f.process(c)})},"catch":function(a){return this.then(null,a)}},zb.resolve=function(a){return new zb(function(b){b(a)})},zb.reject=function(a){return new zb(function(b,c){nb(b),c(a)})},zb.all=function(a){return 0===a.length?zb.resolve([]):new zb(function(b,c){function d(f,g){try{if(f&&f instanceof zb)return void f.then(function(a){d(a,g)},c);a[g]=f,0===--e&&b(a)}catch(h){c(h)}}var e=a.length;a.forEach(d)})},zb.race=function(a){return new zb(function(b,c){a.forEach(function(a){a.then(b,c)})})},void 0===mb.Promise&&(mb.Promise=zb);var Ab="*",Bb="error",Cb="ready",Db="data",Eb="endOfData",Fb="continue",Gb="stop",Hb="stopped",Ib=0,Jb=1,Kb=2,Lb=99,Mb=Function,Nb=2147483647,Ob=4294967295,Pb="abcdefghijklmnopqrstuvwxyz",Qb="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Rb="0123456789",Sb=Pb+Qb+Rb+"_$",Tb="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield".split(",");t(a,{HOST_BROWSER:eb,HOST_NODEJS:fb,HOST_PHANTOMJS:gb,HOST_RHINO:hb,HOST_UNKNOWN:ib,HOST_WSCRIPT:jb}),a.events={isValidHandler:u};var Ub=a.events.Event=function(a,b,d){this.type=a,this.scope=c(d),void 0!==b&&(this._params=b)};Ub.prototype={constructor:Ub,type:"",scope:null,_params:{},get:function(a){return this._params[a]}};var Vb=0;Ub.prototype.fire=function(a){return x.apply(this,[this,{},a])},a.events.fire=function(b,c,d){nb(b,c,d);var e,f=this;return this!==a.events&&(e=f),void 0===d&&(d=c,c={}),x.apply(e,[b,c,d])},a.events.getPromiseHandler=y,t(a.events,{EVENT_ANY:Ab,EVENT_ERROR:Bb,EVENT_READY:Cb,EVENT_DATA:Db,EVENT_END_OF_DATA:Eb,EVENT_CONTINUE:Fb,EVENT_STOP:Gb,EVENT_STOPPED:Hb}),qb&&(a.web.include=function(){function a(a,b){this.id=++g,this.url=a,this.eventsHandler=b,h[this.id]=this}function b(a){return h[a.substr(f.length)]}function c(){var a=this,c=b(a.id);c&&c.check(a)}function d(){var a=this,c=b(a.id);c&&c.failed(a)}function e(a){bb.insertBefore(a,bb.firstChild)}var f="gpf-include-",g=0,h={};return a.prototype={id:0,url:"",eventsHandler:null,clean:function(a){var b=a.parentNode;a.onerror=a.onload=a.onreadystatechange=null,b&&b.removeChild(a),delete h[this.id]},check:function(a){var b=a.readyState;(!b||-1<["loaded","complete"].indexOf(b))&&(this.clean(a),setTimeout(x,0,Cb,{url:this.url},this.eventsHandler))},failed:function(a){this.clean(a),setTimeout(x,0,Bb,{url:this.url},this.eventsHandler)}},function(b,g){var h=new a(b,g),i=ab.createElement("script");i.language="javascript",i.src=b,i.id=f+h.id,i.onload=i.onreadystatechange=c,i.onerror=d,void 0!==i.async&&(i.async=!0),setTimeout(e,0,i)}}());var Wb;Wb=eb===kb&&(_a.HTMLCollection||_a.NodeList)?function(a){return a instanceof Array||a instanceof _a.HTMLCollection||a instanceof _a.NodeList}:function(a){return a instanceof Array},a.isArrayLike=Wb,a.forEach=function(a,b,c){return Wb(a)?void z(a,b,c):void A(a,b,c)};var Xb={javascript:{"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","	":"\\t"},xml:{"&":"&amp;","<":"&lt;",">":"&gt;"}};!function(){var a=Xb,b={};A(a.xml,function(a,c){b[c]=a}),A({224:"&agrave;",225:"&aacute;",232:"&egrave;",233:"&eacute;",234:"&ecirc;"},function(a,c){b[String.fromCharCode(c)]=a}),a.html=b}(),a.extend=G;var Yb={"boolean":function(a,b,c){return nb(c),"string"===b?"yes"===a||"true"===a?!0:0!==parseInt(a,10):"number"===b?0!==a:void 0},number:function(a,b,c){return nb(c),"string"===b?parseFloat(a):void 0},string:function(a,b,c){return a instanceof Date?a.toISOString():(nb(b,c),a.toString())},object:function(a,b,c){return c instanceof Date&&"string"===b&&k(a)?new Date(a):void 0}};a.value=H,G(a,{clone:function(a){return JSON.parse(JSON.stringify(a))},test:function(a,b){var c;if(a instanceof Array){for(c=a.length;c>0;)if(a[--c]===b)return c}else for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c},set:function(a,b){sb(a instanceof Array,"gpf.set must be used with an Array");for(var c=a.length;c>0;)if(a[--c]===b)return a;return a.push(b),a},clear:function(a,b){var c;if(a instanceof Array){for(c=a.length;c>0;)if(a[--c]===b){a.splice(c,1);break}}else for(c in a)a.hasOwnProperty(c)&&a[c]===b&&delete a[c];return a},xor:function(a,b){return a&&!b||!a&&b}}),a.exit=function(a){void 0===a&&(a=0),ob(a)},J.prototype={isNative:!1,name:"",parameters:[],body:"",replaceInBody:function(a){this.body=C(this.body,a)},_extract:function(a){this.name=a.compatibleName();var b,c,d=Function.prototype.toString.call(a).replace(wb,"");0<a.length?(b=d.indexOf("(")+1,c=d.indexOf(")",b)-1,this.parameters=d.substr(b,c-b+1).split(",").map(I)):this.parameters=[],-1<d.indexOf("[native")?this.isNative=!0:(b=d.indexOf("{")+1,c=d.lastIndexOf("}")-1,this.body=d.substr(b,c-b+1))},generate:function(){return s("return "+this._toSource())()},_toSource:function(){var a;return a=this.name?" "+this.name:"",["function",a," ("].concat(this.parameters).concat([") {\n",this.body,"\n}"]).join("")}},K.prototype={_pending:[],_done:[],_stack:function(a,b){var c,d,e=this._done;for(c=e.indexOf(a);c>-1;){if(d=c%2?e[c-1]:e[c+1],d===b)return;c=e.indexOf(a,c+1)}e=this._pending,e.push(a),e.push(b)},_haveDifferentPrototypes:function(a,b){return a.constructor!==b.constructor},explore:function(){for(var a,b,c=this._pending,d=this._done;0!==c.length;){if(b=c.pop(),a=c.pop(),d.push(a,b),this._haveDifferentPrototypes(a,b))return!1;if(this._checkMembersDifferences(a,b))return!1}return!0},_checkMembersDifferences:function(a,b){var c,d=0;for(c in a)if(a.hasOwnProperty(c)&&(++d,!this.like(a[c],b[c])))return!0;for(c in b)b.hasOwnProperty(c)&&--d;return 0!==d},_downcast:function(a){return"object"==typeof a?a instanceof String?a.toString():a.valueOf():a},_alike:function(a,b){return this._downcast(a)===this._downcast(b)},like:function(a,b){return a===b?!0:typeof a!=typeof b?this._alike(a,b):null===a||null===b||"object"!=typeof a?!1:(this._stack(a,b),!0)}},a.like=function(a,b,c){var d=new K(c);return d.like(a,b)&&d.explore()};var Zb=a.Error=function(){};Zb.prototype={constructor:Zb,code:0,name:"Error",message:""};var $b=0;N("boot",{notImplemented:"Not implemented",abstractMethod:"Abstract method",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"}),a.mixins={EventDispatcher:{addEventListener:P,removeEventListener:Q,dispatchEvent:S}};var _b={application:{javascript:"js"},image:{gif:0,jpeg:"jpg,jpeg",png:0},text:{css:0,html:"htm,html",plain:"txt,text,log"}},ac=null,bc=null;g("gpf.web.getMimeType",function(){return X(),V}),g("gpf.web.getFileExtension",function(){return X(),W});var cc=[],dc=0,ec=b;a.handleTimeout=b,"undefined"==typeof setTimeout&&(jb===kb?ec=function(a){WScript.Sleep(a)}:hb===kb?ec=java.lang.Thread.sleep:console.warn("No implementation for setTimeout"),mb.setTimeout=Z,mb.clearTimeout=$,a.handleTimeout=_);var fc=Qb+Pb+Rb+"+/",gc="0123456789ABCDEF",hc=987654321,ic=(new Date).getTime()&Ob;a.bin={pow2:function(a){if(31===a)return Nb+1;if(32===a)return Ob+1;if(31>a)return 1<<a;var b=Ob+1;for(a-=31;--a;)b*=2;return b},isPow2:function(a){if(a>0&&0===(a&a-1)){for(var b=0;a>1;)++b,a/=2;return b}return-1},toHexa:function(a,b,c){return da(gc,a,{length:b,pad:c})},fromHexa:function(a,b){return ea(gc,a,b)},toBase64:function(a,b,c){return da(fc,a,{length:b,pad:c})},fromBase64:function(a,b){return ea(fc,a,b)},test:function(a,b){return(a&b)===b},clear:function(a,b){return a&~b},random:function(){return hc=36969*(65535&hc)+(hc>>16)&Ob,ic=18e3*(65535&ic)+(ic>>16)&Ob,((hc<<16)+ic&Ob)+Nb}};var jc,kc,lc={undefined:b,"function":b,number:ga,"boolean":ga,string:function(a){return D(a,"javascript")}};"undefined"==typeof JSON?(jc=ha,kc=ia,mb.JSON={stringify:jc,parse:kc}):(jc=JSON.stringify,kc=JSON.parse),a.path={join:function(a){a=ja(a);var b,c,d=arguments.length;for(b=1;d>b;++b){for(c=ja(arguments[b]);".."===c[0];){if(c.shift(),!a.length)return"";a.pop()}c.length&&(a=a.concat(c))}return a.join("/")},parent:function(a){return a=ja(a),a.pop(),a.join("/")},name:ka,nameOnly:function(a){var b=ka(a),c=b.lastIndexOf(".");return-1===c?b:b.substr(0,c)},extension:function(a){var b=ka(a),c=b.lastIndexOf(".");return-1===c?"":b.substr(c)},relative:function(a,b){a=ja(a),b=ja(b);for(var c;a.length&&b.length&&a[0]===b[0];)a.shift(),b.shift();for(c=a.length+1;--c;)b.unshift("..");return b.join("/")}},ma.prototype={constructor:ma,negative:!1,start:null,end:null,_matchName:function(a,b){var c,d,e=a.length,f=0;for(c=0;e>c;++c)if(d=a[c]){if(f=b.indexOf(d,f),-1===f)return!1;if(0===c&&f>0)return!1}return!d||f+d.length===b.length},_matchStart:function(a){var b,c=a.parts,d=c.length,e=a.startPos,f=this.start,g=f.length;for(b=0;g>b;++b){if(!this._matchName(f[b],c[e]))return!1;if(++e>=d)return b===g-1&&!this.end}a.startPos=e},_matchEnd:function(a){var b,c=a.parts,d=a.startPos,e=c.length-1,f=this.end,g=f.length;for(b=0;g>b;++b){if(!(e>-1&&this._matchName(f[b],c[e])))return!1;if(e--<d)return!1}},match:function(a){var b,c={parts:a,startPos:0};return this.start&&(b=this._matchStart(c),void 0!==b)?b:this.end&&(b=this._matchEnd(c),void 0!==b)?b:!0}},G(a.path,{match:function(a,b){return qa(a,b)||!1},compileMatchPattern:function(a){return oa(a)}}),a.js={keywords:function(){return[].concat(Tb)}},N("csv",{csvInvalid:"Invalid CSV syntax (bad quote sequence or missing end of file)"});var mc=";,	 ";ta.prototype={_lines:[],_separator:"",_quote:"",_columns:[],_unquote:function(b){for(var c=this._quote,d=b.indexOf(c),e=!0;d>-1;){if(d===b.length-1){b=b.substr(0,d),e=!1;break}if(b.charAt(d+1)!==c)throw a.Error.csvInvalid();b=b.substr(0,d)+b.substr(d+1),d=b.indexOf(c,d+1)}return[b,e]},_processQuotedLineValue:function(a,b,c){var d,e=a[b],f=[a[b-1]];return c.includeCarriageReturn?f.push("\r\n"):f.push(this._separator),d=this._unquote(e),f.push(d[0]),c.inQuotedString=d[1],a[b-1]=f.join(""),c.includeCarriageReturn=!1,a.splice(b,1),b},_processLineValue:function(a,b,c){var d,e=a[b];return 0===e.indexOf(this._quote)&&(c.inQuotedString=!0,d=this._unquote(e.substr(1)),a[b]=d[0],c.inQuotedString=d[1]),b+1},_processLineValues:function(a,b,c){var d;for(c.inQuotedString?(c.includeCarriageReturn=!0,a.unshift(b.pop()),d=1):(d=0,c.includeCarriageReturn=!1);d<a.length;)d=c.inQuotedString?this._processQuotedLineValue(a,d,c):this._processLineValue(a,d,c);return[].splice.apply(b,[b.length,0].concat(a)),!c.inQuotedString},_readValues:function(){for(var b,c=this._lines,d=this._separator,e=[],f={inQuotedString:!1,includeCarriageReturn:!1};c.length&&(b=c.shift().split(d),!this._processLineValues(b,e,f)););if(f.inQuotedString)throw a.Error.csvInvalid();return e},read:function(){var a=this._readValues(),b={};return this._columns.forEach(function(c,d){b[c]=a[d]}),b},readAll:function(){for(var a=[];this._lines.length;)a.push(this.read());return a}},a.csv={parse:function(a,b){var c=new ta(a,b);return c.readAll()}},N("define",{classMemberOverloadWithTypeChange:"You can't overload a member and change its type",classInvalidVisibility:"Invalid visibility keyword"});var nc=!0,oc={},pc=0,qc="_gpf_"+a.bin.toHexa(a.bin.random(),8),rc="public|protected|private|static".split("|"),sc=-1,tc=0,uc=1,vc=3;za.prototype={constructor:za,_uid:0,_name:"",_Super:Object,_Subs:[],_definitionAttributes:null,_Constructor:b,_definitionConstructor:null,_resolvedConstructor:b,_definition:null,isConstructionAllowed:function(){return nc},addMember:function(b,c,d){if(void 0===d)d=tc;else if(d=rc.indexOf(d),-1===d)throw a.Error.classInvalidVisibility();this._addMember(b,c,d)},_addMember:function(a,b,c){vc===c?(sb(void 0===this._Constructor[a],"Static members can't be overridden"),this._Constructor[a]=b):"constructor"===a?this._addConstructor(b,c):this._addNonStaticMember(a,b,c)},_addConstructor:function(a,b){tb({"Constructor must be a function":"function"==typeof a,"Own constructor can't be overridden":null===this._definitionConstructor}),xa(a)&&(a=ya(this._Super,a)),nb(b),this._definitionConstructor=a},_addNonStaticMember:function(b,c,d){var e,f,g=typeof c,h=this._Constructor.prototype;if(sb(!h.hasOwnProperty(b),"Existing own member can't be overridden"),e=this._Super.prototype[b],f=typeof e,"undefined"!==f){if(null!==e&&g!==f)throw a.Error.classMemberOverloadWithTypeChange();"function"===g&&xa(c)&&(c=ya(e,c))}nb(d),h[b]=c},_filterAttribute:function(a,b){var c;return"["!==a.charAt(0)||"]"!==a.charAt(a.length-1)?!1:(a=ua(a.substr(1,a.length-2)),this._definitionAttributes?c=this._definitionAttributes[a]:this._definitionAttributes={},void 0===c&&(c=[]),this._definitionAttributes[a]=c.concat(b),!0)},_defaultVisibility:sc,_deduceVisibility:function(a){var b=this._defaultVisibility;return sc===b&&(b="_"===a.charAt(0)?uc:tc),b},_processDefinitionMember:function(b,c){if(!this._filterAttribute(c,b)){var d=rc.indexOf(c);if(sc===d)return this._addMember(c,b,this._deduceVisibility(c));if(sc!==this._defaultVisibility)throw a.Error.classInvalidVisibility();this._processDefinition(b,d)}},_processDefinition:function(a,b){var c=jb===kb;this._defaultVisibility=b,A(a,this._processDefinitionMember,this),c&&a.hasOwnProperty("toString")&&this._processDefinitionMember(a.toString,"toString"),this._defaultVisibility=sc,c&&a.hasOwnProperty("constructor")&&this._addConstructor(a.constructor,this._defaultVisibility)},_processAttributes:function(){var a,b,c=this._definitionAttributes;c&&(sb("function"==typeof Dc,"Attributes can't be defined before they exist"),a=this._Constructor,b=a.prototype,A(c,function(c,d){d=va(d),d in b||"Class"===d?Dc(a,d,c):console.error("gpf.define: Invalid attribute name '"+d+"'")}))},_getNewClassConstructor:function(a){var b=new J(wa);return b.replaceInBody({"function":"function "+a}),b.generate()(this)},_safeNewSuper:function(){var a;return nc=!1,a=new this._Super,nc=!0,a},_build:function(){var a,b,c,d;d=this._name.split(".").pop(),a=this._getNewClassConstructor(d),this._Constructor=a,a[qc]=this._uid,b=this._safeNewSuper(),a.prototype=b,b.constructor=a,c=Aa(this._Super),c._Subs.push(a),this._processDefinition(this._definition,sc),this._processAttributes(),this._resolveConstructor()},_resolveConstructor:function(){this._definitionConstructor?this._resolvedConstructor=this._definitionConstructor:Object!==this._Super&&(this._resolvedConstructor=this._Super)}};var wc={"-":"private","#":"protected","+":"public","~":"static"};a.define=function(a,b,c){return"object"==typeof b&&(c=b,b=void 0),
void 0===b&&(b=Object),Ba(a,b,c||{})},za.prototype._attributes=null;var xc,yc,zc,Ac=a.attributes={},Bc=Ea("gpf.attributes","Attribute"),Cc=Da("gpf.attributes.Attribute",Object,{"#":{_member:"",_alterPrototype:function(a){nb(a)}},"+":{getMemberName:function(){return this._member}}});yc=b,zc=b,Da("gpf.attributes.Array",Object,{"-":{_array:[]},"+":{constructor:function(){this._array=[]},getItemsCount:Ga("_array"),getItem:Ha("_array"),has:function(a){return yc(a),!this._array.every(function(b){return!(b instanceof a)})},filter:function(a){yc(a);var b=new Ac.Array;return b._array=this._array.filter(function(b){return b instanceof a}),b},forEach:function(a,b){this._array.forEach(a,b)},every:function(a,b){return this._array.every(a,b)}}}),xc=new Ac.Array,Da("gpf.attributes.Map",Object,{"-":{_members:{},_count:0,_copy:function(a,b,c){return A(this._members,function(d,e){e=va(e),d._array.forEach(function(d){b&&!b(e,d,c)||a.add(e,d)})}),a},_filterCallback:function(a,b,c){return nb(a),b instanceof c}},"+":{constructor:function(a){this._members={},a instanceof Function?this.fillFromClassDef(Aa(a)):void 0!==a&&this.fillFromObject(a)},fillFromClassDef:function(a){for(var b,c;a&&(b=a._attributes,b&&b._copy(this),c=a._Super,c!==Object);)a=Aa(c);return this},fillFromObject:function(a){var b=Aa(a.constructor);return this.fillFromClassDef(b)},getCount:function(){return this._count},add:function(a,b){zc(b),a=ua(a);var c=this._members[a];void 0===c&&(c=this._members[a]=new Ac.Array),c._array.push(b),++this._count},filter:function(a){return yc(a),this._copy(new Ac.Map,this._filterCallback,a)},getMemberAttributes:function(a){a=ua(a);var b=this._members[a];return void 0!==b&&b instanceof Ac.Array?b:xc},getMembers:function(){var a=[];return A(this._members,function(b,c){nb(b),a.push(va(c))}),a},forEach:function(a,b){A(this._members,function(c,d,e){a.apply(b,[c,va(d),e])})}}});var Dc=Ac.add=function(a,b,c){c instanceof Ac.Array?c=c._array:c instanceof Array||(c=[c]);var d,e,f,g=Aa(a),h=g._attributes;for(h||(h=g._attributes=new Ac.Map),d=c.length,e=0;d>e;++e)f=c[e],sb(f instanceof Cc,"Expected attribute"),f._member=b,h.add(b,f),f._alterPrototype(a.prototype)};N("a_attributes",{onlyForAttributeClass:"The attribute {attributeName} can be used only on an Attribute class",onlyOnClassForAttributeClass:"The attribute {attributeName} must be used on Class",classOnlyAttribute:"The attribute {attributeName} can be used only for Class",memberOnlyAttribute:"The attribute {attributeName} can be used only for members",uniqueAttributeConstraint:"Attribute {attributeName} already defined on {className}",uniqueMemberAttributeConstraint:"Attribute {attributeName} already defined on {className}::{memberName}"});var Ec=Ia("AttrClassOnlyAttribute",{"#":{_alterPrototype:function(b){if(!(b instanceof Cc))throw a.Error.onlyForAttributeClass({attributeName:Aa(this.constructor)._name});if("Class"!==this._member)throw a.Error.onlyOnClassForAttributeClass({attributeName:Aa(this.constructor)._name})}}}),Fc=Ia("AttrConstraintAttribute",Ec,{"~":{originalAlterPrototype:"_alterPrototype:checked"},"-":{_checkAndAlterPrototype:function(a){var b=this,c=Ac.AttrConstraintAttribute,d=c.originalAlterPrototype,e=new Ac.Map(b);e.filter(Fc).forEach(function(c){c.forEach(function(c){c._check(b,a)})}),b[d](a)}},"#":{_check:Ja,_alterPrototype:function(a){var b=Ac.AttrConstraintAttribute,c=b.originalAlterPrototype;this._super(a),void 0===a[c]&&(a[c]=a._alterPrototype,a._alterPrototype=this._checkAndAlterPrototype)}}});Ia("$ClassAttribute",Fc,{"#":{_check:function(b,c){if(nb(c),"Class"!==b._member){var d=b.constructor,e=Aa(d);throw a.Error.classOnlyAttribute({attributeName:e._name})}}}}),Ia("$MemberAttribute",Fc,{"#":{_check:function(b,c){if(nb(c),"Class"===b._member){var d=b.constructor,e=Aa(d);throw a.Error.memberOnlyAttribute({attributeName:e._name})}}}}),Ia("$UniqueAttribute",Fc,{"-":{_classScope:!0},"#":{_check:function(b,c){var d,e,f,g,h,i,j=b._member;if(d=c.constructor,e=Aa(d),f=new Ac.Map(d),g=b.constructor,h=Aa(g),i=f.filter(g),this._classScope){if(1<i.getCount())throw a.Error.uniqueAttributeConstraint({attributeName:h._name,className:e._name})}else if(1<i.getMemberAttributes(j).getItemsCount())throw a.Error.uniqueMemberAttributeConstraint({attributeName:h._name,className:e._name,memberName:j})}},"+":{constructor:function(a){void 0!==a&&(this._classScope=!0===a)}}});var Gc,Hc=Ia("ClassAttribute");Ia("$ClassProperty",Hc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)],"-":{_writeAllowed:!1,_publicName:void 0,_visibility:void 0},"#":{_alterPrototype:function(a){var b=this._member,c=this._publicName,d=this._visibility,e=Aa(a.constructor);c||(c="_"===b.charAt(0)?b.substr(1):b),c=B(c),this._writeAllowed&&e.addMember("set"+c,Ma(La,b),d),e.addMember("get"+c,Ma(Ka,b),d)}},"+":{constructor:function(a,b,c){a&&(this._writeAllowed=!0),"string"==typeof b&&(this._publicName=b),"string"==typeof c&&(this._visibility=c)}}}),Ia("$ClassEventHandler",Hc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)]}),Gc=Ia("$ClassNonSerialized",Hc,{"[Class]":[a.$MemberAttribute(),a.$UniqueAttribute(!1)]}),N("interfaces",{interfaceExpected:"Expected interface not implemented: {name}"});var Ic=a.interfaces={isImplementedBy:function(a,b){return a instanceof Function&&(a=a.prototype),Na(a,b)},query:Oa},Jc=Ea("gpf.interfaces","Interface");Da("gpf.interfaces.Interface",Object,{}),Jc("IEventDispatcher",{addEventListener:function(a,b){return nb(a,b),this},removeEventListener:function(a,b){return nb(a,b),this},dispatchEvent:function(a,b){nb(a,b)}});var Kc=Jc("IUnknown",{queryInterface:function(a){return nb(a),null}});Ia("$InterfaceImplement",{"-":{"[_interfaceDefinition]":[a.$ClassProperty(!1)],_interfaceDefinition:b,"[_builder]":[a.$ClassProperty(!1)],_builder:null,_addMissingInterfaceMembers:function(a){var b,c=this._interfaceDefinition.prototype;for(b in c)b in a||(a[b]=c[b])},_addQueryInterface:function(b){void 0===b.queryInterface?(b.queryInterface=Pa,Dc(b.constructor,"Class",[a.$InterfaceImplement(Kc)])):Pa!==b.queryInterface&&(b.queryInterface=Qa(b.queryInterface))}},"#":{_alterPrototype:function(b){this._builder?this._addQueryInterface(b):(this._addMissingInterfaceMembers(b),(new a.attributes.Map).fillFromClassDef(Aa(this._interfaceDefinition)).forEach(function(a,c){Dc(b.constructor,c,a)}))}},"+":{constructor:function(a,b){this._interfaceDefinition=a,b&&(this._builder=b)}}}),N("i_enumerator",{enumerableInvalidMember:"$Enumerator can be associated to arrays only"}),Jc("IEnumerator",{reset:function(){},"[moveNext]":[a.$ClassEventHandler()],moveNext:function(a){return nb(a),!1},current:function(){return null},"~":{each:Ra,fromArray:Sa}}),Ia("$Enumerable",Ac.ClassAttribute,{Class:[a.$UniqueAttribute(),a.$MemberAttribute()],_alterPrototype:function(b){if(!Wb(b[this._member]))throw a.Error.enumerableInvalidMember();Dc(b.constructor,"Class",[new Ac.InterfaceImplementAttribute(Ic.IEnumerator,Ta)])}});var Lc=Jc("IReadOnlyArray",{getItemsCount:function(){return 0},getItem:function(a){nb(a)}});Jc("IArray",Lc,{setItemsCount:function(a){return nb(a),0},setItem:function(a,b){nb(a,b)}}),Ia("$ClassIArray",Ac.ClassAttribute,{"[Class]":[a.$UniqueAttribute(),a.$MemberAttribute()],"-":{_writeAllowed:!1},"#":{_alterPrototype:function(b){var c,d=this._member;c=this._writeAllowed?Ic.IArray:Ic.IReadOnlyArray,Dc(b.constructor,"Class",[a.$InterfaceImplement(c)]),b.getItemsCount=Ga(d),b.getItem=Ha(d),this._writeAllowed&&(b.setItemsCount=s(["count"],["var oldValue = this.",d,".length;","this.",d,".length = count;","return oldValue;"].join("")),b.setItem=s(["idx","value"],["var oldValue = this.",d,"[idx];","this.",d,"[idx] = value;","return oldValue;"].join("")))}},"+":{constructor:function(a){a&&(this._writeAllowed=!0)}}}),Dc(Ac.Array,"_array",[a.$ClassIArray(!1)]),Jc("IReadableStream",{"[read]":[a.$ClassEventHandler()],read:function(a,b){nb(a,b)}}),Jc("IWritableStream",{"[write]":[a.$ClassEventHandler()],write:function(a,b){nb(a,b)}}),Jc("IFileStorage",{"[getInfo]":[a.$ClassEventHandler()],getInfo:function(a,b){nb(a,b)},"[readAsBinaryStream]":[a.$ClassEventHandler()],readAsBinaryStream:function(a,b){nb(a,b)},"[writeAsBinaryStream]":[a.$ClassEventHandler()],writeAsBinaryStream:function(a,b){nb(a,b)},close:function(a,b){nb(a,b)},"[explore]":[a.$ClassEventHandler()],explore:function(a,b){nb(a,b)},"[createFolder]":[a.$ClassEventHandler()],createFolder:function(a,b){nb(a,b)},"[deleteFile]":[a.$ClassEventHandler()],deleteFile:function(a,b){nb(a,b)},"[deleteFolder]":[a.$ClassEventHandler()],deleteFolder:function(a,b){nb(a,b)}}),N("fs",{fileNotFound:"File not found"}),a.fs={host:function(){return null},find:b},g("gpf.fs.find",function(){return Ua(a.fs.host())}),t(a.fs,{TYPE_NOT_FOUND:Ib,TYPE_FILE:Jb,TYPE_DIRECTORY:Kb,TYPE_UNKNOWN:Lb}),N("stream",{readInProgress:"A read operation is already in progress",writeInProgress:"A write operation is already in progress"});var Mc=4096;a.stream={},Va.prototype={_readable:null,_writable:null,_chunkSize:Mc,_eventsHandler:null,scope:null},Va.prototype[Cb]=function(a){nb(a),this._readable.read(this._chunkSize,this)},Va.prototype[Eb]=function(a){nb(a),x.apply(this,[Cb,{},this._eventsHandler])},Va.prototype[Db]=function(a){var b=a.get("buffer");this._writable.write(b,this)},Va.prototype[Ab]=function(a){x.apply(this,[a,{},this._eventsHandler])},a.stream.pipe=Wa;var Nc=Da("StringStream",Object,{"[Class]":[a.$InterfaceImplement(Ic.IReadableStream),a.$InterfaceImplement(Ic.IWritableStream)],"+":{constructor:function(a){"string"==typeof a?this._buffer=[a]:this._buffer=[]},read:function(a,b){var c;0===this._buffer.length?x.apply(this,[Eb,{},b]):(c=Za(this._buffer,a),x.apply(this,[Db,{buffer:c},b]))},write:function(a,b){sb("string"==typeof a&&a.length,"String buffer must contain data"),this._buffer.push(a),x.apply(this,[Cb,{},b])},toString:function(){return this._buffer.join("")}},"-":{_buffer:[]}});G(a,{capitalize:B,replaceEx:C,escapeFor:D,stringExtractFromStringArray:Za,stringToStream:function(a){return new Nc(a)},stringFromStream:function(a,b){if(a instanceof Nc)x(Cb,{buffer:a.toString()},b);else{var c=new Nc;Wa({readable:a,writable:c},function(a){Cb===a.type?x(Cb,{buffer:c.toString()},b):x(a,{},b)})}}});var Oc=Da("ArrayStream",Object,{"[Class]":[a.$InterfaceImplement(Ic.IReadableStream),a.$InterfaceImplement(Ic.IWritableStream)],"+":{constructor:function(a){a instanceof Array?this._buffer=[].concat(a):this._buffer=[]},read:function(a,b){var c;0===this._buffer.length?x.apply(this,[Eb,{},b]):(c=this._buffer.splice(0,a),x.apply(this,[Db,{buffer:c},b]))},write:function(a,b){sb(a instanceof Array,"Array expected"),this._buffer=this._buffer.concat(a),x.apply(this,[Cb,{},b])},toArray:function(){return[].concat(this._buffer)}},"-":{_buffer:[]}});G(a,{arrayToStream:function(a){return new Oc(a)},arrayFromStream:function(a,b){if(a instanceof Oc)x(Cb,{buffer:a.toArray()},b);else{var c=new Oc;Wa({readable:a,writable:c},function(a){Cb===a.type?x(Cb,{buffer:c.toArray()},b):x(a,{},b)})}}})});