!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else if("undefined"!=typeof module&&module.exports)b(module.exports);else{var c={};b(c),a.gpf=c}}(this,function(a){"use strict";function b(){}function c(b,c){void 0===c&&(c="Assertion with no message",b=!1),b||(console.warn("ASSERTION FAILED: "+c),a.Error.assertionFailed({message:c}))}function d(a){for(var b in a)a.hasOwnProperty(b)&&c(a[b],b)}function e(a,b){var c;return 0===a.length?sa(b):(c=[].concat(a),c.push(b),sa.apply(null,c))}function f(a,b){return void 0===b&&(b=a,a=[]),qa("string"==typeof b&&b.length,"Source expected (or use _gpfEmptyFunc)"),e(a,b)}function g(a,b,c){var d,e=a.length;for(d=0;d<e;++d)b.call(c,a[d],d,a)}function h(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function i(a){return a.charAt(0).toUpperCase()+a.substr(1)}function j(a,b){var c=a;return h(b,function(a,b){c=c.split(b).join(a)}),c}function k(a,b){return qa(void 0!==ua[b],"Unknown language"),a=j(a,ua[b]),"javascript"===b&&(a='"'+a+'"'),a}function l(a,b){h(b,function(b,c){void 0===a[c]&&(a[c]=b)})}function m(a,b){b&&l(a.prototype,b)}function n(a,b){b&&l(a,b)}function o(a,b){var c=b.on;m(c,b.methods),n(c,b.statics)}function p(a,b){return void 0!==b?a.bind(b):a}function q(a,b,c){for(var d=a.length;c<d;)a.hasOwnProperty(c)&&b(a[c],c,a),++c}function r(a,b,c){for(var d=a.length;c<d;){if(a.hasOwnProperty(c)&&!0!==b(a[c],c,a))return!1;++c}return!0}function s(a,b){var c,d=b.length;for(c=0;c<d;++c)a.push(b.charAt(c))}function t(a){var b=[];return"string"==typeof a?s(b,a):g(a,function(a){b.push(a)},0),b}function u(a){var b=t(a),c=arguments[1];return"function"==typeof c&&(b=b.map(c,arguments[2])),b}function v(a){return new Array(a).join(" ").split(" ").map(function(a,b){return"p"+b})}function w(a){var b=["var C = this, l = arguments.length;","if (0 === l) { return new C();}"];return a.forEach(function(c,d){var e=d+1;b.push("if ("+e+" === l) { return new C("+a.slice(0,e).join(", ")+");}")}),b.join("\r\n")}function x(a){var b=v(a);return f(b,w(b))}function y(a,b){return b.length>va.length&&(va=x(b.length)),va.apply(a,b)}function z(a){return 10>a?"0"+a:a}function A(a){if(a[1]<12&&a[2]<32&&a[3]<24&&a[4]<60&&a[5]<60)return a}function B(a,b){b?a.push(parseInt(b,10)):a.push(0)}function C(a){var b,c=[],d=a.length;for(b=1;b<d;++b)B(c,a[b]);return c}function D(a){var b;if(a)return b=C(a),--b[1],A(b)}function E(a){if("string"==typeof a)return wa.lastIndex=0,D(wa.exec(a))}function F(){var a=arguments[0],b=E(a);return b?new xa(xa.UTC.apply(xa.UTC,b)):y(xa,arguments)}function G(){var a,b,c=["prototype","UTC","parse","now"],d=c.length;for(a=0;a<d;++a)b=c[a],F[b]=xa[b]}function H(){G();var a=!1;try{var b=new Date("2003-01-22T22:45:34.075Z"),c=new Date("2003-01-22");a=2003===b.getUTCFullYear()&&0===b.getUTCMonth()&&22===b.getUTCDate()&&22===b.getUTCHours()&&45===b.getUTCMinutes()&&34===b.getUTCSeconds()&&75===b.getUTCMilliseconds()&&2003===c.getUTCFullYear()&&0===c.getUTCMonth()&&22===c.getUTCDate()}catch(a){}a||(na.Date=F)}function I(a){return["var me = this;","return function ("+v(a).join(", ")+") {","   var args = _gpfArrayPrototypeSlice.call(arguments, 0);","    return me.apply(thisArg, prependArgs.concat(args));","};"].join("\n")}function J(){var a=Function.prototype.toString.call(this),b=a.indexOf("function"),c=a.indexOf("(",b);return a.substr(b+9,c-b-9).replace(za,"").trim()}function K(a,b,c){function d(a){return function(b){e&&(e=!1,a(b))}}var e=!0;try{a(d(b),d(c))}catch(a){e&&(e=!1,c(a))}}function L(){var a=this;a._handlers.forEach(function(b){b.process(a)}),a._handlers=[]}function M(a){var b=this;b._state=!1,b._value=a,L.call(b)}function N(a){var b=this;try{if(qa(a!==b,"A promise cannot be resolved with itself."),a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void K(c.bind(a),N.bind(b),M.bind(b))}b._state=!0,b._value=a,L.call(b)}catch(a){M.call(b,a)}}function O(){}function P(a,b){return a.dt-b.dt}function Q(a,b){qa("number"==typeof b,"Timeout is required");var c={id:++Ca,dt:new Date((new Date).getTime()+b),cb:a};return Ba.push(c),Ba.sort(P),Ca}function R(a){var b;Ba.every(function(c,d){return c.id!==a||(b=d,!1)})||Ba.splice(b,1)}function S(){for(var a,b,c=Ba;c.length;)a=c.shift(),b=new Date,a.dt>b&&Da(a.dt-b),a.cb()}function T(a){return function(b,c){"function"!=typeof b&&a(W(b),c)}}function U(a){var b,c;return b=a instanceof Array,c=[],b?(g(a,T(function(a){c.push(a)})),"["+c.join(",")+"]"):(h(a,T(function(a,b){c.push(k(b,"javascript")+":"+a)})),"{"+c.join(",")+"}")}function V(a){return a.toString()}function W(a){return Ga[typeof a](a)}function X(a){return f("return "+a)()}function Y(a,b){if(void 0!==a)return a[b]}function Z(a,b){var c=a[b];return void 0===c&&(c=a[b]={}),c}function $(b,c){var d;return"gpf"===b[0]?(d=a,b=b.slice(1)):d=na,b.reduce(c,d)}function _(a,b){var c;return c=b?Z:Y,$(a,c)}function aa(a,b){this[b]=a}function ba(a,b){return oa(b),[].slice.call(arguments,1).forEach(function(b){h(b,aa,a)}),a}function ca(a,b,c){function d(a){this._buildMessage(a)}return d.prototype=new Ha,ba(d.prototype,{code:a,name:b,message:c}),d.prototype.constructor=d,Ha[i(b)]=d,function(a){throw new d(a)}}function da(a,b,c){var d=ca(a,b,c);return d.CODE=a,d.NAME=b,d.MESSAGE=c,d}function ea(b,c){oa(b),h(c,function(b,c){var d=++Ia;a.Error["CODE_"+c.toUpperCase()]=d,a.Error[c]=da(d,c,b)})}var fa,ga,ha,ia,ja="0.1.5",ka={BROWSER:"browser",NODEJS:"nodejs",PHANTOMJS:"phantomjs",RHINO:"rhino",UNKNOWN:"unknown",WSCRIPT:"wscript"},la=ka.UNKNOWN,ma=!1,na=this,oa=b,pa=b;"undefined"!=typeof WScript?(la=ka.WSCRIPT,ma=!0):"undefined"!=typeof print&&"undefined"!=typeof java?(la=ka.RHINO,ma=!1):"undefined"!=typeof phantom&&phantom.version?(la=ka.PHANTOMJS,ma="\\"===require("fs").separator,na=window):"undefined"!=typeof module&&module.exports?(la=ka.NODEJS,ia=require("path"),ma="\\"===ia.sep,na=global):"undefined"!=typeof window&&(la=ka.BROWSER,na=window),a.hosts={browser:ka.BROWSER,nodejs:ka.NODEJS,phantomjs:ka.PHANTOMJS,rhino:ka.RHINO,unknown:ka.UNKNOWN,wscript:ka.WSCRIPT},a.host=function(){return la},a.version=function(){return ja},ka.BROWSER===la&&(pa=function(a){window.location="https://arnaudbuchholz.github.io/gpf/exit.html?"+(a||0)},fa=window,ga=document,ha=ga.getElementsByTagName("head")[0]||ga.documentElement),ka.NODEJS===la&&(pa=function(a){process.exit(a)}),ka.PHANTOMJS===la&&(pa=function(a){phantom.exit(a)},fa=window,ga=document,ha=ga.getElementsByTagName("head")[0]||ga.documentElement),ka.RHINO===la&&(na.console={log:function(a){print("    "+a)},info:function(a){print("[?] "+a)},warn:function(a){print("/!\\ "+a)},error:function(a){print("(X) "+a)}},pa=function(a){java.lang.System.exit(a)}),ka.WSCRIPT===la&&(na.console={log:function(a){WScript.Echo("    "+a)},info:function(a){WScript.Echo("[?] "+a)},warn:function(a){WScript.Echo("/!\\ "+a)},error:function(a){WScript.Echo("(X) "+a)}},pa=function(a){WScript.Quit(a)});var qa,ra;a.assert=c,a.asserts=d,qa=b,ra=b;var sa=Function;"break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield".split(",");ka.NODEJS===la&&(a.node={}),a.web={};var ta=function(a){return Array.isArray(a)};ka.BROWSER===la&&(fa.HTMLCollection||fa.NodeList)&&(ta=function(a){return Array.isArray(a)||a instanceof fa.HTMLCollection||a instanceof fa.NodeList}),a.isArrayLike=ta,a.forEach=function(a,b,c){return ta(a)?void g(a,b,c):void h(a,b,c)};var ua={};ua.javascript={"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r","\t":"\\t"},ua.xml={"&":"&amp;","<":"&lt;",">":"&gt;"},o("Array",{on:Array,methods:{every:function(a){return r(this,p(a,arguments[1]),0)},filter:function(a){var b=[];return a=p(a,arguments[1]),q(this,function(c,d,e){a(c,d,e)&&b.push(c)},0),b},forEach:function(a){q(this,p(a,arguments[1]),0)},indexOf:function(a){var b=-1;return r(this,function(c,d){return c!==a||(b=d,!1)},arguments[1]||0),b},map:function(a){var b=new Array(this.length);return a=p(a,arguments[1]),q(this,function(c,d,e){b[d]=a(c,d,e)},0),b},reduce:function(a){var b,c=arguments[1],d=this.length,e=0;for(b=void 0===c?this[e++]:c;e<d;++e)b=a(b,this[e],e,this);return b}},statics:{from:u,isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}}});var va=x(10);o("Date",{on:Date,methods:{toISOString:function(){return[this.getUTCFullYear(),"-",z(this.getUTCMonth()+1),"-",z(this.getUTCDate()),"T",z(this.getUTCHours()),":",z(this.getUTCMinutes()),":",z(this.getUTCSeconds()),".",(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5),"Z"].join("")}}});var wa=new RegExp(["^([0-9][0-9][0-9][0-9])","\\-","([0-9][0-9])","\\-","([0-9][0-9])","(?:T","([0-9][0-9])","\\:","([0-9][0-9])","\\:","([0-9][0-9])","(?:\\.","([0-9][0-9][0-9])","Z)?)?$"].join("")),xa=na.Date;H();var ya=Array.prototype.slice;o("Function",{on:Function,methods:{bind:function(a){var b=this,c=ya.call(arguments,1),d=I(Math.max(this.length-c.length,0));return f(["thisArg","prependArgs","_gpfArrayPrototypeSlice"],d).call(b,a,c,ya)}}});var za=new RegExp("//.*$|/\\*(?:[^\\*]*|\\*[^/]*)\\*/","gm");!function(){function a(){}return"functionName"!==a.name}()?Function.prototype.compatibleName=function(){return this.name}:Function.prototype.compatibleName=J,o("Object",{on:Object,statics:{create:function(){function a(){}return function(b){a.prototype=b;var c=new a;return a.prototype=null,c.__proto__||(c.__proto__=b),c}}(),getPrototypeOf:function(a){return a.__proto__?a.__proto__:a.constructor.prototype},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},values:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}}}),o("String",{on:String,methods:{trim:function(){var a=new RegExp("^[\\s\ufeff ]+|[\\s\ufeff ]+$","g");return function(){return this.replace(a,"")}}()}});var Aa=a.Promise=function(a){K(a,N.bind(this),M.bind(this))};O.prototype={onFulfilled:null,onRejected:null,resolve:null,reject:null,process:function(a){var b=this;return null===a._state?(a.hasOwnProperty("_handlers")||(a._handlers=[]),void a._handlers.push(b)):void setTimeout(function(){var c,d;if(c=a._state?b.onFulfilled:b.onRejected,null===c)return void(a._state?b.resolve(a._value):b.reject(a._value));try{d=c(a._value)}catch(a){return void b.reject(a)}b.resolve(d)},0)}},Aa.prototype={_state:null,_value:null,_handlers:[],then:function(a,b){var c=this;return new Aa(function(d,e){var f=new O;void 0!==a&&(f.onFulfilled=a),void 0!==b&&(f.onRejected=b),f.resolve=d,f.reject=e,f.process(c)})},catch:function(a){return this.then(null,a)}},Aa.resolve=function(a){return new Aa(function(b){b(a)})},Aa.reject=function(a){return new Aa(function(b,c){oa(b),c(a)})},Aa.all=function(a){return 0===a.length?Aa.resolve([]):new Aa(function(b,c){function d(f,g){try{if(f&&f instanceof Aa)return void f.then(function(a){d(a,g)},c);a[g]=f,0===--e&&b(a)}catch(a){c(a)}}var e=a.length;a.forEach(d)})},Aa.race=function(a){return new Aa(function(b,c){a.forEach(function(a){a.then(b,c)})})},void 0===na.Promise&&(na.Promise=Aa);var Ba=[],Ca=0,Da=b;a.handleTimeout=b,"undefined"==typeof setTimeout&&(ka.WSCRIPT===la?Da=function(a){WScript.Sleep(a)}:ka.RHINO===la?Da=java.lang.Thread.sleep:console.warn("No implementation for setTimeout"),na.setTimeout=Q,na.clearTimeout=R,a.handleTimeout=S);var Ea,Fa,Ga={undefined:b,function:b,number:V,boolean:V,string:function(a){return k(a,"javascript")},object:function(a){return null===a?"null":U(a)}};"undefined"==typeof JSON?(Ea=W,Fa=X,na.JSON={stringify:Ea,parse:Fa}):(Ea=JSON.stringify,Fa=JSON.parse),a.context=function(a){return void 0===a?na:_(a.split("."))},a.extend=ba,ua.html=ba(ua.xml,{"à":"&agrave;","á":"&aacute;","è":"&egrave;","é":"&eacute;","ê":"&ecirc;"});var Ha=a.Error=function(){};Ha.prototype=new Error,ba(Ha.prototype,{constructor:Ha,code:0,name:"Error",message:"",_buildMessage:function(a){var b;a&&(b={},h(a,function(a,c){b["{"+c+"}"]=a.toString()}),this.message=j(this.message,b))}});var Ia=0;ea("error",{notImplemented:"Not implemented",abstractMethod:"Abstract method",assertionFailed:"Assertion failed: {message}",invalidParameter:"Invalid parameter"})});